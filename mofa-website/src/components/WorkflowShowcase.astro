---
// å·¥ä½œæµé…ç½®æ•°æ®
const workflows = [
  {
    id: 'hello-world',
    title: {
      en: 'Hello World',
      zh: 'Hello World'
    },
    description: {
      en: 'Simplest AI agent workflow for beginners',
      zh: 'æœ€ç®€å•çš„ AI ä»£ç†å·¥ä½œæµ'
    },
    category: 'Basic',
    color: 'mofa-color-1',
    scale: 0.4,
    mermaidGraph: `
    flowchart TB
      terminal-input[ğŸ–¥ï¸ Terminal Input<br/>User Query]
      agent[ğŸ¤– Agent<br/>Process & Respond]
      
      terminal-input --> agent
      agent --> terminal-input
      
      classDef inputNode fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
      classDef agentNode fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
      
      class terminal-input inputNode
      class agent agentNode`
  },
  {
    id: 'arxiv-research',
    title: {
      en: 'ArXiv Research',
      zh: 'ArXiv ç ”ç©¶'
    },
    description: {
      en: 'Automated research workflow with paper analysis and report generation',
      zh: 'è‡ªåŠ¨åŒ–ç ”ç©¶å·¥ä½œæµï¼ŒåŒ…å«è®ºæ–‡åˆ†æå’ŒæŠ¥å‘Šç”Ÿæˆ'
    },
    category: 'Research',
    color: 'mofa-color-2',
    scale: 1.0,
    mermaidGraph: `
    flowchart TB
      terminal[ğŸ–¥ï¸ Terminal Input<br/>Research Task]
      extractor[ğŸ” Keyword Extractor<br/>Extract Keywords]
      downloader[ğŸ“¥ Paper Downloader<br/>Download Papers]
      analyzer[ğŸ”¬ Paper Analyzer<br/>Analyze Content]
      writer[âœï¸ Report Writer<br/>Generate Report]
      feedback[ğŸ’¬ Feedback Agent<br/>Review & Suggest]
      refinement[ğŸ”§ Refinement Agent<br/>Improve Report]
      
      terminal --> extractor
      extractor --> downloader
      downloader --> analyzer
      terminal --> analyzer
      analyzer --> writer
      terminal --> writer
      writer --> feedback
      terminal --> feedback
      feedback --> refinement
      terminal --> refinement
      
      classDef inputNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
      classDef processNode fill:#fff3e0,stroke:#f57c00,stroke-width:2px
      classDef analysisNode fill:#e3f2fd,stroke:#1976d2,stroke-width:2px
      classDef outputNode fill:#fce4ec,stroke:#c2185b,stroke-width:2px
      
      class terminal inputNode
      class extractor,downloader processNode
      class analyzer,feedback analysisNode
      class writer,refinement outputNode`
  },
  {
    id: 'rag-system',
    title: {
      en: 'RAG System',
      zh: 'RAG ç³»ç»Ÿ'
    },
    description: {
      en: 'Retrieval-Augmented Generation for intelligent Q&A',
      zh: 'æ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿï¼Œç”¨äºæ™ºèƒ½é—®ç­”'
    },
    category: 'AI',
    color: 'mofa-color-3',
    scale: 0.7,
    mermaidGraph: `
    flowchart TB
      terminal[ğŸ–¥ï¸ Terminal Input<br/>User Question]
      retrieval[ğŸ” RAG Retrieval<br/>Search Knowledge]
      reasoner[ğŸ§  Reasoner Agent<br/>Generate Answer]
      
      terminal --> retrieval
      retrieval --> reasoner
      terminal --> reasoner
      retrieval --> terminal
      reasoner --> terminal
      
      classDef inputNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
      classDef retrievalNode fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
      classDef reasoningNode fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
      
      class terminal inputNode
      class retrieval retrievalNode
      class reasoner reasoningNode`
  },
  {
    id: 'gosim-pedia',
    title: {
      en: 'GoSim Pedia',
      zh: 'GoSim ç™¾ç§‘'
    },
    description: {
      en: 'Multi-agent system with web scraping and search capabilities',
      zh: 'å…·æœ‰ç½‘é¡µæŠ“å–å’Œæœç´¢èƒ½åŠ›çš„å¤šä»£ç†ç³»ç»Ÿ'
    },
    category: 'Web',
    color: 'mofa-color-4',
    scale: 0.9,
    mermaidGraph: `
    flowchart TB
      openai[ğŸ¤– OpenAI Server<br/>Chat Interface]
      gosim[ğŸ® GoSim Pedia Agent<br/>Main Controller]
      firecrawl[ğŸ•·ï¸ Firecrawl Agent<br/>Web Scraping]
      rag[ğŸ§  GoSim RAG Agent<br/>Knowledge Retrieval]
      serper[ğŸ” Serper Search Agent<br/>Web Search]
      
      openai <--> gosim
      gosim --> firecrawl
      firecrawl --> gosim
      gosim --> rag
      rag --> gosim
      gosim --> serper
      serper --> gosim
      
      classDef serverNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
      classDef mainNode fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
      classDef toolNode fill:#fff3e0,stroke:#f57c00,stroke-width:2px
      
      class openai serverNode
      class gosim mainNode
      class firecrawl,rag,serper toolNode`
  },
  {
    id: 'mem0-dataflow',
    title: {
      en: 'Mem0 Memory System',
      zh: 'Mem0 è®°å¿†ç³»ç»Ÿ'
    },
    description: {
      en: 'Memory-enhanced AI workflow with retrieval and recording',
      zh: 'å…·æœ‰è®°å¿†æ£€ç´¢å’Œè®°å½•èƒ½åŠ›çš„å¢å¼ºAIå·¥ä½œæµ'
    },
    category: 'Memory',
    color: 'mofa-color-1',
    scale: 0.75,
    mermaidGraph: `
    flowchart TB
      terminal[ğŸ–¥ï¸ Terminal Input<br/>User Task]
      retrieval[ğŸ§  Memory Retrieval<br/>Fetch Context]
      reasoner[ğŸ¤” Reasoner<br/>Process & Think]
      record[ğŸ’¾ Memory Record<br/>Store Results]
      
      terminal --> retrieval
      retrieval --> reasoner
      terminal --> reasoner
      reasoner --> record
      terminal --> record
      retrieval --> terminal
      reasoner --> terminal
      record --> terminal
      
      classDef inputNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
      classDef memoryNode fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
      classDef processNode fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
      classDef storageNode fill:#fff3e0,stroke:#f57c00,stroke-width:2px
      
      class terminal inputNode
      class retrieval memoryNode
      class reasoner processNode
      class record storageNode`
  },
  {
    id: 'intelligent-agent-creation',
    title: {
      en: 'Agent Creation System',
      zh: 'ä»£ç†åˆ›å»ºç³»ç»Ÿ'
    },
    description: {
      en: 'Intelligent system for generating AI agents automatically',
      zh: 'è‡ªåŠ¨ç”ŸæˆAIä»£ç†çš„æ™ºèƒ½ç³»ç»Ÿ'
    },
    category: 'Meta-AI',
    color: 'mofa-color-2',
    scale: 0.75,
    mermaidGraph: `
    flowchart TB
      openai[ğŸ¤– OpenAI Server<br/>API Interface]
      config[âš™ï¸ Config Generator<br/>Generate Settings]
      code[ğŸ‘¨â€ğŸ’» Code Generator<br/>Write Agent Code]
      dependency[ğŸ“¦ Dependency Generator<br/>Manage Dependencies]
      
      openai --> config
      openai --> code
      config --> code
      openai --> dependency
      code --> dependency
      config --> dependency
      dependency --> openai
      
      classDef serverNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
      classDef generatorNode fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
      classDef codeNode fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
      classDef depNode fill:#fff3e0,stroke:#f57c00,stroke-width:2px
      
      class openai serverNode
      class config generatorNode
      class code codeNode
      class dependency depNode`
  },
  {
    id: 'xiaowang-workflow',
    title: {
      en: 'XiaoWang Multi-Agent',
      zh: 'å¤šä»£ç†ç³»ç»Ÿ'
    },
    description: {
      en: 'Complex multi-agent workflow with reflection and generation',
      zh: 'å…·æœ‰åæ€å’Œç”Ÿæˆèƒ½åŠ›çš„å¤æ‚å¤šä»£ç†å·¥ä½œæµ'
    },
    category: 'Complex',
    color: 'mofa-color-3',
    scale: 0.75,
    mermaidGraph: `
    flowchart TB
      terminal[ğŸ–¥ï¸ XiaoWang Terminal<br/>Task Input]
      dlc[ğŸ¯ Agent DLC<br/>Task Processing]
      generate[ğŸ”§ Agent Generate<br/>Content Creation]
      reflection[ğŸ¤” Agent Reflection<br/>Self-Improvement]
      
      terminal --> dlc
      dlc --> generate
      generate --> reflection
      reflection --> generate
      generate --> dlc
      dlc --> terminal
      generate --> terminal
      reflection --> terminal
      
      classDef inputNode fill:#e8f5e8,stroke:#2e7d32,stroke-width:2px
      classDef taskNode fill:#e1f5fe,stroke:#0277bd,stroke-width:2px
      classDef generateNode fill:#f3e5f5,stroke:#7b1fa2,stroke-width:2px
      classDef reflectNode fill:#fff3e0,stroke:#f57c00,stroke-width:2px
      
      class terminal inputNode
      class dlc taskNode
      class generate generateNode
      class reflection reflectNode`
  }
];
---

<section class="py-20" style="background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);">
  <div class="container mx-auto px-4">
    <div class="text-center mb-16">
      <h2 class="text-4xl font-bold mb-4" 
          data-en="Real Examples: <span class='gradient-text'>AI Workflows</span> in Action"
          data-zh="å®é™…æ¡ˆä¾‹ï¼š<span class='gradient-text'>AI å·¥ä½œæµ</span>å®æˆ˜">
        Real Examples: <span class="gradient-text">AI Workflows</span> in Action
      </h2>
      <p class="text-xl text-gray-600 max-w-3xl mx-auto" 
         data-en="Explore different types of AI workflows - from simple hello world to complex research automation"
         data-zh="æ¢ç´¢ä¸åŒç±»å‹çš„ AI å·¥ä½œæµ - ä»ç®€å•çš„é—®å€™åˆ°å¤æ‚çš„ç ”ç©¶è‡ªåŠ¨åŒ–">
        Explore different types of AI workflows - from simple hello world to complex research automation
      </p>
    </div>

    <!-- Workflow Horizontal Scroll Container -->
    <div class="workflow-container">
      <div class="workflow-scroll">
        {workflows.map((workflow) => (
          <div class="workflow-card bg-white rounded-lg shadow-lg border-4 border-gray-300 hover:border-4 hover:border-indigo-500 transition-all duration-300 overflow-hidden">
            <!-- Header -->
            <div class={`${workflow.color} p-6 text-white`}>
              <h3 class="text-2xl font-bold mb-2" 
                  data-en={workflow.title.en}
                  data-zh={workflow.title.zh}>
                {workflow.title.en}
              </h3>
              <p class="text-white text-opacity-90" 
                 data-en={workflow.description.en}
                 data-zh={workflow.description.zh}>
                {workflow.description.en}
              </p>
            </div>

            <!-- Mermaid Graph -->
            <div class="chart-container">
              <div class={`mermaid-container-${workflow.id} bg-gray-50 rounded-lg p-4 border-2 border-gray-200`} data-scale={workflow.scale}>
                <div class={`mermaid mermaid-${workflow.id}`}>
                  {workflow.mermaidGraph}
                </div>
              </div>
            </div>
          </div>
        ))}
      </div>
    </div>

    <!-- Scroll hint -->
    <div class="text-center mt-8">
      <p class="text-sm text-gray-500" 
         data-en="â† Scroll horizontally to explore more workflows â†’"
         data-zh="â† æ°´å¹³æ»šåŠ¨ä»¥æ¢ç´¢æ›´å¤šå·¥ä½œæµ â†’">
        â† Scroll horizontally to explore more workflows â†’
      </p>
    </div>
  </div>
</section>

<!-- Mermaid Script -->
<script>
  // Import and initialize Mermaid
  import('https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs').then((mermaid) => {
    mermaid.default.initialize({
      startOnLoad: true,
      theme: 'base',
      themeVariables: {
        primaryColor: '#6366F1',
        primaryTextColor: '#1F2937',
        primaryBorderColor: '#6366F1',
        lineColor: '#0EA5E9',
        sectionBkgColor: '#F8FAFC',
        altSectionBkgColor: '#FFFFFF',
        gridColor: '#E5E7EB',
        secondaryColor: '#F59E0B',
        tertiaryColor: '#F59E0B'
      },
      fontFamily: 'Inter, system-ui, -apple-system, sans-serif',
      fontSize: 24,
      flowchart: {
        htmlLabels: true,
        curve: 'basis',
        useMaxWidth: true,
        rankdir: 'TB',
        padding: 25
      },
      security: {
        level: 'loose'
      },
      // æ·»åŠ å…¨å±€ç¼©æ”¾è®¾ç½®
      maxTextSize: 90000,
      maxEdges: 500
    });

    // Render all mermaid diagrams
    setTimeout(() => {
      mermaid.default.run();
      
      // è‡ªåŠ¨è°ƒæ•´å›¾è¡¨å¤§å°ä»¥é€‚åº”å®¹å™¨
      setTimeout(() => {
        document.querySelectorAll('.mermaid').forEach(element => {
          const svg = element.querySelector('svg');
          const container = element.closest('[data-scale]');
          const scale = container ? parseFloat(container.getAttribute('data-scale')) : 1;
          
          if (svg) {
            // ç§»é™¤å›ºå®šçš„å®½é«˜ï¼Œä½¿ç”¨viewBoxè¿›è¡Œç¼©æ”¾
            svg.removeAttribute('height');
            svg.removeAttribute('width');
            svg.style.maxWidth = '100%';
            svg.style.maxHeight = '100%';
            
            // ç¡®ä¿viewBoxå­˜åœ¨å¹¶è®¾ç½®preserveAspectRatio
            if (!svg.getAttribute('viewBox')) {
              const bbox = svg.getBBox();
              svg.setAttribute('viewBox', `0 0 ${bbox.width + 20} ${bbox.height + 20}`);
            }
            svg.setAttribute('preserveAspectRatio', 'xMidYMid meet');
            
            // åº”ç”¨ä¸ªåˆ«ç¼©æ”¾
            svg.style.width = `${scale * 100}%`;
            svg.style.height = `${scale * 100}%`;
            svg.style.transform = 'none';
          }
        });
      }, 500);
    }, 100);
  }).catch(error => {
    console.error('Failed to load Mermaid:', error);
  });
</script>

<style>
/* MoFA å“ç‰Œé¢œè‰²å®šä¹‰ */
.mofa-color-1 {
  background: linear-gradient(135deg, #FC6A59, #E55A4A);
}

.mofa-color-2 {
  background: linear-gradient(135deg, #FFC53D, #E6B034);
}

.mofa-color-3 {
  background: linear-gradient(135deg, #FD543F, #E64936);
}

.mofa-color-4 {
  background: linear-gradient(135deg, #6CCBCD, #5BB7B9);
}

.workflow-container {
  position: relative;
  max-width: 100vw;
  overflow: hidden;
  margin: 0 auto;
}

.workflow-scroll {
  display: flex;
  gap: 2rem;
  overflow-x: auto;
  padding: 1rem 0;
  scroll-behavior: smooth;
  scrollbar-width: thin;
  scrollbar-color: #cbd5e1 #f1f5f9;
}

.workflow-scroll::-webkit-scrollbar {
  height: 8px;
}

.workflow-scroll::-webkit-scrollbar-track {
  background: #f1f5f9;
  border-radius: 4px;
}

.workflow-scroll::-webkit-scrollbar-thumb {
  background: #cbd5e1;
  border-radius: 4px;
}

.workflow-scroll::-webkit-scrollbar-thumb:hover {
  background: #94a3b8;
}

.workflow-card {
  flex: 0 0 auto;
  width: 650px;
  height: 800px;
  transform: translateY(0);
  transition: all 0.3s ease;
  display: flex;
  flex-direction: column;
}

.workflow-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
}

.chart-container {
  flex: 1;
  padding: 1.5rem;
  display: flex;
  flex-direction: column;
  min-height: 0;
  position: relative;
  overflow: hidden;
}

.chart-container > div {
  flex: 1;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 0;
  position: relative;
  overflow: hidden;
}

.mermaid {
  width: 100%;
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  min-height: 400px;
  font-size: 24px;
}

.mermaid svg {
  max-width: 100% !important;
  max-height: 100% !important;
  width: auto !important;
  height: auto !important;
}

/* Custom mermaid styling */
.mermaid .node rect,
.mermaid .node circle,
.mermaid .node ellipse,
.mermaid .node polygon {
  stroke-width: 2px;
}

.mermaid .node text {
  font-size: 22px !important;
  font-weight: 600 !important;
  font-family: 'Inter', system-ui, sans-serif !important;
}

.mermaid .edgePath path {
  stroke-width: 2px;
}

.mermaid .edgeLabel {
  background-color: white;
  border-radius: 6px;
  padding: 5px 10px;
  font-size: 18px;
  font-weight: 500;
  font-family: 'Inter', system-ui, sans-serif;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* ç¦ç”¨Mermaidå®¹å™¨ä¸­çš„mondrian-blockåŠ¨ç”»æ•ˆæœ */
.mermaid-container-hello-world::after,
.mermaid-container-arxiv-research::after,
.mermaid-container-rag-system::after,
.mermaid-container-gosim-pedia::after,
.mermaid-container-mem0-dataflow::after,
.mermaid-container-intelligent-agent-creation::after,
.mermaid-container-xiaowang-workflow::after,
.chart-container::after,
.chart-container > div::after {
  display: none !important;
}

/* æ›´å…¨é¢åœ°ç¦ç”¨å·¥ä½œæµå¡ç‰‡ä¸­çš„æ‰€æœ‰ä¼ªå…ƒç´  */
.workflow-card *::after,
.workflow-card *::before,
.workflow-card::after,
.workflow-card::before {
  animation: none !important;
  display: none !important;
}

/* ç¡®ä¿Mermaidå®¹å™¨ä¸å—å…¨å±€mondrianæ ·å¼å½±å“ */
.mermaid,
.mermaid *,
.chart-container,
.chart-container * {
  position: relative;
}

.mermaid::after,
.mermaid::before,
.mermaid *::after,
.mermaid *::before {
  display: none !important;
}

/* éšè—å¯èƒ½çš„æ©™è‰²æ ‡è®°å…ƒç´  */
.workflow-card [style*="orange"],
.workflow-card [style*="#FFA500"],
.workflow-card [style*="#FF6600"],
.workflow-card [style*="#F59E0B"],
.workflow-card [style*="rgb(245, 158, 11)"],
.workflow-card .bg-orange-500,
.workflow-card .text-orange-500 {
  display: none !important;
}

/* éšè—æ‰€æœ‰positionedçš„å°å…ƒç´ ï¼ˆå¯èƒ½æ˜¯æ©™è‰²ç‚¹ï¼‰ */
.workflow-card *[style*="position: absolute"][style*="width"][style*="height"] {
  display: none !important;
}

/* å“åº”å¼è°ƒæ•´ */
@media (max-width: 768px) {
  .workflow-card {
    width: 480px;
    height: 700px;
  }
  
  .workflow-scroll {
    gap: 1rem;
  }
  
  .mermaid {
    font-size: 22px;
  }
  
  .mermaid .node text {
    font-size: 20px !important;
  }
  
  .mermaid .edgeLabel {
    font-size: 16px;
    padding: 4px 8px;
  }

  .chart-container {
    padding: 1rem;
  }
}

@media (max-width: 480px) {
  .workflow-card {
    width: 380px;
    height: 650px;
  }

  .mermaid {
    font-size: 20px;
  }
  
  .mermaid .node text {
    font-size: 18px !important;
  }
  
  .mermaid .edgeLabel {
    font-size: 14px;
    padding: 3px 6px;
  }

  .chart-container {
    padding: 0.75rem;
  }
}
</style> 