/*!--------------------------------------------------------
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *--------------------------------------------------------*/var sg=function(e,t){return sg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,r){i.__proto__=r}||function(i,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(i[s]=r[s])},sg(e,t)};export function __extends(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");sg(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}export var __assign=function(){return __assign=Object.assign||function(t){for(var i,r=1,s=arguments.length;r<s;r++){i=arguments[r];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},__assign.apply(this,arguments)};export function __rest(e,t){var i={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(i[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(i[r[s]]=e[r[s]]);return i}export function __decorate(e,t,i,r){var s=arguments.length,n=s<3?t:r===null?r=Object.getOwnPropertyDescriptor(t,i):r,o;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")n=Reflect.decorate(e,t,i,r);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(n=(s<3?o(n):s>3?o(t,i,n):o(t,i))||n);return s>3&&n&&Object.defineProperty(t,i,n),n}export function __param(e,t){return function(i,r){t(i,r,e)}}export function __esDecorate(e,t,i,r,s,n){function o(E){if(E!==void 0&&typeof E!="function")throw new TypeError("Function expected");return E}for(var a=r.kind,c=a==="getter"?"get":a==="setter"?"set":"value",l=!t&&e?r.static?e:e.prototype:null,u=t||(l?Object.getOwnPropertyDescriptor(l,r.name):{}),h,f=!1,p=i.length-1;p>=0;p--){var m={};for(var w in r)m[w]=w==="access"?{}:r[w];for(var w in r.access)m.access[w]=r.access[w];m.addInitializer=function(E){if(f)throw new TypeError("Cannot add initializers after decoration has completed");n.push(o(E||null))};var x=(0,i[p])(a==="accessor"?{get:u.get,set:u.set}:u[c],m);if(a==="accessor"){if(x===void 0)continue;if(x===null||typeof x!="object")throw new TypeError("Object expected");(h=o(x.get))&&(u.get=h),(h=o(x.set))&&(u.set=h),(h=o(x.init))&&s.unshift(h)}else(h=o(x))&&(a==="field"?s.unshift(h):u[c]=h)}l&&Object.defineProperty(l,r.name,u),f=!0}export function __runInitializers(e,t,i){for(var r=arguments.length>2,s=0;s<t.length;s++)i=r?t[s].call(e,i):t[s].call(e);return r?i:void 0}export function __propKey(e){return typeof e=="symbol"?e:"".concat(e)}export function __setFunctionName(e,t,i){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:i?"".concat(i," ",t):t})}export function __metadata(e,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(e,t)}export function __awaiter(e,t,i,r){function s(n){return n instanceof i?n:new i(function(o){o(n)})}return new(i||(i=Promise))(function(n,o){function a(u){try{l(r.next(u))}catch(h){o(h)}}function c(u){try{l(r.throw(u))}catch(h){o(h)}}function l(u){u.done?n(u.value):s(u.value).then(a,c)}l((r=r.apply(e,t||[])).next())})}export function __generator(e,t){var i={label:0,sent:function(){if(n[0]&1)throw n[1];return n[1]},trys:[],ops:[]},r,s,n,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(u){return c([l,u])}}function c(l){if(r)throw new TypeError("Generator is already executing.");for(;o&&(o=0,l[0]&&(i=0)),i;)try{if(r=1,s&&(n=l[0]&2?s.return:l[0]?s.throw||((n=s.return)&&n.call(s),0):s.next)&&!(n=n.call(s,l[1])).done)return n;switch(s=0,n&&(l=[l[0]&2,n.value]),l[0]){case 0:case 1:n=l;break;case 4:return i.label++,{value:l[1],done:!1};case 5:i.label++,s=l[1],l=[0];continue;case 7:l=i.ops.pop(),i.trys.pop();continue;default:if(n=i.trys,!(n=n.length>0&&n[n.length-1])&&(l[0]===6||l[0]===2)){i=0;continue}if(l[0]===3&&(!n||l[1]>n[0]&&l[1]<n[3])){i.label=l[1];break}if(l[0]===6&&i.label<n[1]){i.label=n[1],n=l;break}if(n&&i.label<n[2]){i.label=n[2],i.ops.push(l);break}n[2]&&i.ops.pop(),i.trys.pop();continue}l=t.call(e,i)}catch(u){l=[6,u],s=0}finally{r=n=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}}export var __createBinding=Object.create?function(e,t,i,r){r===void 0&&(r=i);var s=Object.getOwnPropertyDescriptor(t,i);(!s||("get"in s?!t.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,r,s)}:function(e,t,i,r){r===void 0&&(r=i),e[r]=t[i]};export function __exportStar(e,t){for(var i in e)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&__createBinding(t,e,i)}export function __values(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],r=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}export function __read(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var r=i.call(e),s,n=[],o;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)n.push(s.value)}catch(a){o={error:a}}finally{try{s&&!s.done&&(i=r.return)&&i.call(r)}finally{if(o)throw o.error}}return n}export function __spread(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(__read(arguments[t]));return e}export function __spreadArrays(){for(var e=0,t=0,i=arguments.length;t<i;t++)e+=arguments[t].length;for(var r=Array(e),s=0,t=0;t<i;t++)for(var n=arguments[t],o=0,a=n.length;o<a;o++,s++)r[s]=n[o];return r}export function __spreadArray(e,t,i){if(i||arguments.length===2)for(var r=0,s=t.length,n;r<s;r++)(n||!(r in t))&&(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))}export function __await(e){return this instanceof __await?(this.v=e,this):new __await(e)}export function __asyncGenerator(e,t,i){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=i.apply(e,t||[]),s,n=[];return s={},a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(p){return function(m){return Promise.resolve(m).then(p,h)}}function a(p,m){r[p]&&(s[p]=function(w){return new Promise(function(x,E){n.push([p,w,x,E])>1||c(p,w)})},m&&(s[p]=m(s[p])))}function c(p,m){try{l(r[p](m))}catch(w){f(n[0][3],w)}}function l(p){p.value instanceof __await?Promise.resolve(p.value.v).then(u,h):f(n[0][2],p)}function u(p){c("next",p)}function h(p){c("throw",p)}function f(p,m){p(m),n.shift(),n.length&&c(n[0][0],n[0][1])}}export function __asyncDelegator(e){var t,i;return t={},r("next"),r("throw",function(s){throw s}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(s,n){t[s]=e[s]?function(o){return(i=!i)?{value:__await(e[s](o)),done:!1}:n?n(o):o}:n}}export function __asyncValues(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],i;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),i={},r("next"),r("throw"),r("return"),i[Symbol.asyncIterator]=function(){return this},i);function r(n){i[n]=e[n]&&function(o){return new Promise(function(a,c){o=e[n](o),s(a,c,o.done,o.value)})}}function s(n,o,a,c){Promise.resolve(c).then(function(l){n({value:l,done:a})},o)}}export function __makeTemplateObject(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var hI=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t};export function __importStar(e){if(e&&e.__esModule)return e;var t={};if(e!=null)for(var i in e)i!=="default"&&Object.prototype.hasOwnProperty.call(e,i)&&__createBinding(t,e,i);return hI(t,e),t}export function __importDefault(e){return e&&e.__esModule?e:{default:e}}export function __classPrivateFieldGet(e,t,i,r){if(i==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return i==="m"?r:i==="a"?r.call(e):r?r.value:t.get(e)}export function __classPrivateFieldSet(e,t,i,r,s){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!s)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?s.call(e,i):s?s.value=i:t.set(e,i),i}export function __classPrivateFieldIn(e,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof e=="function"?t===e:e.has(t)}export function __addDisposableResource(e,t,i){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var r,s;if(i){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");r=t[Symbol.asyncDispose]}if(r===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");r=t[Symbol.dispose],i&&(s=r)}if(typeof r!="function")throw new TypeError("Object not disposable.");s&&(r=function(){try{s.call(this)}catch(n){return Promise.reject(n)}}),e.stack.push({value:t,dispose:r,async:i})}else i&&e.stack.push({async:!0});return t}var dI=typeof SuppressedError=="function"?SuppressedError:function(e,t,i){var r=new Error(i);return r.name="SuppressedError",r.error=e,r.suppressed=t,r};export function __disposeResources(e){function t(r){e.error=e.hasError?new dI(r,e.error,"An error was suppressed during disposal."):r,e.hasError=!0}function i(){for(;e.stack.length;){var r=e.stack.pop();try{var s=r.dispose&&r.dispose.call(r.value);if(r.async)return Promise.resolve(s).then(i,function(n){return t(n),i()})}catch(n){t(n)}}if(e.hasError)throw e.error}return i()}export default{__extends,__assign,__rest,__decorate,__param,__metadata,__awaiter,__generator,__createBinding,__exportStar,__values,__read,__spread,__spreadArrays,__spreadArray,__await,__asyncGenerator,__asyncDelegator,__asyncValues,__makeTemplateObject,__importStar,__importDefault,__classPrivateFieldGet,__classPrivateFieldSet,__classPrivateFieldIn,__addDisposableResource,__disposeResources};var _t=class{constructor(e){this.d=e,this.a=!1}get hasValue(){return this.a}get value(){if(!this.a)try{this.b=this.d()}catch(e){this.c=e}finally{this.a=!0}if(this.c)throw this.c;return this.b}get rawValue(){return this.b}},fI=class{constructor(){this.b=[],this.a=function(e){setTimeout(()=>{throw e.stack?an.isErrorNoTelemetry(e)?new an(e.message+`

`+e.stack):new Error(e.message+`

`+e.stack):e},0)}}addListener(e){return this.b.push(e),()=>{this.d(e)}}c(e){this.b.forEach(t=>{t(e)})}d(e){this.b.splice(this.b.indexOf(e),1)}setUnexpectedErrorHandler(e){this.a=e}getUnexpectedErrorHandler(){return this.a}onUnexpectedError(e){this.a(e),this.c(e)}onUnexpectedExternalError(e){this.a(e)}},Qa=new fI;function ng(e){Qa.setUnexpectedErrorHandler(e)}function Au(e){Qa.onUnexpectedError(e)}function Gt(e){yr(e)||Qa.onUnexpectedError(e)}function og(e){yr(e)||Qa.onUnexpectedExternalError(e)}function mo(e){if(e instanceof Error){const{name:t,message:i,cause:r}=e,s=e.stacktrace||e.stack;return{$isError:!0,name:t,message:i,stack:s,noTelemetry:an.isErrorNoTelemetry(e),cause:r?mo(r):void 0,code:e.code}}return e}function Yb(e){let t;return e.noTelemetry?t=new an:(t=new Error,t.name=e.name),t.message=e.message,t.stack=e.stack,e.code&&(t.code=e.code),e.cause&&(t.cause=Yb(e.cause)),t}var Tu="Canceled";function yr(e){return e instanceof Ri?!0:e instanceof Error&&e.name===Tu&&e.message===Tu}var Ri=class extends Error{constructor(){super(Tu),this.name=this.message}},Qb=class Bp extends Error{static{this.a="PendingMigrationError"}static is(t){return t instanceof Bp||t instanceof Error&&t.name===Bp.a}constructor(t){super(t),this.name=Bp.a}};function Xb(){const e=new Error(Tu);return e.name=e.message,e}function Ce(e){return e?new Error(`Illegal argument: ${e}`):new Error("Illegal argument")}function ag(e){return e?new Error(`Illegal state: ${e}`):new Error("Illegal state")}var on=class extends TypeError{constructor(e){super(e?`${e} is read-only and cannot be changed`:"Cannot change read-only property")}},pI=class extends Error{constructor(e){super("NotImplemented"),e&&(this.message=e)}},cg=class extends Error{constructor(e){super("NotSupported"),e&&(this.message=e)}},an=class Eb extends Error{constructor(t){super(t),this.name="CodeExpectedError"}static fromError(t){if(t instanceof Eb)return t;const i=new Eb;return i.message=t.message,i.stack=t.stack,i}static isErrorNoTelemetry(t){return t.name==="CodeExpectedError"}},ui=class P$ extends Error{constructor(t){super(t||"An unexpected bug occurred."),Object.setPrototypeOf(this,P$.prototype)}};function gI(e,t,i=e.length-1){const r=mI(e,t,i);if(r!==-1)return e[r]}function mI(e,t,i=e.length-1){for(let r=i;r>=0;r--){const s=e[r];if(t(s))return r}return-1}function vI(e,t,i=0,r=e.length){let s=i,n=r;for(;s<n;){const o=Math.floor((s+n)/2);t(e[o])?s=o+1:n=o}return s-1}var EB=class A${static{this.assertInvariants=!1}constructor(t){this.e=t,this.c=0}findLastMonotonous(t){if(A$.assertInvariants){if(this.d){for(const r of this.e)if(this.d(r)&&!t(r))throw new Error("MonotonousArray: current predicate must be weaker than (or equal to) the previous predicate.")}this.d=t}const i=vI(this.e,t,this.c);return this.c=i+1,i===-1?void 0:this.e[i]}};function Li(e,t,i=(r,s)=>r===s){if(e===t)return!0;if(!e||!t||e.length!==t.length)return!1;for(let r=0,s=e.length;r<s;r++)if(!i(e[r],t[r]))return!1;return!0}function wI(e,t){const i=[];let r;for(const s of e.slice(0).sort(t))!r||t(r[0],s)!==0?(r=[s],i.push(r)):r.push(s);return i}function Kb(e,t,i){const r=[];function s(a,c,l){if(c===0&&l.length===0)return;const u=r[r.length-1];u&&u.start+u.deleteCount===a?(u.deleteCount+=c,u.toInsert.push(...l)):r.push({start:a,deleteCount:c,toInsert:l})}let n=0,o=0;for(;;){if(n===e.length){s(n,0,t.slice(o));break}if(o===t.length){s(n,e.length-n,[]);break}const a=e[n],c=t[o],l=i(a,c);l===0?(n+=1,o+=1):l<0?(s(n,1,[]),n+=1):l>0&&(s(n,0,[c]),o+=1)}return r}function bI(e,t,i){const r=Kb(e,t,i),s=[],n=[];for(const o of r)s.push(...e.slice(o.start,o.start+o.deleteCount)),n.push(...o.toInsert);return{removed:s,added:n}}function vt(e){return e.filter(t=>!!t)}function yI(e){let t=0;for(let i=0;i<e.length;i++)e[i]&&(e[t]=e[i],t+=1);e.length=t}function lg(e){return!Array.isArray(e)||e.length===0}function Xa(e){return Array.isArray(e)&&e.length>0}function vo(e,t=i=>i){const i=new Set;return e.filter(r=>{const s=t(r);return i.has(s)?!1:(i.add(s),!0)})}function ey(e,t){let i;if(typeof t=="number"){let r=t;i=()=>{const s=Math.sin(r++)*179426549;return s-Math.floor(s)}}else i=Math.random;for(let r=e.length-1;r>0;r-=1){const s=Math.floor(i()*(r+1)),n=e[r];e[r]=e[s],e[s]=n}}function ug(e,t){return Array.isArray(e)?e.map(t):t(e)}function Ni(e){return Array.isArray(e)?e:[e]}var hg;(function(e){function t(n){return n<0}e.isLessThan=t;function i(n){return n<=0}e.isLessThanOrEqual=i;function r(n){return n>0}e.isGreaterThan=r;function s(n){return n===0}e.isNeitherLessOrGreaterThan=s,e.greaterThan=1,e.lessThan=-1,e.neitherLessOrGreaterThan=0})(hg||(hg={}));function xI(e,t){return(i,r)=>t(e(i),e(r))}var EI=(e,t)=>e-t,SB=class Hp{static{this.empty=new Hp(t=>{})}constructor(t){this.iterate=t}forEach(t){this.iterate(i=>(t(i),!0))}toArray(){const t=[];return this.iterate(i=>(t.push(i),!0)),t}filter(t){return new Hp(i=>this.iterate(r=>t(r)?i(r):!0))}map(t){return new Hp(i=>this.iterate(r=>i(t(r))))}some(t){let i=!1;return this.iterate(r=>(i=t(r),!i)),i}findFirst(t){let i;return this.iterate(r=>t(r)?(i=r,!1):!0),i}findLast(t){let i;return this.iterate(r=>(t(r)&&(i=r),!0)),i}findLastMaxBy(t){let i,r=!0;return this.iterate(s=>((r||hg.isGreaterThan(t(s,i)))&&(r=!1,i=s),!0)),i}},ty;function iy(e,t){const i=Object.create(null);for(const r of e){const s=t(r);let n=i[s];n||(n=i[s]=[]),n.push(r)}return i}function SI(e,t){const i=[],r=[];for(const s of e)t.has(s)||i.push(s);for(const s of t)e.has(s)||r.push(s);return{removed:i,added:r}}var kB=class{static{ty=Symbol.toStringTag}constructor(e,t){this.b=t,this.a=new Map,this[ty]="SetWithKey";for(const i of e)this.add(i)}get size(){return this.a.size}add(e){const t=this.b(e);return this.a.set(t,e),this}delete(e){return this.a.delete(this.b(e))}has(e){return this.a.has(this.b(e))}*entries(){for(const e of this.a.values())yield[e,e]}keys(){return this.values()}*values(){for(const e of this.a.values())yield e}clear(){this.a.clear()}forEach(e,t){this.a.forEach(i=>e.call(t,i,i,this))}[Symbol.iterator](){return this.values()}},ry,sy,ny;function kI(e,t,i){let r=e.get(t);return r===void 0&&(r=i,e.set(t,r)),r}var $I=class{constructor(e,t){this.uri=e,this.value=t}};function CI(e){return Array.isArray(e)}var Ft=class gu{static{this.c=t=>t.toString()}constructor(t,i){if(this[ry]="ResourceMap",t instanceof gu)this.d=new Map(t.d),this.e=i??gu.c;else if(CI(t)){this.d=new Map,this.e=i??gu.c;for(const[r,s]of t)this.set(r,s)}else this.d=new Map,this.e=t??gu.c}set(t,i){return this.d.set(this.e(t),new $I(t,i)),this}get(t){return this.d.get(this.e(t))?.value}has(t){return this.d.has(this.e(t))}get size(){return this.d.size}clear(){this.d.clear()}delete(t){return this.d.delete(this.e(t))}forEach(t,i){typeof i<"u"&&(t=t.bind(i));for(const[r,s]of this.d)t(s.value,s.uri,this)}*values(){for(const t of this.d.values())yield t.value}*keys(){for(const t of this.d.values())yield t.uri}*entries(){for(const t of this.d.values())yield[t.uri,t.value]}*[(ry=Symbol.toStringTag,Symbol.iterator)](){for(const[,t]of this.d)yield[t.uri,t.value]}},oy=class{constructor(e,t){this[sy]="ResourceSet",!e||typeof e=="function"?this.c=new Ft(e):(this.c=new Ft(t),e.forEach(this.add,this))}get size(){return this.c.size}add(e){return this.c.set(e,e),this}clear(){this.c.clear()}delete(e){return this.c.delete(e)}forEach(e,t){this.c.forEach((i,r)=>e.call(t,r,r,this))}has(e){return this.c.has(e)}entries(){return this.c.entries()}keys(){return this.c.keys()}values(){return this.c.keys()}[(sy=Symbol.toStringTag,Symbol.iterator)](){return this.keys()}},ay;(function(e){e[e.None=0]="None",e[e.AsOld=1]="AsOld",e[e.AsNew=2]="AsNew"})(ay||(ay={}));var II=class{constructor(){this[ny]="LinkedMap",this.c=new Map,this.d=void 0,this.e=void 0,this.f=0,this.g=0}clear(){this.c.clear(),this.d=void 0,this.e=void 0,this.f=0,this.g++}isEmpty(){return!this.d&&!this.e}get size(){return this.f}get first(){return this.d?.value}get last(){return this.e?.value}has(e){return this.c.has(e)}get(e,t=0){const i=this.c.get(e);if(i)return t!==0&&this.n(i,t),i.value}set(e,t,i=0){let r=this.c.get(e);if(r)r.value=t,i!==0&&this.n(r,i);else{switch(r={key:e,value:t,next:void 0,previous:void 0},i){case 0:this.l(r);break;case 1:this.k(r);break;case 2:this.l(r);break;default:this.l(r);break}this.c.set(e,r),this.f++}return this}delete(e){return!!this.remove(e)}remove(e){const t=this.c.get(e);if(t)return this.c.delete(e),this.m(t),this.f--,t.value}shift(){if(!this.d&&!this.e)return;if(!this.d||!this.e)throw new Error("Invalid list");const e=this.d;return this.c.delete(e.key),this.m(e),this.f--,e.value}forEach(e,t){const i=this.g;let r=this.d;for(;r;){if(t?e.bind(t)(r.value,r.key,this):e(r.value,r.key,this),this.g!==i)throw new Error("LinkedMap got modified during iteration.");r=r.next}}keys(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.key,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}values(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:i.value,done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}entries(){const e=this,t=this.g;let i=this.d;const r={[Symbol.iterator](){return r},next(){if(e.g!==t)throw new Error("LinkedMap got modified during iteration.");if(i){const s={value:[i.key,i.value],done:!1};return i=i.next,s}else return{value:void 0,done:!0}}};return r}[(ny=Symbol.toStringTag,Symbol.iterator)](){return this.entries()}h(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.d,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.next,i--;this.d=t,this.f=i,t&&(t.previous=void 0),this.g++}j(e){if(e>=this.size)return;if(e===0){this.clear();return}let t=this.e,i=this.size;for(;t&&i>e;)this.c.delete(t.key),t=t.previous,i--;this.e=t,this.f=i,t&&(t.next=void 0),this.g++}k(e){if(!this.d&&!this.e)this.e=e;else if(this.d)e.next=this.d,this.d.previous=e;else throw new Error("Invalid list");this.d=e,this.g++}l(e){if(!this.d&&!this.e)this.d=e;else if(this.e)e.previous=this.e,this.e.next=e;else throw new Error("Invalid list");this.e=e,this.g++}m(e){if(e===this.d&&e===this.e)this.d=void 0,this.e=void 0;else if(e===this.d){if(!e.next)throw new Error("Invalid list");e.next.previous=void 0,this.d=e.next}else if(e===this.e){if(!e.previous)throw new Error("Invalid list");e.previous.next=void 0,this.e=e.previous}else{const t=e.next,i=e.previous;if(!t||!i)throw new Error("Invalid list");t.previous=i,i.next=t}e.next=void 0,e.previous=void 0,this.g++}n(e,t){if(!this.d||!this.e)throw new Error("Invalid list");if(!(t!==1&&t!==2)){if(t===1){if(e===this.d)return;const i=e.next,r=e.previous;e===this.e?(r.next=void 0,this.e=r):(i.previous=r,r.next=i),e.previous=void 0,e.next=this.d,this.d.previous=e,this.d=e,this.g++}else if(t===2){if(e===this.e)return;const i=e.next,r=e.previous;e===this.d?(i.previous=void 0,this.d=i):(i.previous=r,r.next=i),e.next=void 0,e.previous=this.e,this.e.next=e,this.e=e,this.g++}}}toJSON(){const e=[];return this.forEach((t,i)=>{e.push([i,t])}),e}fromJSON(e){this.clear();for(const[t,i]of e)this.set(t,i)}},DI=class extends II{constructor(e,t=1){super(),this.o=e,this.p=Math.min(Math.max(0,t),1)}get limit(){return this.o}set limit(e){this.o=e,this.q()}get ratio(){return this.p}set ratio(e){this.p=Math.min(Math.max(0,e),1),this.q()}get(e,t=2){return super.get(e,t)}peek(e){return super.get(e,0)}set(e,t){return super.set(e,t,2),this}q(){this.size>this.o&&this.r(Math.round(this.o*this.p))}},dg=class extends DI{constructor(e,t=1){super(e,t)}r(e){this.h(e)}set(e,t){return super.set(e,t),this.q(),this}},cy=class{constructor(){this.c=new Map}add(e,t){let i=this.c.get(e);i||(i=new Set,this.c.set(e,i)),i.add(t)}delete(e,t){const i=this.c.get(e);i&&(i.delete(t),i.size===0&&this.c.delete(e))}forEach(e,t){const i=this.c.get(e);i&&i.forEach(t)}get(e){const t=this.c.get(e);return t||new Set}};function fg(e,t){const i=this;let r=!1,s;return function(){if(r)return s;if(r=!0,t)try{s=e.apply(i,arguments)}finally{t()}else s=e.apply(i,arguments);return s}}function si(e,t){if(!e)throw new Error(t?`Assertion failed (${t})`:"Assertion Failed")}function pg(e,t="Unreachable"){throw new Error(t)}function gg(e,t="unexpected state"){if(!e)throw typeof t=="string"?new ui(`Assertion Failed: ${t}`):t}function ly(e){if(!e()){debugger;e(),Gt(new ui("Assertion Failed"))}}function Ue(e){return typeof e=="string"}function PI(e){return Array.isArray(e)&&e.every(t=>Ue(t))}function wt(e){return typeof e=="object"&&e!==null&&!Array.isArray(e)&&!(e instanceof RegExp)&&!(e instanceof Date)}function AI(e){const t=Object.getPrototypeOf(Uint8Array);return typeof e=="object"&&e instanceof t}function cn(e){return typeof e=="number"&&!isNaN(e)}function TI(e){return!!e&&typeof e[Symbol.iterator]=="function"}function Ka(e){return typeof e>"u"}function Mi(e){return!bt(e)}function bt(e){return Ka(e)||e===null}function uy(e,t){if(!e)throw new Error(t?`Unexpected type, expected '${t}'`:"Unexpected type")}function wo(e){return gg(e!=null,"Argument is `undefined` or `null`."),e}var RI=Object.prototype.hasOwnProperty;function hy(e){if(!wt(e))return!1;for(const t in e)if(RI.call(e,t))return!1;return!0}function dy(e){return typeof e=="function"}function LI(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++)fy(e[r],t[r])}function fy(e,t){if(Ue(t)){if(typeof e!==t)throw new Error(`argument does not match constraint: typeof ${t}`)}else if(dy(t)){try{if(e instanceof t)return}catch{}if(!bt(e)&&e.constructor===t||t.length===1&&t.call(void 0,e)===!0)return;throw new Error("argument does not match one of these constraints: arg instanceof constraint, arg.constructor === constraint, nor constraint(arg) === true")}}var Ot;(function(e){function t(U){return!!U&&typeof U=="object"&&typeof U[Symbol.iterator]=="function"}e.is=t;const i=Object.freeze([]);function r(){return i}e.empty=r;function*s(U){yield U}e.single=s;function n(U){return t(U)?U:s(U)}e.wrap=n;function o(U){return U||i}e.from=o;function*a(U){for(let z=U.length-1;z>=0;z--)yield U[z]}e.reverse=a;function c(U){return!U||U[Symbol.iterator]().next().done===!0}e.isEmpty=c;function l(U){return U[Symbol.iterator]().next().value}e.first=l;function u(U,z){let q=0;for(const he of U)if(z(he,q++))return!0;return!1}e.some=u;function h(U,z){let q=0;for(const he of U)if(!z(he,q++))return!1;return!0}e.every=h;function f(U,z){for(const q of U)if(z(q))return q}e.find=f;function*p(U,z){for(const q of U)z(q)&&(yield q)}e.filter=p;function*m(U,z){let q=0;for(const he of U)yield z(he,q++)}e.map=m;function*w(U,z){let q=0;for(const he of U)yield*z(he,q++)}e.flatMap=w;function*x(...U){for(const z of U)TI(z)?yield*z:yield z}e.concat=x;function E(U,z,q){let he=q;for(const me of U)he=z(he,me);return he}e.reduce=E;function $(U){let z=0;for(const q of U)z++;return z}e.length=$;function*A(U,z,q=U.length){for(z<-U.length&&(z=0),z<0&&(z+=U.length),q<0?q+=U.length:q>U.length&&(q=U.length);z<q;z++)yield U[z]}e.slice=A;function Q(U,z=Number.POSITIVE_INFINITY){const q=[];if(z===0)return[q,U];const he=U[Symbol.iterator]();for(let me=0;me<z;me++){const Ie=he.next();if(Ie.done)return[q,e.empty()];q.push(Ie.value)}return[q,{[Symbol.iterator](){return he}}]}e.consume=Q;async function W(U){const z=[];for await(const q of U)z.push(q);return z}e.asyncToArray=W;async function ce(U){let z=[];for await(const q of U)z=z.concat(q);return z}e.asyncToArrayFlat=ce})(Ot||(Ot={}));var NI=!1,ln=null,$B=class T${constructor(){this.b=new Map}static{this.a=0}c(t){let i=this.b.get(t);return i||(i={parent:null,source:null,isSingleton:!1,value:t,idx:T$.a++},this.b.set(t,i)),i}trackDisposable(t){const i=this.c(t);i.source||(i.source=new Error().stack)}setParent(t,i){const r=this.c(t);r.parent=i}markAsDisposed(t){this.b.delete(t)}markAsSingleton(t){this.c(t).isSingleton=!0}f(t,i){const r=i.get(t);if(r)return r;const s=t.parent?this.f(this.c(t.parent),i):t;return i.set(t,s),s}getTrackedDisposables(){const t=new Map;return[...this.b.entries()].filter(([,r])=>r.source!==null&&!this.f(r,t).isSingleton).flatMap(([r])=>r)}computeLeakingDisposables(t=10,i){let r;if(i)r=i;else{const c=new Map,l=[...this.b.values()].filter(h=>h.source!==null&&!this.f(h,c).isSingleton);if(l.length===0)return;const u=new Set(l.map(h=>h.value));if(r=l.filter(h=>!(h.parent&&u.has(h.parent))),r.length===0)throw new Error("There are cyclic diposable chains!")}if(!r)return;function s(c){function l(h,f){for(;h.length>0&&f.some(p=>typeof p=="string"?p===h[0]:h[0].match(p));)h.shift()}const u=c.source.split(`
`).map(h=>h.trim().replace("at ","")).filter(h=>h!=="");return l(u,["Error",/^trackDisposable \(.*\)$/,/^DisposableTracker.trackDisposable \(.*\)$/]),u.reverse()}const n=new cy;for(const c of r){const l=s(c);for(let u=0;u<=l.length;u++)n.add(l.slice(0,u).join(`
`),c)}r.sort(xI(c=>c.idx,EI));let o="",a=0;for(const c of r.slice(0,t)){a++;const l=s(c),u=[];for(let h=0;h<l.length;h++){let f=l[h];f=`(shared with ${n.get(l.slice(0,h+1).join(`
`)).size}/${r.length} leaks) at ${f}`;const m=n.get(l.slice(0,h).join(`
`)),w=iy([...m].map(x=>s(x)[h]),x=>x);delete w[l[h]];for(const[x,E]of Object.entries(w))u.unshift(`    - stacktraces of ${E.length} other leaks continue with ${x}`);u.unshift(f)}o+=`


==================== Leaking disposable ${a}/${r.length}: ${c.value.constructor.name} ====================
${u.join(`
`)}
============================================================

`}return r.length>t&&(o+=`


... and ${r.length-t} more leaking disposables

`),{leaks:r,details:o}}};function MI(e){ln=e}if(NI){const e="__is_disposable_tracked__";MI(new class{trackDisposable(t){const i=new Error("Potentially leaked disposable").stack;setTimeout(()=>{t[e]||console.log(i)},3e3)}setParent(t,i){if(t&&t!==ne.None)try{t[e]=!0}catch{}}markAsDisposed(t){if(t&&t!==ne.None)try{t[e]=!0}catch{}}markAsSingleton(t){}})}function bo(e){return ln?.trackDisposable(e),e}function yo(e){ln?.markAsDisposed(e)}function ec(e,t){ln?.setParent(e,t)}function FI(e,t){if(ln)for(const i of e)ln.setParent(i,t)}function mg(e){return ln?.markAsSingleton(e),e}function py(e){return typeof e=="object"&&e!==null&&typeof e.dispose=="function"&&e.dispose.length===0}function Hr(e){if(Ot.is(e)){const t=[];for(const i of e)if(i)try{i.dispose()}catch(r){t.push(r)}if(t.length===1)throw t[0];if(t.length>1)throw new AggregateError(t,"Encountered errors while disposing of store");return Array.isArray(e)?[]:e}else if(e)return e.dispose(),e}function vg(...e){const t=oe(()=>Hr(e));return FI(e,t),t}function oe(e){const t=bo({dispose:fg(()=>{yo(t),e()})});return t}var ue=class R${static{this.DISABLE_DISPOSED_WARNING=!1}constructor(){this.f=new Set,this.g=!1,bo(this)}dispose(){this.g||(yo(this),this.g=!0,this.clear())}get isDisposed(){return this.g}clear(){if(this.f.size!==0)try{Hr(this.f)}finally{this.f.clear()}}add(t){if(!t)return t;if(t===this)throw new Error("Cannot register a disposable on itself!");return ec(t,this),this.g?R$.DISABLE_DISPOSED_WARNING||console.warn(new Error("Trying to add a disposable to a DisposableStore that has already been disposed of. The added object will be leaked!").stack):this.f.add(t),t}delete(t){if(t){if(t===this)throw new Error("Cannot dispose a disposable on itself!");this.f.delete(t),t.dispose()}}deleteAndLeak(t){t&&this.f.has(t)&&(this.f.delete(t),ec(t,null))}},ne=class{static{this.None=Object.freeze({dispose(){}})}constructor(){this.q=new ue,bo(this),ec(this.q,this)}dispose(){yo(this),this.q.dispose()}B(e){if(e===this)throw new Error("Cannot register a disposable on itself!");return this.q.add(e)}},bs=class{constructor(){this.b=!1,bo(this)}get value(){return this.b?void 0:this.a}set value(e){this.b||e===this.a||(this.a?.dispose(),e&&ec(e,this),this.a=e)}clear(){this.value=void 0}dispose(){this.b=!0,yo(this),this.a?.dispose(),this.a=void 0}clearAndLeak(){const e=this.a;return this.a=void 0,e&&ec(e,null),e}},Ru=class{constructor(){this.a=new Map,this.b=!1,bo(this)}dispose(){yo(this),this.b=!0,this.clearAndDisposeAll()}clearAndDisposeAll(){if(this.a.size)try{Hr(this.a.values())}finally{this.a.clear()}}has(e){return this.a.has(e)}get size(){return this.a.size}get(e){return this.a.get(e)}set(e,t,i=!1){this.b&&console.warn(new Error("Trying to add a disposable to a DisposableMap that has already been disposed of. The added object will be leaked!").stack),i||this.a.get(e)?.dispose(),this.a.set(e,t)}deleteAndDispose(e){this.a.get(e)?.dispose(),this.a.delete(e)}deleteAndLeak(e){const t=this.a.get(e);return this.a.delete(e),t}keys(){return this.a.keys()}values(){return this.a.values()}[Symbol.iterator](){return this.a[Symbol.iterator]()}};function gy(e,t){return new OI(e,t)}var OI=class{constructor(e,t){this.e=e,this.f=t,this.a={flowing:!1,ended:!1,destroyed:!1},this.b={data:[],error:[]},this.c={data:[],error:[],end:[]},this.d=[]}pause(){this.a.destroyed||(this.a.flowing=!1)}resume(){this.a.destroyed||this.a.flowing||(this.a.flowing=!0,this.j(),this.k(),this.l())}write(e){if(!this.a.destroyed){if(this.a.flowing)this.g(e);else if(this.b.data.push(e),typeof this.f?.highWaterMark=="number"&&this.b.data.length>this.f.highWaterMark)return new Promise(t=>this.d.push(t))}}error(e){this.a.destroyed||(this.a.flowing?this.h(e):this.b.error.push(e))}end(e){this.a.destroyed||(typeof e<"u"&&this.write(e),this.a.flowing?(this.i(),this.destroy()):this.a.ended=!0)}g(e){this.c.data.slice(0).forEach(t=>t(e))}h(e){this.c.error.length===0?Gt(e):this.c.error.slice(0).forEach(t=>t(e))}i(){this.c.end.slice(0).forEach(e=>e())}on(e,t){if(!this.a.destroyed)switch(e){case"data":this.c.data.push(t),this.resume();break;case"end":this.c.end.push(t),this.a.flowing&&this.l()&&this.destroy();break;case"error":this.c.error.push(t),this.a.flowing&&this.k();break}}removeListener(e,t){if(this.a.destroyed)return;let i;switch(e){case"data":i=this.c.data;break;case"end":i=this.c.end;break;case"error":i=this.c.error;break}if(i){const r=i.indexOf(t);r>=0&&i.splice(r,1)}}j(){if(this.b.data.length===0)return;if(typeof this.e=="function"){const t=this.e(this.b.data);this.g(t)}else for(const t of this.b.data)this.g(t);this.b.data.length=0;const e=[...this.d];this.d.length=0,e.forEach(t=>t())}k(){if(this.c.error.length>0){for(const e of this.b.error)this.h(e);this.b.error.length=0}}l(){return this.a.ended?(this.i(),this.c.end.length>0):!1}destroy(){this.a.destroyed||(this.a.destroyed=!0,this.a.ended=!0,this.b.data.length=0,this.b.error.length=0,this.c.data.length=0,this.c.error.length=0,this.c.end.length=0,this.d.length=0)}};function UI(e,t){const i=[];let r;for(;(r=e.read())!==null;)i.push(r);return t(i)}function my(e,t){return new Promise((i,r)=>{const s=[];vy(e,{onData:n=>{t&&s.push(n)},onError:n=>{t?r(n):i(void 0)},onEnd:()=>{i(t?t(s):void 0)}})})}function vy(e,t,i){e.on("error",r=>{i?.isCancellationRequested||t.onError(r)}),e.on("end",()=>{i?.isCancellationRequested||t.onEnd()}),e.on("data",r=>{i?.isCancellationRequested||t.onData(r)})}function jI(e,t){const i=gy(t);return i.end(e),i}var Lu=typeof Buffer<"u",BI=new _t(()=>new Uint8Array(256)),wg,bg,ae=class Zi{static alloc(t){return Lu?new Zi(Buffer.allocUnsafe(t)):new Zi(new Uint8Array(t))}static wrap(t){return Lu&&!Buffer.isBuffer(t)&&(t=Buffer.from(t.buffer,t.byteOffset,t.byteLength)),new Zi(t)}static fromString(t,i){return!(i?.dontUseNodeBuffer||!1)&&Lu?new Zi(Buffer.from(t)):(wg||(wg=new TextEncoder),new Zi(wg.encode(t)))}static fromByteArray(t){const i=Zi.alloc(t.length);for(let r=0,s=t.length;r<s;r++)i.buffer[r]=t[r];return i}static concat(t,i){if(typeof i>"u"){i=0;for(let n=0,o=t.length;n<o;n++)i+=t[n].byteLength}const r=Zi.alloc(i);let s=0;for(let n=0,o=t.length;n<o;n++){const a=t[n];r.set(a,s),s+=a.byteLength}return r}constructor(t){this.buffer=t,this.byteLength=this.buffer.byteLength}clone(){const t=Zi.alloc(this.byteLength);return t.set(this),t}toString(){return Lu?this.buffer.toString():(bg||(bg=new TextDecoder),bg.decode(this.buffer))}slice(t,i){return new Zi(this.buffer.subarray(t,i))}set(t,i){if(t instanceof Zi)this.buffer.set(t.buffer,i);else if(t instanceof Uint8Array)this.buffer.set(t,i);else if(t instanceof ArrayBuffer)this.buffer.set(new Uint8Array(t),i);else if(ArrayBuffer.isView(t))this.buffer.set(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),i);else throw new Error("Unknown argument 'array'")}readUInt32BE(t){return Nu(this.buffer,t)}writeUInt32BE(t,i){Mu(this.buffer,t,i)}readUInt32LE(t){return WI(this.buffer,t)}writeUInt32LE(t,i){VI(this.buffer,t,i)}readUInt8(t){return qI(this.buffer,t)}writeUInt8(t,i){GI(this.buffer,t,i)}indexOf(t,i=0){return HI(this.buffer,t instanceof Zi?t.buffer:t,i)}equals(t){return this===t?!0:this.byteLength!==t.byteLength?!1:this.buffer.every((i,r)=>i===t.buffer[r])}};function HI(e,t,i=0){const r=t.byteLength,s=e.byteLength;if(r===0)return 0;if(r===1)return e.indexOf(t[0]);if(r>s-i)return-1;const n=BI.value;n.fill(t.length);for(let l=0;l<t.length;l++)n[t[l]]=t.length-l-1;let o=i+t.length-1,a=o,c=-1;for(;o<s;)if(e[o]===t[a]){if(a===0){c=o;break}o--,a--}else o+=Math.max(t.length-a,n[e[o]]),a=t.length-1;return c}function zI(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0}function _I(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255}function Nu(e,t){return e[t]*2**24+e[t+1]*2**16+e[t+2]*2**8+e[t+3]}function Mu(e,t,i){e[i+3]=t,t=t>>>8,e[i+2]=t,t=t>>>8,e[i+1]=t,t=t>>>8,e[i]=t}function WI(e,t){return e[t+0]<<0>>>0|e[t+1]<<8>>>0|e[t+2]<<16>>>0|e[t+3]<<24>>>0}function VI(e,t,i){e[i+0]=t&255,t=t>>>8,e[i+1]=t&255,t=t>>>8,e[i+2]=t&255,t=t>>>8,e[i+3]=t&255}function qI(e,t){return e[t]}function GI(e,t,i){e[i]=t}function JI(e){return UI(e,t=>ae.concat(t))}function ZI(e){return my(e,t=>ae.concat(t))}function YI(e){return jI(e,t=>ae.concat(t))}function xo(e){let t=0,i=0,r=0;const s=new Uint8Array(Math.floor(e.length/4*3)),n=a=>{switch(i){case 3:s[r++]=t|a,i=0;break;case 2:s[r++]=t|a>>>2,t=a<<6,i=3;break;case 1:s[r++]=t|a>>>4,t=a<<4,i=2;break;default:t=a<<2,i=1}};for(let a=0;a<e.length;a++){const c=e.charCodeAt(a);if(c>=65&&c<=90)n(c-65);else if(c>=97&&c<=122)n(c-97+26);else if(c>=48&&c<=57)n(c-48+52);else if(c===43||c===45)n(62);else if(c===47||c===95)n(63);else{if(c===61)break;throw new SyntaxError(`Unexpected base64 character ${e[a]}`)}}const o=r;for(;i>0;)n(0);return ae.wrap(s).slice(0,o)}var QI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",XI="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_";function Fu({buffer:e},t=!0,i=!1){const r=i?XI:QI;let s="";const n=e.byteLength%3;let o=0;for(;o<e.byteLength-n;o+=3){const a=e[o+0],c=e[o+1],l=e[o+2];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[(c<<2|l>>>6)&63],s+=r[l&63]}if(n===1){const a=e[o+0];s+=r[a>>>2],s+=r[a<<4&63],t&&(s+="==")}else if(n===2){const a=e[o+0],c=e[o+1];s+=r[a>>>2],s+=r[(a<<4|c>>>4)&63],s+=r[c<<2&63],t&&(s+="=")}return s}var wy="0123456789abcdef";function by({buffer:e}){let t="";for(let i=0;i<e.length;i++){const r=e[i];t+=wy[r>>>4],t+=wy[r&15]}return t}function KI(e){if(e.length%2!==0)throw new SyntaxError("Hex string must have an even length");const t=new Uint8Array(e.length>>1);for(let i=0;i<e.length;)t[i>>1]=yy(e,i++)<<4|yy(e,i++);return ae.wrap(t)}function yy(e,t){const i=e.charCodeAt(t);if(i>=48&&i<=57)return i-48;if(i>=97&&i<=102)return i-87;if(i>=65&&i<=70)return i-55;throw new SyntaxError(`Invalid hex character at position ${t}`)}var ft=class zp{static{this.Undefined=new zp(void 0)}constructor(t){this.element=t,this.next=zp.Undefined,this.prev=zp.Undefined}},ys=class{constructor(){this.a=ft.Undefined,this.b=ft.Undefined,this.c=0}get size(){return this.c}isEmpty(){return this.a===ft.Undefined}clear(){let e=this.a;for(;e!==ft.Undefined;){const t=e.next;e.prev=ft.Undefined,e.next=ft.Undefined,e=t}this.a=ft.Undefined,this.b=ft.Undefined,this.c=0}unshift(e){return this.d(e,!1)}push(e){return this.d(e,!0)}d(e,t){const i=new ft(e);if(this.a===ft.Undefined)this.a=i,this.b=i;else if(t){const s=this.b;this.b=i,i.prev=s,s.next=i}else{const s=this.a;this.a=i,i.next=s,s.prev=i}this.c+=1;let r=!1;return()=>{r||(r=!0,this.e(i))}}shift(){if(this.a!==ft.Undefined){const e=this.a.element;return this.e(this.a),e}}pop(){if(this.b!==ft.Undefined){const e=this.b.element;return this.e(this.b),e}}e(e){if(e.prev!==ft.Undefined&&e.next!==ft.Undefined){const t=e.prev;t.next=e.next,e.next.prev=t}else e.prev===ft.Undefined&&e.next===ft.Undefined?(this.a=ft.Undefined,this.b=ft.Undefined):e.next===ft.Undefined?(this.b=this.b.prev,this.b.next=ft.Undefined):e.prev===ft.Undefined&&(this.a=this.a.next,this.a.prev=ft.Undefined);this.c-=1}*[Symbol.iterator](){let e=this.a;for(;e!==ft.Undefined;)yield e.element,e=e.next}},e3=globalThis.performance.now.bind(globalThis.performance),un=class L${static create(t){return new L$(t)}constructor(t){this.c=t===!1?Date.now:e3,this.a=this.c(),this.b=-1}stop(){this.b=this.c()}reset(){this.a=this.c(),this.b=-1}elapsed(){return this.b!==-1?this.b-this.a:this.c()-this.a}},xy=!1,t3=!1,lt;(function(e){e.None=()=>ne.None;function t(H){if(t3){const{onDidAddListener:j}=H,G=yg.create();let Z=0;H.onDidAddListener=()=>{++Z===2&&(console.warn("snapshotted emitter LIKELY used public and SHOULD HAVE BEEN created with DisposableStore. snapshotted here"),G.print()),j?.()}}}function i(H,j){return p(H,()=>{},0,void 0,!0,void 0,j)}e.defer=i;function r(H){return(j,G=null,Z)=>{let K=!1,se;return se=H(De=>{if(!K)return se?se.dispose():K=!0,j.call(G,De)},null,Z),K&&se.dispose(),se}}e.once=r;function s(H,j){return e.once(e.filter(H,j))}e.onceIf=s;function n(H,j,G){return h((Z,K=null,se)=>H(De=>Z.call(K,j(De)),null,se),G)}e.map=n;function o(H,j,G){return h((Z,K=null,se)=>H(De=>{j(De),Z.call(K,De)},null,se),G)}e.forEach=o;function a(H,j,G){return h((Z,K=null,se)=>H(De=>j(De)&&Z.call(K,De),null,se),G)}e.filter=a;function c(H){return H}e.signal=c;function l(...H){return(j,G=null,Z)=>{const K=vg(...H.map(se=>se(De=>j.call(G,De))));return f(K,Z)}}e.any=l;function u(H,j,G,Z){let K=G;return n(H,se=>(K=j(K,se),K),Z)}e.reduce=u;function h(H,j){let G;const Z={onWillAddFirstListener(){G=H(K.fire,K)},onDidRemoveLastListener(){G?.dispose()}};j||t(Z);const K=new P(Z);return j?.add(K),K.event}function f(H,j){return j instanceof Array?j.push(H):j&&j.add(H),H}function p(H,j,G=100,Z=!1,K=!1,se,De){let Xe,Ee,Rt,ht=0,Lt;const ii={leakWarningThreshold:se,onWillAddFirstListener(){Xe=H($t=>{ht++,Ee=j(Ee,$t),Z&&!Rt&&(li.fire(Ee),Ee=void 0),Lt=()=>{const tn=Ee;Ee=void 0,Rt=void 0,(!Z||ht>1)&&li.fire(tn),ht=0},typeof G=="number"?(Rt&&clearTimeout(Rt),Rt=setTimeout(Lt,G)):Rt===void 0&&(Rt=null,queueMicrotask(Lt))})},onWillRemoveListener(){K&&ht>0&&Lt?.()},onDidRemoveLastListener(){Lt=void 0,Xe.dispose()}};De||t(ii);const li=new P(ii);return De?.add(li),li.event}e.debounce=p;function m(H,j=0,G){return e.debounce(H,(Z,K)=>Z?(Z.push(K),Z):[K],j,void 0,!0,void 0,G)}e.accumulate=m;function w(H,j=(Z,K)=>Z===K,G){let Z=!0,K;return a(H,se=>{const De=Z||!j(se,K);return Z=!1,K=se,De},G)}e.latch=w;function x(H,j,G){return[e.filter(H,j,G),e.filter(H,Z=>!j(Z),G)]}e.split=x;function E(H,j=!1,G=[],Z){let K=G.slice(),se=H(Ee=>{K?K.push(Ee):Xe.fire(Ee)});Z&&Z.add(se);const De=()=>{K?.forEach(Ee=>Xe.fire(Ee)),K=null},Xe=new P({onWillAddFirstListener(){se||(se=H(Ee=>Xe.fire(Ee)),Z&&Z.add(se))},onDidAddFirstListener(){K&&(j?setTimeout(De):De())},onDidRemoveLastListener(){se&&se.dispose(),se=null}});return Z&&Z.add(Xe),Xe.event}e.buffer=E;function $(H,j){return(Z,K,se)=>{const De=j(new Q);return H(function(Xe){const Ee=De.evaluate(Xe);Ee!==A&&Z.call(K,Ee)},void 0,se)}}e.chain=$;const A=Symbol("HaltChainable");class Q{constructor(){this.f=[]}map(j){return this.f.push(j),this}forEach(j){return this.f.push(G=>(j(G),G)),this}filter(j){return this.f.push(G=>j(G)?G:A),this}reduce(j,G){let Z=G;return this.f.push(K=>(Z=j(Z,K),Z)),this}latch(j=(G,Z)=>G===Z){let G=!0,Z;return this.f.push(K=>{const se=G||!j(K,Z);return G=!1,Z=K,se?K:A}),this}evaluate(j){for(const G of this.f)if(j=G(j),j===A)break;return j}}function W(H,j,G=Z=>Z){const Z=(...Xe)=>De.fire(G(...Xe)),K=()=>H.on(j,Z),se=()=>H.removeListener(j,Z),De=new P({onWillAddFirstListener:K,onDidRemoveLastListener:se});return De.event}e.fromNodeEventEmitter=W;function ce(H,j,G=Z=>Z){const Z=(...Xe)=>De.fire(G(...Xe)),K=()=>H.addEventListener(j,Z),se=()=>H.removeEventListener(j,Z),De=new P({onWillAddFirstListener:K,onDidRemoveLastListener:se});return De.event}e.fromDOMEventEmitter=ce;function U(H,j){let G;const Z=new Promise((K,se)=>{const De=r(H)(K,null,j);G=()=>De.dispose()});return Z.cancel=G,Z}e.toPromise=U;function z(H){const j=new P;return H.then(G=>{j.fire(G)},()=>{j.fire(void 0)}).finally(()=>{j.dispose()}),j.event}e.fromPromise=z;function q(H,j){return H(G=>j.fire(G))}e.forward=q;function he(H,j,G){return j(G),H(Z=>j(Z))}e.runAndSubscribe=he;class me{constructor(j,G){this._observable=j,this.f=0,this.g=!1;const Z={onWillAddFirstListener:()=>{j.addObserver(this),this._observable.reportChanges()},onDidRemoveLastListener:()=>{j.removeObserver(this)}};G||t(Z),this.emitter=new P(Z),G&&G.add(this.emitter)}beginUpdate(j){this.f++}handlePossibleChange(j){}handleChange(j,G){this.g=!0}endUpdate(j){this.f--,this.f===0&&(this._observable.reportChanges(),this.g&&(this.g=!1,this.emitter.fire(this._observable.get())))}}function Ie(H,j){return new me(H,j).emitter.event}e.fromObservable=Ie;function kt(H){return(j,G,Z)=>{let K=0,se=!1;const De={beginUpdate(){K++},endUpdate(){K--,K===0&&(H.reportChanges(),se&&(se=!1,j.call(G)))},handlePossibleChange(){},handleChange(){se=!0}};H.addObserver(De),H.reportChanges();const Xe={dispose(){H.removeObserver(De)}};return Z instanceof ue?Z.add(Xe):Array.isArray(Z)&&Z.push(Xe),Xe}}e.fromObservableLight=kt})(lt||(lt={}));var i3=class Sb{static{this.all=new Set}static{this.f=0}constructor(t){this.listenerCount=0,this.invocationCount=0,this.elapsedOverall=0,this.durations=[],this.name=`${t}_${Sb.f++}`,Sb.all.add(this)}start(t){this.g=new un,this.listenerCount=t}stop(){if(this.g){const t=this.g.elapsed();this.durations.push(t),this.elapsedOverall+=t,this.invocationCount+=1,this.g=void 0}}},Ey=-1,r3=class N${static{this.f=1}constructor(t,i,r=(N$.f++).toString(16).padStart(3,"0")){this.j=t,this.threshold=i,this.name=r,this.h=0}dispose(){this.g?.clear()}check(t,i){const r=this.threshold;if(r<=0||i<r)return;this.g||(this.g=new Map);const s=this.g.get(t.value)||0;if(this.g.set(t.value,s+1),this.h-=1,this.h<=0){this.h=r*.5;const[n,o]=this.getMostFrequentStack(),a=`[${this.name}] potential listener LEAK detected, having ${i} listeners already. MOST frequent listener (${o}):`;console.warn(a),console.warn(n);const c=new s3(a,n);this.j(c)}return()=>{const n=this.g.get(t.value)||0;this.g.set(t.value,n-1)}}getMostFrequentStack(){if(!this.g)return;let t,i=0;for(const[r,s]of this.g)(!t||i<s)&&(t=[r,s],i=s);return t}},yg=class M${static create(){const t=new Error;return new M$(t.stack??"")}constructor(t){this.value=t}print(){console.warn(this.value.split(`
`).slice(2).join(`
`))}},s3=class extends Error{constructor(e,t){super(e),this.name="ListenerLeakError",this.stack=t}},n3=class extends Error{constructor(e,t){super(e),this.name="ListenerRefusalError",this.stack=t}},o3=0,Ou=class{constructor(e){this.value=e,this.id=o3++}},a3=2,Sy=(e,t)=>{if(e instanceof Ou)t(e);else for(let i=0;i<e.length;i++){const r=e[i];r&&t(r)}},P=class{constructor(e){this.z=0,this.f=e,this.g=Ey>0||this.f?.leakWarningThreshold?new r3(e?.onListenerError??Gt,this.f?.leakWarningThreshold??Ey):void 0,this.j=this.f?._profName?new i3(this.f._profName):void 0,this.w=this.f?.deliveryQueue}dispose(){if(!this.m){if(this.m=!0,this.w?.current===this&&this.w.reset(),this.u){if(xy){const e=this.u;queueMicrotask(()=>{Sy(e,t=>t.stack?.print())})}this.u=void 0,this.z=0}this.f?.onDidRemoveLastListener?.(),this.g?.dispose()}}get event(){return this.q??=(e,t,i)=>{if(this.g&&this.z>this.g.threshold**2){const a=`[${this.g.name}] REFUSES to accept new listeners because it exceeded its threshold by far (${this.z} vs ${this.g.threshold})`;console.warn(a);const c=this.g.getMostFrequentStack()??["UNKNOWN stack",-1],l=new n3(`${a}. HINT: Stack shows most frequent listener (${c[1]}-times)`,c[0]);return(this.f?.onListenerError||Gt)(l),ne.None}if(this.m)return ne.None;t&&(e=e.bind(t));const r=new Ou(e);let s,n;this.g&&this.z>=Math.ceil(this.g.threshold*.2)&&(r.stack=yg.create(),s=this.g.check(r.stack,this.z+1)),xy&&(r.stack=n??yg.create()),this.u?this.u instanceof Ou?(this.w??=new c3,this.u=[this.u,r]):this.u.push(r):(this.f?.onWillAddFirstListener?.(this),this.u=r,this.f?.onDidAddFirstListener?.(this)),this.f?.onDidAddListener?.(this),this.z++;const o=oe(()=>{s?.(),this.A(r)});return i instanceof ue?i.add(o):Array.isArray(i)&&i.push(o),o},this.q}A(e){if(this.f?.onWillRemoveListener?.(this),!this.u)return;if(this.z===1){this.u=void 0,this.f?.onDidRemoveLastListener?.(this),this.z=0;return}const t=this.u,i=t.indexOf(e);if(i===-1)throw console.log("disposed?",this.m),console.log("size?",this.z),console.log("arr?",JSON.stringify(this.u)),new Error("Attempted to dispose unknown listener");this.z--,t[i]=void 0;const r=this.w.current===this;if(this.z*a3<=t.length){let s=0;for(let n=0;n<t.length;n++)t[n]?t[s++]=t[n]:r&&s<this.w.end&&(this.w.end--,s<this.w.i&&this.w.i--);t.length=s}}B(e,t){if(!e)return;const i=this.f?.onListenerError||Gt;if(!i){e.value(t);return}try{e.value(t)}catch(r){i(r)}}C(e){const t=e.current.u;for(;e.i<e.end;)this.B(t[e.i++],e.value);e.reset()}fire(e){if(this.w?.current&&(this.C(this.w),this.j?.stop()),this.j?.start(this.z),this.u)if(this.u instanceof Ou)this.B(this.u,e);else{const t=this.w;t.enqueue(this,e,this.u.length),this.C(t)}this.j?.stop()}hasListeners(){return this.z>0}},c3=class{constructor(){this.i=-1,this.end=0}enqueue(e,t,i){this.i=0,this.end=i,this.current=e,this.value=t}reset(){this.i=this.end,this.current=void 0,this.value=void 0}},tc=class extends P{async fireAsync(e,t,i){if(this.u)for(this.h||(this.h=new ys),Sy(this.u,r=>this.h.push([r.value,e]));this.h.size>0&&!t.isCancellationRequested;){const[r,s]=this.h.shift(),n=[],o={...s,token:t,waitUntil:a=>{if(Object.isFrozen(n))throw new Error("waitUntil can NOT be called asynchronous");i&&(a=i(a,r)),n.push(a)}};try{r(o)}catch(a){Gt(a);continue}Object.freeze(n),await Promise.allSettled(n).then(a=>{for(const c of a)c.status==="rejected"&&Gt(c.reason)})}}},Uu=class extends P{get isPaused(){return this.h!==0}constructor(e){super(e),this.h=0,this.s=new ys,this.t=e?.merge}pause(){this.h++}resume(){if(this.h!==0&&--this.h===0)if(this.t){if(this.s.size>0){const e=Array.from(this.s);this.s.clear(),super.fire(this.t(e))}}else for(;!this.h&&this.s.size!==0;)super.fire(this.s.shift())}fire(e){this.z&&(this.h!==0?this.s.push(e):super.fire(e))}},l3=class extends Uu{constructor(e){super(e),this.k=e.delay??100}fire(e){this.o||(this.pause(),this.o=setTimeout(()=>{this.o=void 0,this.resume()},this.k)),super.fire(e)}},u3=class extends P{constructor(e){super(e),this.h=[],this.k=e?.merge}fire(e){this.hasListeners()&&(this.h.push(e),this.h.length===1&&queueMicrotask(()=>{this.k?super.fire(this.k(this.h)):this.h.forEach(t=>super.fire(t)),this.h=[]}))}},ic;(function(e){e[e.Desktop=1]="Desktop",e[e.Web=2]="Web"})(ic||(ic={}));var ky;(function(e){e[e.VersionMismatch=55]="VersionMismatch",e[e.UnexpectedError=81]="UnexpectedError"})(ky||(ky={}));var $y;(function(e){e[e.Initialized=0]="Initialized",e[e.Ready=1]="Ready",e[e.Terminate=2]="Terminate"})($y||($y={}));function Cy(e){const t=ae.alloc(1);switch(e){case 0:t.writeUInt8(1,0);break;case 1:t.writeUInt8(2,0);break;case 2:t.writeUInt8(3,0);break}return t}function h3(e,t){if(e.byteLength!==1)return!1;switch(e.readUInt8(0)){case 1:return t===0;case 2:return t===1;case 3:return t===2;default:return!1}}var Iy;(function(e){e.Start="START_NATIVE_LOG",e.End="END_NATIVE_LOG"})(Iy||(Iy={}));function xg(e){const t=[];typeof e=="number"&&t.push("code/timeOrigin",e);function i(s,n){t.push(s,n?.startTime??Date.now())}function r(){const s=[];for(let n=0;n<t.length;n+=2)s.push({name:t[n],startTime:t[n+1]});return s}return{mark:i,getMarks:r}}function d3(){if(typeof performance=="object"&&typeof performance.mark=="function"&&!performance.nodeTiming)return typeof performance.timeOrigin!="number"&&!performance.timing?xg():{mark(e,t){performance.mark(e,t)},getMarks(){let e=performance.timeOrigin;typeof e!="number"&&(e=performance.timing.navigationStart||performance.timing.redirectStart||performance.timing.fetchStart);const t=[{name:"code/timeOrigin",startTime:Math.round(e)}];for(const i of performance.getEntriesByType("mark"))t.push({name:i.name,startTime:Math.round(e+i.startTime)});return t}};if(typeof process=="object"){const e=performance?.timeOrigin;return xg(e)}else return console.trace("perf-util loaded in UNKNOWN environment"),xg()}function f3(e){return e.MonacoPerformanceMarks||(e.MonacoPerformanceMarks=d3()),e.MonacoPerformanceMarks}var Dy=f3(globalThis),hi=Dy.mark,p3=Dy.getMarks;function g3(){return globalThis._VSCODE_NLS_MESSAGES}function Py(){return globalThis._VSCODE_NLS_LANGUAGE}var m3=Py()==="pseudo"||typeof document<"u"&&document.location&&typeof document.location.hash=="string"&&document.location.hash.indexOf("pseudo=true")>=0;function ju(e,t){let i;return t.length===0?i=e:i=e.replace(/\{(\d+)\}/g,(r,s)=>{const n=s[0],o=t[n];let a=r;return typeof o=="string"?a=o:(typeof o=="number"||typeof o=="boolean"||o===void 0||o===null)&&(a=String(o)),a}),m3&&(i="\uFF3B"+i.replace(/[aouei]/g,"$&$&")+"\uFF3D"),i}function d(e,t,...i){return ju(typeof e=="number"?Ay(e,t):t,i)}function Ay(e,t){const i=g3()?.[e];if(typeof i!="string"){if(typeof t=="string")return t;throw new Error(`!!! NLS MISSING: ${e} !!!`)}return i}function Bu(e,t,...i){let r;typeof e=="number"?r=Ay(e,t):r=t;const s=ju(r,i);return{value:s,original:t===r?s:ju(t,i)}}var xs="en",rc=!1,sc=!1,nc=!1,v3=!1,Ty=!1,Eg=!1,w3=!1,Sg=!1,Ry=!1,Ly=!1,Hu=void 0,zu=xs,Ny=xs,b3=void 0,zr=void 0,_r=globalThis,Fi=void 0;typeof _r.vscode<"u"&&typeof _r.vscode.process<"u"?Fi=_r.vscode.process:typeof process<"u"&&typeof process?.versions?.node=="string"&&(Fi=process);var My=typeof Fi?.versions?.electron=="string",y3=My&&Fi?.type==="renderer";if(typeof Fi=="object"){rc=Fi.platform==="win32",sc=Fi.platform==="darwin",nc=Fi.platform==="linux",v3=nc&&!!Fi.env.SNAP&&!!Fi.env.SNAP_REVISION,w3=My,Ry=!!Fi.env.CI||!!Fi.env.BUILD_ARTIFACTSTAGINGDIRECTORY,Hu=xs,zu=xs;const e=Fi.env.VSCODE_NLS_CONFIG;if(e)try{const t=JSON.parse(e);Hu=t.userLocale,Ny=t.osLocale,zu=t.resolvedLanguage||xs,b3=t.languagePack?.translationsConfigFile}catch{}Ty=!0}else typeof navigator=="object"&&!y3?(zr=navigator.userAgent,rc=zr.indexOf("Windows")>=0,sc=zr.indexOf("Macintosh")>=0,Sg=(zr.indexOf("Macintosh")>=0||zr.indexOf("iPad")>=0||zr.indexOf("iPhone")>=0)&&!!navigator.maxTouchPoints&&navigator.maxTouchPoints>0,nc=zr.indexOf("Linux")>=0,Ly=zr?.indexOf("Mobi")>=0,Eg=!0,zu=Py()||xs,Hu=navigator.language.toLowerCase(),Ny=Hu):console.error("Unable to resolve platform.");var Fy;(function(e){e[e.Web=0]="Web",e[e.Mac=1]="Mac",e[e.Linux=2]="Linux",e[e.Windows=3]="Windows"})(Fy||(Fy={}));function x3(e){switch(e){case 0:return"Web";case 1:return"Mac";case 2:return"Linux";case 3:return"Windows"}}var kg=0;sc?kg=1:rc?kg=3:nc&&(kg=2);var ei=rc,Oi=sc,Es=nc,Oy=Ty,Eo=Eg,E3=Eg&&typeof _r.importScripts=="function",S3=E3?_r.origin:void 0,k3=Sg,$3=Ly,hn=Ry,xr=zr,Ss=zu,Uy;(function(e){function t(){return Ss}e.value=t;function i(){return Ss.length===2?Ss==="en":Ss.length>=3?Ss[0]==="e"&&Ss[1]==="n"&&Ss[2]==="-":!1}e.isDefaultVariant=i;function r(){return Ss==="en"}e.isDefault=r})(Uy||(Uy={}));var C3=typeof _r.postMessage=="function"&&!_r.importScripts,jy=(()=>{if(C3){const e=[];_r.addEventListener("message",i=>{if(i.data&&i.data.vscodeScheduleAsyncWork)for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n.id===i.data.vscodeScheduleAsyncWork){e.splice(r,1),n.callback();return}}});let t=0;return i=>{const r=++t;e.push({id:r,callback:i}),_r.postMessage({vscodeScheduleAsyncWork:r},"*")}}return e=>setTimeout(e)})(),By;(function(e){e[e.Windows=1]="Windows",e[e.Macintosh=2]="Macintosh",e[e.Linux=3]="Linux"})(By||(By={}));var oc=sc||Sg?2:rc?1:3,Hy=!0,zy=!1;function _y(){if(!zy){zy=!0;const e=new Uint8Array(2);e[0]=1,e[1]=2,Hy=new Uint16Array(e.buffer)[0]===513}return Hy}var $g=!!(xr&&xr.indexOf("Chrome")>=0),I3=!!(xr&&xr.indexOf("Firefox")>=0),D3=!!(!$g&&xr&&xr.indexOf("Safari")>=0),Wy=!!(xr&&xr.indexOf("Edg/")>=0),CB=!!(xr&&xr.indexOf("Android")>=0),dn,Cg=globalThis.vscode;if(typeof Cg<"u"&&typeof Cg.process<"u"){const e=Cg.process;dn={get platform(){return e.platform},get arch(){return e.arch},get env(){return e.env},cwd(){return e.cwd()}}}else typeof process<"u"&&typeof process?.versions?.node=="string"?dn={get platform(){return process.platform},get arch(){return process.arch},get env(){return process.env},cwd(){return process.env.VSCODE_CWD||process.cwd()}}:dn={get platform(){return ei?"win32":Oi?"darwin":"linux"},get arch(){},get env(){return{}},cwd(){return"/"}};var So=dn.cwd,ac=dn.env,P3=dn.platform,IB=dn.arch,A3=65,T3=97,R3=90,L3=122,fn=46,Jt=47,xi=92,Wr=58,N3=63,Vy=class extends Error{constructor(e,t,i){let r;typeof t=="string"&&t.indexOf("not ")===0?(r="must not be",t=t.replace(/^not /,"")):r="must be";const s=e.indexOf(".")!==-1?"property":"argument";let n=`The "${e}" ${s} ${r} of type ${t}`;n+=`. Received type ${typeof i}`,super(n),this.code="ERR_INVALID_ARG_TYPE"}};function M3(e,t){if(e===null||typeof e!="object")throw new Vy(t,"Object",e)}function yt(e,t){if(typeof e!="string")throw new Vy(t,"string",e)}var Ei=P3==="win32";function Re(e){return e===Jt||e===xi}function Ig(e){return e===Jt}function Vr(e){return e>=A3&&e<=R3||e>=T3&&e<=L3}function _u(e,t,i,r){let s="",n=0,o=-1,a=0,c=0;for(let l=0;l<=e.length;++l){if(l<e.length)c=e.charCodeAt(l);else{if(r(c))break;c=Jt}if(r(c)){if(!(o===l-1||a===1))if(a===2){if(s.length<2||n!==2||s.charCodeAt(s.length-1)!==fn||s.charCodeAt(s.length-2)!==fn){if(s.length>2){const u=s.lastIndexOf(i);u===-1?(s="",n=0):(s=s.slice(0,u),n=s.length-1-s.lastIndexOf(i)),o=l,a=0;continue}else if(s.length!==0){s="",n=0,o=l,a=0;continue}}t&&(s+=s.length>0?`${i}..`:"..",n=2)}else s.length>0?s+=`${i}${e.slice(o+1,l)}`:s=e.slice(o+1,l),n=l-o-1;o=l,a=0}else c===fn&&a!==-1?++a:a=-1}return s}function F3(e){return e?`${e[0]==="."?"":"."}${e}`:""}function qy(e,t){M3(t,"pathObject");const i=t.dir||t.root,r=t.base||`${t.name||""}${F3(t.ext)}`;return i?i===t.root?`${i}${r}`:`${i}${e}${r}`:r}var xt={resolve(...e){let t="",i="",r=!1;for(let s=e.length-1;s>=-1;s--){let n;if(s>=0){if(n=e[s],yt(n,`paths[${s}]`),n.length===0)continue}else t.length===0?n=So():(n=ac[`=${t}`]||So(),(n===void 0||n.slice(0,2).toLowerCase()!==t.toLowerCase()&&n.charCodeAt(2)===xi)&&(n=`${t}\\`));const o=n.length;let a=0,c="",l=!1;const u=n.charCodeAt(0);if(o===1)Re(u)&&(a=1,l=!0);else if(Re(u))if(l=!0,Re(n.charCodeAt(1))){let h=2,f=h;for(;h<o&&!Re(n.charCodeAt(h));)h++;if(h<o&&h!==f){const p=n.slice(f,h);for(f=h;h<o&&Re(n.charCodeAt(h));)h++;if(h<o&&h!==f){for(f=h;h<o&&!Re(n.charCodeAt(h));)h++;(h===o||h!==f)&&(c=`\\\\${p}\\${n.slice(f,h)}`,a=h)}}}else a=1;else Vr(u)&&n.charCodeAt(1)===Wr&&(c=n.slice(0,2),a=2,o>2&&Re(n.charCodeAt(2))&&(l=!0,a=3));if(c.length>0)if(t.length>0){if(c.toLowerCase()!==t.toLowerCase())continue}else t=c;if(r){if(t.length>0)break}else if(i=`${n.slice(a)}\\${i}`,r=l,l&&t.length>0)break}return i=_u(i,!r,"\\",Re),r?`${t}\\${i}`:`${t}${i}`||"."},normalize(e){yt(e,"path");const t=e.length;if(t===0)return".";let i=0,r,s=!1;const n=e.charCodeAt(0);if(t===1)return Ig(n)?"\\":e;if(Re(n))if(s=!0,Re(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){const l=e.slice(c,a);for(c=a;a<t&&Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Re(e.charCodeAt(a));)a++;if(a===t)return`\\\\${l}\\${e.slice(c)}\\`;a!==c&&(r=`\\\\${l}\\${e.slice(c,a)}`,i=a)}}}else i=1;else Vr(n)&&e.charCodeAt(1)===Wr&&(r=e.slice(0,2),i=2,t>2&&Re(e.charCodeAt(2))&&(s=!0,i=3));let o=i<t?_u(e.slice(i),!s,"\\",Re):"";if(o.length===0&&!s&&(o="."),o.length>0&&Re(e.charCodeAt(t-1))&&(o+="\\"),!s&&r===void 0&&e.includes(":")){if(o.length>=2&&Vr(o.charCodeAt(0))&&o.charCodeAt(1)===Wr)return`.\\${o}`;let a=e.indexOf(":");do if(a===t-1||Re(e.charCodeAt(a+1)))return`.\\${o}`;while((a=e.indexOf(":",a+1))!==-1)}return r===void 0?s?`\\${o}`:o:s?`${r}\\${o}`:`${r}${o}`},isAbsolute(e){yt(e,"path");const t=e.length;if(t===0)return!1;const i=e.charCodeAt(0);return Re(i)||t>2&&Vr(i)&&e.charCodeAt(1)===Wr&&Re(e.charCodeAt(2))},join(...e){if(e.length===0)return".";let t,i;for(let n=0;n<e.length;++n){const o=e[n];yt(o,"path"),o.length>0&&(t===void 0?t=i=o:t+=`\\${o}`)}if(t===void 0)return".";let r=!0,s=0;if(typeof i=="string"&&Re(i.charCodeAt(0))){++s;const n=i.length;n>1&&Re(i.charCodeAt(1))&&(++s,n>2&&(Re(i.charCodeAt(2))?++s:r=!1))}if(r){for(;s<t.length&&Re(t.charCodeAt(s));)s++;s>=2&&(t=`\\${t.slice(s)}`)}return xt.normalize(t)},relative(e,t){if(yt(e,"from"),yt(t,"to"),e===t)return"";const i=xt.resolve(e),r=xt.resolve(t);if(i===r||(e=i.toLowerCase(),t=r.toLowerCase(),e===t))return"";if(i.length!==e.length||r.length!==t.length){const m=i.split("\\"),w=r.split("\\");m[m.length-1]===""&&m.pop(),w[w.length-1]===""&&w.pop();const x=m.length,E=w.length,$=x<E?x:E;let A;for(A=0;A<$&&m[A].toLowerCase()===w[A].toLowerCase();A++);return A===0?r:A===$?E>$?w.slice(A).join("\\"):x>$?"..\\".repeat(x-1-A)+"..":"":"..\\".repeat(x-A)+w.slice(A).join("\\")}let s=0;for(;s<e.length&&e.charCodeAt(s)===xi;)s++;let n=e.length;for(;n-1>s&&e.charCodeAt(n-1)===xi;)n--;const o=n-s;let a=0;for(;a<t.length&&t.charCodeAt(a)===xi;)a++;let c=t.length;for(;c-1>a&&t.charCodeAt(c-1)===xi;)c--;const l=c-a,u=o<l?o:l;let h=-1,f=0;for(;f<u;f++){const m=e.charCodeAt(s+f);if(m!==t.charCodeAt(a+f))break;m===xi&&(h=f)}if(f!==u){if(h===-1)return r}else{if(l>u){if(t.charCodeAt(a+f)===xi)return r.slice(a+f+1);if(f===2)return r.slice(a+f)}o>u&&(e.charCodeAt(s+f)===xi?h=f:f===2&&(h=3)),h===-1&&(h=0)}let p="";for(f=s+h+1;f<=n;++f)(f===n||e.charCodeAt(f)===xi)&&(p+=p.length===0?"..":"\\..");return a+=h,p.length>0?`${p}${r.slice(a,c)}`:(r.charCodeAt(a)===xi&&++a,r.slice(a,c))},toNamespacedPath(e){if(typeof e!="string"||e.length===0)return e;const t=xt.resolve(e);if(t.length<=2)return e;if(t.charCodeAt(0)===xi){if(t.charCodeAt(1)===xi){const i=t.charCodeAt(2);if(i!==N3&&i!==fn)return`\\\\?\\UNC\\${t.slice(2)}`}}else if(Vr(t.charCodeAt(0))&&t.charCodeAt(1)===Wr&&t.charCodeAt(2)===xi)return`\\\\?\\${t}`;return t},dirname(e){yt(e,"path");const t=e.length;if(t===0)return".";let i=-1,r=0;const s=e.charCodeAt(0);if(t===1)return Re(s)?e:".";if(Re(s)){if(i=r=1,Re(e.charCodeAt(1))){let a=2,c=a;for(;a<t&&!Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&Re(e.charCodeAt(a));)a++;if(a<t&&a!==c){for(c=a;a<t&&!Re(e.charCodeAt(a));)a++;if(a===t)return e;a!==c&&(i=r=a+1)}}}}else Vr(s)&&e.charCodeAt(1)===Wr&&(i=t>2&&Re(e.charCodeAt(2))?3:2,r=i);let n=-1,o=!0;for(let a=t-1;a>=r;--a)if(Re(e.charCodeAt(a))){if(!o){n=a;break}}else o=!1;if(n===-1){if(i===-1)return".";n=i}return e.slice(0,n)},basename(e,t){t!==void 0&&yt(t,"suffix"),yt(e,"path");let i=0,r=-1,s=!0,n;if(e.length>=2&&Vr(e.charCodeAt(0))&&e.charCodeAt(1)===Wr&&(i=2),t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=i;--n){const c=e.charCodeAt(n);if(Re(c)){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=i;--n)if(Re(e.charCodeAt(n))){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){yt(e,"path");let t=0,i=-1,r=0,s=-1,n=!0,o=0;e.length>=2&&e.charCodeAt(1)===Wr&&Vr(e.charCodeAt(0))&&(t=r=2);for(let a=e.length-1;a>=t;--a){const c=e.charCodeAt(a);if(Re(c)){if(!n){r=a+1;break}continue}s===-1&&(n=!1,s=a+1),c===fn?i===-1?i=a:o!==1&&(o=1):i!==-1&&(o=-1)}return i===-1||s===-1||o===0||o===1&&i===s-1&&i===r+1?"":e.slice(i,s)},format:qy.bind(null,"\\"),parse(e){yt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.length;let r=0,s=e.charCodeAt(0);if(i===1)return Re(s)?(t.root=t.dir=e,t):(t.base=t.name=e,t);if(Re(s)){if(r=1,Re(e.charCodeAt(1))){let h=2,f=h;for(;h<i&&!Re(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&Re(e.charCodeAt(h));)h++;if(h<i&&h!==f){for(f=h;h<i&&!Re(e.charCodeAt(h));)h++;h===i?r=h:h!==f&&(r=h+1)}}}}else if(Vr(s)&&e.charCodeAt(1)===Wr){if(i<=2)return t.root=t.dir=e,t;if(r=2,Re(e.charCodeAt(2))){if(i===3)return t.root=t.dir=e,t;r=3}}r>0&&(t.root=e.slice(0,r));let n=-1,o=r,a=-1,c=!0,l=e.length-1,u=0;for(;l>=r;--l){if(s=e.charCodeAt(l),Re(s)){if(!c){o=l+1;break}continue}a===-1&&(c=!1,a=l+1),s===fn?n===-1?n=l:u!==1&&(u=1):n!==-1&&(u=-1)}return a!==-1&&(n===-1||u===0||u===1&&n===a-1&&n===o+1?t.base=t.name=e.slice(o,a):(t.name=e.slice(o,n),t.base=e.slice(o,a),t.ext=e.slice(n,a))),o>0&&o!==r?t.dir=e.slice(0,o-1):t.dir=t.root,t},sep:"\\",delimiter:";",win32:null,posix:null},O3=(()=>{if(Ei){const e=/\\/g;return()=>{const t=So().replace(e,"/");return t.slice(t.indexOf("/"))}}return()=>So()})(),Me={resolve(...e){let t="",i=!1;for(let r=e.length-1;r>=0&&!i;r--){const s=e[r];yt(s,`paths[${r}]`),s.length!==0&&(t=`${s}/${t}`,i=s.charCodeAt(0)===Jt)}if(!i){const r=O3();t=`${r}/${t}`,i=r.charCodeAt(0)===Jt}return t=_u(t,!i,"/",Ig),i?`/${t}`:t.length>0?t:"."},normalize(e){if(yt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Jt,i=e.charCodeAt(e.length-1)===Jt;return e=_u(e,!t,"/",Ig),e.length===0?t?"/":i?"./":".":(i&&(e+="/"),t?`/${e}`:e)},isAbsolute(e){return yt(e,"path"),e.length>0&&e.charCodeAt(0)===Jt},join(...e){if(e.length===0)return".";const t=[];for(let i=0;i<e.length;++i){const r=e[i];yt(r,"path"),r.length>0&&t.push(r)}return t.length===0?".":Me.normalize(t.join("/"))},relative(e,t){if(yt(e,"from"),yt(t,"to"),e===t||(e=Me.resolve(e),t=Me.resolve(t),e===t))return"";const i=1,r=e.length,s=r-i,n=1,o=t.length-n,a=s<o?s:o;let c=-1,l=0;for(;l<a;l++){const h=e.charCodeAt(i+l);if(h!==t.charCodeAt(n+l))break;h===Jt&&(c=l)}if(l===a)if(o>a){if(t.charCodeAt(n+l)===Jt)return t.slice(n+l+1);if(l===0)return t.slice(n+l)}else s>a&&(e.charCodeAt(i+l)===Jt?c=l:l===0&&(c=0));let u="";for(l=i+c+1;l<=r;++l)(l===r||e.charCodeAt(l)===Jt)&&(u+=u.length===0?"..":"/..");return`${u}${t.slice(n+c)}`},toNamespacedPath(e){return e},dirname(e){if(yt(e,"path"),e.length===0)return".";const t=e.charCodeAt(0)===Jt;let i=-1,r=!0;for(let s=e.length-1;s>=1;--s)if(e.charCodeAt(s)===Jt){if(!r){i=s;break}}else r=!1;return i===-1?t?"/":".":t&&i===1?"//":e.slice(0,i)},basename(e,t){t!==void 0&&yt(t,"suffix"),yt(e,"path");let i=0,r=-1,s=!0,n;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t===e)return"";let o=t.length-1,a=-1;for(n=e.length-1;n>=0;--n){const c=e.charCodeAt(n);if(c===Jt){if(!s){i=n+1;break}}else a===-1&&(s=!1,a=n+1),o>=0&&(c===t.charCodeAt(o)?--o===-1&&(r=n):(o=-1,r=a))}return i===r?r=a:r===-1&&(r=e.length),e.slice(i,r)}for(n=e.length-1;n>=0;--n)if(e.charCodeAt(n)===Jt){if(!s){i=n+1;break}}else r===-1&&(s=!1,r=n+1);return r===-1?"":e.slice(i,r)},extname(e){yt(e,"path");let t=-1,i=0,r=-1,s=!0,n=0;for(let o=e.length-1;o>=0;--o){const a=e[o];if(a==="/"){if(!s){i=o+1;break}continue}r===-1&&(s=!1,r=o+1),a==="."?t===-1?t=o:n!==1&&(n=1):t!==-1&&(n=-1)}return t===-1||r===-1||n===0||n===1&&t===r-1&&t===i+1?"":e.slice(t,r)},format:qy.bind(null,"/"),parse(e){yt(e,"path");const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;const i=e.charCodeAt(0)===Jt;let r;i?(t.root="/",r=1):r=0;let s=-1,n=0,o=-1,a=!0,c=e.length-1,l=0;for(;c>=r;--c){const u=e.charCodeAt(c);if(u===Jt){if(!a){n=c+1;break}continue}o===-1&&(a=!1,o=c+1),u===fn?s===-1?s=c:l!==1&&(l=1):s!==-1&&(l=-1)}if(o!==-1){const u=n===0&&i?1:n;s===-1||l===0||l===1&&s===o-1&&s===n+1?t.base=t.name=e.slice(u,o):(t.name=e.slice(u,s),t.base=e.slice(u,o),t.ext=e.slice(s,o))}return n>0?t.dir=e.slice(0,n-1):i&&(t.dir="/"),t},sep:"/",delimiter:":",win32:null,posix:null};Me.win32=xt.win32=xt,Me.posix=xt.posix=Me;var ko=Ei?xt.normalize:Me.normalize,Wu=Ei?xt.isAbsolute:Me.isAbsolute,Dg=Ei?xt.join:Me.join,U3=Ei?xt.resolve:Me.resolve,cc=Ei?xt.relative:Me.relative,$o=Ei?xt.dirname:Me.dirname,Si=Ei?xt.basename:Me.basename,Vu=Ei?xt.extname:Me.extname,DB=Ei?xt.format:Me.format,PB=Ei?xt.parse:Me.parse,AB=Ei?xt.toNamespacedPath:Me.toNamespacedPath,Xi=Ei?xt.sep:Me.sep,TB=Ei?xt.delimiter:Me.delimiter,j3=/^\w[\w\d+.-]*$/,B3=/^\//,H3=/^\/\//;function z3(e,t){if(!e.scheme&&t)throw new Error(`[UriError]: Scheme is missing: {scheme: "", authority: "${e.authority}", path: "${e.path}", query: "${e.query}", fragment: "${e.fragment}"}`);if(e.scheme&&!j3.test(e.scheme))throw new Error("[UriError]: Scheme contains illegal characters.");if(e.path){if(e.authority){if(!B3.test(e.path))throw new Error('[UriError]: If a URI contains an authority component, then the path component must either be empty or begin with a slash ("/") character')}else if(H3.test(e.path))throw new Error('[UriError]: If a URI does not contain an authority component, then the path cannot begin with two slash characters ("//")')}}function _3(e,t){return!e&&!t?"file":e}function W3(e,t){switch(e){case"https":case"http":case"file":t?t[0]!==Ki&&(t=Ki+t):t=Ki;break}return t}var st="",Ki="/",V3=/^(([^:/?#]+?):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?/,y=class _p{static isUri(t){return t instanceof _p?!0:!t||typeof t!="object"?!1:typeof t.authority=="string"&&typeof t.fragment=="string"&&typeof t.path=="string"&&typeof t.query=="string"&&typeof t.scheme=="string"&&typeof t.fsPath=="string"&&typeof t.with=="function"&&typeof t.toString=="function"}constructor(t,i,r,s,n,o=!1){typeof t=="object"?(this.scheme=t.scheme||st,this.authority=t.authority||st,this.path=t.path||st,this.query=t.query||st,this.fragment=t.fragment||st):(this.scheme=_3(t,o),this.authority=i||st,this.path=W3(this.scheme,r||st),this.query=s||st,this.fragment=n||st,z3(this,o))}get fsPath(){return Gu(this,!1)}with(t){if(!t)return this;let{scheme:i,authority:r,path:s,query:n,fragment:o}=t;return i===void 0?i=this.scheme:i===null&&(i=st),r===void 0?r=this.authority:r===null&&(r=st),s===void 0?s=this.path:s===null&&(s=st),n===void 0?n=this.query:n===null&&(n=st),o===void 0?o=this.fragment:o===null&&(o=st),i===this.scheme&&r===this.authority&&s===this.path&&n===this.query&&o===this.fragment?this:new Co(i,r,s,n,o)}static parse(t,i=!1){const r=V3.exec(t);return r?new Co(r[2]||st,Ju(r[4]||st),Ju(r[5]||st),Ju(r[7]||st),Ju(r[9]||st),i):new Co(st,st,st,st,st)}static file(t){let i=st;if(ei&&(t=t.replace(/\\/g,Ki)),t[0]===Ki&&t[1]===Ki){const r=t.indexOf(Ki,2);r===-1?(i=t.substring(2),t=Ki):(i=t.substring(2,r),t=t.substring(r)||Ki)}return new Co("file",i,t,st,st)}static from(t,i){return new Co(t.scheme,t.authority,t.path,t.query,t.fragment,i)}static joinPath(t,...i){if(!t.path)throw new Error("[UriError]: cannot call joinPath on URI without path");let r;return ei&&t.scheme==="file"?r=_p.file(xt.join(Gu(t,!0),...i)).path:r=Me.join(t.path,...i),t.with({path:r})}toString(t=!1){return Pg(this,t)}toJSON(){return this}static revive(t){if(t){if(t instanceof _p)return t;{const i=new Co(t);return i._formatted=t.external??null,i._fsPath=t._sep===Gy?t.fsPath??null:null,i}}else return t}[Symbol.for("debug.description")](){return`URI(${this.toString()})`}};function qu(e){return!e||typeof e!="object"?!1:typeof e.scheme=="string"&&(typeof e.authority=="string"||typeof e.authority>"u")&&(typeof e.path=="string"||typeof e.path>"u")&&(typeof e.query=="string"||typeof e.query>"u")&&(typeof e.fragment=="string"||typeof e.fragment>"u")}var Gy=ei?1:void 0,Co=class extends y{constructor(){super(...arguments),this._formatted=null,this._fsPath=null}get fsPath(){return this._fsPath||(this._fsPath=Gu(this,!1)),this._fsPath}toString(e=!1){return e?Pg(this,!0):(this._formatted||(this._formatted=Pg(this,!1)),this._formatted)}toJSON(){const e={$mid:1};return this._fsPath&&(e.fsPath=this._fsPath,e._sep=Gy),this._formatted&&(e.external=this._formatted),this.path&&(e.path=this.path),this.scheme&&(e.scheme=this.scheme),this.authority&&(e.authority=this.authority),this.query&&(e.query=this.query),this.fragment&&(e.fragment=this.fragment),e}},Jy={58:"%3A",47:"%2F",63:"%3F",35:"%23",91:"%5B",93:"%5D",64:"%40",33:"%21",36:"%24",38:"%26",39:"%27",40:"%28",41:"%29",42:"%2A",43:"%2B",44:"%2C",59:"%3B",61:"%3D",32:"%20"};function Zy(e,t,i){let r,s=-1;for(let n=0;n<e.length;n++){const o=e.charCodeAt(n);if(o>=97&&o<=122||o>=65&&o<=90||o>=48&&o<=57||o===45||o===46||o===95||o===126||t&&o===47||i&&o===91||i&&o===93||i&&o===58)s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r!==void 0&&(r+=e.charAt(n));else{r===void 0&&(r=e.substr(0,n));const a=Jy[o];a!==void 0?(s!==-1&&(r+=encodeURIComponent(e.substring(s,n)),s=-1),r+=a):s===-1&&(s=n)}}return s!==-1&&(r+=encodeURIComponent(e.substring(s))),r!==void 0?r:e}function q3(e){let t;for(let i=0;i<e.length;i++){const r=e.charCodeAt(i);r===35||r===63?(t===void 0&&(t=e.substr(0,i)),t+=Jy[r]):t!==void 0&&(t+=e[i])}return t!==void 0?t:e}function Gu(e,t){let i;return e.authority&&e.path.length>1&&e.scheme==="file"?i=`//${e.authority}${e.path}`:e.path.charCodeAt(0)===47&&(e.path.charCodeAt(1)>=65&&e.path.charCodeAt(1)<=90||e.path.charCodeAt(1)>=97&&e.path.charCodeAt(1)<=122)&&e.path.charCodeAt(2)===58?t?i=e.path.substr(1):i=e.path[1].toLowerCase()+e.path.substr(2):i=e.path,ei&&(i=i.replace(/\//g,"\\")),i}function Pg(e,t){const i=t?q3:Zy;let r="",{scheme:s,authority:n,path:o,query:a,fragment:c}=e;if(s&&(r+=s,r+=":"),(n||s==="file")&&(r+=Ki,r+=Ki),n){let l=n.indexOf("@");if(l!==-1){const u=n.substr(0,l);n=n.substr(l+1),l=u.lastIndexOf(":"),l===-1?r+=i(u,!1,!1):(r+=i(u.substr(0,l),!1,!1),r+=":",r+=i(u.substr(l+1),!1,!0)),r+="@"}n=n.toLowerCase(),l=n.lastIndexOf(":"),l===-1?r+=i(n,!1,!0):(r+=i(n.substr(0,l),!1,!0),r+=n.substr(l))}if(o){if(o.length>=3&&o.charCodeAt(0)===47&&o.charCodeAt(2)===58){const l=o.charCodeAt(1);l>=65&&l<=90&&(o=`/${String.fromCharCode(l+32)}:${o.substr(3)}`)}else if(o.length>=2&&o.charCodeAt(1)===58){const l=o.charCodeAt(0);l>=65&&l<=90&&(o=`${String.fromCharCode(l+32)}:${o.substr(2)}`)}r+=i(o,!0,!1)}return a&&(r+="?",r+=i(a,!1,!1)),c&&(r+="#",r+=t?c:Zy(c,!1,!1)),r}function Yy(e){try{return decodeURIComponent(e)}catch{return e.length>3?e.substr(0,3)+Yy(e.substr(3)):e}}var Qy=/(%[0-9A-Za-z][0-9A-Za-z])+/g;function Ju(e){return e.match(Qy)?e.replace(Qy,t=>Yy(t)):e}var Xy=class F${static{this.count=0}constructor(t){this._proxyIdentifierBrand=void 0,this.sid=t,this.nid=++F$.count}},Ky=[];function N(e){const t=new Xy(e);return Ky[t.nid]=t,t}function Zu(e){return Ky[e].sid}var ni=class{constructor(e){this.value=e}},e4;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(e4||(e4={}));var t4;(function(e){e[e.UnknownInput=0]="UnknownInput",e[e.TextInput=1]="TextInput",e[e.TextDiffInput=2]="TextDiffInput",e[e.TextMergeInput=3]="TextMergeInput",e[e.NotebookInput=4]="NotebookInput",e[e.NotebookDiffInput=5]="NotebookDiffInput",e[e.CustomEditorInput=6]="CustomEditorInput",e[e.WebviewEditorInput=7]="WebviewEditorInput",e[e.TerminalEditorInput=8]="TerminalEditorInput",e[e.InteractiveEditorInput=9]="InteractiveEditorInput",e[e.ChatEditorInput=10]="ChatEditorInput",e[e.MultiDiffEditorInput=11]="MultiDiffEditorInput"})(t4||(t4={}));var i4;(function(e){e[e.TAB_OPEN=0]="TAB_OPEN",e[e.TAB_CLOSE=1]="TAB_CLOSE",e[e.TAB_UPDATE=2]="TAB_UPDATE",e[e.TAB_MOVE=3]="TAB_MOVE"})(i4||(i4={}));var r4;(function(e){e[e.Editable=0]="Editable",e[e.SupportsHotExit=1]="SupportsHotExit"})(r4||(r4={}));var s4;(function(e){e[e.Int8Array=1]="Int8Array",e[e.Uint8Array=2]="Uint8Array",e[e.Uint8ClampedArray=3]="Uint8ClampedArray",e[e.Int16Array=4]="Int16Array",e[e.Uint16Array=5]="Uint16Array",e[e.Int32Array=6]="Int32Array",e[e.Uint32Array=7]="Uint32Array",e[e.Float32Array=8]="Float32Array",e[e.Float64Array=9]="Float64Array",e[e.BigInt64Array=10]="BigInt64Array",e[e.BigUint64Array=11]="BigUint64Array"})(s4||(s4={}));var n4;(function(e){e[e.Text=1]="Text",e[e.Error=2]="Error",e[e.Rich=3]="Rich"})(n4||(n4={}));var o4;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(o4||(o4={}));var Ag;(function(e){e[e.None=0]="None",e[e.Process=1]="Process",e[e.Output=2]="Output",e[e.Hybrid=3]="Hybrid"})(Ag||(Ag={}));var RB=class O${static{this.a=0}static mixin(t){return t._id=O$.a++,t}},a4;(function(e){e.label="a",e.kind="b",e.detail="c",e.documentation="d",e.sortText="e",e.filterText="f",e.preselect="g",e.insertText="h",e.insertTextRules="i",e.range="j",e.commitCharacters="k",e.additionalTextEdits="l",e.kindModifier="m",e.commandIdent="n",e.commandId="o",e.commandArguments="p"})(a4||(a4={}));var c4;(function(e){e.defaultRanges="a",e.completions="b",e.isIncomplete="c",e.duration="d"})(c4||(c4={}));var l4;(function(e){e[e.Workspace=0]="Workspace",e[e.TextDocument=1]="TextDocument"})(l4||(l4={}));var J={MainThreadAuthentication:N("MainThreadAuthentication"),MainThreadBulkEdits:N("MainThreadBulkEdits"),MainThreadLanguageModels:N("MainThreadLanguageModels"),MainThreadEmbeddings:N("MainThreadEmbeddings"),MainThreadChatAgents2:N("MainThreadChatAgents2"),MainThreadCodeMapper:N("MainThreadCodeMapper"),MainThreadLanguageModelTools:N("MainThreadChatSkills"),MainThreadClipboard:N("MainThreadClipboard"),MainThreadCommands:N("MainThreadCommands"),MainThreadComments:N("MainThreadComments"),MainThreadConfiguration:N("MainThreadConfiguration"),MainThreadConsole:N("MainThreadConsole"),MainThreadDebugService:N("MainThreadDebugService"),MainThreadDecorations:N("MainThreadDecorations"),MainThreadDiagnostics:N("MainThreadDiagnostics"),MainThreadDialogs:N("MainThreadDiaglogs"),MainThreadDocuments:N("MainThreadDocuments"),MainThreadDocumentContentProviders:N("MainThreadDocumentContentProviders"),MainThreadTextEditors:N("MainThreadTextEditors"),MainThreadEditorInsets:N("MainThreadEditorInsets"),MainThreadEditorTabs:N("MainThreadEditorTabs"),MainThreadErrors:N("MainThreadErrors"),MainThreadTreeViews:N("MainThreadTreeViews"),MainThreadDownloadService:N("MainThreadDownloadService"),MainThreadLanguageFeatures:N("MainThreadLanguageFeatures"),MainThreadLanguages:N("MainThreadLanguages"),MainThreadLogger:N("MainThreadLogger"),MainThreadMessageService:N("MainThreadMessageService"),MainThreadOutputService:N("MainThreadOutputService"),MainThreadProgress:N("MainThreadProgress"),MainThreadQuickDiff:N("MainThreadQuickDiff"),MainThreadQuickOpen:N("MainThreadQuickOpen"),MainThreadStatusBar:N("MainThreadStatusBar"),MainThreadSecretState:N("MainThreadSecretState"),MainThreadStorage:N("MainThreadStorage"),MainThreadSpeech:N("MainThreadSpeechProvider"),MainThreadTelemetry:N("MainThreadTelemetry"),MainThreadTerminalService:N("MainThreadTerminalService"),MainThreadTerminalShellIntegration:N("MainThreadTerminalShellIntegration"),MainThreadWebviews:N("MainThreadWebviews"),MainThreadWebviewPanels:N("MainThreadWebviewPanels"),MainThreadWebviewViews:N("MainThreadWebviewViews"),MainThreadCustomEditors:N("MainThreadCustomEditors"),MainThreadUrls:N("MainThreadUrls"),MainThreadUriOpeners:N("MainThreadUriOpeners"),MainThreadProfileContentHandlers:N("MainThreadProfileContentHandlers"),MainThreadWorkspace:N("MainThreadWorkspace"),MainThreadFileSystem:N("MainThreadFileSystem"),MainThreadFileSystemEventService:N("MainThreadFileSystemEventService"),MainThreadExtensionService:N("MainThreadExtensionService"),MainThreadSCM:N("MainThreadSCM"),MainThreadSearch:N("MainThreadSearch"),MainThreadShare:N("MainThreadShare"),MainThreadTask:N("MainThreadTask"),MainThreadWindow:N("MainThreadWindow"),MainThreadLabelService:N("MainThreadLabelService"),MainThreadNotebook:N("MainThreadNotebook"),MainThreadNotebookDocuments:N("MainThreadNotebookDocumentsShape"),MainThreadNotebookEditors:N("MainThreadNotebookEditorsShape"),MainThreadNotebookKernels:N("MainThreadNotebookKernels"),MainThreadNotebookRenderers:N("MainThreadNotebookRenderers"),MainThreadInteractive:N("MainThreadInteractive"),MainThreadTheming:N("MainThreadTheming"),MainThreadTunnelService:N("MainThreadTunnelService"),MainThreadManagedSockets:N("MainThreadManagedSockets"),MainThreadTimeline:N("MainThreadTimeline"),MainThreadTesting:N("MainThreadTesting"),MainThreadLocalization:N("MainThreadLocalizationShape"),MainThreadMcp:N("MainThreadMcpShape"),MainThreadAiRelatedInformation:N("MainThreadAiRelatedInformation"),MainThreadAiEmbeddingVector:N("MainThreadAiEmbeddingVector"),MainThreadChatStatus:N("MainThreadChatStatus"),MainThreadAiSettingsSearch:N("MainThreadAiSettingsSearch")},ee={ExtHostCodeMapper:N("ExtHostCodeMapper"),ExtHostCommands:N("ExtHostCommands"),ExtHostConfiguration:N("ExtHostConfiguration"),ExtHostDiagnostics:N("ExtHostDiagnostics"),ExtHostDebugService:N("ExtHostDebugService"),ExtHostDecorations:N("ExtHostDecorations"),ExtHostDocumentsAndEditors:N("ExtHostDocumentsAndEditors"),ExtHostDocuments:N("ExtHostDocuments"),ExtHostDocumentContentProviders:N("ExtHostDocumentContentProviders"),ExtHostDocumentSaveParticipant:N("ExtHostDocumentSaveParticipant"),ExtHostEditors:N("ExtHostEditors"),ExtHostTreeViews:N("ExtHostTreeViews"),ExtHostFileSystem:N("ExtHostFileSystem"),ExtHostFileSystemInfo:N("ExtHostFileSystemInfo"),ExtHostFileSystemEventService:N("ExtHostFileSystemEventService"),ExtHostLanguages:N("ExtHostLanguages"),ExtHostLanguageFeatures:N("ExtHostLanguageFeatures"),ExtHostQuickOpen:N("ExtHostQuickOpen"),ExtHostQuickDiff:N("ExtHostQuickDiff"),ExtHostStatusBar:N("ExtHostStatusBar"),ExtHostShare:N("ExtHostShare"),ExtHostExtensionService:N("ExtHostExtensionService"),ExtHostLogLevelServiceShape:N("ExtHostLogLevelServiceShape"),ExtHostTerminalService:N("ExtHostTerminalService"),ExtHostTerminalShellIntegration:N("ExtHostTerminalShellIntegration"),ExtHostSCM:N("ExtHostSCM"),ExtHostSearch:N("ExtHostSearch"),ExtHostTask:N("ExtHostTask"),ExtHostWorkspace:N("ExtHostWorkspace"),ExtHostWindow:N("ExtHostWindow"),ExtHostWebviews:N("ExtHostWebviews"),ExtHostWebviewPanels:N("ExtHostWebviewPanels"),ExtHostCustomEditors:N("ExtHostCustomEditors"),ExtHostWebviewViews:N("ExtHostWebviewViews"),ExtHostEditorInsets:N("ExtHostEditorInsets"),ExtHostEditorTabs:N("ExtHostEditorTabs"),ExtHostProgress:N("ExtHostProgress"),ExtHostComments:N("ExtHostComments"),ExtHostSecretState:N("ExtHostSecretState"),ExtHostStorage:N("ExtHostStorage"),ExtHostUrls:N("ExtHostUrls"),ExtHostUriOpeners:N("ExtHostUriOpeners"),ExtHostProfileContentHandlers:N("ExtHostProfileContentHandlers"),ExtHostOutputService:N("ExtHostOutputService"),ExtHostLabelService:N("ExtHostLabelService"),ExtHostNotebook:N("ExtHostNotebook"),ExtHostNotebookDocuments:N("ExtHostNotebookDocuments"),ExtHostNotebookEditors:N("ExtHostNotebookEditors"),ExtHostNotebookKernels:N("ExtHostNotebookKernels"),ExtHostNotebookRenderers:N("ExtHostNotebookRenderers"),ExtHostNotebookDocumentSaveParticipant:N("ExtHostNotebookDocumentSaveParticipant"),ExtHostInteractive:N("ExtHostInteractive"),ExtHostChatAgents2:N("ExtHostChatAgents"),ExtHostLanguageModelTools:N("ExtHostChatSkills"),ExtHostChatProvider:N("ExtHostChatProvider"),ExtHostSpeech:N("ExtHostSpeech"),ExtHostEmbeddings:N("ExtHostEmbeddings"),ExtHostAiRelatedInformation:N("ExtHostAiRelatedInformation"),ExtHostAiEmbeddingVector:N("ExtHostAiEmbeddingVector"),ExtHostAiSettingsSearch:N("ExtHostAiSettingsSearch"),ExtHostTheming:N("ExtHostTheming"),ExtHostTunnelService:N("ExtHostTunnelService"),ExtHostManagedSockets:N("ExtHostManagedSockets"),ExtHostAuthentication:N("ExtHostAuthentication"),ExtHostTimeline:N("ExtHostTimeline"),ExtHostTesting:N("ExtHostTesting"),ExtHostTelemetry:N("ExtHostTelemetry"),ExtHostLocalization:N("ExtHostLocalization"),ExtHostMcp:N("ExtHostMcp")},u4=Object.freeze(function(e,t){const i=setTimeout(e.bind(t),0);return{dispose(){clearTimeout(i)}}}),et;(function(e){function t(i){return i===e.None||i===e.Cancelled||i instanceof Yu?!0:!i||typeof i!="object"?!1:typeof i.isCancellationRequested=="boolean"&&typeof i.onCancellationRequested=="function"}e.isCancellationToken=t,e.None=Object.freeze({isCancellationRequested:!1,onCancellationRequested:lt.None}),e.Cancelled=Object.freeze({isCancellationRequested:!0,onCancellationRequested:u4})})(et||(et={}));var Yu=class{constructor(){this.a=!1,this.b=null}cancel(){this.a||(this.a=!0,this.b&&(this.b.fire(void 0),this.dispose()))}get isCancellationRequested(){return this.a}get onCancellationRequested(){return this.a?u4:(this.b||(this.b=new P),this.b.event)}dispose(){this.b&&(this.b.dispose(),this.b=null)}},at=class{constructor(e){this.f=void 0,this.g=void 0,this.g=e&&e.onCancellationRequested(this.cancel,this)}get token(){return this.f||(this.f=new Yu),this.f}cancel(){this.f?this.f instanceof Yu&&this.f.cancel():this.f=et.Cancelled}dispose(e=!1){e&&this.cancel(),this.g?.dispose(),this.f?this.f instanceof Yu&&this.f.dispose():this.f=et.None}};function G3(e){return e}var J3=class{constructor(e,t){this.a=void 0,this.b=void 0,typeof e=="function"?(this.c=e,this.d=G3):(this.c=t,this.d=e.getCacheKey)}get(e){const t=this.d(e);return this.b!==t&&(this.b=t,this.a=this.c(e)),this.a}};function Qu(e){return!e||typeof e!="string"?!0:e.trim().length===0}var Z3=/{([^}]+)}/g;function h4(e,t){return Object.keys(t).length===0?e:e.replace(Z3,(i,r)=>t[r]??i)}function pn(e){return e.replace(/[\\\{\}\*\+\?\|\^\$\.\[\]\(\)]/g,"\\$&")}function Y3(e,t){let i=0,r=e.indexOf(t);for(;r!==-1;)i++,r=e.indexOf(t,r+t.length);return i}function Q3(e,t){if(!e||!t)return e;const i=t.length;if(i===0||e.length===0)return e;let r=0;for(;e.indexOf(t,r)===r;)r=r+i;return e.substring(r)}function Tg(e,t){if(!e||!t)return e;const i=t.length,r=e.length;if(i===0||r===0)return e;let s=r,n=-1;for(;n=e.lastIndexOf(t,s-1),!(n===-1||n+i!==s);){if(n===0)return"";s=n}return e.substring(0,s)}function X3(e,t,i={}){if(!e)throw new Error("Cannot create regex from empty string");t||(e=pn(e)),i.wholeWord&&(/\B/.test(e.charAt(0))||(e="\\b"+e),/\B/.test(e.charAt(e.length-1))||(e=e+"\\b"));let r="";return i.global&&(r+="g"),i.matchCase||(r+="i"),i.multiline&&(r+="m"),i.unicode&&(r+="u"),new RegExp(e,r)}function d4(e){return e.source==="^"||e.source==="^$"||e.source==="$"||e.source==="^\\s*$"?!1:!!(e.exec("")&&e.lastIndex===0)}function f4(e){return e.split(/\r\n|\r|\n/)}function Rg(e){for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r!==32&&r!==9)return t}return-1}function K3(e,t=e.length-1){for(let i=t;i>=0;i--){const r=e.charCodeAt(i);if(r!==32&&r!==9)return i}return-1}function gn(e,t){return e<t?-1:e>t?1:0}function Lg(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){const c=e.charCodeAt(i),l=t.charCodeAt(s);if(c<l)return-1;if(c>l)return 1}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function Ng(e,t){return lc(e,t,0,e.length,0,t.length)}function lc(e,t,i=0,r=e.length,s=0,n=t.length){for(;i<r&&s<n;i++,s++){let c=e.charCodeAt(i),l=t.charCodeAt(s);if(c===l)continue;if(c>=128||l>=128)return Lg(e.toLowerCase(),t.toLowerCase(),i,r,s,n);p4(c)&&(c-=32),p4(l)&&(l-=32);const u=c-l;if(u!==0)return u}const o=r-i,a=n-s;return o<a?-1:o>a?1:0}function p4(e){return e>=97&&e<=122}function ks(e,t){return e.length===t.length&&lc(e,t)===0}function Mg(e,t){const i=t.length;return t.length>e.length?!1:lc(e,t,0,i)===0}function eD(e,t){const i=Math.min(e.length,t.length);let r;for(r=0;r<i;r++)if(e.charCodeAt(r)!==t.charCodeAt(r))return r;return i}function Xu(e){return 55296<=e&&e<=56319}function Ku(e){return 56320<=e&&e<=57343}function Fg(e,t){return(e-55296<<10)+(t-56320)+65536}function g4(e,t,i){const r=e.charCodeAt(i);if(Xu(r)&&i+1<t){const s=e.charCodeAt(i+1);if(Ku(s))return Fg(r,s)}return r}function tD(e,t){const i=e.charCodeAt(t-1);if(Ku(i)&&t>1){const r=e.charCodeAt(t-2);if(Xu(r))return Fg(r,i)}return i}var iD=class{get offset(){return this.e}constructor(e,t=0){this.c=e,this.d=e.length,this.e=t}setOffset(e){this.e=e}prevCodePoint(){const e=tD(this.c,this.e);return this.e-=e>=65536?2:1,e}nextCodePoint(){const e=g4(this.c,this.d,this.e);return this.e+=e>=65536?2:1,e}eol(){return this.e>=this.d}},rD=class{get offset(){return this.c.offset}constructor(e,t=0){this.c=new iD(e,t)}nextGraphemeLength(){const e=E4.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.nextCodePoint());for(;!t.eol();){const s=t.offset,n=e.getGraphemeBreakType(t.nextCodePoint());if(y4(r,n)){t.setOffset(s);break}r=n}return t.offset-i}prevGraphemeLength(){const e=E4.getInstance(),t=this.c,i=t.offset;let r=e.getGraphemeBreakType(t.prevCodePoint());for(;t.offset>0;){const s=t.offset,n=e.getGraphemeBreakType(t.prevCodePoint());if(y4(n,r)){t.setOffset(s);break}r=n}return i-t.offset}eol(){return this.c.eol()}};function m4(e,t){return new rD(e,t).nextGraphemeLength()}var Og=void 0;function sD(){return/(?:[\u05BE\u05C0\u05C3\u05C6\u05D0-\u05F4\u0608\u060B\u060D\u061B-\u064A\u066D-\u066F\u0671-\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u0710\u0712-\u072F\u074D-\u07A5\u07B1-\u07EA\u07F4\u07F5\u07FA\u07FE-\u0815\u081A\u0824\u0828\u0830-\u0858\u085E-\u088E\u08A0-\u08C9\u200F\uFB1D\uFB1F-\uFB28\uFB2A-\uFD3D\uFD50-\uFDC7\uFDF0-\uFDFC\uFE70-\uFEFC]|\uD802[\uDC00-\uDD1B\uDD20-\uDE00\uDE10-\uDE35\uDE40-\uDEE4\uDEEB-\uDF35\uDF40-\uDFFF]|\uD803[\uDC00-\uDD23\uDE80-\uDEA9\uDEAD-\uDF45\uDF51-\uDF81\uDF86-\uDFF6]|\uD83A[\uDC00-\uDCCF\uDD00-\uDD43\uDD4B-\uDFFF]|\uD83B[\uDC00-\uDEBB])/}function v4(e){return Og||(Og=sD()),Og.test(e)}var nD=/^[\t\n\r\x20-\x7E]*$/;function oD(e){return nD.test(e)}var aD=/[\u2028\u2029]/;function w4(e){return aD.test(e)}var cD=/(?:\x1b\[|\x9b)[=?>!]?[\d;:]*["$#'* ]?[a-zA-Z@^`{}|~]/,lD=/(?:\x1b\]|\x9d).*?(?:\x1b\\|\x07|\x9c)/,uD=/\x1b(?:[ #%\(\)\*\+\-\.\/]?[a-zA-Z0-9\|}~@])/,LB=new RegExp("(?:"+[cD.source,lD.source,uD.source].join("|")+")","g"),hD="\uFEFF";function dD(e){return!!(e&&e.length>0&&e.charCodeAt(0)===65279)}function b4(e,t=!1){return e?(t&&(e=e.replace(/\\./g,"")),e.toLowerCase()!==e):!1}function fD(e,t=1){if(t===0)return"";let i=-1;do i=e.indexOf(`
`,i+1),t--;while(t>0&&i>=0);return i===-1?e:(e[i-1]==="\r"&&i--,e.substr(0,i))}function y4(e,t){return e===0?t!==5&&t!==7:e===2&&t===3?!1:e===4||e===2||e===3||t===4||t===2||t===3?!0:!(e===8&&(t===8||t===9||t===11||t===12)||(e===11||e===9)&&(t===9||t===10)||(e===12||e===10)&&t===10||t===5||t===13||t===7||e===1||e===13&&t===14||e===6&&t===6)}var x4;(function(e){e[e.Other=0]="Other",e[e.Prepend=1]="Prepend",e[e.CR=2]="CR",e[e.LF=3]="LF",e[e.Control=4]="Control",e[e.Extend=5]="Extend",e[e.Regional_Indicator=6]="Regional_Indicator",e[e.SpacingMark=7]="SpacingMark",e[e.L=8]="L",e[e.V=9]="V",e[e.T=10]="T",e[e.LV=11]="LV",e[e.LVT=12]="LVT",e[e.ZWJ=13]="ZWJ",e[e.Extended_Pictographic=14]="Extended_Pictographic"})(x4||(x4={}));var E4=class mu{static{this.c=null}static getInstance(){return mu.c||(mu.c=new mu),mu.c}constructor(){this.d=pD()}getGraphemeBreakType(t){if(t<32)return t===10?3:t===13?2:4;if(t<127)return 0;const i=this.d,r=i.length/3;let s=1;for(;s<=r;)if(t<i[3*s])s=2*s;else if(t>i[3*s+1])s=2*s+1;else return i[3*s+2];return 0}};function pD(){return JSON.parse("[0,0,0,51229,51255,12,44061,44087,12,127462,127487,6,7083,7085,5,47645,47671,12,54813,54839,12,128678,128678,14,3270,3270,5,9919,9923,14,45853,45879,12,49437,49463,12,53021,53047,12,71216,71218,7,128398,128399,14,129360,129374,14,2519,2519,5,4448,4519,9,9742,9742,14,12336,12336,14,44957,44983,12,46749,46775,12,48541,48567,12,50333,50359,12,52125,52151,12,53917,53943,12,69888,69890,5,73018,73018,5,127990,127990,14,128558,128559,14,128759,128760,14,129653,129655,14,2027,2035,5,2891,2892,7,3761,3761,5,6683,6683,5,8293,8293,4,9825,9826,14,9999,9999,14,43452,43453,5,44509,44535,12,45405,45431,12,46301,46327,12,47197,47223,12,48093,48119,12,48989,49015,12,49885,49911,12,50781,50807,12,51677,51703,12,52573,52599,12,53469,53495,12,54365,54391,12,65279,65279,4,70471,70472,7,72145,72147,7,119173,119179,5,127799,127818,14,128240,128244,14,128512,128512,14,128652,128652,14,128721,128722,14,129292,129292,14,129445,129450,14,129734,129743,14,1476,1477,5,2366,2368,7,2750,2752,7,3076,3076,5,3415,3415,5,4141,4144,5,6109,6109,5,6964,6964,5,7394,7400,5,9197,9198,14,9770,9770,14,9877,9877,14,9968,9969,14,10084,10084,14,43052,43052,5,43713,43713,5,44285,44311,12,44733,44759,12,45181,45207,12,45629,45655,12,46077,46103,12,46525,46551,12,46973,46999,12,47421,47447,12,47869,47895,12,48317,48343,12,48765,48791,12,49213,49239,12,49661,49687,12,50109,50135,12,50557,50583,12,51005,51031,12,51453,51479,12,51901,51927,12,52349,52375,12,52797,52823,12,53245,53271,12,53693,53719,12,54141,54167,12,54589,54615,12,55037,55063,12,69506,69509,5,70191,70193,5,70841,70841,7,71463,71467,5,72330,72342,5,94031,94031,5,123628,123631,5,127763,127765,14,127941,127941,14,128043,128062,14,128302,128317,14,128465,128467,14,128539,128539,14,128640,128640,14,128662,128662,14,128703,128703,14,128745,128745,14,129004,129007,14,129329,129330,14,129402,129402,14,129483,129483,14,129686,129704,14,130048,131069,14,173,173,4,1757,1757,1,2200,2207,5,2434,2435,7,2631,2632,5,2817,2817,5,3008,3008,5,3201,3201,5,3387,3388,5,3542,3542,5,3902,3903,7,4190,4192,5,6002,6003,5,6439,6440,5,6765,6770,7,7019,7027,5,7154,7155,7,8205,8205,13,8505,8505,14,9654,9654,14,9757,9757,14,9792,9792,14,9852,9853,14,9890,9894,14,9937,9937,14,9981,9981,14,10035,10036,14,11035,11036,14,42654,42655,5,43346,43347,7,43587,43587,5,44006,44007,7,44173,44199,12,44397,44423,12,44621,44647,12,44845,44871,12,45069,45095,12,45293,45319,12,45517,45543,12,45741,45767,12,45965,45991,12,46189,46215,12,46413,46439,12,46637,46663,12,46861,46887,12,47085,47111,12,47309,47335,12,47533,47559,12,47757,47783,12,47981,48007,12,48205,48231,12,48429,48455,12,48653,48679,12,48877,48903,12,49101,49127,12,49325,49351,12,49549,49575,12,49773,49799,12,49997,50023,12,50221,50247,12,50445,50471,12,50669,50695,12,50893,50919,12,51117,51143,12,51341,51367,12,51565,51591,12,51789,51815,12,52013,52039,12,52237,52263,12,52461,52487,12,52685,52711,12,52909,52935,12,53133,53159,12,53357,53383,12,53581,53607,12,53805,53831,12,54029,54055,12,54253,54279,12,54477,54503,12,54701,54727,12,54925,54951,12,55149,55175,12,68101,68102,5,69762,69762,7,70067,70069,7,70371,70378,5,70720,70721,7,71087,71087,5,71341,71341,5,71995,71996,5,72249,72249,7,72850,72871,5,73109,73109,5,118576,118598,5,121505,121519,5,127245,127247,14,127568,127569,14,127777,127777,14,127872,127891,14,127956,127967,14,128015,128016,14,128110,128172,14,128259,128259,14,128367,128368,14,128424,128424,14,128488,128488,14,128530,128532,14,128550,128551,14,128566,128566,14,128647,128647,14,128656,128656,14,128667,128673,14,128691,128693,14,128715,128715,14,128728,128732,14,128752,128752,14,128765,128767,14,129096,129103,14,129311,129311,14,129344,129349,14,129394,129394,14,129413,129425,14,129466,129471,14,129511,129535,14,129664,129666,14,129719,129722,14,129760,129767,14,917536,917631,5,13,13,2,1160,1161,5,1564,1564,4,1807,1807,1,2085,2087,5,2307,2307,7,2382,2383,7,2497,2500,5,2563,2563,7,2677,2677,5,2763,2764,7,2879,2879,5,2914,2915,5,3021,3021,5,3142,3144,5,3263,3263,5,3285,3286,5,3398,3400,7,3530,3530,5,3633,3633,5,3864,3865,5,3974,3975,5,4155,4156,7,4229,4230,5,5909,5909,7,6078,6085,7,6277,6278,5,6451,6456,7,6744,6750,5,6846,6846,5,6972,6972,5,7074,7077,5,7146,7148,7,7222,7223,5,7416,7417,5,8234,8238,4,8417,8417,5,9000,9000,14,9203,9203,14,9730,9731,14,9748,9749,14,9762,9763,14,9776,9783,14,9800,9811,14,9831,9831,14,9872,9873,14,9882,9882,14,9900,9903,14,9929,9933,14,9941,9960,14,9974,9974,14,9989,9989,14,10006,10006,14,10062,10062,14,10160,10160,14,11647,11647,5,12953,12953,14,43019,43019,5,43232,43249,5,43443,43443,5,43567,43568,7,43696,43696,5,43765,43765,7,44013,44013,5,44117,44143,12,44229,44255,12,44341,44367,12,44453,44479,12,44565,44591,12,44677,44703,12,44789,44815,12,44901,44927,12,45013,45039,12,45125,45151,12,45237,45263,12,45349,45375,12,45461,45487,12,45573,45599,12,45685,45711,12,45797,45823,12,45909,45935,12,46021,46047,12,46133,46159,12,46245,46271,12,46357,46383,12,46469,46495,12,46581,46607,12,46693,46719,12,46805,46831,12,46917,46943,12,47029,47055,12,47141,47167,12,47253,47279,12,47365,47391,12,47477,47503,12,47589,47615,12,47701,47727,12,47813,47839,12,47925,47951,12,48037,48063,12,48149,48175,12,48261,48287,12,48373,48399,12,48485,48511,12,48597,48623,12,48709,48735,12,48821,48847,12,48933,48959,12,49045,49071,12,49157,49183,12,49269,49295,12,49381,49407,12,49493,49519,12,49605,49631,12,49717,49743,12,49829,49855,12,49941,49967,12,50053,50079,12,50165,50191,12,50277,50303,12,50389,50415,12,50501,50527,12,50613,50639,12,50725,50751,12,50837,50863,12,50949,50975,12,51061,51087,12,51173,51199,12,51285,51311,12,51397,51423,12,51509,51535,12,51621,51647,12,51733,51759,12,51845,51871,12,51957,51983,12,52069,52095,12,52181,52207,12,52293,52319,12,52405,52431,12,52517,52543,12,52629,52655,12,52741,52767,12,52853,52879,12,52965,52991,12,53077,53103,12,53189,53215,12,53301,53327,12,53413,53439,12,53525,53551,12,53637,53663,12,53749,53775,12,53861,53887,12,53973,53999,12,54085,54111,12,54197,54223,12,54309,54335,12,54421,54447,12,54533,54559,12,54645,54671,12,54757,54783,12,54869,54895,12,54981,55007,12,55093,55119,12,55243,55291,10,66045,66045,5,68325,68326,5,69688,69702,5,69817,69818,5,69957,69958,7,70089,70092,5,70198,70199,5,70462,70462,5,70502,70508,5,70750,70750,5,70846,70846,7,71100,71101,5,71230,71230,7,71351,71351,5,71737,71738,5,72000,72000,7,72160,72160,5,72273,72278,5,72752,72758,5,72882,72883,5,73031,73031,5,73461,73462,7,94192,94193,7,119149,119149,7,121403,121452,5,122915,122916,5,126980,126980,14,127358,127359,14,127535,127535,14,127759,127759,14,127771,127771,14,127792,127793,14,127825,127867,14,127897,127899,14,127945,127945,14,127985,127986,14,128000,128007,14,128021,128021,14,128066,128100,14,128184,128235,14,128249,128252,14,128266,128276,14,128335,128335,14,128379,128390,14,128407,128419,14,128444,128444,14,128481,128481,14,128499,128499,14,128526,128526,14,128536,128536,14,128543,128543,14,128556,128556,14,128564,128564,14,128577,128580,14,128643,128645,14,128649,128649,14,128654,128654,14,128660,128660,14,128664,128664,14,128675,128675,14,128686,128689,14,128695,128696,14,128705,128709,14,128717,128719,14,128725,128725,14,128736,128741,14,128747,128748,14,128755,128755,14,128762,128762,14,128981,128991,14,129009,129023,14,129160,129167,14,129296,129304,14,129320,129327,14,129340,129342,14,129356,129356,14,129388,129392,14,129399,129400,14,129404,129407,14,129432,129442,14,129454,129455,14,129473,129474,14,129485,129487,14,129648,129651,14,129659,129660,14,129671,129679,14,129709,129711,14,129728,129730,14,129751,129753,14,129776,129782,14,917505,917505,4,917760,917999,5,10,10,3,127,159,4,768,879,5,1471,1471,5,1536,1541,1,1648,1648,5,1767,1768,5,1840,1866,5,2070,2073,5,2137,2139,5,2274,2274,1,2363,2363,7,2377,2380,7,2402,2403,5,2494,2494,5,2507,2508,7,2558,2558,5,2622,2624,7,2641,2641,5,2691,2691,7,2759,2760,5,2786,2787,5,2876,2876,5,2881,2884,5,2901,2902,5,3006,3006,5,3014,3016,7,3072,3072,5,3134,3136,5,3157,3158,5,3260,3260,5,3266,3266,5,3274,3275,7,3328,3329,5,3391,3392,7,3405,3405,5,3457,3457,5,3536,3537,7,3551,3551,5,3636,3642,5,3764,3772,5,3895,3895,5,3967,3967,7,3993,4028,5,4146,4151,5,4182,4183,7,4226,4226,5,4253,4253,5,4957,4959,5,5940,5940,7,6070,6070,7,6087,6088,7,6158,6158,4,6432,6434,5,6448,6449,7,6679,6680,5,6742,6742,5,6754,6754,5,6783,6783,5,6912,6915,5,6966,6970,5,6978,6978,5,7042,7042,7,7080,7081,5,7143,7143,7,7150,7150,7,7212,7219,5,7380,7392,5,7412,7412,5,8203,8203,4,8232,8232,4,8265,8265,14,8400,8412,5,8421,8432,5,8617,8618,14,9167,9167,14,9200,9200,14,9410,9410,14,9723,9726,14,9733,9733,14,9745,9745,14,9752,9752,14,9760,9760,14,9766,9766,14,9774,9774,14,9786,9786,14,9794,9794,14,9823,9823,14,9828,9828,14,9833,9850,14,9855,9855,14,9875,9875,14,9880,9880,14,9885,9887,14,9896,9897,14,9906,9916,14,9926,9927,14,9935,9935,14,9939,9939,14,9962,9962,14,9972,9972,14,9978,9978,14,9986,9986,14,9997,9997,14,10002,10002,14,10017,10017,14,10055,10055,14,10071,10071,14,10133,10135,14,10548,10549,14,11093,11093,14,12330,12333,5,12441,12442,5,42608,42610,5,43010,43010,5,43045,43046,5,43188,43203,7,43302,43309,5,43392,43394,5,43446,43449,5,43493,43493,5,43571,43572,7,43597,43597,7,43703,43704,5,43756,43757,5,44003,44004,7,44009,44010,7,44033,44059,12,44089,44115,12,44145,44171,12,44201,44227,12,44257,44283,12,44313,44339,12,44369,44395,12,44425,44451,12,44481,44507,12,44537,44563,12,44593,44619,12,44649,44675,12,44705,44731,12,44761,44787,12,44817,44843,12,44873,44899,12,44929,44955,12,44985,45011,12,45041,45067,12,45097,45123,12,45153,45179,12,45209,45235,12,45265,45291,12,45321,45347,12,45377,45403,12,45433,45459,12,45489,45515,12,45545,45571,12,45601,45627,12,45657,45683,12,45713,45739,12,45769,45795,12,45825,45851,12,45881,45907,12,45937,45963,12,45993,46019,12,46049,46075,12,46105,46131,12,46161,46187,12,46217,46243,12,46273,46299,12,46329,46355,12,46385,46411,12,46441,46467,12,46497,46523,12,46553,46579,12,46609,46635,12,46665,46691,12,46721,46747,12,46777,46803,12,46833,46859,12,46889,46915,12,46945,46971,12,47001,47027,12,47057,47083,12,47113,47139,12,47169,47195,12,47225,47251,12,47281,47307,12,47337,47363,12,47393,47419,12,47449,47475,12,47505,47531,12,47561,47587,12,47617,47643,12,47673,47699,12,47729,47755,12,47785,47811,12,47841,47867,12,47897,47923,12,47953,47979,12,48009,48035,12,48065,48091,12,48121,48147,12,48177,48203,12,48233,48259,12,48289,48315,12,48345,48371,12,48401,48427,12,48457,48483,12,48513,48539,12,48569,48595,12,48625,48651,12,48681,48707,12,48737,48763,12,48793,48819,12,48849,48875,12,48905,48931,12,48961,48987,12,49017,49043,12,49073,49099,12,49129,49155,12,49185,49211,12,49241,49267,12,49297,49323,12,49353,49379,12,49409,49435,12,49465,49491,12,49521,49547,12,49577,49603,12,49633,49659,12,49689,49715,12,49745,49771,12,49801,49827,12,49857,49883,12,49913,49939,12,49969,49995,12,50025,50051,12,50081,50107,12,50137,50163,12,50193,50219,12,50249,50275,12,50305,50331,12,50361,50387,12,50417,50443,12,50473,50499,12,50529,50555,12,50585,50611,12,50641,50667,12,50697,50723,12,50753,50779,12,50809,50835,12,50865,50891,12,50921,50947,12,50977,51003,12,51033,51059,12,51089,51115,12,51145,51171,12,51201,51227,12,51257,51283,12,51313,51339,12,51369,51395,12,51425,51451,12,51481,51507,12,51537,51563,12,51593,51619,12,51649,51675,12,51705,51731,12,51761,51787,12,51817,51843,12,51873,51899,12,51929,51955,12,51985,52011,12,52041,52067,12,52097,52123,12,52153,52179,12,52209,52235,12,52265,52291,12,52321,52347,12,52377,52403,12,52433,52459,12,52489,52515,12,52545,52571,12,52601,52627,12,52657,52683,12,52713,52739,12,52769,52795,12,52825,52851,12,52881,52907,12,52937,52963,12,52993,53019,12,53049,53075,12,53105,53131,12,53161,53187,12,53217,53243,12,53273,53299,12,53329,53355,12,53385,53411,12,53441,53467,12,53497,53523,12,53553,53579,12,53609,53635,12,53665,53691,12,53721,53747,12,53777,53803,12,53833,53859,12,53889,53915,12,53945,53971,12,54001,54027,12,54057,54083,12,54113,54139,12,54169,54195,12,54225,54251,12,54281,54307,12,54337,54363,12,54393,54419,12,54449,54475,12,54505,54531,12,54561,54587,12,54617,54643,12,54673,54699,12,54729,54755,12,54785,54811,12,54841,54867,12,54897,54923,12,54953,54979,12,55009,55035,12,55065,55091,12,55121,55147,12,55177,55203,12,65024,65039,5,65520,65528,4,66422,66426,5,68152,68154,5,69291,69292,5,69633,69633,5,69747,69748,5,69811,69814,5,69826,69826,5,69932,69932,7,70016,70017,5,70079,70080,7,70095,70095,5,70196,70196,5,70367,70367,5,70402,70403,7,70464,70464,5,70487,70487,5,70709,70711,7,70725,70725,7,70833,70834,7,70843,70844,7,70849,70849,7,71090,71093,5,71103,71104,5,71227,71228,7,71339,71339,5,71344,71349,5,71458,71461,5,71727,71735,5,71985,71989,7,71998,71998,5,72002,72002,7,72154,72155,5,72193,72202,5,72251,72254,5,72281,72283,5,72344,72345,5,72766,72766,7,72874,72880,5,72885,72886,5,73023,73029,5,73104,73105,5,73111,73111,5,92912,92916,5,94095,94098,5,113824,113827,4,119142,119142,7,119155,119162,4,119362,119364,5,121476,121476,5,122888,122904,5,123184,123190,5,125252,125258,5,127183,127183,14,127340,127343,14,127377,127386,14,127491,127503,14,127548,127551,14,127744,127756,14,127761,127761,14,127769,127769,14,127773,127774,14,127780,127788,14,127796,127797,14,127820,127823,14,127869,127869,14,127894,127895,14,127902,127903,14,127943,127943,14,127947,127950,14,127972,127972,14,127988,127988,14,127992,127994,14,128009,128011,14,128019,128019,14,128023,128041,14,128064,128064,14,128102,128107,14,128174,128181,14,128238,128238,14,128246,128247,14,128254,128254,14,128264,128264,14,128278,128299,14,128329,128330,14,128348,128359,14,128371,128377,14,128392,128393,14,128401,128404,14,128421,128421,14,128433,128434,14,128450,128452,14,128476,128478,14,128483,128483,14,128495,128495,14,128506,128506,14,128519,128520,14,128528,128528,14,128534,128534,14,128538,128538,14,128540,128542,14,128544,128549,14,128552,128555,14,128557,128557,14,128560,128563,14,128565,128565,14,128567,128576,14,128581,128591,14,128641,128642,14,128646,128646,14,128648,128648,14,128650,128651,14,128653,128653,14,128655,128655,14,128657,128659,14,128661,128661,14,128663,128663,14,128665,128666,14,128674,128674,14,128676,128677,14,128679,128685,14,128690,128690,14,128694,128694,14,128697,128702,14,128704,128704,14,128710,128714,14,128716,128716,14,128720,128720,14,128723,128724,14,128726,128727,14,128733,128735,14,128742,128744,14,128746,128746,14,128749,128751,14,128753,128754,14,128756,128758,14,128761,128761,14,128763,128764,14,128884,128895,14,128992,129003,14,129008,129008,14,129036,129039,14,129114,129119,14,129198,129279,14,129293,129295,14,129305,129310,14,129312,129319,14,129328,129328,14,129331,129338,14,129343,129343,14,129351,129355,14,129357,129359,14,129375,129387,14,129393,129393,14,129395,129398,14,129401,129401,14,129403,129403,14,129408,129412,14,129426,129431,14,129443,129444,14,129451,129453,14,129456,129465,14,129472,129472,14,129475,129482,14,129484,129484,14,129488,129510,14,129536,129647,14,129652,129652,14,129656,129658,14,129661,129663,14,129667,129670,14,129680,129685,14,129705,129708,14,129712,129718,14,129723,129727,14,129731,129733,14,129744,129750,14,129754,129759,14,129768,129775,14,129783,129791,14,917504,917504,4,917506,917535,4,917632,917759,4,918000,921599,4,0,9,4,11,12,4,14,31,4,169,169,14,174,174,14,1155,1159,5,1425,1469,5,1473,1474,5,1479,1479,5,1552,1562,5,1611,1631,5,1750,1756,5,1759,1764,5,1770,1773,5,1809,1809,5,1958,1968,5,2045,2045,5,2075,2083,5,2089,2093,5,2192,2193,1,2250,2273,5,2275,2306,5,2362,2362,5,2364,2364,5,2369,2376,5,2381,2381,5,2385,2391,5,2433,2433,5,2492,2492,5,2495,2496,7,2503,2504,7,2509,2509,5,2530,2531,5,2561,2562,5,2620,2620,5,2625,2626,5,2635,2637,5,2672,2673,5,2689,2690,5,2748,2748,5,2753,2757,5,2761,2761,7,2765,2765,5,2810,2815,5,2818,2819,7,2878,2878,5,2880,2880,7,2887,2888,7,2893,2893,5,2903,2903,5,2946,2946,5,3007,3007,7,3009,3010,7,3018,3020,7,3031,3031,5,3073,3075,7,3132,3132,5,3137,3140,7,3146,3149,5,3170,3171,5,3202,3203,7,3262,3262,7,3264,3265,7,3267,3268,7,3271,3272,7,3276,3277,5,3298,3299,5,3330,3331,7,3390,3390,5,3393,3396,5,3402,3404,7,3406,3406,1,3426,3427,5,3458,3459,7,3535,3535,5,3538,3540,5,3544,3550,7,3570,3571,7,3635,3635,7,3655,3662,5,3763,3763,7,3784,3789,5,3893,3893,5,3897,3897,5,3953,3966,5,3968,3972,5,3981,3991,5,4038,4038,5,4145,4145,7,4153,4154,5,4157,4158,5,4184,4185,5,4209,4212,5,4228,4228,7,4237,4237,5,4352,4447,8,4520,4607,10,5906,5908,5,5938,5939,5,5970,5971,5,6068,6069,5,6071,6077,5,6086,6086,5,6089,6099,5,6155,6157,5,6159,6159,5,6313,6313,5,6435,6438,7,6441,6443,7,6450,6450,5,6457,6459,5,6681,6682,7,6741,6741,7,6743,6743,7,6752,6752,5,6757,6764,5,6771,6780,5,6832,6845,5,6847,6862,5,6916,6916,7,6965,6965,5,6971,6971,7,6973,6977,7,6979,6980,7,7040,7041,5,7073,7073,7,7078,7079,7,7082,7082,7,7142,7142,5,7144,7145,5,7149,7149,5,7151,7153,5,7204,7211,7,7220,7221,7,7376,7378,5,7393,7393,7,7405,7405,5,7415,7415,7,7616,7679,5,8204,8204,5,8206,8207,4,8233,8233,4,8252,8252,14,8288,8292,4,8294,8303,4,8413,8416,5,8418,8420,5,8482,8482,14,8596,8601,14,8986,8987,14,9096,9096,14,9193,9196,14,9199,9199,14,9201,9202,14,9208,9210,14,9642,9643,14,9664,9664,14,9728,9729,14,9732,9732,14,9735,9741,14,9743,9744,14,9746,9746,14,9750,9751,14,9753,9756,14,9758,9759,14,9761,9761,14,9764,9765,14,9767,9769,14,9771,9773,14,9775,9775,14,9784,9785,14,9787,9791,14,9793,9793,14,9795,9799,14,9812,9822,14,9824,9824,14,9827,9827,14,9829,9830,14,9832,9832,14,9851,9851,14,9854,9854,14,9856,9861,14,9874,9874,14,9876,9876,14,9878,9879,14,9881,9881,14,9883,9884,14,9888,9889,14,9895,9895,14,9898,9899,14,9904,9905,14,9917,9918,14,9924,9925,14,9928,9928,14,9934,9934,14,9936,9936,14,9938,9938,14,9940,9940,14,9961,9961,14,9963,9967,14,9970,9971,14,9973,9973,14,9975,9977,14,9979,9980,14,9982,9985,14,9987,9988,14,9992,9996,14,9998,9998,14,10000,10001,14,10004,10004,14,10013,10013,14,10024,10024,14,10052,10052,14,10060,10060,14,10067,10069,14,10083,10083,14,10085,10087,14,10145,10145,14,10175,10175,14,11013,11015,14,11088,11088,14,11503,11505,5,11744,11775,5,12334,12335,5,12349,12349,14,12951,12951,14,42607,42607,5,42612,42621,5,42736,42737,5,43014,43014,5,43043,43044,7,43047,43047,7,43136,43137,7,43204,43205,5,43263,43263,5,43335,43345,5,43360,43388,8,43395,43395,7,43444,43445,7,43450,43451,7,43454,43456,7,43561,43566,5,43569,43570,5,43573,43574,5,43596,43596,5,43644,43644,5,43698,43700,5,43710,43711,5,43755,43755,7,43758,43759,7,43766,43766,5,44005,44005,5,44008,44008,5,44012,44012,7,44032,44032,11,44060,44060,11,44088,44088,11,44116,44116,11,44144,44144,11,44172,44172,11,44200,44200,11,44228,44228,11,44256,44256,11,44284,44284,11,44312,44312,11,44340,44340,11,44368,44368,11,44396,44396,11,44424,44424,11,44452,44452,11,44480,44480,11,44508,44508,11,44536,44536,11,44564,44564,11,44592,44592,11,44620,44620,11,44648,44648,11,44676,44676,11,44704,44704,11,44732,44732,11,44760,44760,11,44788,44788,11,44816,44816,11,44844,44844,11,44872,44872,11,44900,44900,11,44928,44928,11,44956,44956,11,44984,44984,11,45012,45012,11,45040,45040,11,45068,45068,11,45096,45096,11,45124,45124,11,45152,45152,11,45180,45180,11,45208,45208,11,45236,45236,11,45264,45264,11,45292,45292,11,45320,45320,11,45348,45348,11,45376,45376,11,45404,45404,11,45432,45432,11,45460,45460,11,45488,45488,11,45516,45516,11,45544,45544,11,45572,45572,11,45600,45600,11,45628,45628,11,45656,45656,11,45684,45684,11,45712,45712,11,45740,45740,11,45768,45768,11,45796,45796,11,45824,45824,11,45852,45852,11,45880,45880,11,45908,45908,11,45936,45936,11,45964,45964,11,45992,45992,11,46020,46020,11,46048,46048,11,46076,46076,11,46104,46104,11,46132,46132,11,46160,46160,11,46188,46188,11,46216,46216,11,46244,46244,11,46272,46272,11,46300,46300,11,46328,46328,11,46356,46356,11,46384,46384,11,46412,46412,11,46440,46440,11,46468,46468,11,46496,46496,11,46524,46524,11,46552,46552,11,46580,46580,11,46608,46608,11,46636,46636,11,46664,46664,11,46692,46692,11,46720,46720,11,46748,46748,11,46776,46776,11,46804,46804,11,46832,46832,11,46860,46860,11,46888,46888,11,46916,46916,11,46944,46944,11,46972,46972,11,47000,47000,11,47028,47028,11,47056,47056,11,47084,47084,11,47112,47112,11,47140,47140,11,47168,47168,11,47196,47196,11,47224,47224,11,47252,47252,11,47280,47280,11,47308,47308,11,47336,47336,11,47364,47364,11,47392,47392,11,47420,47420,11,47448,47448,11,47476,47476,11,47504,47504,11,47532,47532,11,47560,47560,11,47588,47588,11,47616,47616,11,47644,47644,11,47672,47672,11,47700,47700,11,47728,47728,11,47756,47756,11,47784,47784,11,47812,47812,11,47840,47840,11,47868,47868,11,47896,47896,11,47924,47924,11,47952,47952,11,47980,47980,11,48008,48008,11,48036,48036,11,48064,48064,11,48092,48092,11,48120,48120,11,48148,48148,11,48176,48176,11,48204,48204,11,48232,48232,11,48260,48260,11,48288,48288,11,48316,48316,11,48344,48344,11,48372,48372,11,48400,48400,11,48428,48428,11,48456,48456,11,48484,48484,11,48512,48512,11,48540,48540,11,48568,48568,11,48596,48596,11,48624,48624,11,48652,48652,11,48680,48680,11,48708,48708,11,48736,48736,11,48764,48764,11,48792,48792,11,48820,48820,11,48848,48848,11,48876,48876,11,48904,48904,11,48932,48932,11,48960,48960,11,48988,48988,11,49016,49016,11,49044,49044,11,49072,49072,11,49100,49100,11,49128,49128,11,49156,49156,11,49184,49184,11,49212,49212,11,49240,49240,11,49268,49268,11,49296,49296,11,49324,49324,11,49352,49352,11,49380,49380,11,49408,49408,11,49436,49436,11,49464,49464,11,49492,49492,11,49520,49520,11,49548,49548,11,49576,49576,11,49604,49604,11,49632,49632,11,49660,49660,11,49688,49688,11,49716,49716,11,49744,49744,11,49772,49772,11,49800,49800,11,49828,49828,11,49856,49856,11,49884,49884,11,49912,49912,11,49940,49940,11,49968,49968,11,49996,49996,11,50024,50024,11,50052,50052,11,50080,50080,11,50108,50108,11,50136,50136,11,50164,50164,11,50192,50192,11,50220,50220,11,50248,50248,11,50276,50276,11,50304,50304,11,50332,50332,11,50360,50360,11,50388,50388,11,50416,50416,11,50444,50444,11,50472,50472,11,50500,50500,11,50528,50528,11,50556,50556,11,50584,50584,11,50612,50612,11,50640,50640,11,50668,50668,11,50696,50696,11,50724,50724,11,50752,50752,11,50780,50780,11,50808,50808,11,50836,50836,11,50864,50864,11,50892,50892,11,50920,50920,11,50948,50948,11,50976,50976,11,51004,51004,11,51032,51032,11,51060,51060,11,51088,51088,11,51116,51116,11,51144,51144,11,51172,51172,11,51200,51200,11,51228,51228,11,51256,51256,11,51284,51284,11,51312,51312,11,51340,51340,11,51368,51368,11,51396,51396,11,51424,51424,11,51452,51452,11,51480,51480,11,51508,51508,11,51536,51536,11,51564,51564,11,51592,51592,11,51620,51620,11,51648,51648,11,51676,51676,11,51704,51704,11,51732,51732,11,51760,51760,11,51788,51788,11,51816,51816,11,51844,51844,11,51872,51872,11,51900,51900,11,51928,51928,11,51956,51956,11,51984,51984,11,52012,52012,11,52040,52040,11,52068,52068,11,52096,52096,11,52124,52124,11,52152,52152,11,52180,52180,11,52208,52208,11,52236,52236,11,52264,52264,11,52292,52292,11,52320,52320,11,52348,52348,11,52376,52376,11,52404,52404,11,52432,52432,11,52460,52460,11,52488,52488,11,52516,52516,11,52544,52544,11,52572,52572,11,52600,52600,11,52628,52628,11,52656,52656,11,52684,52684,11,52712,52712,11,52740,52740,11,52768,52768,11,52796,52796,11,52824,52824,11,52852,52852,11,52880,52880,11,52908,52908,11,52936,52936,11,52964,52964,11,52992,52992,11,53020,53020,11,53048,53048,11,53076,53076,11,53104,53104,11,53132,53132,11,53160,53160,11,53188,53188,11,53216,53216,11,53244,53244,11,53272,53272,11,53300,53300,11,53328,53328,11,53356,53356,11,53384,53384,11,53412,53412,11,53440,53440,11,53468,53468,11,53496,53496,11,53524,53524,11,53552,53552,11,53580,53580,11,53608,53608,11,53636,53636,11,53664,53664,11,53692,53692,11,53720,53720,11,53748,53748,11,53776,53776,11,53804,53804,11,53832,53832,11,53860,53860,11,53888,53888,11,53916,53916,11,53944,53944,11,53972,53972,11,54000,54000,11,54028,54028,11,54056,54056,11,54084,54084,11,54112,54112,11,54140,54140,11,54168,54168,11,54196,54196,11,54224,54224,11,54252,54252,11,54280,54280,11,54308,54308,11,54336,54336,11,54364,54364,11,54392,54392,11,54420,54420,11,54448,54448,11,54476,54476,11,54504,54504,11,54532,54532,11,54560,54560,11,54588,54588,11,54616,54616,11,54644,54644,11,54672,54672,11,54700,54700,11,54728,54728,11,54756,54756,11,54784,54784,11,54812,54812,11,54840,54840,11,54868,54868,11,54896,54896,11,54924,54924,11,54952,54952,11,54980,54980,11,55008,55008,11,55036,55036,11,55064,55064,11,55092,55092,11,55120,55120,11,55148,55148,11,55176,55176,11,55216,55238,9,64286,64286,5,65056,65071,5,65438,65439,5,65529,65531,4,66272,66272,5,68097,68099,5,68108,68111,5,68159,68159,5,68900,68903,5,69446,69456,5,69632,69632,7,69634,69634,7,69744,69744,5,69759,69761,5,69808,69810,7,69815,69816,7,69821,69821,1,69837,69837,1,69927,69931,5,69933,69940,5,70003,70003,5,70018,70018,7,70070,70078,5,70082,70083,1,70094,70094,7,70188,70190,7,70194,70195,7,70197,70197,7,70206,70206,5,70368,70370,7,70400,70401,5,70459,70460,5,70463,70463,7,70465,70468,7,70475,70477,7,70498,70499,7,70512,70516,5,70712,70719,5,70722,70724,5,70726,70726,5,70832,70832,5,70835,70840,5,70842,70842,5,70845,70845,5,70847,70848,5,70850,70851,5,71088,71089,7,71096,71099,7,71102,71102,7,71132,71133,5,71219,71226,5,71229,71229,5,71231,71232,5,71340,71340,7,71342,71343,7,71350,71350,7,71453,71455,5,71462,71462,7,71724,71726,7,71736,71736,7,71984,71984,5,71991,71992,7,71997,71997,7,71999,71999,1,72001,72001,1,72003,72003,5,72148,72151,5,72156,72159,7,72164,72164,7,72243,72248,5,72250,72250,1,72263,72263,5,72279,72280,7,72324,72329,1,72343,72343,7,72751,72751,7,72760,72765,5,72767,72767,5,72873,72873,7,72881,72881,7,72884,72884,7,73009,73014,5,73020,73021,5,73030,73030,1,73098,73102,7,73107,73108,7,73110,73110,7,73459,73460,5,78896,78904,4,92976,92982,5,94033,94087,7,94180,94180,5,113821,113822,5,118528,118573,5,119141,119141,5,119143,119145,5,119150,119154,5,119163,119170,5,119210,119213,5,121344,121398,5,121461,121461,5,121499,121503,5,122880,122886,5,122907,122913,5,122918,122922,5,123566,123566,5,125136,125142,5,126976,126979,14,126981,127182,14,127184,127231,14,127279,127279,14,127344,127345,14,127374,127374,14,127405,127461,14,127489,127490,14,127514,127514,14,127538,127546,14,127561,127567,14,127570,127743,14,127757,127758,14,127760,127760,14,127762,127762,14,127766,127768,14,127770,127770,14,127772,127772,14,127775,127776,14,127778,127779,14,127789,127791,14,127794,127795,14,127798,127798,14,127819,127819,14,127824,127824,14,127868,127868,14,127870,127871,14,127892,127893,14,127896,127896,14,127900,127901,14,127904,127940,14,127942,127942,14,127944,127944,14,127946,127946,14,127951,127955,14,127968,127971,14,127973,127984,14,127987,127987,14,127989,127989,14,127991,127991,14,127995,127999,5,128008,128008,14,128012,128014,14,128017,128018,14,128020,128020,14,128022,128022,14,128042,128042,14,128063,128063,14,128065,128065,14,128101,128101,14,128108,128109,14,128173,128173,14,128182,128183,14,128236,128237,14,128239,128239,14,128245,128245,14,128248,128248,14,128253,128253,14,128255,128258,14,128260,128263,14,128265,128265,14,128277,128277,14,128300,128301,14,128326,128328,14,128331,128334,14,128336,128347,14,128360,128366,14,128369,128370,14,128378,128378,14,128391,128391,14,128394,128397,14,128400,128400,14,128405,128406,14,128420,128420,14,128422,128423,14,128425,128432,14,128435,128443,14,128445,128449,14,128453,128464,14,128468,128475,14,128479,128480,14,128482,128482,14,128484,128487,14,128489,128494,14,128496,128498,14,128500,128505,14,128507,128511,14,128513,128518,14,128521,128525,14,128527,128527,14,128529,128529,14,128533,128533,14,128535,128535,14,128537,128537,14]")}var S4;(function(e){e[e.zwj=8205]="zwj",e[e.emojiVariantSelector=65039]="emojiVariantSelector",e[e.enclosingKeyCap=8419]="enclosingKeyCap",e[e.space=32]="space"})(S4||(S4={}));var NB=class vu{static{this.c=new _t(()=>JSON.parse('{"_common":[8232,32,8233,32,5760,32,8192,32,8193,32,8194,32,8195,32,8196,32,8197,32,8198,32,8200,32,8201,32,8202,32,8287,32,8199,32,8239,32,2042,95,65101,95,65102,95,65103,95,8208,45,8209,45,8210,45,65112,45,1748,45,8259,45,727,45,8722,45,10134,45,11450,45,1549,44,1643,44,184,44,42233,44,894,59,2307,58,2691,58,1417,58,1795,58,1796,58,5868,58,65072,58,6147,58,6153,58,8282,58,1475,58,760,58,42889,58,8758,58,720,58,42237,58,451,33,11601,33,660,63,577,63,2429,63,5038,63,42731,63,119149,46,8228,46,1793,46,1794,46,42510,46,68176,46,1632,46,1776,46,42232,46,1373,96,65287,96,8219,96,1523,96,8242,96,1370,96,8175,96,65344,96,900,96,8189,96,8125,96,8127,96,8190,96,697,96,884,96,712,96,714,96,715,96,756,96,699,96,701,96,700,96,702,96,42892,96,1497,96,2036,96,2037,96,5194,96,5836,96,94033,96,94034,96,65339,91,10088,40,10098,40,12308,40,64830,40,65341,93,10089,41,10099,41,12309,41,64831,41,10100,123,119060,123,10101,125,65342,94,8270,42,1645,42,8727,42,66335,42,5941,47,8257,47,8725,47,8260,47,9585,47,10187,47,10744,47,119354,47,12755,47,12339,47,11462,47,20031,47,12035,47,65340,92,65128,92,8726,92,10189,92,10741,92,10745,92,119311,92,119355,92,12756,92,20022,92,12034,92,42872,38,708,94,710,94,5869,43,10133,43,66203,43,8249,60,10094,60,706,60,119350,60,5176,60,5810,60,5120,61,11840,61,12448,61,42239,61,8250,62,10095,62,707,62,119351,62,5171,62,94015,62,8275,126,732,126,8128,126,8764,126,65372,124,65293,45,118002,50,120784,50,120794,50,120804,50,120814,50,120824,50,130034,50,42842,50,423,50,1000,50,42564,50,5311,50,42735,50,119302,51,118003,51,120785,51,120795,51,120805,51,120815,51,120825,51,130035,51,42923,51,540,51,439,51,42858,51,11468,51,1248,51,94011,51,71882,51,118004,52,120786,52,120796,52,120806,52,120816,52,120826,52,130036,52,5070,52,71855,52,118005,53,120787,53,120797,53,120807,53,120817,53,120827,53,130037,53,444,53,71867,53,118006,54,120788,54,120798,54,120808,54,120818,54,120828,54,130038,54,11474,54,5102,54,71893,54,119314,55,118007,55,120789,55,120799,55,120809,55,120819,55,120829,55,130039,55,66770,55,71878,55,2819,56,2538,56,2666,56,125131,56,118008,56,120790,56,120800,56,120810,56,120820,56,120830,56,130040,56,547,56,546,56,66330,56,2663,57,2920,57,2541,57,3437,57,118009,57,120791,57,120801,57,120811,57,120821,57,120831,57,130041,57,42862,57,11466,57,71884,57,71852,57,71894,57,9082,97,65345,97,119834,97,119886,97,119938,97,119990,97,120042,97,120094,97,120146,97,120198,97,120250,97,120302,97,120354,97,120406,97,120458,97,593,97,945,97,120514,97,120572,97,120630,97,120688,97,120746,97,65313,65,117974,65,119808,65,119860,65,119912,65,119964,65,120016,65,120068,65,120120,65,120172,65,120224,65,120276,65,120328,65,120380,65,120432,65,913,65,120488,65,120546,65,120604,65,120662,65,120720,65,5034,65,5573,65,42222,65,94016,65,66208,65,119835,98,119887,98,119939,98,119991,98,120043,98,120095,98,120147,98,120199,98,120251,98,120303,98,120355,98,120407,98,120459,98,388,98,5071,98,5234,98,5551,98,65314,66,8492,66,117975,66,119809,66,119861,66,119913,66,120017,66,120069,66,120121,66,120173,66,120225,66,120277,66,120329,66,120381,66,120433,66,42932,66,914,66,120489,66,120547,66,120605,66,120663,66,120721,66,5108,66,5623,66,42192,66,66178,66,66209,66,66305,66,65347,99,8573,99,119836,99,119888,99,119940,99,119992,99,120044,99,120096,99,120148,99,120200,99,120252,99,120304,99,120356,99,120408,99,120460,99,7428,99,1010,99,11429,99,43951,99,66621,99,128844,67,71913,67,71922,67,65315,67,8557,67,8450,67,8493,67,117976,67,119810,67,119862,67,119914,67,119966,67,120018,67,120174,67,120226,67,120278,67,120330,67,120382,67,120434,67,1017,67,11428,67,5087,67,42202,67,66210,67,66306,67,66581,67,66844,67,8574,100,8518,100,119837,100,119889,100,119941,100,119993,100,120045,100,120097,100,120149,100,120201,100,120253,100,120305,100,120357,100,120409,100,120461,100,1281,100,5095,100,5231,100,42194,100,8558,68,8517,68,117977,68,119811,68,119863,68,119915,68,119967,68,120019,68,120071,68,120123,68,120175,68,120227,68,120279,68,120331,68,120383,68,120435,68,5024,68,5598,68,5610,68,42195,68,8494,101,65349,101,8495,101,8519,101,119838,101,119890,101,119942,101,120046,101,120098,101,120150,101,120202,101,120254,101,120306,101,120358,101,120410,101,120462,101,43826,101,1213,101,8959,69,65317,69,8496,69,117978,69,119812,69,119864,69,119916,69,120020,69,120072,69,120124,69,120176,69,120228,69,120280,69,120332,69,120384,69,120436,69,917,69,120492,69,120550,69,120608,69,120666,69,120724,69,11577,69,5036,69,42224,69,71846,69,71854,69,66182,69,119839,102,119891,102,119943,102,119995,102,120047,102,120099,102,120151,102,120203,102,120255,102,120307,102,120359,102,120411,102,120463,102,43829,102,42905,102,383,102,7837,102,1412,102,119315,70,8497,70,117979,70,119813,70,119865,70,119917,70,120021,70,120073,70,120125,70,120177,70,120229,70,120281,70,120333,70,120385,70,120437,70,42904,70,988,70,120778,70,5556,70,42205,70,71874,70,71842,70,66183,70,66213,70,66853,70,65351,103,8458,103,119840,103,119892,103,119944,103,120048,103,120100,103,120152,103,120204,103,120256,103,120308,103,120360,103,120412,103,120464,103,609,103,7555,103,397,103,1409,103,117980,71,119814,71,119866,71,119918,71,119970,71,120022,71,120074,71,120126,71,120178,71,120230,71,120282,71,120334,71,120386,71,120438,71,1292,71,5056,71,5107,71,42198,71,65352,104,8462,104,119841,104,119945,104,119997,104,120049,104,120101,104,120153,104,120205,104,120257,104,120309,104,120361,104,120413,104,120465,104,1211,104,1392,104,5058,104,65320,72,8459,72,8460,72,8461,72,117981,72,119815,72,119867,72,119919,72,120023,72,120179,72,120231,72,120283,72,120335,72,120387,72,120439,72,919,72,120494,72,120552,72,120610,72,120668,72,120726,72,11406,72,5051,72,5500,72,42215,72,66255,72,731,105,9075,105,65353,105,8560,105,8505,105,8520,105,119842,105,119894,105,119946,105,119998,105,120050,105,120102,105,120154,105,120206,105,120258,105,120310,105,120362,105,120414,105,120466,105,120484,105,618,105,617,105,953,105,8126,105,890,105,120522,105,120580,105,120638,105,120696,105,120754,105,1110,105,42567,105,1231,105,43893,105,5029,105,71875,105,65354,106,8521,106,119843,106,119895,106,119947,106,119999,106,120051,106,120103,106,120155,106,120207,106,120259,106,120311,106,120363,106,120415,106,120467,106,1011,106,1112,106,65322,74,117983,74,119817,74,119869,74,119921,74,119973,74,120025,74,120077,74,120129,74,120181,74,120233,74,120285,74,120337,74,120389,74,120441,74,42930,74,895,74,1032,74,5035,74,5261,74,42201,74,119844,107,119896,107,119948,107,120000,107,120052,107,120104,107,120156,107,120208,107,120260,107,120312,107,120364,107,120416,107,120468,107,8490,75,65323,75,117984,75,119818,75,119870,75,119922,75,119974,75,120026,75,120078,75,120130,75,120182,75,120234,75,120286,75,120338,75,120390,75,120442,75,922,75,120497,75,120555,75,120613,75,120671,75,120729,75,11412,75,5094,75,5845,75,42199,75,66840,75,1472,108,8739,73,9213,73,65512,73,1633,108,1777,73,66336,108,125127,108,118001,108,120783,73,120793,73,120803,73,120813,73,120823,73,130033,73,65321,73,8544,73,8464,73,8465,73,117982,108,119816,73,119868,73,119920,73,120024,73,120128,73,120180,73,120232,73,120284,73,120336,73,120388,73,120440,73,65356,108,8572,73,8467,108,119845,108,119897,108,119949,108,120001,108,120053,108,120105,73,120157,73,120209,73,120261,73,120313,73,120365,73,120417,73,120469,73,448,73,120496,73,120554,73,120612,73,120670,73,120728,73,11410,73,1030,73,1216,73,1493,108,1503,108,1575,108,126464,108,126592,108,65166,108,65165,108,1994,108,11599,73,5825,73,42226,73,93992,73,66186,124,66313,124,119338,76,8556,76,8466,76,117985,76,119819,76,119871,76,119923,76,120027,76,120079,76,120131,76,120183,76,120235,76,120287,76,120339,76,120391,76,120443,76,11472,76,5086,76,5290,76,42209,76,93974,76,71843,76,71858,76,66587,76,66854,76,65325,77,8559,77,8499,77,117986,77,119820,77,119872,77,119924,77,120028,77,120080,77,120132,77,120184,77,120236,77,120288,77,120340,77,120392,77,120444,77,924,77,120499,77,120557,77,120615,77,120673,77,120731,77,1018,77,11416,77,5047,77,5616,77,5846,77,42207,77,66224,77,66321,77,119847,110,119899,110,119951,110,120003,110,120055,110,120107,110,120159,110,120211,110,120263,110,120315,110,120367,110,120419,110,120471,110,1400,110,1404,110,65326,78,8469,78,117987,78,119821,78,119873,78,119925,78,119977,78,120029,78,120081,78,120185,78,120237,78,120289,78,120341,78,120393,78,120445,78,925,78,120500,78,120558,78,120616,78,120674,78,120732,78,11418,78,42208,78,66835,78,3074,111,3202,111,3330,111,3458,111,2406,111,2662,111,2790,111,3046,111,3174,111,3302,111,3430,111,3664,111,3792,111,4160,111,1637,111,1781,111,65359,111,8500,111,119848,111,119900,111,119952,111,120056,111,120108,111,120160,111,120212,111,120264,111,120316,111,120368,111,120420,111,120472,111,7439,111,7441,111,43837,111,959,111,120528,111,120586,111,120644,111,120702,111,120760,111,963,111,120532,111,120590,111,120648,111,120706,111,120764,111,11423,111,4351,111,1413,111,1505,111,1607,111,126500,111,126564,111,126596,111,65259,111,65260,111,65258,111,65257,111,1726,111,64428,111,64429,111,64427,111,64426,111,1729,111,64424,111,64425,111,64423,111,64422,111,1749,111,3360,111,4125,111,66794,111,71880,111,71895,111,66604,111,1984,79,2534,79,2918,79,12295,79,70864,79,71904,79,118000,79,120782,79,120792,79,120802,79,120812,79,120822,79,130032,79,65327,79,117988,79,119822,79,119874,79,119926,79,119978,79,120030,79,120082,79,120134,79,120186,79,120238,79,120290,79,120342,79,120394,79,120446,79,927,79,120502,79,120560,79,120618,79,120676,79,120734,79,11422,79,1365,79,11604,79,4816,79,2848,79,66754,79,42227,79,71861,79,66194,79,66219,79,66564,79,66838,79,9076,112,65360,112,119849,112,119901,112,119953,112,120005,112,120057,112,120109,112,120161,112,120213,112,120265,112,120317,112,120369,112,120421,112,120473,112,961,112,120530,112,120544,112,120588,112,120602,112,120646,112,120660,112,120704,112,120718,112,120762,112,120776,112,11427,112,65328,80,8473,80,117989,80,119823,80,119875,80,119927,80,119979,80,120031,80,120083,80,120187,80,120239,80,120291,80,120343,80,120395,80,120447,80,929,80,120504,80,120562,80,120620,80,120678,80,120736,80,11426,80,5090,80,5229,80,42193,80,66197,80,119850,113,119902,113,119954,113,120006,113,120058,113,120110,113,120162,113,120214,113,120266,113,120318,113,120370,113,120422,113,120474,113,1307,113,1379,113,1382,113,8474,81,117990,81,119824,81,119876,81,119928,81,119980,81,120032,81,120084,81,120188,81,120240,81,120292,81,120344,81,120396,81,120448,81,11605,81,119851,114,119903,114,119955,114,120007,114,120059,114,120111,114,120163,114,120215,114,120267,114,120319,114,120371,114,120423,114,120475,114,43847,114,43848,114,7462,114,11397,114,43905,114,119318,82,8475,82,8476,82,8477,82,117991,82,119825,82,119877,82,119929,82,120033,82,120189,82,120241,82,120293,82,120345,82,120397,82,120449,82,422,82,5025,82,5074,82,66740,82,5511,82,42211,82,94005,82,65363,115,119852,115,119904,115,119956,115,120008,115,120060,115,120112,115,120164,115,120216,115,120268,115,120320,115,120372,115,120424,115,120476,115,42801,115,445,115,1109,115,43946,115,71873,115,66632,115,65331,83,117992,83,119826,83,119878,83,119930,83,119982,83,120034,83,120086,83,120138,83,120190,83,120242,83,120294,83,120346,83,120398,83,120450,83,1029,83,1359,83,5077,83,5082,83,42210,83,94010,83,66198,83,66592,83,119853,116,119905,116,119957,116,120009,116,120061,116,120113,116,120165,116,120217,116,120269,116,120321,116,120373,116,120425,116,120477,116,8868,84,10201,84,128872,84,65332,84,117993,84,119827,84,119879,84,119931,84,119983,84,120035,84,120087,84,120139,84,120191,84,120243,84,120295,84,120347,84,120399,84,120451,84,932,84,120507,84,120565,84,120623,84,120681,84,120739,84,11430,84,5026,84,42196,84,93962,84,71868,84,66199,84,66225,84,66325,84,119854,117,119906,117,119958,117,120010,117,120062,117,120114,117,120166,117,120218,117,120270,117,120322,117,120374,117,120426,117,120478,117,42911,117,7452,117,43854,117,43858,117,651,117,965,117,120534,117,120592,117,120650,117,120708,117,120766,117,1405,117,66806,117,71896,117,8746,85,8899,85,117994,85,119828,85,119880,85,119932,85,119984,85,120036,85,120088,85,120140,85,120192,85,120244,85,120296,85,120348,85,120400,85,120452,85,1357,85,4608,85,66766,85,5196,85,42228,85,94018,85,71864,85,8744,118,8897,118,65366,118,8564,118,119855,118,119907,118,119959,118,120011,118,120063,118,120115,118,120167,118,120219,118,120271,118,120323,118,120375,118,120427,118,120479,118,7456,118,957,118,120526,118,120584,118,120642,118,120700,118,120758,118,1141,118,1496,118,71430,118,43945,118,71872,118,119309,86,1639,86,1783,86,8548,86,117995,86,119829,86,119881,86,119933,86,119985,86,120037,86,120089,86,120141,86,120193,86,120245,86,120297,86,120349,86,120401,86,120453,86,1140,86,11576,86,5081,86,5167,86,42719,86,42214,86,93960,86,71840,86,66845,86,623,119,119856,119,119908,119,119960,119,120012,119,120064,119,120116,119,120168,119,120220,119,120272,119,120324,119,120376,119,120428,119,120480,119,7457,119,1121,119,1309,119,1377,119,71434,119,71438,119,71439,119,43907,119,71910,87,71919,87,117996,87,119830,87,119882,87,119934,87,119986,87,120038,87,120090,87,120142,87,120194,87,120246,87,120298,87,120350,87,120402,87,120454,87,1308,87,5043,87,5076,87,42218,87,5742,120,10539,120,10540,120,10799,120,65368,120,8569,120,119857,120,119909,120,119961,120,120013,120,120065,120,120117,120,120169,120,120221,120,120273,120,120325,120,120377,120,120429,120,120481,120,5441,120,5501,120,5741,88,9587,88,66338,88,71916,88,65336,88,8553,88,117997,88,119831,88,119883,88,119935,88,119987,88,120039,88,120091,88,120143,88,120195,88,120247,88,120299,88,120351,88,120403,88,120455,88,42931,88,935,88,120510,88,120568,88,120626,88,120684,88,120742,88,11436,88,11613,88,5815,88,42219,88,66192,88,66228,88,66327,88,66855,88,611,121,7564,121,65369,121,119858,121,119910,121,119962,121,120014,121,120066,121,120118,121,120170,121,120222,121,120274,121,120326,121,120378,121,120430,121,120482,121,655,121,7935,121,43866,121,947,121,8509,121,120516,121,120574,121,120632,121,120690,121,120748,121,1199,121,4327,121,71900,121,65337,89,117998,89,119832,89,119884,89,119936,89,119988,89,120040,89,120092,89,120144,89,120196,89,120248,89,120300,89,120352,89,120404,89,120456,89,933,89,978,89,120508,89,120566,89,120624,89,120682,89,120740,89,11432,89,1198,89,5033,89,5053,89,42220,89,94019,89,71844,89,66226,89,119859,122,119911,122,119963,122,120015,122,120067,122,120119,122,120171,122,120223,122,120275,122,120327,122,120379,122,120431,122,120483,122,7458,122,43923,122,71876,122,71909,90,66293,90,65338,90,8484,90,8488,90,117999,90,119833,90,119885,90,119937,90,119989,90,120041,90,120197,90,120249,90,120301,90,120353,90,120405,90,120457,90,918,90,120493,90,120551,90,120609,90,120667,90,120725,90,5059,90,42204,90,71849,90,65282,34,65283,35,65284,36,65285,37,65286,38,65290,42,65291,43,65294,46,65295,47,65296,48,65298,50,65299,51,65300,52,65301,53,65302,54,65303,55,65304,56,65305,57,65308,60,65309,61,65310,62,65312,64,65316,68,65318,70,65319,71,65324,76,65329,81,65330,82,65333,85,65334,86,65335,87,65343,95,65346,98,65348,100,65350,102,65355,107,65357,109,65358,110,65361,113,65362,114,65364,116,65365,117,65367,119,65370,122,65371,123,65373,125,119846,109],"_default":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8217,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"cs":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"de":[65374,126,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"es":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"fr":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"it":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ja":[8211,45,8218,44,65281,33,8216,96,8245,96,180,96,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65292,44,65297,49,65307,59],"ko":[8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pl":[65374,126,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"pt-BR":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"qps-ploc":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"ru":[65374,126,8218,44,65306,58,65281,33,8216,96,8245,96,180,96,12494,47,305,105,921,73,1009,112,215,120,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"tr":[160,32,8211,45,65374,126,8218,44,65306,58,65281,33,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65288,40,65289,41,65292,44,65297,49,65307,59,65311,63],"zh-hans":[160,32,65374,126,8218,44,8245,96,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89,65297,49],"zh-hant":[8211,45,65374,126,8218,44,180,96,12494,47,1047,51,1073,54,1072,97,1040,65,1068,98,1042,66,1089,99,1057,67,1077,101,1045,69,1053,72,305,105,1050,75,921,73,1052,77,1086,111,1054,79,1009,112,1088,112,1056,80,1075,114,1058,84,215,120,1093,120,1061,88,1091,121,1059,89]}'))}static{this.d=new J3({getCacheKey:JSON.stringify},t=>{function i(u){const h=new Map;for(let f=0;f<u.length;f+=2)h.set(u[f],u[f+1]);return h}function r(u,h){const f=new Map(u);for(const[p,m]of h)f.set(p,m);return f}function s(u,h){if(!u)return h;const f=new Map;for(const[p,m]of u)h.has(p)&&f.set(p,m);return f}const n=this.c.value;let o=t.filter(u=>!u.startsWith("_")&&u in n);o.length===0&&(o=["_default"]);let a;for(const u of o){const h=i(n[u]);a=s(a,h)}const c=i(n._common),l=r(c,a);return new vu(l)})}static getInstance(t){return vu.d.get(Array.from(t))}static{this.e=new _t(()=>Object.keys(vu.c.value).filter(t=>!t.startsWith("_")))}static getLocales(){return vu.e.value}constructor(t){this.f=t}isAmbiguous(t){return this.f.has(t)}containsAmbiguousCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&this.isAmbiguous(r))return!0}return!1}getPrimaryConfusable(t){return this.f.get(t)}getConfusableCodePoints(){return new Set(this.f.keys())}},MB=class wu{static c(){return JSON.parse('{"_common":[11,12,13,127,847,1564,4447,4448,6068,6069,6155,6156,6157,6158,7355,7356,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8204,8205,8206,8207,8234,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,8293,8294,8295,8296,8297,8298,8299,8300,8301,8302,8303,10240,12644,65024,65025,65026,65027,65028,65029,65030,65031,65032,65033,65034,65035,65036,65037,65038,65039,65279,65440,65520,65521,65522,65523,65524,65525,65526,65527,65528,65532,78844,119155,119156,119157,119158,119159,119160,119161,119162,917504,917505,917506,917507,917508,917509,917510,917511,917512,917513,917514,917515,917516,917517,917518,917519,917520,917521,917522,917523,917524,917525,917526,917527,917528,917529,917530,917531,917532,917533,917534,917535,917536,917537,917538,917539,917540,917541,917542,917543,917544,917545,917546,917547,917548,917549,917550,917551,917552,917553,917554,917555,917556,917557,917558,917559,917560,917561,917562,917563,917564,917565,917566,917567,917568,917569,917570,917571,917572,917573,917574,917575,917576,917577,917578,917579,917580,917581,917582,917583,917584,917585,917586,917587,917588,917589,917590,917591,917592,917593,917594,917595,917596,917597,917598,917599,917600,917601,917602,917603,917604,917605,917606,917607,917608,917609,917610,917611,917612,917613,917614,917615,917616,917617,917618,917619,917620,917621,917622,917623,917624,917625,917626,917627,917628,917629,917630,917631,917760,917761,917762,917763,917764,917765,917766,917767,917768,917769,917770,917771,917772,917773,917774,917775,917776,917777,917778,917779,917780,917781,917782,917783,917784,917785,917786,917787,917788,917789,917790,917791,917792,917793,917794,917795,917796,917797,917798,917799,917800,917801,917802,917803,917804,917805,917806,917807,917808,917809,917810,917811,917812,917813,917814,917815,917816,917817,917818,917819,917820,917821,917822,917823,917824,917825,917826,917827,917828,917829,917830,917831,917832,917833,917834,917835,917836,917837,917838,917839,917840,917841,917842,917843,917844,917845,917846,917847,917848,917849,917850,917851,917852,917853,917854,917855,917856,917857,917858,917859,917860,917861,917862,917863,917864,917865,917866,917867,917868,917869,917870,917871,917872,917873,917874,917875,917876,917877,917878,917879,917880,917881,917882,917883,917884,917885,917886,917887,917888,917889,917890,917891,917892,917893,917894,917895,917896,917897,917898,917899,917900,917901,917902,917903,917904,917905,917906,917907,917908,917909,917910,917911,917912,917913,917914,917915,917916,917917,917918,917919,917920,917921,917922,917923,917924,917925,917926,917927,917928,917929,917930,917931,917932,917933,917934,917935,917936,917937,917938,917939,917940,917941,917942,917943,917944,917945,917946,917947,917948,917949,917950,917951,917952,917953,917954,917955,917956,917957,917958,917959,917960,917961,917962,917963,917964,917965,917966,917967,917968,917969,917970,917971,917972,917973,917974,917975,917976,917977,917978,917979,917980,917981,917982,917983,917984,917985,917986,917987,917988,917989,917990,917991,917992,917993,917994,917995,917996,917997,917998,917999],"cs":[173,8203,12288],"de":[173,8203,12288],"es":[8203,12288],"fr":[173,8203,12288],"it":[160,173,12288],"ja":[173],"ko":[173,12288],"pl":[173,8203,12288],"pt-BR":[173,8203,12288],"qps-ploc":[160,173,8203,12288],"ru":[173,12288],"tr":[160,173,8203,12288],"zh-hans":[160,173,8203,12288],"zh-hant":[173,12288]}')}static{this.d=void 0}static e(){return this.d||(this.d=new Set([...Object.values(wu.c())].flat())),this.d}static isInvisibleCharacter(t){return wu.e().has(t)}static containsInvisibleCharacter(t){for(let i=0;i<t.length;i++){const r=t.codePointAt(i);if(typeof r=="number"&&(wu.isInvisibleCharacter(r)||r===32))return!0}return!1}static get codePoints(){return wu.e()}};function $s(e){return e===47||e===92}function k4(e){return e.replace(/[\\/]/g,Me.sep)}function gD(e){return e.indexOf("/")===-1&&(e=k4(e)),/^[a-zA-Z]:(\/|$)/.test(e)&&(e="/"+e),e}function $4(e,t=Me.sep){if(!e)return"";const i=e.length,r=e.charCodeAt(0);if($s(r)){if($s(e.charCodeAt(1))&&!$s(e.charCodeAt(2))){let n=3;const o=n;for(;n<i&&!$s(e.charCodeAt(n));n++);if(o!==n&&!$s(e.charCodeAt(n+1))){for(n+=1;n<i;n++)if($s(e.charCodeAt(n)))return e.slice(0,n+1).replace(/[\\/]/g,t)}}return t}else if(C4(r)&&e.charCodeAt(1)===58)return $s(e.charCodeAt(2))?e.slice(0,2)+t:e.slice(0,2);let s=e.indexOf("://");if(s!==-1){for(s+=3;s<i;s++)if($s(e.charCodeAt(s)))return e.slice(0,s+1)}return""}var mD=/[\\/:\*\?"<>\|]/g,vD=/[/]/g,wD=/^(con|prn|aux|clock\$|nul|lpt[0-9]|com[0-9])(\.(.*?))?$/i;function bD(e,t=ei){const i=t?mD:vD;return!(!e||e.length===0||/^\s+$/.test(e)||(i.lastIndex=0,i.test(e))||t&&wD.test(e)||e==="."||e===".."||t&&e[e.length-1]==="."||t&&e.length!==e.trim().length||e.length>255)}function eh(e,t,i,r=Xi){if(e===t)return!0;if(!e||!t||t.length>e.length)return!1;if(i){if(!Mg(e,t))return!1;if(t.length===e.length)return!0;let n=t.length;return t.charAt(t.length-1)===r&&n--,e.charAt(n)===r}return t.charAt(t.length-1)!==r&&(t+=r),e.indexOf(t)===0}function C4(e){return e>=65&&e<=90||e>=97&&e<=122}function yD(e,t=ei){return t?C4(e.charCodeAt(0))&&e.charCodeAt(1)===58:!1}var V;(function(e){e.inMemory="inmemory",e.vscode="vscode",e.internal="private",e.walkThrough="walkThrough",e.walkThroughSnippet="walkThroughSnippet",e.http="http",e.https="https",e.file="file",e.mailto="mailto",e.untitled="untitled",e.data="data",e.command="command",e.vscodeRemote="vscode-remote",e.vscodeRemoteResource="vscode-remote-resource",e.vscodeManagedRemoteResource="vscode-managed-remote-resource",e.vscodeUserData="vscode-userdata",e.vscodeCustomEditor="vscode-custom-editor",e.vscodeNotebookCell="vscode-notebook-cell",e.vscodeNotebookCellMetadata="vscode-notebook-cell-metadata",e.vscodeNotebookCellMetadataDiff="vscode-notebook-cell-metadata-diff",e.vscodeNotebookCellOutput="vscode-notebook-cell-output",e.vscodeNotebookCellOutputDiff="vscode-notebook-cell-output-diff",e.vscodeNotebookMetadata="vscode-notebook-metadata",e.vscodeInteractiveInput="vscode-interactive-input",e.vscodeSettings="vscode-settings",e.vscodeWorkspaceTrust="vscode-workspace-trust",e.vscodeTerminal="vscode-terminal",e.vscodeChatCodeBlock="vscode-chat-code-block",e.vscodeChatCodeCompareBlock="vscode-chat-code-compare-block",e.vscodeChatSesssion="vscode-chat-editor",e.webviewPanel="webview-panel",e.vscodeWebview="vscode-webview",e.extension="extension",e.vscodeFileResource="vscode-file",e.tmp="tmp",e.vsls="vsls",e.vscodeSourceControl="vscode-scm",e.commentsInput="comment",e.codeSetting="code-setting",e.outputChannel="output",e.accessibleView="accessible-view"})(V||(V={}));function Ug(e,t){return y.isUri(e)?ks(e.scheme,t):Mg(e,t+":")}function xD(e,...t){return t.some(i=>Ug(e,i))}var ED="tkn",SD=class{constructor(){this.a=Object.create(null),this.b=Object.create(null),this.c=Object.create(null),this.d="http",this.e=null,this.f="/"}setPreferredWebSchema(e){this.d=e}setDelegate(e){this.e=e}setServerRootPath(e,t){this.f=Me.join(t??"/",$D(e))}getServerRootPath(){return this.f}get g(){return Me.join(this.f,V.vscodeRemoteResource)}set(e,t,i){this.a[e]=t,this.b[e]=i}setConnectionToken(e,t){this.c[e]=t}getPreferredWebSchema(){return this.d}rewrite(e){if(this.e)try{return this.e(e)}catch(o){return Gt(o),e}const t=e.authority;let i=this.a[t];i&&i.indexOf(":")!==-1&&i.indexOf("[")===-1&&(i=`[${i}]`);const r=this.b[t],s=this.c[t];let n=`path=${encodeURIComponent(e.path)}`;return typeof s=="string"&&(n+=`&${ED}=${encodeURIComponent(s)}`),y.from({scheme:Eo?this.d:V.vscodeRemoteResource,authority:`${i}:${r}`,path:this.g,query:n})}},kD=new SD;function $D(e){return`${e.quality??"oss"}-${e.commit??"dev"}`}var CD="vs/../../node_modules",ID="vs/../../node_modules.asar",I4="vscode-app",DD=class Wp{static{this.a=I4}asBrowserUri(t){const i=this.b(t);return this.uriToBrowserUri(i)}uriToBrowserUri(t){return t.scheme===V.vscodeRemote?kD.rewrite(t):t.scheme===V.file&&(Oy||S3===`${V.vscodeFileResource}://${Wp.a}`)?t.with({scheme:V.vscodeFileResource,authority:t.authority||Wp.a,query:null,fragment:null}):t}asFileUri(t){const i=this.b(t);return this.uriToFileUri(i)}uriToFileUri(t){return t.scheme===V.vscodeFileResource?t.with({scheme:V.file,authority:t.authority!==Wp.a?t.authority:null,query:null,fragment:null}):t}b(t){if(y.isUri(t))return t;if(globalThis._VSCODE_FILE_ROOT){const i=globalThis._VSCODE_FILE_ROOT;if(/^\w[\w\d+.-]*:\/\//.test(i))return y.joinPath(y.parse(i,!0),t);const r=Dg(i,t);return y.file(r)}throw new Error("Cannot determine URI for module id!")}},D4=new DD,FB=Object.freeze({"Cache-Control":"no-cache, no-store"}),OB=Object.freeze({"Document-Policy":"include-js-call-stacks-in-crash-reports"}),P4;(function(e){const t=new Map([["1",{"Cross-Origin-Opener-Policy":"same-origin"}],["2",{"Cross-Origin-Embedder-Policy":"require-corp"}],["3",{"Cross-Origin-Opener-Policy":"same-origin","Cross-Origin-Embedder-Policy":"require-corp"}]]);e.CoopAndCoep=Object.freeze(t.get("3"));const i="vscode-coi";function r(n){let o;typeof n=="string"?o=new URL(n).searchParams:n instanceof URL?o=n.searchParams:y.isUri(n)&&(o=new URL(n.toString(!0)).searchParams);const a=o?.get(i);if(a)return t.get(a)}e.getHeadersFromQuery=r;function s(n,o,a){if(!globalThis.crossOriginIsolated)return;const c=o&&a?"3":a?"2":"1";n instanceof URLSearchParams?n.set(i,c):n[i]=c}e.addSearchParam=s})(P4||(P4={}));function er(e){return Gu(e,!0)}var uc=class{constructor(e){this.a=e}compare(e,t,i=!1){return e===t?0:gn(this.getComparisonKey(e,i),this.getComparisonKey(t,i))}isEqual(e,t,i=!1){return e===t?!0:!e||!t?!1:this.getComparisonKey(e,i)===this.getComparisonKey(t,i)}getComparisonKey(e,t=!1){return e.with({path:this.a(e)?e.path.toLowerCase():void 0,fragment:t?null:void 0}).toString()}ignorePathCasing(e){return this.a(e)}isEqualOrParent(e,t,i=!1){if(e.scheme===t.scheme){if(e.scheme===V.file)return eh(er(e),er(t),this.a(e))&&e.query===t.query&&(i||e.fragment===t.fragment);if(T4(e.authority,t.authority))return eh(e.path,t.path,this.a(e),"/")&&e.query===t.query&&(i||e.fragment===t.fragment)}return!1}joinPath(e,...t){return y.joinPath(e,...t)}basenameOrAuthority(e){return tr(e)||e.authority}basename(e){return Me.basename(e.path)}extname(e){return Me.extname(e.path)}dirname(e){if(e.path.length===0)return e;let t;return e.scheme===V.file?t=y.file($o(er(e))).path:(t=Me.dirname(e.path),e.authority&&t.length&&t.charCodeAt(0)!==47&&(console.error(`dirname("${e.toString})) resulted in a relative path`),t="/")),e.with({path:t})}normalizePath(e){if(!e.path.length)return e;let t;return e.scheme===V.file?t=y.file(ko(er(e))).path:t=Me.normalize(e.path),e.with({path:t})}relativePath(e,t){if(e.scheme!==t.scheme||!T4(e.authority,t.authority))return;if(e.scheme===V.file){const s=cc(er(e),er(t));return ei?k4(s):s}let i=e.path||"/";const r=t.path||"/";if(this.a(e)){let s=0;for(const n=Math.min(i.length,r.length);s<n&&!(i.charCodeAt(s)!==r.charCodeAt(s)&&i.charAt(s).toLowerCase()!==r.charAt(s).toLowerCase());s++);i=r.substr(0,s)+i.substr(s)}return Me.relative(i,r)}resolvePath(e,t){if(e.scheme===V.file){const i=y.file(U3(er(e),t));return e.with({authority:i.authority,path:i.path})}return t=gD(t),e.with({path:Me.resolve(e.path,t)})}isAbsolutePath(e){return!!e.path&&e.path[0]==="/"}isEqualAuthority(e,t){return e===t||e!==void 0&&t!==void 0&&ks(e,t)}hasTrailingPathSeparator(e,t=Xi){if(e.scheme===V.file){const i=er(e);return i.length>$4(i).length&&i[i.length-1]===t}else{const i=e.path;return i.length>1&&i.charCodeAt(i.length-1)===47&&!/^[a-zA-Z]:(\/$|\\$)/.test(e.fsPath)}}removeTrailingPathSeparator(e,t=Xi){return R4(e,t)?e.with({path:e.path.substr(0,e.path.length-1)}):e}addTrailingPathSeparator(e,t=Xi){let i=!1;if(e.scheme===V.file){const r=er(e);i=r!==void 0&&r.length===$4(r).length&&r[r.length-1]===t}else{t="/";const r=e.path;i=r.length===1&&r.charCodeAt(r.length-1)===47}return!i&&!R4(e,t)?e.with({path:e.path+"/"}):e}},He=new uc(()=>!1),PD=new uc(e=>e.scheme===V.file?!Es:!0),AD=new uc(e=>!0),Io=He.isEqual.bind(He),UB=He.isEqualOrParent.bind(He),jB=He.getComparisonKey.bind(He),jg=He.basenameOrAuthority.bind(He),tr=He.basename.bind(He),TD=He.extname.bind(He),th=He.dirname.bind(He),Zt=He.joinPath.bind(He),BB=He.normalizePath.bind(He),A4=He.relativePath.bind(He),HB=He.resolvePath.bind(He),RD=He.isAbsolutePath.bind(He),T4=He.isEqualAuthority.bind(He),R4=He.hasTrailingPathSeparator.bind(He),zB=He.removeTrailingPathSeparator.bind(He),_B=He.addTrailingPathSeparator.bind(He),L4;(function(e){e.META_DATA_LABEL="label",e.META_DATA_DESCRIPTION="description",e.META_DATA_SIZE="size",e.META_DATA_MIME="mime";function t(i){const r=new Map;i.path.substring(i.path.indexOf(";")+1,i.path.lastIndexOf(";")).split(";").forEach(o=>{const[a,c]=o.split(":");a&&c&&r.set(a,c)});const n=i.path.substring(0,i.path.indexOf(";"));return n&&r.set(e.META_DATA_MIME,n),r}e.parseMetaData=t})(L4||(L4={}));var LD=Symbol("MicrotaskDelay");function Cs(e){return!!e&&typeof e.then=="function"}function ND(e){const t=new at,i=e(t.token);let r=!1;const s=new Promise((n,o)=>{const a=t.token.onCancellationRequested(()=>{r=!0,a.dispose(),o(new Ri)});Promise.resolve(i).then(c=>{a.dispose(),t.dispose(),r?py(c)&&c.dispose():n(c)},c=>{a.dispose(),t.dispose(),o(c)})});return new class{cancel(){t.cancel(),t.dispose()}then(n,o){return s.then(n,o)}catch(n){return this.then(void 0,n)}finally(n){return s.finally(n)}}}function MD(e,t,i){return new Promise((r,s)=>{const n=t.onCancellationRequested(()=>{n.dispose(),r(i)});e.then(r,s).finally(()=>n.dispose())})}function Bg(e,t){return new Promise((i,r)=>{const s=t.onCancellationRequested(()=>{s.dispose(),r(new Ri)});e.then(i,r).finally(()=>s.dispose())})}function Yt(e){return new Promise((t,i)=>{const r=e();Cs(r)?r.then(t,i):t(r)})}function FD(){let e,t;return{promise:new Promise((r,s)=>{e=r,t=s}),resolve:e,reject:t}}var OD=class{constructor(){this.f=!1,this.a=null,this.b=null,this.d=null}queue(e){if(this.f)return Promise.reject(new Error("Throttler is disposed"));if(this.a){if(this.d=e,!this.b){const t=()=>{if(this.b=null,this.f)return;const i=this.queue(this.d);return this.d=null,i};this.b=new Promise(i=>{this.a.then(t,t).then(i)})}return new Promise((t,i)=>{this.b.then(t,i)})}return this.a=e(),new Promise((t,i)=>{this.a.then(r=>{this.a=null,t(r)},r=>{this.a=null,i(r)})})}dispose(){this.f=!0}},UD=class{constructor(){this.d=Promise.resolve(null)}queue(e){return this.d=this.d.then(()=>e(),()=>e())}},jD=(e,t)=>{let i=!0;const r=setTimeout(()=>{i=!1,t()},e);return{isTriggered:()=>i,dispose:()=>{clearTimeout(r),i=!1}}},BD=e=>{let t=!0;return queueMicrotask(()=>{t&&(t=!1,e())}),{isTriggered:()=>t,dispose:()=>{t=!1}}},HD=class{constructor(e){this.defaultDelay=e,this.a=null,this.b=null,this.d=null,this.f=null,this.g=null}trigger(e,t=this.defaultDelay){this.g=e,this.h(),this.b||(this.b=new Promise((r,s)=>{this.d=r,this.f=s}).then(()=>{if(this.b=null,this.d=null,this.g){const r=this.g;return this.g=null,r()}}));const i=()=>{this.a=null,this.d?.(null)};return this.a=t===LD?BD(i):jD(t,i),this.b}isTriggered(){return!!this.a?.isTriggered()}cancel(){this.h(),this.b&&(this.f?.(new Ri),this.b=null)}h(){this.a?.dispose(),this.a=null}dispose(){this.cancel()}},zD=class{constructor(e){this.a=new HD(e),this.b=new OD}trigger(e,t){return this.a.trigger(()=>this.b.queue(e),t)}isTriggered(){return this.a.isTriggered()}cancel(){this.a.cancel()}dispose(){this.a.dispose(),this.b.dispose()}},Er=class{constructor(){this.a=!1,this.b=new Promise((e,t)=>{this.d=e})}isOpen(){return this.a}open(){this.a=!0,this.d(!0)}wait(){return this.b}};function Vi(e,t){return t?new Promise((i,r)=>{const s=setTimeout(()=>{n.dispose(),i()},e),n=t.onCancellationRequested(()=>{clearTimeout(s),n.dispose(),r(new Ri)})}):ND(i=>Vi(e,i))}function _D(e,t=0,i){const r=setTimeout(()=>{e(),i&&s.dispose()},t),s=oe(()=>{clearTimeout(r),i?.delete(s)});return i?.add(s),s}var WD=class{constructor(e){this.a=0,this.b=!1,this.f=e,this.g=[],this.d=0,this.h=new P}whenIdle(){return this.size>0?lt.toPromise(this.onDrained):Promise.resolve()}get onDrained(){return this.h.event}get size(){return this.a}queue(e){if(this.b)throw new Error("Object has been disposed");return this.a++,new Promise((t,i)=>{this.g.push({factory:e,c:t,e:i}),this.j()})}j(){for(;this.g.length&&this.d<this.f;){const e=this.g.shift();this.d++;const t=e.factory();t.then(e.c,e.e),t.then(()=>this.k(),()=>this.k())}}k(){this.b||(this.d--,--this.a===0&&this.h.fire(),this.g.length>0&&this.j())}clear(){if(this.b)throw new Error("Object has been disposed");this.g.length=0,this.a=this.d}dispose(){this.b=!0,this.g.length=0,this.a=0,this.h.dispose()}},VD=class extends WD{constructor(){super(1)}},qD=class{constructor(){this.a=new Map,this.b=new Set,this.d=void 0,this.f=0}async whenDrained(){if(this.g())return;const e=new Is;return this.b.add(e),e.p}g(){for(const[,e]of this.a)if(e.size>0)return!1;return!0}queueSize(e,t=He){const i=t.getComparisonKey(e);return this.a.get(i)?.size??0}queueFor(e,t,i=He){const r=i.getComparisonKey(e);let s=this.a.get(r);if(!s){s=new VD;const n=this.f++,o=lt.once(s.onDrained)(()=>{s?.dispose(),this.a.delete(r),this.h(),this.d?.deleteAndDispose(n),this.d?.size===0&&(this.d.dispose(),this.d=void 0)});this.d||(this.d=new Ru),this.d.set(n,o),this.a.set(r,s)}return s.queue(t)}h(){this.g()&&this.j()}j(){for(const e of this.b)e.complete();this.b.clear()}dispose(){for(const[,e]of this.a)e.dispose();this.a.clear(),this.j(),this.d?.dispose()}},GD=class{constructor(){this.d=void 0,this.f=!1}cancel(){this.d?.dispose(),this.d=void 0}cancelAndSet(e,t,i=globalThis){if(this.f)throw new ui("Calling 'cancelAndSet' on a disposed IntervalTimer");this.cancel();const r=i.setInterval(()=>{e()},t);this.d=oe(()=>{i.clearInterval(r),this.d=void 0})}dispose(){this.cancel(),this.f=!0}},mn=class{constructor(e,t){this.b=void 0,this.a=e,this.d=t,this.f=this.g.bind(this)}dispose(){this.cancel(),this.a=null}cancel(){this.isScheduled()&&(clearTimeout(this.b),this.b=void 0)}schedule(e=this.d){this.cancel(),this.b=setTimeout(this.f,e)}get delay(){return this.d}set delay(e){this.d=e}isScheduled(){return this.b!==void 0}flush(){this.isScheduled()&&(this.cancel(),this.h())}g(){this.b=void 0,this.a&&this.h()}h(){this.a?.()}},N4,ih;(function(){typeof globalThis.requestIdleCallback!="function"||typeof globalThis.cancelIdleCallback!="function"?ih=(e,t,i)=>{jy(()=>{if(r)return;const s=Date.now()+15;t(Object.freeze({didTimeout:!0,timeRemaining(){return Math.max(0,s-Date.now())}}))});let r=!1;return{dispose(){r||(r=!0)}}}:ih=(e,t,i)=>{const r=e.requestIdleCallback(t,typeof i=="number"?{timeout:i}:void 0);let s=!1;return{dispose(){s||(s=!0,e.cancelIdleCallback(r))}}},N4=(e,t)=>ih(globalThis,e,t)})();var JD=class{constructor(e,t){this.g=!1,this.d=()=>{try{this.j=t()}catch(i){this.l=i}finally{this.g=!0}},this.f=ih(e,()=>this.d())}dispose(){this.f.dispose()}get value(){if(this.g||(this.f.dispose(),this.d()),this.l)throw this.l;return this.j}get isInitialized(){return this.g}},ZD=class extends JD{constructor(e){super(globalThis,e)}},M4;(function(e){e[e.Resolved=0]="Resolved",e[e.Rejected=1]="Rejected"})(M4||(M4={}));var Is=class{get isRejected(){return this.d?.outcome===1}get isResolved(){return this.d?.outcome===0}get isSettled(){return!!this.d}get value(){return this.d?.outcome===0?this.d?.value:void 0}constructor(){this.p=new Promise((e,t)=>{this.a=e,this.b=t})}complete(e){return new Promise(t=>{this.a(e),this.d={outcome:0,value:e},t()})}error(e){return new Promise(t=>{this.b(e),this.d={outcome:1,value:e},t()})}settleWith(e){return e.then(t=>this.complete(t),t=>this.error(t))}cancel(){return this.error(new Ri)}},Do;(function(e){async function t(r){let s;const n=await Promise.all(r.map(o=>o.then(a=>a,a=>{s||(s=a)})));if(typeof s<"u")throw s;return n}e.settled=t;function i(r){return new Promise(async(s,n)=>{try{await r(s,n)}catch(o){n(o)}})}e.withAsyncBody=i})(Do||(Do={}));var F4;(function(e){e[e.Initial=0]="Initial",e[e.DoneOK=1]="DoneOK",e[e.DoneError=2]="DoneError"})(F4||(F4={}));var hc=class Hi{static fromArray(t){return new Hi(i=>{i.emitMany(t)})}static fromPromise(t){return new Hi(async i=>{i.emitMany(await t)})}static fromPromisesResolveOrder(t){return new Hi(async i=>{await Promise.all(t.map(async r=>i.emitOne(await r)))})}static merge(t){return new Hi(async i=>{await Promise.all(t.map(async r=>{for await(const s of r)i.emitOne(s)}))})}static{this.EMPTY=Hi.fromArray([])}constructor(t,i){this.a=0,this.b=[],this.d=null,this.f=i,this.g=new P,queueMicrotask(async()=>{const r={emitOne:s=>this.h(s),emitMany:s=>this.j(s),reject:s=>this.l(s)};try{await Promise.resolve(t(r)),this.k()}catch(s){this.l(s)}finally{r.emitOne=void 0,r.emitMany=void 0,r.reject=void 0}})}[Symbol.asyncIterator](){let t=0;return{next:async()=>{do{if(this.a===2)throw this.d;if(t<this.b.length)return{done:!1,value:this.b[t++]};if(this.a===1)return{done:!0,value:void 0};await lt.toPromise(this.g.event)}while(!0)},return:async()=>(this.f?.(),{done:!0,value:void 0})}}static map(t,i){return new Hi(async r=>{for await(const s of t)r.emitOne(i(s))})}map(t){return Hi.map(this,t)}static filter(t,i){return new Hi(async r=>{for await(const s of t)i(s)&&r.emitOne(s)})}filter(t){return Hi.filter(this,t)}static coalesce(t){return Hi.filter(t,i=>!!i)}coalesce(){return Hi.coalesce(this)}static async toPromise(t){const i=[];for await(const r of t)i.push(r);return i}toPromise(){return Hi.toPromise(this)}h(t){this.a===0&&(this.b.push(t),this.g.fire())}j(t){this.a===0&&(this.b=this.b.concat(t),this.g.fire())}k(){this.a===0&&(this.a=1,this.g.fire())}l(t){this.a===0&&(this.a=2,this.d=t,this.g.fire())}},Hg=class{constructor(e){this.a=new Is,this.b=new hc(r=>{if(t){r.reject(t);return}return i&&r.emitMany(i),this.d=s=>r.reject(s),this.f=s=>r.emitOne(s),this.g=s=>r.emitMany(s),this.a.p},e);let t,i;this.d=r=>{t||(t=r)},this.f=r=>{i||(i=[]),i.push(r)},this.g=r=>{i?r.forEach(s=>i.push(s)):i=r.slice()}}get asyncIterable(){return this.b}resolve(){this.a.complete()}reject(e){this.d(e),this.a.complete()}emitOne(e){this.f(e)}emitMany(e){this.g(e)}},WB=new class{transformIncoming(e){return e}transformOutgoing(e){return e}transformOutgoingURI(e){return e}transformOutgoingScheme(e){return e}};function O4(e,t,i,r){if(!e||r>200)return null;if(typeof e=="object"){if(e.$mid===1)return i?y.revive(t.transformIncoming(e)):t.transformIncoming(e);if(e instanceof ae)return null;for(const s in e)if(Object.hasOwnProperty.call(e,s)){const n=O4(e[s],t,i,r+1);n!==null&&(e[s]=n)}}return null}function dc(e,t){const i=O4(e,t,!1,0);return i===null?e:i}var U4=class{constructor(){this.a=null,this.b=null,this.d=null,this.f=!1,this.g=null,this.h=!1,this.i=null}get[Symbol.toStringTag](){return this.toString()}j(){return this.a||(this.a=new Promise((e,t)=>{this.b=e,this.d=t,this.f&&this.b(this.g),this.h&&this.d(this.i)})),this.a}resolveOk(e){this.f||this.h||(this.f=!0,this.g=e,this.a&&this.b(e))}resolveErr(e){this.f||this.h||(this.h=!0,this.i=e,this.a?this.d(e):Gt(e))}then(e,t){return this.j().then(e,t)}catch(e){return this.j().then(void 0,e)}finally(e){return this.j().finally(e)}},YD=class extends U4{constructor(){super(),this.h=!0,this.i=new Ri}},j4;function zg(e,t){try{return JSON.stringify(e,t)}catch{return"null"}}var _g="$$ref$$",QD={[_g]:-1};function B4(e,t=null,i=!1){const r=[];return{jsonString:(i?zg:JSON.stringify)(e,(n,o)=>{if(typeof o>"u")return QD;if(typeof o=="object"){if(o instanceof ae){const a=r.push(o)-1;return{[_g]:a}}if(t)return t(n,o)}return o}),referencedBuffers:r}}function H4(e,t,i){return JSON.parse(e,(r,s)=>{if(s){const n=s[_g];if(typeof n=="number")return t[n];if(i&&s.$mid===1)return i.transformIncoming(s)}return s})}function z4(e,t){return JSON.stringify(e,t)}function XD(e){return e?(t,i)=>i&&i.$mid===1?e.transformOutgoing(i):i:null}var _4;(function(e){e[e.LocalSide=0]="LocalSide",e[e.OtherSide=1]="OtherSide"})(_4||(_4={}));var W4;(function(e){e[e.Responsive=0]="Responsive",e[e.Unresponsive=1]="Unresponsive"})(W4||(W4={}));var KD=()=>{},e2=Symbol.for("rpcProtocol"),t2=Symbol.for("rpcProxy"),i2=class kb extends ne{static{j4=e2}static{this.a=3*1e3}constructor(t,i=null,r=null){super(),this[j4]=!0,this.b=this.B(new P),this.onDidChangeResponsiveState=this.b.event,this.c=t,this.f=i,this.g=r,this.h=XD(this.g),this.j=!1,this.m=[],this.s=[];for(let s=0,n=Xy.count;s<n;s++)this.m[s]=null,this.s[s]=null;this.t=0,this.u=Object.create(null),this.w={},this.y=0,this.z=0,this.C=0,this.D=this.B(new mn(()=>this.H(),1e3)),this.B(this.c.onMessage(s=>this.L(s)))}dispose(){this.j=!0,Object.keys(this.w).forEach(t=>{const i=this.w[t];delete this.w[t],i.resolveErr(Xb())}),super.dispose()}drain(){return typeof this.c.drain=="function"?this.c.drain():Promise.resolve()}F(t){this.z===0&&(this.C=Date.now()+kb.a),this.z++,this.D.isScheduled()||this.D.schedule()}G(t){this.C=Date.now()+kb.a,this.z--,this.z===0&&this.D.cancel(),this.I(0)}H(){this.z!==0&&(Date.now()>this.C?this.I(1):this.D.schedule())}I(t){this.y!==t&&(this.y=t,this.b.fire(this.y))}get responsiveState(){return this.y}transformIncomingURIs(t){return this.g?dc(t,this.g):t}getProxy(t){const{nid:i,sid:r}=t;return this.s[i]||(this.s[i]=this.J(i,r)),this.s[i]}J(t,i){const r={get:(s,n)=>(typeof n=="string"&&!s[n]&&n.charCodeAt(0)===36&&(s[n]=(...o)=>this.U(t,n,o)),n===t2?i:s[n])};return new Proxy(Object.create(null),r)}set(t,i){return this.m[t.nid]=i,i}assertRegistered(t){for(let i=0,r=t.length;i<r;i++){const s=t[i];if(!this.m[s.nid])throw new Error(`Missing proxy instance ${s.sid}`)}}L(t){if(this.j)return;const i=t.byteLength,r=pt.read(t,0),s=r.readUInt8(),n=r.readUInt32();switch(s){case 1:case 2:{let{rpcId:o,method:a,args:c}=qi.deserializeRequestJSONArgs(r);this.g&&(c=dc(c,this.g)),this.M(i,n,o,a,c,s===2);break}case 3:case 4:{let{rpcId:o,method:a,args:c}=qi.deserializeRequestMixedArgs(r);this.g&&(c=dc(c,this.g)),this.M(i,n,o,a,c,s===4);break}case 5:{this.f?.logIncoming(i,n,0,"ack"),this.G(n);break}case 6:{this.N(i,n);break}case 7:{this.O(i,n,void 0);break}case 9:{let o=qi.deserializeReplyOKJSON(r);this.g&&(o=dc(o,this.g)),this.O(i,n,o);break}case 10:{const o=qi.deserializeReplyOKJSONWithBuffers(r,this.g);this.O(i,n,o);break}case 8:{const o=qi.deserializeReplyOKVSBuffer(r);this.O(i,n,o);break}case 11:{let o=qi.deserializeReplyErrError(r);this.g&&(o=dc(o,this.g)),this.P(i,n,o);break}case 12:{this.P(i,n,void 0);break}default:console.error("received unexpected message"),console.error(t)}}M(t,i,r,s,n,o){this.f?.logIncoming(t,i,1,`receiveRequest ${Zu(r)}.${s}(`,n);const a=String(i);let c,l;if(o){const h=new at;n.push(h.token),c=this.Q(r,s,n),l=()=>h.cancel()}else c=this.Q(r,s,n),l=KD;this.u[a]=l;const u=qi.serializeAcknowledged(i);this.f?.logOutgoing(u.byteLength,i,1,"ack"),this.c.send(u),c.then(h=>{delete this.u[a];const f=qi.serializeReplyOK(i,h,this.h);this.f?.logOutgoing(f.byteLength,i,1,"reply:",h),this.c.send(f)},h=>{delete this.u[a];const f=qi.serializeReplyErr(i,h);this.f?.logOutgoing(f.byteLength,i,1,"replyErr:",h),this.c.send(f)})}N(t,i){this.f?.logIncoming(t,i,1,"receiveCancel");const r=String(i);this.u[r]?.()}O(t,i,r){this.f?.logIncoming(t,i,0,"receiveReply:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s],n.resolveOk(r)}P(t,i,r){this.f?.logIncoming(t,i,0,"receiveReplyErr:",r);const s=String(i);if(!this.w.hasOwnProperty(s))return;const n=this.w[s];delete this.w[s];let o;r&&(r.$isError?(o=new Error,o.name=r.name,o.message=r.message,o.stack=r.stack):o=r),n.resolveErr(o)}Q(t,i,r){try{return Promise.resolve(this.S(t,i,r))}catch(s){return Promise.reject(s)}}S(t,i,r){const s=this.m[t];if(!s)throw new Error("Unknown actor "+Zu(t));const n=s[i];if(typeof n!="function")throw new Error("Unknown method "+i+" on actor "+Zu(t));return n.apply(s,r)}U(t,i,r){if(this.j)return new YD;let s=null;if(r.length>0&&et.isCancellationToken(r[r.length-1])&&(s=r.pop()),s&&s.isCancellationRequested)return Promise.reject(Xb());const n=qi.serializeRequestArguments(r,this.h),o=++this.t,a=String(o),c=new U4,l=new ue;s&&l.add(s.onCancellationRequested(()=>{const h=qi.serializeCancel(o);this.f?.logOutgoing(h.byteLength,o,0,"cancel"),this.c.send(h)})),this.w[a]=new r2(c,l),this.F(o);const u=qi.serializeRequest(o,t,i,n,!!s);return this.f?.logOutgoing(u.byteLength,o,0,`request: ${Zu(t)}.${i}(`,r),this.c.send(u),c}},r2=class{constructor(e,t){this.a=e,this.b=t}resolveOk(e){this.a.resolveOk(e),this.b.dispose()}resolveErr(e){this.a.resolveErr(e),this.b.dispose()}},pt=class $b{static alloc(t,i,r){const s=new $b(ae.alloc(r+1+4),0);return s.writeUInt8(t),s.writeUInt32(i),s}static read(t,i){return new $b(t,i)}get buffer(){return this.a}constructor(t,i){this.a=t,this.b=i}static sizeUInt8(){return 1}static{this.sizeUInt32=4}writeUInt8(t){this.a.writeUInt8(t,this.b),this.b+=1}readUInt8(){const t=this.a.readUInt8(this.b);return this.b+=1,t}writeUInt32(t){this.a.writeUInt32BE(t,this.b),this.b+=4}readUInt32(){const t=this.a.readUInt32BE(this.b);return this.b+=4,t}static sizeShortString(t){return 1+t.byteLength}writeShortString(t){this.a.writeUInt8(t.byteLength,this.b),this.b+=1,this.a.set(t,this.b),this.b+=t.byteLength}readShortString(){const t=this.a.readUInt8(this.b);this.b+=1;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}static sizeLongString(t){return 4+t.byteLength}writeLongString(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readLongString(){const t=this.a.readUInt32BE(this.b);this.b+=4;const r=this.a.slice(this.b,this.b+t).toString();return this.b+=t,r}writeBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}static sizeVSBuffer(t){return 4+t.byteLength}writeVSBuffer(t){this.a.writeUInt32BE(t.byteLength,this.b),this.b+=4,this.a.set(t,this.b),this.b+=t.byteLength}readVSBuffer(){const t=this.a.readUInt32BE(this.b);this.b+=4;const i=this.a.slice(this.b,this.b+t);return this.b+=t,i}static sizeMixedArray(t){let i=0;i+=1;for(let r=0,s=t.length;r<s;r++){const n=t[r];switch(i+=1,n.type){case 1:i+=this.sizeLongString(n.value);break;case 2:i+=this.sizeVSBuffer(n.value);break;case 3:i+=this.sizeUInt32,i+=this.sizeLongString(n.value);for(let o=0;o<n.buffers.length;++o)i+=this.sizeVSBuffer(n.buffers[o]);break;case 4:break}}return i}writeMixedArray(t){this.a.writeUInt8(t.length,this.b),this.b+=1;for(let i=0,r=t.length;i<r;i++){const s=t[i];switch(s.type){case 1:this.writeUInt8(1),this.writeLongString(s.value);break;case 2:this.writeUInt8(2),this.writeVSBuffer(s.value);break;case 3:this.writeUInt8(3),this.writeUInt32(s.buffers.length),this.writeLongString(s.value);for(let n=0;n<s.buffers.length;++n)this.writeBuffer(s.buffers[n]);break;case 4:this.writeUInt8(4);break}}}readMixedArray(){const t=this.a.readUInt8(this.b);this.b+=1;const i=new Array(t);for(let r=0;r<t;r++)switch(this.readUInt8()){case 1:i[r]=this.readLongString();break;case 2:i[r]=this.readVSBuffer();break;case 3:{const n=this.readUInt32(),o=this.readLongString(),a=[];for(let c=0;c<n;++c)a.push(this.readVSBuffer());i[r]=new ni(H4(o,a,null));break}case 4:i[r]=void 0;break}return i}},V4;(function(e){e[e.Simple=0]="Simple",e[e.Mixed=1]="Mixed"})(V4||(V4={}));var qi=class{static a(e){for(let t=0,i=e.length;t<i;t++)if(e[t]instanceof ae||e[t]instanceof ni||typeof e[t]>"u")return!0;return!1}static serializeRequestArguments(e,t){if(this.a(e)){const i=[];for(let r=0,s=e.length;r<s;r++){const n=e[r];if(n instanceof ae)i[r]={type:2,value:n};else if(typeof n>"u")i[r]={type:4};else if(n instanceof ni){const{jsonString:o,referencedBuffers:a}=B4(n.value,t);i[r]={type:3,value:ae.fromString(o),buffers:a}}else i[r]={type:1,value:ae.fromString(z4(n,t))}}return{type:1,args:i}}return{type:0,args:z4(e,t)}}static serializeRequest(e,t,i,r,s){switch(r.type){case 0:return this.b(e,t,i,r.args,s);case 1:return this.c(e,t,i,r.args,s)}}static b(e,t,i,r,s){const n=ae.fromString(i),o=ae.fromString(r);let a=0;a+=pt.sizeUInt8(),a+=pt.sizeShortString(n),a+=pt.sizeLongString(o);const c=pt.alloc(s?2:1,e,a);return c.writeUInt8(t),c.writeShortString(n),c.writeLongString(o),c.buffer}static deserializeRequestJSONArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readLongString();return{rpcId:t,method:i,args:JSON.parse(r)}}static c(e,t,i,r,s){const n=ae.fromString(i);let o=0;o+=pt.sizeUInt8(),o+=pt.sizeShortString(n),o+=pt.sizeMixedArray(r);const a=pt.alloc(s?4:3,e,o);return a.writeUInt8(t),a.writeShortString(n),a.writeMixedArray(r),a.buffer}static deserializeRequestMixedArgs(e){const t=e.readUInt8(),i=e.readShortString(),r=e.readMixedArray(),s=new Array(r.length);for(let n=0,o=r.length;n<o;n++){const a=r[n];typeof a=="string"?s[n]=JSON.parse(a):s[n]=a}return{rpcId:t,method:i,args:s}}static serializeAcknowledged(e){return pt.alloc(5,e,0).buffer}static serializeCancel(e){return pt.alloc(6,e,0).buffer}static serializeReplyOK(e,t,i){if(typeof t>"u")return this.d(e);if(t instanceof ae)return this.e(e,t);if(t instanceof ni){const{jsonString:r,referencedBuffers:s}=B4(t.value,i,!0);return this.g(e,r,s)}else return this.f(e,zg(t,i))}static d(e){return pt.alloc(7,e,0).buffer}static e(e,t){let i=0;i+=pt.sizeVSBuffer(t);const r=pt.alloc(8,e,i);return r.writeVSBuffer(t),r.buffer}static deserializeReplyOKVSBuffer(e){return e.readVSBuffer()}static f(e,t){const i=ae.fromString(t);let r=0;r+=pt.sizeLongString(i);const s=pt.alloc(9,e,r);return s.writeLongString(i),s.buffer}static g(e,t,i){const r=ae.fromString(t);let s=0;s+=pt.sizeUInt32,s+=pt.sizeLongString(r);for(const o of i)s+=pt.sizeVSBuffer(o);const n=pt.alloc(10,e,s);n.writeUInt32(i.length),n.writeLongString(r);for(const o of i)n.writeBuffer(o);return n.buffer}static deserializeReplyOKJSON(e){const t=e.readLongString();return JSON.parse(t)}static deserializeReplyOKJSONWithBuffers(e,t){const i=e.readUInt32(),r=e.readLongString(),s=[];for(let n=0;n<i;++n)s.push(e.readVSBuffer());return new ni(H4(r,s,t))}static serializeReplyErr(e,t){const i=t?zg(mo(t),null):void 0;if(typeof i!="string")return this.h(e);const r=ae.fromString(i);let s=0;s+=pt.sizeLongString(r);const n=pt.alloc(11,e,s);return n.writeLongString(r),n.buffer}static deserializeReplyErrError(e){const t=e.readLongString();return JSON.parse(t)}static h(e){return pt.alloc(12,e,0).buffer}},q4;(function(e){e[e.RequestJSONArgs=1]="RequestJSONArgs",e[e.RequestJSONArgsWithCancellation=2]="RequestJSONArgsWithCancellation",e[e.RequestMixedArgs=3]="RequestMixedArgs",e[e.RequestMixedArgsWithCancellation=4]="RequestMixedArgsWithCancellation",e[e.Acknowledged=5]="Acknowledged",e[e.Cancel=6]="Cancel",e[e.ReplyOKEmpty=7]="ReplyOKEmpty",e[e.ReplyOKVSBuffer=8]="ReplyOKVSBuffer",e[e.ReplyOKJSON=9]="ReplyOKJSON",e[e.ReplyOKJSONWithBuffers=10]="ReplyOKJSONWithBuffers",e[e.ReplyErrError=11]="ReplyErrError",e[e.ReplyErrEmpty=12]="ReplyErrEmpty"})(q4||(q4={}));var G4;(function(e){e[e.String=1]="String",e[e.VSBuffer=2]="VSBuffer",e[e.SerializedObjectWithBuffers=3]="SerializedObjectWithBuffers",e[e.Undefined=4]="Undefined"})(G4||(G4={}));var ir;(function(e){e.serviceIds=new Map,e.DI_TARGET="$di$target",e.DI_DEPENDENCIES="$di$dependencies";function t(i){return i[e.DI_DEPENDENCIES]||[]}e.getServiceDependencies=t})(ir||(ir={}));var fc=B("instantiationService");function s2(e,t,i){t[ir.DI_TARGET]===t?t[ir.DI_DEPENDENCIES].push({id:e,index:i}):(t[ir.DI_DEPENDENCIES]=[{id:e,index:i}],t[ir.DI_TARGET]=t)}function B(e){if(ir.serviceIds.has(e))return ir.serviceIds.get(e);const t=function(i,r,s){if(arguments.length!==3)throw new Error("@IServiceName-decorator can only be used to decorate a parameter");s2(t,i,s)};return t.toString=()=>e,ir.serviceIds.set(e,t),t}function VB(e){return e}function Wg(e){if(!e)return;const t=e.indexOf("+");return t<0?e:e.substr(0,t)}var J4=["AI","Azure","Chat","Data Science","Debuggers","Extension Packs","Education","Formatters","Keymaps","Language Packs","Linters","Machine Learning","Notebooks","Programming Languages","SCM Providers","Snippets","Testing","Themes","Visualization","Other"],Z4;(function(e){e[e.System=0]="System",e[e.User=1]="User"})(Z4||(Z4={}));var Y4;(function(e){e.WIN32_X64="win32-x64",e.WIN32_ARM64="win32-arm64",e.LINUX_X64="linux-x64",e.LINUX_ARM64="linux-arm64",e.LINUX_ARMHF="linux-armhf",e.ALPINE_X64="alpine-x64",e.ALPINE_ARM64="alpine-arm64",e.DARWIN_X64="darwin-x64",e.DARWIN_ARM64="darwin-arm64",e.WEB="web",e.UNIVERSAL="universal",e.UNKNOWN="unknown",e.UNDEFINED="undefined"})(Y4||(Y4={}));var je=class{constructor(e){this.value=e,this._lower=e.toLowerCase()}static equals(e,t){if(typeof e>"u"||e===null)return typeof t>"u"||t===null;if(typeof t>"u"||t===null)return!1;if(typeof e=="string"||typeof t=="string"){const i=typeof e=="string"?e:e.value,r=typeof t=="string"?t:t.value;return ks(i,r)}return e._lower===t._lower}static toKey(e){return typeof e=="string"?e.toLowerCase():e._lower}},vn=class{get size(){return this.c.size}constructor(e){if(this.c=new Set,e)for(const t of e)this.add(t)}add(e){this.c.add(je.toKey(e))}delete(e){return this.c.delete(je.toKey(e))}has(e){return this.c.has(je.toKey(e))}},qr=class{constructor(){this.c=new Map}clear(){this.c.clear()}delete(e){this.c.delete(je.toKey(e))}get(e){return this.c.get(je.toKey(e))}has(e){return this.c.has(je.toKey(e))}set(e,t){this.c.set(je.toKey(e),t)}values(){return this.c.values()}forEach(e){this.c.forEach(e)}[Symbol.iterator](){return this.c[Symbol.iterator]()}},Q4=class extends Error{constructor(e,t,i){super(`Error in extension ${je.toKey(e)}: ${i??t.message}`,{cause:t}),this.name="ExtensionError",this.extension=e}},qB=B("IBuiltinExtensionsScannerService");function Vg(e,t){return t&&(e.stack||e.stacktrace)?d(110,null,K4(e),X4(e.stack)||X4(e.stacktrace)):K4(e)}function X4(e){return Array.isArray(e)?e.join(`
`):e}function K4(e){return e.code==="ERR_UNC_HOST_NOT_ALLOWED"?`${e.message}. Please update the 'security.allowedUNCHosts' setting if you want to allow this host.`:typeof e.code=="string"&&typeof e.errno=="number"&&typeof e.syscall=="string"?d(111,null,e.message):e.message||d(112,null)}function Po(e=null,t=!1){if(!e)return d(113,null);if(Array.isArray(e)){const i=vt(e),r=Po(i[0],t);return i.length>1?d(114,null,r,i.length):r}if(Ue(e))return e;if(e.detail){const i=e.detail;if(i.error)return Vg(i.error,t);if(i.exception)return Vg(i.exception,t)}return e.stack?Vg(e,t):e.message?e.message:d(115,null)}function pc(e){return qg(e,0)}function qg(e,t){switch(typeof e){case"object":return e===null?Gr(349,t):Array.isArray(e)?o2(e,t):a2(e,t);case"string":return Gg(e,t);case"boolean":return n2(e,t);case"number":return Gr(e,t);case"undefined":return Gr(937,t);default:return Gr(617,t)}}function Gr(e,t){return(t<<5)-t+e|0}function n2(e,t){return Gr(e?433:863,t)}function Gg(e,t){t=Gr(149417,t);for(let i=0,r=e.length;i<r;i++)t=Gr(e.charCodeAt(i),t);return t}function o2(e,t){return t=Gr(104579,t),e.reduce((i,r)=>qg(r,i),t)}function a2(e,t){return t=Gr(181387,t),Object.keys(e).sort().reduce((i,r)=>(i=Gg(r,i),qg(e[r],i)),t)}var e5;(function(e){e[e.BLOCK_SIZE=64]="BLOCK_SIZE",e[e.UNICODE_REPLACEMENT=65533]="UNICODE_REPLACEMENT"})(e5||(e5={}));function Jg(e,t,i=32){const r=i-t,s=~((1<<r)-1);return(e<<t|(s&e)>>>r)>>>0}function gc(e,t=32){return e instanceof ArrayBuffer?by(ae.wrap(new Uint8Array(e))):(e>>>0).toString(16).padStart(t/4,"0")}var GB=class U${static{this.g=new DataView(new ArrayBuffer(320))}constructor(){this.h=1732584193,this.l=4023233417,this.m=2562383102,this.n=271733878,this.o=3285377520,this.p=new Uint8Array(67),this.q=new DataView(this.p.buffer),this.r=0,this.t=0,this.u=0,this.v=!1}update(t){const i=t.length;if(i===0)return;const r=this.p;let s=this.r,n=this.u,o,a;for(n!==0?(o=n,a=-1,n=0):(o=t.charCodeAt(0),a=0);;){let c=o;if(Xu(o))if(a+1<i){const l=t.charCodeAt(a+1);Ku(l)?(a++,c=Fg(o,l)):c=65533}else{n=o;break}else Ku(o)&&(c=65533);if(s=this.w(r,s,c),a++,a<i)o=t.charCodeAt(a);else break}this.r=s,this.u=n}w(t,i,r){return r<128?t[i++]=r:r<2048?(t[i++]=192|(r&1984)>>>6,t[i++]=128|(r&63)>>>0):r<65536?(t[i++]=224|(r&61440)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0):(t[i++]=240|(r&1835008)>>>18,t[i++]=128|(r&258048)>>>12,t[i++]=128|(r&4032)>>>6,t[i++]=128|(r&63)>>>0),i>=64&&(this.y(),i-=64,this.t+=64,t[0]=t[64],t[1]=t[65],t[2]=t[66]),i}digest(){return this.v||(this.v=!0,this.u&&(this.u=0,this.r=this.w(this.p,this.r,65533)),this.t+=this.r,this.x()),gc(this.h)+gc(this.l)+gc(this.m)+gc(this.n)+gc(this.o)}x(){this.p[this.r++]=128,this.p.subarray(this.r).fill(0),this.r>56&&(this.y(),this.p.fill(0));const t=8*this.t;this.q.setUint32(56,Math.floor(t/4294967296),!1),this.q.setUint32(60,t%4294967296,!1),this.y()}y(){const t=U$.g,i=this.q;for(let h=0;h<64;h+=4)t.setUint32(h,i.getUint32(h,!1),!1);for(let h=64;h<320;h+=4)t.setUint32(h,Jg(t.getUint32(h-12,!1)^t.getUint32(h-32,!1)^t.getUint32(h-56,!1)^t.getUint32(h-64,!1),1),!1);let r=this.h,s=this.l,n=this.m,o=this.n,a=this.o,c,l,u;for(let h=0;h<80;h++)h<20?(c=s&n|~s&o,l=1518500249):h<40?(c=s^n^o,l=1859775393):h<60?(c=s&n|s&o|n&o,l=2400959708):(c=s^n^o,l=3395469782),u=Jg(r,5)+c+a+l+t.getUint32(h*4,!1)&4294967295,a=o,o=n,n=Jg(s,30),s=r,r=u;this.h=this.h+r&4294967295,this.l=this.l+s&4294967295,this.m=this.m+n&4294967295,this.n=this.n+o&4294967295,this.o=this.o+a&4294967295}},t5;(function(e){e[e.LParen=0]="LParen",e[e.RParen=1]="RParen",e[e.Neg=2]="Neg",e[e.Eq=3]="Eq",e[e.NotEq=4]="NotEq",e[e.Lt=5]="Lt",e[e.LtEq=6]="LtEq",e[e.Gt=7]="Gt",e[e.GtEq=8]="GtEq",e[e.RegexOp=9]="RegexOp",e[e.RegexStr=10]="RegexStr",e[e.True=11]="True",e[e.False=12]="False",e[e.In=13]="In",e[e.Not=14]="Not",e[e.And=15]="And",e[e.Or=16]="Or",e[e.Str=17]="Str",e[e.QuotedStr=18]="QuotedStr",e[e.Error=19]="Error",e[e.EOF=20]="EOF"})(t5||(t5={}));function Zg(...e){switch(e.length){case 1:return d(1818,null,e[0]);case 2:return d(1819,null,e[0],e[1]);case 3:return d(1820,null,e[0],e[1],e[2]);default:return}}var c2=d(1821,null),l2=d(1822,null),mc=class Cb{constructor(){this.c="",this.d=0,this.e=0,this.f=[],this.g=[],this.m=/[a-zA-Z0-9_<>\-\./\\:\*\?\+\[\]\^,#@;"%\$\p{L}-]+/uy}static getLexeme(t){switch(t.type){case 0:return"(";case 1:return")";case 2:return"!";case 3:return t.isTripleEq?"===":"==";case 4:return t.isTripleEq?"!==":"!=";case 5:return"<";case 6:return"<=";case 7:return">=";case 8:return">=";case 9:return"=~";case 10:return t.lexeme;case 11:return"true";case 12:return"false";case 13:return"in";case 14:return"not";case 15:return"&&";case 16:return"||";case 17:return t.lexeme;case 18:return t.lexeme;case 19:return t.lexeme;case 20:return"EOF";default:throw ag(`unhandled token type: ${JSON.stringify(t)}; have you forgotten to add a case?`)}}static{this.a=new Set(["i","g","s","m","y","u"].map(t=>t.charCodeAt(0)))}static{this.b=new Map([["not",14],["in",13],["false",12],["true",11]])}get errors(){return this.g}reset(t){return this.c=t,this.d=0,this.e=0,this.f=[],this.g=[],this}scan(){for(;!this.r();)switch(this.d=this.e,this.i()){case 40:this.k(0);break;case 41:this.k(1);break;case 33:if(this.h(61)){const i=this.h(61);this.f.push({type:4,offset:this.d,isTripleEq:i})}else this.k(2);break;case 39:this.o();break;case 47:this.q();break;case 61:if(this.h(61)){const i=this.h(61);this.f.push({type:3,offset:this.d,isTripleEq:i})}else this.h(126)?this.k(9):this.l(Zg("==","=~"));break;case 60:this.k(this.h(61)?6:5);break;case 62:this.k(this.h(61)?8:7);break;case 38:this.h(38)?this.k(15):this.l(Zg("&&"));break;case 124:this.h(124)?this.k(16):this.l(Zg("||"));break;case 32:case 13:case 9:case 10:case 160:break;default:this.n()}return this.d=this.e,this.k(20),Array.from(this.f)}h(t){return this.r()||this.c.charCodeAt(this.e)!==t?!1:(this.e++,!0)}i(){return this.c.charCodeAt(this.e++)}j(){return this.r()?0:this.c.charCodeAt(this.e)}k(t){this.f.push({type:t,offset:this.d})}l(t){const i=this.d,r=this.c.substring(this.d,this.e),s={type:19,offset:this.d,lexeme:r};this.g.push({offset:i,lexeme:r,additionalInfo:t}),this.f.push(s)}n(){this.m.lastIndex=this.d;const t=this.m.exec(this.c);if(t){this.e=this.d+t[0].length;const i=this.c.substring(this.d,this.e),r=Cb.b.get(i);r?this.k(r):this.f.push({type:17,lexeme:i,offset:this.d})}}o(){for(;this.j()!==39&&!this.r();)this.i();if(this.r()){this.l(c2);return}this.i(),this.f.push({type:18,lexeme:this.c.substring(this.d+1,this.e-1),offset:this.d+1})}q(){let t=this.e,i=!1,r=!1;for(;;){if(t>=this.c.length){this.e=t,this.l(l2);return}const n=this.c.charCodeAt(t);if(i)i=!1;else if(n===47&&!r){t++;break}else n===91?r=!0:n===92?i=!0:n===93&&(r=!1);t++}for(;t<this.c.length&&Cb.a.has(this.c.charCodeAt(t));)t++;this.e=t;const s=this.c.substring(this.d,this.e);this.f.push({type:10,lexeme:s,offset:this.d})}r(){return this.e>=this.c.length}},Wt=new Map;Wt.set("false",!1),Wt.set("true",!0),Wt.set("isMac",Oi),Wt.set("isLinux",Es),Wt.set("isWindows",ei),Wt.set("isWeb",Eo),Wt.set("isMacNative",Oi&&!Eo),Wt.set("isEdge",Wy),Wt.set("isFirefox",I3),Wt.set("isChrome",$g),Wt.set("isSafari",D3);var u2=Object.prototype.hasOwnProperty,i5;(function(e){e[e.False=0]="False",e[e.True=1]="True",e[e.Defined=2]="Defined",e[e.Not=3]="Not",e[e.Equals=4]="Equals",e[e.NotEquals=5]="NotEquals",e[e.And=6]="And",e[e.Regex=7]="Regex",e[e.NotRegex=8]="NotRegex",e[e.Or=9]="Or",e[e.In=10]="In",e[e.NotIn=11]="NotIn",e[e.Greater=12]="Greater",e[e.GreaterEquals=13]="GreaterEquals",e[e.Smaller=14]="Smaller",e[e.SmallerEquals=15]="SmallerEquals"})(i5||(i5={}));var h2={regexParsingWithErrorRecovery:!0},d2=d(1798,null),f2=d(1799,null),p2=d(1800,null),r5=d(1801,null),g2=d(1802,null),m2=d(1803,null),v2=d(1804,null),w2=d(1805,null),s5=class bu{static{this.c=new Error}get lexingErrors(){return this.d.errors}get parsingErrors(){return this.h}constructor(t=h2){this.k=t,this.d=new mc,this.f=[],this.g=0,this.h=[],this.v=/g|y/g}parse(t){if(t===""){this.h.push({message:d2,offset:0,lexeme:"",additionalInfo:f2});return}this.f=this.d.reset(t).scan(),this.g=0,this.h=[];try{const i=this.l();if(!this.E()){const r=this.D(),s=r.type===17?m2:void 0;throw this.h.push({message:g2,offset:r.offset,lexeme:mc.getLexeme(r),additionalInfo:s}),bu.c}return i}catch(i){if(i!==bu.c)throw i;return}}l(){return this.m()}m(){const t=[this.o()];for(;this.y(16);){const i=this.o();t.push(i)}return t.length===1?t[0]:gt.or(...t)}o(){const t=[this.s()];for(;this.y(15);){const i=this.s();t.push(i)}return t.length===1?t[0]:gt.and(...t)}s(){if(this.y(2)){const t=this.D();switch(t.type){case 11:return this.z(),di.INSTANCE;case 12:return this.z(),ki.INSTANCE;case 0:{this.z();const i=this.l();return this.A(1,r5),i?.negate()}case 17:return this.z(),bc.create(t.lexeme);default:throw this.B("KEY | true | false | '(' expression ')'",t)}}return this.t()}t(){const t=this.D();switch(t.type){case 11:return this.z(),gt.true();case 12:return this.z(),gt.false();case 0:{this.z();const i=this.l();return this.A(1,r5),i}case 17:{const i=t.lexeme;if(this.z(),this.y(9)){const s=this.D();if(!this.k.regexParsingWithErrorRecovery){if(this.z(),s.type!==10)throw this.B("REGEX",s);const n=s.lexeme,o=n.lastIndexOf("/"),a=o===n.length-1?void 0:this.w(n.substring(o+1));let c;try{c=new RegExp(n.substring(1,o),a)}catch{throw this.B("REGEX",s)}return tm.create(i,c)}switch(s.type){case 10:case 19:{const n=[s.lexeme];this.z();let o=this.D(),a=0;for(let f=0;f<s.lexeme.length;f++)s.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--;for(;!this.E()&&o.type!==15&&o.type!==16;){switch(o.type){case 0:a++;break;case 1:a--;break;case 10:case 18:for(let f=0;f<o.lexeme.length;f++)o.lexeme.charCodeAt(f)===40?a++:s.lexeme.charCodeAt(f)===41&&a--}if(a<0)break;n.push(mc.getLexeme(o)),this.z(),o=this.D()}const c=n.join(""),l=c.lastIndexOf("/"),u=l===c.length-1?void 0:this.w(c.substring(l+1));let h;try{h=new RegExp(c.substring(1,l),u)}catch{throw this.B("REGEX",s)}return gt.regex(i,h)}case 18:{const n=s.lexeme;this.z();let o=null;if(!Qu(n)){const a=n.indexOf("/"),c=n.lastIndexOf("/");if(a!==c&&a>=0){const l=n.slice(a+1,c),u=n[c+1]==="i"?"i":"";try{o=new RegExp(l,u)}catch{throw this.B("REGEX",s)}}}if(o===null)throw this.B("REGEX",s);return tm.create(i,o)}default:throw this.B("REGEX",this.D())}}if(this.y(14)){this.A(13,p2);const s=this.u();return gt.notIn(i,s)}switch(this.D().type){case 3:{this.z();const s=this.u();if(this.x().type===18)return gt.equals(i,s);switch(s){case"true":return gt.has(i);case"false":return gt.not(i);default:return gt.equals(i,s)}}case 4:{this.z();const s=this.u();if(this.x().type===18)return gt.notEquals(i,s);switch(s){case"true":return gt.not(i);case"false":return gt.has(i);default:return gt.notEquals(i,s)}}case 5:return this.z(),Kg.create(i,this.u());case 6:return this.z(),em.create(i,this.u());case 7:return this.z(),sh.create(i,this.u());case 8:return this.z(),Xg.create(i,this.u());case 13:return this.z(),gt.in(i,this.u());default:return gt.has(i)}}case 20:throw this.h.push({message:v2,offset:t.offset,lexeme:"",additionalInfo:w2}),bu.c;default:throw this.B(`true | false | KEY 
	| KEY '=~' REGEX 
	| KEY ('==' | '!=' | '<' | '<=' | '>' | '>=' | 'in' | 'not' 'in') value`,this.D())}}u(){const t=this.D();switch(t.type){case 17:case 18:return this.z(),t.lexeme;case 11:return this.z(),"true";case 12:return this.z(),"false";case 13:return this.z(),"in";default:return""}}w(t){return t.replaceAll(this.v,"")}x(){return this.f[this.g-1]}y(t){return this.C(t)?(this.z(),!0):!1}z(){return this.E()||this.g++,this.x()}A(t,i){if(this.C(t))return this.z();throw this.B(i,this.D())}B(t,i,r){const s=d(1806,null,t,mc.getLexeme(i)),n=i.offset,o=mc.getLexeme(i);return this.h.push({message:s,offset:n,lexeme:o,additionalInfo:r}),bu.c}C(t){return this.D().type===t}D(){return this.f[this.g]}E(){return this.D().type===20}},gt=class{static false(){return di.INSTANCE}static true(){return ki.INSTANCE}static has(e){return wc.create(e)}static equals(e,t){return Yg.create(e,t)}static notEquals(e,t){return Qg.create(e,t)}static regex(e,t){return tm.create(e,t)}static in(e,t){return n5.create(e,t)}static notIn(e,t){return o5.create(e,t)}static not(e){return bc.create(e)}static and(...e){return c5.create(e,null,!0)}static or(...e){return im.create(e,null,!0)}static greater(e,t){return sh.create(e,t)}static greaterEquals(e,t){return Xg.create(e,t)}static smaller(e,t){return Kg.create(e,t)}static smallerEquals(e,t){return em.create(e,t)}static{this.c=new s5({regexParsingWithErrorRecovery:!1})}static deserialize(e){return e==null?void 0:this.c.parse(e)}};function b2(e){const t=new s5({regexParsingWithErrorRecovery:!1});return e.map(i=>(t.parse(i),t.lexingErrors.length>0?t.lexingErrors.map(r=>({errorMessage:r.additionalInfo?d(1807,null,r.additionalInfo):d(1808,null),offset:r.offset,length:r.lexeme.length})):t.parsingErrors.length>0?t.parsingErrors.map(r=>({errorMessage:r.additionalInfo?`${r.message}. ${r.additionalInfo}`:r.message,offset:r.offset,length:r.lexeme.length})):[]))}function vc(e,t){return e.cmp(t)}var di=class j${static{this.INSTANCE=new j$}constructor(){this.type=0}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!1}serialize(){return"false"}keys(){return[]}map(t){return this}negate(){return ki.INSTANCE}},ki=class B${static{this.INSTANCE=new B$}constructor(){this.type=1}cmp(t){return this.type-t.type}equals(t){return t.type===this.type}substituteConstants(){return this}evaluate(t){return!0}serialize(){return"true"}keys(){return[]}map(t){return this}negate(){return di.INSTANCE}},wc=class H${static create(t,i=null){const r=Wt.get(t);return typeof r=="boolean"?r?ki.INSTANCE:di.INSTANCE:new H$(t,i)}constructor(t,i){this.key=t,this.c=i,this.type=2}cmp(t){return t.type!==this.type?this.type-t.type:l5(this.key,t.key)}equals(t){return t.type===this.type?this.key===t.key:!1}substituteConstants(){const t=Wt.get(this.key);return typeof t=="boolean"?t?ki.INSTANCE:di.INSTANCE:this}evaluate(t){return!!t.getValue(this.key)}serialize(){return this.key}keys(){return[this.key]}map(t){return t.mapDefined(this.key)}negate(){return this.c||(this.c=bc.create(this.key,this)),this.c}},Yg=class z${static create(t,i,r=null){if(typeof i=="boolean")return i?wc.create(t,r):bc.create(t,r);const s=Wt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?ki.INSTANCE:di.INSTANCE:new z$(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=4}cmp(t){return t.type!==this.type?this.type-t.type:wn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Wt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?ki.INSTANCE:di.INSTANCE}return this}evaluate(t){return t.getValue(this.c)==this.d}serialize(){return`${this.c} == '${this.d}'`}keys(){return[this.c]}map(t){return t.mapEquals(this.c,this.d)}negate(){return this.f||(this.f=Qg.create(this.c,this.d,this)),this.f}},n5=class _${static create(t,i){return new _$(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=10,this.c=null}cmp(t){return t.type!==this.type?this.type-t.type:wn(this.d,this.f,t.d,t.f)}equals(t){return t.type===this.type?this.d===t.d&&this.f===t.f:!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.f),r=t.getValue(this.d);return Array.isArray(i)?i.includes(r):typeof r=="string"&&typeof i=="object"&&i!==null?u2.call(i,r):!1}serialize(){return`${this.d} in '${this.f}'`}keys(){return[this.d,this.f]}map(t){return t.mapIn(this.d,this.f)}negate(){return this.c||(this.c=o5.create(this.d,this.f)),this.c}},o5=class W${static create(t,i){return new W$(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=11,this.c=n5.create(t,i)}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`${this.d} not in '${this.f}'`}keys(){return this.c.keys()}map(t){return t.mapNotIn(this.d,this.f)}negate(){return this.c}},Qg=class V${static create(t,i,r=null){if(typeof i=="boolean")return i?bc.create(t,r):wc.create(t,r);const s=Wt.get(t);return typeof s=="boolean"?i===(s?"true":"false")?di.INSTANCE:ki.INSTANCE:new V$(t,i,r)}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=5}cmp(t){return t.type!==this.type?this.type-t.type:wn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){const t=Wt.get(this.c);if(typeof t=="boolean"){const i=t?"true":"false";return this.d===i?di.INSTANCE:ki.INSTANCE}return this}evaluate(t){return t.getValue(this.c)!=this.d}serialize(){return`${this.c} != '${this.d}'`}keys(){return[this.c]}map(t){return t.mapNotEquals(this.c,this.d)}negate(){return this.f||(this.f=Yg.create(this.c,this.d,this)),this.f}},bc=class q${static create(t,i=null){const r=Wt.get(t);return typeof r=="boolean"?r?di.INSTANCE:ki.INSTANCE:new q$(t,i)}constructor(t,i){this.c=t,this.d=i,this.type=3}cmp(t){return t.type!==this.type?this.type-t.type:l5(this.c,t.c)}equals(t){return t.type===this.type?this.c===t.c:!1}substituteConstants(){const t=Wt.get(this.c);return typeof t=="boolean"?t?di.INSTANCE:ki.INSTANCE:this}evaluate(t){return!t.getValue(this.c)}serialize(){return`!${this.c}`}keys(){return[this.c]}map(t){return t.mapNot(this.c)}negate(){return this.d||(this.d=wc.create(this.c,this)),this.d}};function rh(e,t){if(typeof e=="string"){const i=parseFloat(e);isNaN(i)||(e=i)}return typeof e=="string"||typeof e=="number"?t(e):di.INSTANCE}var sh=class G${static create(t,i,r=null){return rh(i,s=>new G$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=12}cmp(t){return t.type!==this.type?this.type-t.type:wn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>this.d}serialize(){return`${this.c} > ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreater(this.c,this.d)}negate(){return this.f||(this.f=em.create(this.c,this.d,this)),this.f}},Xg=class J${static create(t,i,r=null){return rh(i,s=>new J$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=13}cmp(t){return t.type!==this.type?this.type-t.type:wn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))>=this.d}serialize(){return`${this.c} >= ${this.d}`}keys(){return[this.c]}map(t){return t.mapGreaterEquals(this.c,this.d)}negate(){return this.f||(this.f=Kg.create(this.c,this.d,this)),this.f}},Kg=class Z${static create(t,i,r=null){return rh(i,s=>new Z$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=14}cmp(t){return t.type!==this.type?this.type-t.type:wn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<this.d}serialize(){return`${this.c} < ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmaller(this.c,this.d)}negate(){return this.f||(this.f=Xg.create(this.c,this.d,this)),this.f}},em=class Y${static create(t,i,r=null){return rh(i,s=>new Y$(t,s,r))}constructor(t,i,r){this.c=t,this.d=i,this.f=r,this.type=15}cmp(t){return t.type!==this.type?this.type-t.type:wn(this.c,this.d,t.c,t.d)}equals(t){return t.type===this.type?this.c===t.c&&this.d===t.d:!1}substituteConstants(){return this}evaluate(t){return typeof this.d=="string"?!1:parseFloat(t.getValue(this.c))<=this.d}serialize(){return`${this.c} <= ${this.d}`}keys(){return[this.c]}map(t){return t.mapSmallerEquals(this.c,this.d)}negate(){return this.f||(this.f=sh.create(this.c,this.d,this)),this.f}},tm=class Q${static create(t,i){return new Q$(t,i)}constructor(t,i){this.d=t,this.f=i,this.type=7,this.c=null}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.d<t.d)return-1;if(this.d>t.d)return 1;const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return i<r?-1:i>r?1:0}equals(t){if(t.type===this.type){const i=this.f?this.f.source:"",r=t.f?t.f.source:"";return this.d===t.d&&i===r}return!1}substituteConstants(){return this}evaluate(t){const i=t.getValue(this.d);return this.f?this.f.test(i):!1}serialize(){const t=this.f?`/${this.f.source}/${this.f.flags}`:"/invalid/";return`${this.d} =~ ${t}`}keys(){return[this.d]}map(t){return t.mapRegex(this.d,this.f)}negate(){return this.c||(this.c=y2.create(this)),this.c}},y2=class Ib{static create(t){return new Ib(t)}constructor(t){this.c=t,this.type=8}cmp(t){return t.type!==this.type?this.type-t.type:this.c.cmp(t.c)}equals(t){return t.type===this.type?this.c.equals(t.c):!1}substituteConstants(){return this}evaluate(t){return!this.c.evaluate(t)}serialize(){return`!(${this.c.serialize()})`}keys(){return this.c.keys()}map(t){return new Ib(this.c.map(t))}negate(){return this.c}};function a5(e){let t=null;for(let i=0,r=e.length;i<r;i++){const s=e[i].substituteConstants();if(e[i]!==s&&t===null){t=[];for(let n=0;n<i;n++)t[n]=e[n]}t!==null&&(t[i]=s)}return t===null?e:t}var c5=class _a{static create(t,i,r){return _a.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=6}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=vc(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=a5(this.expr);return t===this.expr?this:_a.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].evaluate(t))return!1;return!0}static d(t,i,r){const s=[];let n=!1;for(const o of t)if(o){if(o.type===1){n=!0;continue}if(o.type===0)return di.INSTANCE;if(o.type===6){s.push(...o.expr);continue}s.push(o)}if(s.length===0&&n)return ki.INSTANCE;if(s.length!==0){if(s.length===1)return s[0];s.sort(vc);for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];for(;s.length>1;){const o=s[s.length-1];if(o.type!==9)break;s.pop();const a=s.pop(),c=s.length===0,l=im.create(o.expr.map(u=>_a.create([u,a],null,r)),null,c);l&&(s.push(l),s.sort(vc))}if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return di.INSTANCE;if(s.length===1)return s[0]}return new _a(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" && ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new _a(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());this.c=im.create(t,this,!0)}return this.c}},im=class ho{static create(t,i,r){return ho.d(t,i,r)}constructor(t,i){this.expr=t,this.c=i,this.type=9}cmp(t){if(t.type!==this.type)return this.type-t.type;if(this.expr.length<t.expr.length)return-1;if(this.expr.length>t.expr.length)return 1;for(let i=0,r=this.expr.length;i<r;i++){const s=vc(this.expr[i],t.expr[i]);if(s!==0)return s}return 0}equals(t){if(t.type===this.type){if(this.expr.length!==t.expr.length)return!1;for(let i=0,r=this.expr.length;i<r;i++)if(!this.expr[i].equals(t.expr[i]))return!1;return!0}return!1}substituteConstants(){const t=a5(this.expr);return t===this.expr?this:ho.create(t,this.c,!1)}evaluate(t){for(let i=0,r=this.expr.length;i<r;i++)if(this.expr[i].evaluate(t))return!0;return!1}static d(t,i,r){let s=[],n=!1;if(t){for(let o=0,a=t.length;o<a;o++){const c=t[o];if(c){if(c.type===0){n=!0;continue}if(c.type===1)return ki.INSTANCE;if(c.type===9){s=s.concat(c.expr);continue}s.push(c)}}if(s.length===0&&n)return di.INSTANCE;s.sort(vc)}if(s.length!==0){if(s.length===1)return s[0];for(let o=1;o<s.length;o++)s[o-1].equals(s[o])&&(s.splice(o,1),o--);if(s.length===1)return s[0];if(r){for(let o=0;o<s.length;o++)for(let a=o+1;a<s.length;a++)if(s[o].negate().equals(s[a]))return ki.INSTANCE;if(s.length===1)return s[0]}return new ho(s,i)}}serialize(){return this.expr.map(t=>t.serialize()).join(" || ")}keys(){const t=[];for(const i of this.expr)t.push(...i.keys());return t}map(t){return new ho(this.expr.map(i=>i.map(t)),null)}negate(){if(!this.c){const t=[];for(const i of this.expr)t.push(i.negate());for(;t.length>1;){const i=t.shift(),r=t.shift(),s=[];for(const n of u5(i))for(const o of u5(r))s.push(c5.create([n,o],null,!1));t.unshift(ho.create(s,null,!1))}this.c=ho.create(t,this,!0)}return this.c}},C=class Vp extends wc{static{this.d=[]}static all(){return Vp.d.values()}constructor(t,i,r){super(t,null),this.f=i,typeof r=="object"?Vp.d.push({...r,key:t}):r!==!0&&Vp.d.push({key:t,description:r,type:i!=null?typeof i:void 0})}bindTo(t){return t.createKey(this.key,this.f)}getValue(t){return t.getContextKeyValue(this.key)}toNegated(){return this.negate()}isEqualTo(t){return Yg.create(this.key,t)}notEqualsTo(t){return Qg.create(this.key,t)}greater(t){return sh.create(this.key,t)}},rm=B("contextKeyService");function l5(e,t){return e<t?-1:e>t?1:0}function wn(e,t,i,r){return e<i?-1:e>i?1:t<r?-1:t>r?1:0}function u5(e){return e.type===9?e.expr:[e]}var We=B("logService"),bn=B("loggerService"),$e;(function(e){e[e.Off=0]="Off",e[e.Trace=1]="Trace",e[e.Debug=2]="Debug",e[e.Info=3]="Info",e[e.Warning=4]="Warning",e[e.Error=5]="Error"})($e||($e={}));var x2=$e.Info;function E2(e,t){return e!==$e.Off&&e<=t}function S2(e,t,i){switch(t){case $e.Trace:e.trace(i);break;case $e.Debug:e.debug(i);break;case $e.Info:e.info(i);break;case $e.Warning:e.warn(i);break;case $e.Error:e.error(i);break;case $e.Off:break;default:throw new Error(`Invalid log level ${t}`)}}function Ao(e,t=!1){let i="";for(let r=0;r<e.length;r++){let s=e[r];if(s instanceof Error&&(s=Po(s,t)),typeof s=="object")try{s=JSON.stringify(s)}catch{}i+=(r>0?" ":"")+s}return i}var h5=class extends ne{constructor(){super(...arguments),this.b=x2,this.c=this.B(new P),this.onDidChangeLogLevel=this.c.event}setLevel(e){this.b!==e&&(this.b=e,this.c.fire(this.b))}getLevel(){return this.b}f(e){return E2(this.b,e)}g(e){return this.q.isDisposed?!1:this.f(e)}},d5=class extends h5{constructor(e){super(),this.h=e}f(e){return this.h||super.f(e)}trace(e,...t){this.g($e.Trace)&&this.m($e.Trace,Ao([e,...t],!0))}debug(e,...t){this.g($e.Debug)&&this.m($e.Debug,Ao([e,...t]))}info(e,...t){this.g($e.Info)&&this.m($e.Info,Ao([e,...t]))}warn(e,...t){this.g($e.Warning)&&this.m($e.Warning,Ao([e,...t]))}error(e,...t){if(this.g($e.Error))if(e instanceof Error){const i=Array.prototype.slice.call(arguments);i[0]=e.stack,this.m($e.Error,Ao(i))}else this.m($e.Error,Ao([e,...t]))}flush(){}},k2=class extends h5{constructor(e){super(),this.h=e,e.length&&this.setLevel(e[0].getLevel())}setLevel(e){for(const t of this.h)t.setLevel(e);super.setLevel(e)}trace(e,...t){for(const i of this.h)i.trace(e,...t)}debug(e,...t){for(const i of this.h)i.debug(e,...t)}info(e,...t){for(const i of this.h)i.info(e,...t)}warn(e,...t){for(const i of this.h)i.warn(e,...t)}error(e,...t){for(const i of this.h)i.error(e,...t)}flush(){for(const e of this.h)e.flush()}dispose(){for(const e of this.h)e.dispose();super.dispose()}},$2=class extends ne{constructor(e,t,i){if(super(),this.j=e,this.m=t,this.b=new Ft,this.f=this.B(new P),this.onDidChangeLoggers=this.f.event,this.g=this.B(new P),this.onDidChangeLogLevel=this.g.event,this.h=this.B(new P),this.onDidChangeVisibility=this.h.event,i)for(const r of i)this.b.set(r.resource,{logger:void 0,info:r})}n(e){return Ue(e)?[...this.b.values()].find(t=>t.info.id===e):this.b.get(e)}getLogger(e){return this.n(e)?.logger}createLogger(e,t){const i=this.s(e),r=Ue(e)?e:t?.id??pc(i.toString()).toString(16);let s=this.b.get(i)?.logger;const n=t?.logLevel==="always"?$e.Trace:t?.logLevel;s||(s=this.t(i,n??this.getLogLevel(i)??this.j,{...t,id:r}));const o={logger:s,info:{resource:i,id:r,logLevel:n,name:t?.name,hidden:t?.hidden,group:t?.group,extensionId:t?.extensionId,when:t?.when}};return this.registerLogger(o.info),this.b.set(i,o),s}s(e){return Ue(e)?Zt(this.m,`${e}.log`):e}setLogLevel(e,t){if(y.isUri(e)){const i=e,r=t,s=this.b.get(i);s&&r!==s.info.logLevel&&(s.info.logLevel=r===this.j?void 0:r,s.logger?.setLevel(r),this.b.set(s.info.resource,s),this.g.fire([i,r]))}else{this.j=e;for(const[i,r]of this.b.entries())this.b.get(i)?.info.logLevel===void 0&&r.logger?.setLevel(this.j);this.g.fire(this.j)}}setVisibility(e,t){const i=this.n(e);i&&t!==!i.info.hidden&&(i.info.hidden=!t,this.b.set(i.info.resource,i),this.h.fire([i.info.resource,t]))}getLogLevel(e){let t;return e&&(t=this.b.get(e)?.info.logLevel),t??this.j}registerLogger(e){const t=this.b.get(e.resource);t?t.info.hidden!==e.hidden&&this.setVisibility(e.resource,!e.hidden):(this.b.set(e.resource,{info:e,logger:void 0}),this.f.fire({added:[e],removed:[]}))}deregisterLogger(e){const t=this.s(e),i=this.b.get(t);i&&(i.logger&&i.logger.dispose(),this.b.delete(t),this.f.fire({added:[],removed:[i.info]}))}*getRegisteredLoggers(){for(const e of this.b.values())yield e.info}getRegisteredLogger(e){return this.b.get(e)?.info}dispose(){this.b.forEach(e=>e.logger?.dispose()),this.b.clear(),super.dispose()}};function C2(e){switch(e){case $e.Trace:return"trace";case $e.Debug:return"debug";case $e.Info:return"info";case $e.Warning:return"warn";case $e.Error:return"error";case $e.Off:return"off"}}function I2(e){switch(e){case"trace":return $e.Trace;case"debug":return $e.Debug;case"info":return $e.Info;case"warn":return $e.Warning;case"error":return $e.Error;case"critical":return $e.Error;case"off":return $e.Off}}var JB=new C("logLevel",C2($e.Info)),Sr=class{constructor(e,t=[],i=!1){this.ctor=e,this.staticArguments=t,this.supportsDelayedInstantiation=i}},f5=[],p5;(function(e){e[e.Eager=0]="Eager",e[e.Delayed=1]="Delayed"})(p5||(p5={}));function Ve(e,t,i){t instanceof Sr||(t=new Sr(t,[],!!i)),f5.push([e,t])}function D2(){return f5}var sm=class{constructor(...e){this.a=new Map;for(const[t,i]of e)this.set(t,i)}set(e,t){const i=this.a.get(e);return this.a.set(e,t),i}has(e){return this.a.has(e)}get(e){return this.a.get(e)}},It=B("IExtHostInitDataService"),P2=class{constructor(e,t){this.key=e,this.data=t,this.incoming=new Map,this.outgoing=new Map}},g5=class{constructor(e){this.b=e,this.a=new Map}roots(){const e=[];for(const t of this.a.values())t.outgoing.size===0&&e.push(t);return e}insertEdge(e,t){const i=this.lookupOrInsertNode(e),r=this.lookupOrInsertNode(t);i.outgoing.set(r.key,r),r.incoming.set(i.key,i)}removeNode(e){const t=this.b(e);this.a.delete(t);for(const i of this.a.values())i.outgoing.delete(t),i.incoming.delete(t)}lookupOrInsertNode(e){const t=this.b(e);let i=this.a.get(t);return i||(i=new P2(t,e),this.a.set(t,i)),i}lookup(e){return this.a.get(this.b(e))}isEmpty(){return this.a.size===0}toString(){const e=[];for(const[t,i]of this.a)e.push(`${t}
	(-> incoming)[${[...i.incoming.keys()].join(", ")}]
	(outgoing ->)[${[...i.outgoing.keys()].join(",")}]
`);return e.join(`
`)}findCycleSlow(){for(const[e,t]of this.a){const i=new Set([e]),r=this.c(t,i);if(r)return r}}c(e,t){for(const[i,r]of e.outgoing){if(t.has(i))return[...t,i].join(" -> ");t.add(i);const s=this.c(r,t);if(s)return s;t.delete(i)}}},A2=!1,m5=class extends Error{constructor(e){super("cyclic dependency between services"),this.message=e.findCycleSlow()??`UNABLE to detect cycle, dumping graph: 
${e.toString()}`}},T2=class Db{constructor(t=new sm,i=!1,r,s=A2){this.i=t,this.j=i,this.k=r,this.l=s,this.f=!1,this.g=new Set,this.h=new Set,this.t=new Set,this.i.set(fc,this),this._globalGraph=s?r?._globalGraph??new g5(n=>n):void 0}dispose(){if(!this.f){this.f=!0,Hr(this.h),this.h.clear();for(const t of this.g)py(t)&&t.dispose();this.g.clear()}}m(){if(this.f)throw new Error("InstantiationService has been disposed")}createChild(t,i){this.m();const r=this,s=new class extends Db{dispose(){r.h.delete(s),super.dispose()}}(t,this.j,this,this.l);return this.h.add(s),i?.add(s),s}invokeFunction(t,...i){this.m();const r=nm.traceInvocation(this.l,t);let s=!1;try{return t({get:o=>{if(s)throw ag("service accessor is only valid during the invocation of its target method");const a=this.s(o,r);if(!a)throw new Error(`[invokeFunction] unknown service '${o}'`);return a}},...i)}finally{s=!0,r.stop()}}createInstance(t,...i){this.m();let r,s;return t instanceof Sr?(r=nm.traceCreation(this.l,t.ctor),s=this.o(t.ctor,t.staticArguments.concat(i),r)):(r=nm.traceCreation(this.l,t),s=this.o(t,i,r)),r.stop(),s}o(t,i=[],r){const s=ir.getServiceDependencies(t).sort((a,c)=>a.index-c.index),n=[];for(const a of s){const c=this.s(a.id,r);c||this.y(`[createInstance] ${t.name} depends on UNKNOWN service ${a.id}.`,!1),n.push(c)}const o=s.length>0?s[0].index:i.length;if(i.length!==o){console.trace(`[createInstance] First service dependency of ${t.name} at position ${o+1} conflicts with ${i.length} static arguments`);const a=o-i.length;a>0?i=i.concat(new Array(a)):i=i.slice(0,o)}return Reflect.construct(t,i.concat(n))}q(t,i){if(this.i.get(t)instanceof Sr)this.i.set(t,i);else if(this.k)this.k.q(t,i);else throw new Error("illegalState - setting UNKNOWN service instance")}r(t){const i=this.i.get(t);return!i&&this.k?this.k.r(t):i}s(t,i){this._globalGraph&&this.c&&this._globalGraph.insertEdge(this.c,String(t));const r=this.r(t);return r instanceof Sr?this.u(t,r,i.branch(t,!0)):(i.branch(t,!1),r)}u(t,i,r){if(this.t.has(t))throw new Error(`illegal state - RECURSIVELY instantiating service '${t}'`);this.t.add(t);try{return this.v(t,i,r)}finally{this.t.delete(t)}}v(t,i,r){const s=new g5(c=>c.id.toString());let n=0;const o=[{id:t,desc:i,_trace:r}],a=new Set;for(;o.length;){const c=o.pop();if(!a.has(String(c.id))){if(a.add(String(c.id)),s.lookupOrInsertNode(c),n++>1e3)throw new m5(s);for(const l of ir.getServiceDependencies(c.desc.ctor)){const u=this.r(l.id);if(u||this.y(`[createInstance] ${t} depends on ${l.id} which is NOT registered.`,!0),this._globalGraph?.insertEdge(String(c.id),String(l.id)),u instanceof Sr){const h={id:l.id,desc:u,_trace:c._trace.branch(l.id,!0)};s.insertEdge(c,h),o.push(h)}}}}for(;;){const c=s.roots();if(c.length===0){if(!s.isEmpty())throw new m5(s);break}for(const{data:l}of c){if(this.r(l.id)instanceof Sr){const h=this.w(l.id,l.desc.ctor,l.desc.staticArguments,l.desc.supportsDelayedInstantiation,l._trace);this.q(l.id,h)}s.removeNode(l)}}return this.r(t)}w(t,i,r=[],s,n){if(this.i.get(t)instanceof Sr)return this.x(t,i,r,s,n,this.g);if(this.k)return this.k.w(t,i,r,s,n);throw new Error(`illegalState - creating UNKNOWN service instance ${i.name}`)}x(t,i,r=[],s,n,o){if(s){const a=new Db(void 0,this.j,this,this.l);a.c=String(t);const c=new Map,l=new ZD(()=>{const u=a.o(i,r,n);for(const[h,f]of c){const p=u[h];if(typeof p=="function")for(const m of f)m.disposable=p.apply(u,m.listener)}return c.clear(),o.add(u),u});return new Proxy(Object.create(null),{get(u,h){if(!l.isInitialized&&typeof h=="string"&&(h.startsWith("onDid")||h.startsWith("onWill"))){let m=c.get(h);return m||(m=new ys,c.set(h,m)),(x,E,$)=>{if(l.isInitialized)return l.value[h](x,E,$);{const A={listener:[x,E,$],disposable:void 0},Q=m.push(A);return oe(()=>{Q(),A.disposable?.dispose()})}}}if(h in u)return u[h];const f=l.value;let p=f[h];return typeof p!="function"||(p=p.bind(f),u[h]=p),p},set(u,h,f){return l.value[h]=f,!0},getPrototypeOf(u){return i.prototype}})}else{const a=this.o(i,r,n);return o.add(a),a}}y(t,i){if(i&&console.warn(t),this.j)throw new Error(t)}},v5;(function(e){e[e.None=0]="None",e[e.Creation=1]="Creation",e[e.Invocation=2]="Invocation",e[e.Branch=3]="Branch"})(v5||(v5={}));var nm=class Or{static{this.all=new Set}static{this.c=new class extends Or{constructor(){super(0,null)}stop(){}branch(){return this}}}static traceInvocation(t,i){return t?new Or(2,i.name||new Error().stack.split(`
`).slice(3,4).join(`
`)):Or.c}static traceCreation(t,i){return t?new Or(1,i.name):Or.c}static{this.f=0}constructor(t,i){this.type=t,this.name=i,this.g=Date.now(),this.h=[]}branch(t,i){const r=new Or(3,t.toString());return this.h.push([t,i,r]),r}stop(){const t=Date.now()-this.g;Or.f+=t;let i=!1;function r(n,o){const a=[],c=new Array(n+1).join("	");for(const[l,u,h]of o.h)if(u&&h){i=!0,a.push(`${c}CREATES -> ${l}`);const f=r(n+1,h);f&&a.push(f)}else a.push(`${c}uses -> ${l}`);return a.join(`
`)}const s=[`${this.type===1?"CREATE":"CALL"} ${this.name}`,`${r(1,this)}`,`DONE, took ${t.toFixed(2)}ms (grand total ${Or.f.toFixed(2)}ms)`];(t>2||i)&&Or.all.add(s.join(`
`))}},Fe=B("IExtHostRpcService"),R2=class{constructor(e){this.getProxy=e.getProxy.bind(e),this.set=e.set.bind(e),this.dispose=e.dispose.bind(e),this.assertRegistered=e.assertRegistered.bind(e),this.drain=e.drain.bind(e)}},nh=B("IURITransformerService"),L2=class{constructor(e){e?(this.transformIncoming=e.transformIncoming.bind(e),this.transformOutgoing=e.transformOutgoing.bind(e),this.transformOutgoingURI=e.transformOutgoingURI.bind(e),this.transformOutgoingScheme=e.transformOutgoingScheme.bind(e)):(this.transformIncoming=t=>t,this.transformOutgoing=t=>t,this.transformOutgoingURI=t=>t,this.transformOutgoingScheme=t=>t)}},N2=class{constructor(){this.b="",this.c=0}reset(e){return this.b=e,this.c=0,this}next(){return this.c+=1,this}hasNext(){return this.c<this.b.length-1}cmp(e){const t=e.charCodeAt(0),i=this.b.charCodeAt(this.c);return t-i}value(){return this.b[this.c]}},M2=class{constructor(e=!0){this.e=e}reset(e){return this.b=e,this.c=0,this.d=0,this.next()}hasNext(){return this.d<this.b.length}next(){this.c=this.d;let e=!0;for(;this.d<this.b.length;this.d++)if(this.b.charCodeAt(this.d)===46)if(e)this.c++;else break;else e=!1;return this}cmp(e){return this.e?Lg(e,this.b,0,e.length,this.c,this.d):lc(e,this.b,0,e.length,this.c,this.d)}value(){return this.b.substring(this.c,this.d)}},w5=class{constructor(e=!0,t=!0){this.f=e,this.g=t}reset(e){this.d=0,this.e=0,this.b=e,this.c=e.length;for(let t=e.length-1;t>=0;t--,this.c--){const i=this.b.charCodeAt(t);if(!(i===47||this.f&&i===92))break}return this.next()}hasNext(){return this.e<this.c}next(){this.d=this.e;let e=!0;for(;this.e<this.c;this.e++){const t=this.b.charCodeAt(this.e);if(t===47||this.f&&t===92)if(e)this.d++;else break;else e=!1}return this}cmp(e){return this.g?Lg(e,this.b,0,e.length,this.d,this.e):lc(e,this.b,0,e.length,this.d,this.e)}value(){return this.b.substring(this.d,this.e)}},b5;(function(e){e[e.Scheme=1]="Scheme",e[e.Authority=2]="Authority",e[e.Path=3]="Path",e[e.Query=4]="Query",e[e.Fragment=5]="Fragment"})(b5||(b5={}));var y5=class{constructor(e,t){this.f=e,this.g=t,this.d=[],this.e=0}reset(e){return this.c=e,this.d=[],this.c.scheme&&this.d.push(1),this.c.authority&&this.d.push(2),this.c.path&&(this.b=new w5(!1,!this.f(e)),this.b.reset(e.path),this.b.value()&&this.d.push(3)),this.g(e)||(this.c.query&&this.d.push(4),this.c.fragment&&this.d.push(5)),this.e=0,this}next(){return this.d[this.e]===3&&this.b.hasNext()?this.b.next():this.e+=1,this}hasNext(){return this.d[this.e]===3&&this.b.hasNext()||this.e<this.d.length-1}cmp(e){if(this.d[this.e]===1)return Ng(e,this.c.scheme);if(this.d[this.e]===2)return Ng(e,this.c.authority);if(this.d[this.e]===3)return this.b.cmp(e);if(this.d[this.e]===4)return gn(e,this.c.query);if(this.d[this.e]===5)return gn(e,this.c.fragment);throw new Error}value(){if(this.d[this.e]===1)return this.c.scheme;if(this.d[this.e]===2)return this.c.authority;if(this.d[this.e]===3)return this.b.value();if(this.d[this.e]===4)return this.c.query;if(this.d[this.e]===5)return this.c.fragment;throw new Error}},yn=class Pb{static{this.Val=Symbol("undefined_placeholder")}static wrap(t){return t===void 0?Pb.Val:t}static unwrap(t){return t===Pb.Val?void 0:t}},oh=class{constructor(){this.height=1,this.value=void 0,this.key=void 0,this.left=void 0,this.mid=void 0,this.right=void 0}isEmpty(){return!this.left&&!this.mid&&!this.right&&this.value===void 0}rotateLeft(){const e=this.right;return this.right=e.left,e.left=this,this.updateHeight(),e.updateHeight(),e}rotateRight(){const e=this.left;return this.left=e.right,e.right=this,this.updateHeight(),e.updateHeight(),e}updateHeight(){this.height=1+Math.max(this.heightLeft,this.heightRight)}balanceFactor(){return this.heightRight-this.heightLeft}get heightLeft(){return this.left?.height??0}get heightRight(){return this.right?.height??0}},x5;(function(e){e[e.Left=-1]="Left",e[e.Mid=0]="Mid",e[e.Right=1]="Right"})(x5||(x5={}));var Ds=class yu{static forUris(t=()=>!1,i=()=>!1){return new yu(new y5(t,i))}static forPaths(t=!1){return new yu(new w5(void 0,!t))}static forStrings(){return new yu(new N2)}static forConfigKeys(){return new yu(new M2)}constructor(t){this.b=t}clear(){this.c=void 0}fill(t,i){if(i){const r=i.slice(0);ey(r);for(const s of r)this.set(s,t)}else{const r=t.slice(0);ey(r);for(const s of r)this.set(s[0],s[1])}}set(t,i){const r=this.b.reset(t);let s;this.c||(this.c=new oh,this.c.segment=r.value());const n=[];for(s=this.c;;){const a=r.cmp(s.segment);if(a>0)s.left||(s.left=new oh,s.left.segment=r.value()),n.push([-1,s]),s=s.left;else if(a<0)s.right||(s.right=new oh,s.right.segment=r.value()),n.push([1,s]),s=s.right;else if(r.hasNext())r.next(),s.mid||(s.mid=new oh,s.mid.segment=r.value()),n.push([0,s]),s=s.mid;else break}const o=yn.unwrap(s.value);s.value=yn.wrap(i),s.key=t;for(let a=n.length-1;a>=0;a--){const c=n[a][1];c.updateHeight();const l=c.balanceFactor();if(l<-1||l>1){const u=n[a][0],h=n[a+1][0];if(u===1&&h===1)n[a][1]=c.rotateLeft();else if(u===-1&&h===-1)n[a][1]=c.rotateRight();else if(u===1&&h===-1)c.right=n[a+1][1]=n[a+1][1].rotateRight(),n[a][1]=c.rotateLeft();else if(u===-1&&h===1)c.left=n[a+1][1]=n[a+1][1].rotateLeft(),n[a][1]=c.rotateRight();else throw new Error;if(a>0)switch(n[a-1][0]){case-1:n[a-1][1].left=n[a][1];break;case 1:n[a-1][1].right=n[a][1];break;case 0:n[a-1][1].mid=n[a][1];break}else this.c=n[0][1]}}return o}get(t){return yn.unwrap(this.d(t)?.value)}d(t){const i=this.b.reset(t);let r=this.c;for(;r;){const s=i.cmp(r.segment);if(s>0)r=r.left;else if(s<0)r=r.right;else if(i.hasNext())i.next(),r=r.mid;else break}return r}has(t){const i=this.d(t);return!(i?.value===void 0&&i?.mid===void 0)}delete(t){return this.e(t,!1)}deleteSuperstr(t){return this.e(t,!0)}e(t,i){const r=this.b.reset(t),s=[];let n=this.c;for(;n;){const o=r.cmp(n.segment);if(o>0)s.push([-1,n]),n=n.left;else if(o<0)s.push([1,n]),n=n.right;else if(r.hasNext())r.next(),s.push([0,n]),n=n.mid;else break}if(n){if(i?(n.left=void 0,n.mid=void 0,n.right=void 0,n.height=1):(n.key=void 0,n.value=void 0),!n.mid&&!n.value)if(n.left&&n.right){const o=[[1,n]],a=this.f(n.right,o);if(a.key){n.key=a.key,n.value=a.value,n.segment=a.segment;const c=a.right;if(o.length>1){const[u,h]=o[o.length-1];switch(u){case-1:h.left=c;break;case 0:gg(!1);case 1:gg(!1)}}else n.right=c;const l=this.g(o);if(s.length>0){const[u,h]=s[s.length-1];switch(u){case-1:h.left=l;break;case 0:h.mid=l;break;case 1:h.right=l;break}}else this.c=l}}else{const o=n.left??n.right;if(s.length>0){const[a,c]=s[s.length-1];switch(a){case-1:c.left=o;break;case 0:c.mid=o;break;case 1:c.right=o;break}}else this.c=o}this.c=this.g(s)??this.c}}f(t,i){for(;t.left;)i.push([-1,t]),t=t.left;return t}g(t){for(let i=t.length-1;i>=0;i--){const r=t[i][1];r.updateHeight();const s=r.balanceFactor();if(s>1?(r.right.balanceFactor()>=0||(r.right=r.right.rotateRight()),t[i][1]=r.rotateLeft()):s<-1&&(r.left.balanceFactor()<=0||(r.left=r.left.rotateLeft()),t[i][1]=r.rotateRight()),i>0)switch(t[i-1][0]){case-1:t[i-1][1].left=t[i][1];break;case 1:t[i-1][1].right=t[i][1];break;case 0:t[i-1][1].mid=t[i][1];break}else return t[0][1]}}findSubstr(t){const i=this.b.reset(t);let r=this.c,s;for(;r;){const n=i.cmp(r.segment);if(n>0)r=r.left;else if(n<0)r=r.right;else if(i.hasNext())i.next(),s=yn.unwrap(r.value)||s,r=r.mid;else break}return r&&yn.unwrap(r.value)||s}findSuperstr(t){return this.h(t,!1)}h(t,i){const r=this.b.reset(t);let s=this.c;for(;s;){const n=r.cmp(s.segment);if(n>0)s=s.left;else if(n<0)s=s.right;else if(r.hasNext())r.next(),s=s.mid;else return s.mid?this.j(s.mid):i?yn.unwrap(s.value):void 0}}hasElementOrSubtree(t){return this.h(t,!0)!==void 0}forEach(t){for(const[i,r]of this)t(r,i)}*[Symbol.iterator](){yield*this.j(this.c)}j(t){const i=[];return this.l(t,i),i[Symbol.iterator]()}l(t,i){t&&(t.left&&this.l(t.left,i),t.value!==void 0&&i.push([t.key,yn.unwrap(t.value)]),t.mid&&this.l(t.mid,i),t.right&&this.l(t.right,i))}_isBalanced(){const t=i=>{if(!i)return!0;const r=i.balanceFactor();return r<-1||r>1?!1:t(i.left)&&t(i.right)};return t(this.c)}};function tt(e){if(!e||typeof e!="object"||e instanceof RegExp)return e;const t=Array.isArray(e)?[]:{};return Object.entries(e).forEach(([i,r])=>{t[i]=r&&typeof r=="object"?tt(r):r}),t}function E5(e){if(!e||typeof e!="object")return e;const t=[e];for(;t.length>0;){const i=t.shift();Object.freeze(i);for(const r in i)if(S5.call(i,r)){const s=i[r];typeof s=="object"&&!Object.isFrozen(s)&&!AI(s)&&t.push(s)}}return e}var S5=Object.prototype.hasOwnProperty;function To(e,t){return om(e,t,new Set)}function om(e,t,i){if(bt(e))return e;const r=t(e);if(typeof r<"u")return r;if(Array.isArray(e)){const s=[];for(const n of e)s.push(om(n,t,i));return s}if(wt(e)){if(i.has(e))throw new Error("Cannot clone recursive data-structure");i.add(e);const s={};for(const n in e)S5.call(e,n)&&(s[n]=om(e[n],t,i));return i.delete(e),s}return e}function xn(e,t,i=!0){return wt(e)?(wt(t)&&Object.keys(t).forEach(r=>{r in e?i&&(wt(e[r])&&wt(t[r])?xn(e[r],t[r],i):e[r]=t[r]):e[r]=t[r]}),e):t}function oi(e,t){if(e===t)return!0;if(e==null||t===null||t===void 0||typeof e!=typeof t||typeof e!="object"||Array.isArray(e)!==Array.isArray(t))return!1;let i,r;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(i=0;i<e.length;i++)if(!oi(e[i],t[i]))return!1}else{const s=[];for(r in e)s.push(r);s.sort();const n=[];for(r in t)n.push(r);if(n.sort(),!oi(s,n))return!1;for(i=0;i<s.length;i++)if(!oi(e[s[i]],t[s[i]]))return!1}return!0}function F2(e){const t=new Set;return JSON.stringify(e,(i,r)=>{if(wt(r)||Array.isArray(r)){if(t.has(r))return"[Circular]";t.add(r)}return typeof r=="bigint"?`[BigInt ${r.toString()}]`:r})}function k5(e,t){const i=Object.create(null);for(const[r,s]of Object.entries(e))t(r,s)&&(i[r]=s);return i}var O2=class{constructor(){this.a=0}getNext(){return this.a++}},yc;(function(e){e[e.Ignore=0]="Ignore",e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(yc||(yc={})),function(e){const t="error",i="warning",r="warn",s="info",n="ignore";function o(c){return c?ks(t,c)?e.Error:ks(i,c)||ks(r,c)?e.Warning:ks(s,c)?e.Info:e.Ignore:e.Ignore}e.fromValue=o;function a(c){switch(c){case e.Error:return t;case e.Warning:return i;case e.Info:return s;default:return n}}e.toString=a}(yc||(yc={}));var mt=yc,U2=mt,ZB=B("notificationService"),$5;(function(e){e[e.DEFAULT=0]="DEFAULT",e[e.OPTIONAL=1]="OPTIONAL",e[e.SILENT=2]="SILENT",e[e.URGENT=3]="URGENT"})($5||($5={}));var C5;(function(e){e[e.WORKSPACE=0]="WORKSPACE",e[e.PROFILE=1]="PROFILE",e[e.APPLICATION=2]="APPLICATION"})(C5||(C5={}));var I5;(function(e){e[e.OFF=0]="OFF",e[e.ERROR=1]="ERROR"})(I5||(I5={}));var am=B("contextService");function j2(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.uri)}function B2(e){const t=e;return typeof t?.id=="string"&&y.isUri(t.configPath)}var D5;(function(e){e[e.EMPTY=1]="EMPTY",e[e.FOLDER=2]="FOLDER",e[e.WORKSPACE=3]="WORKSPACE"})(D5||(D5={}));var H2=class{get folders(){return this.g}set folders(e){this.g=e,this.n()}constructor(e,t,i,r,s){this.h=e,this.j=i,this.k=r,this.l=s,this.c=Ds.forUris(this.l,()=>!0),this.folders=t}update(e){this.h=e.id,this.k=e.configuration,this.j=e.transient,this.l=e.l,this.folders=e.folders}get id(){return this.h}get transient(){return this.j}get configuration(){return this.k}set configuration(e){this.k=e}getFolder(e){return e&&this.c.findSubstr(e)||null}n(){this.c=Ds.forUris(this.l,()=>!0);for(const e of this.folders)this.c.set(e.uri,e)}toJSON(){return{id:this.id,folders:this.folders,transient:this.transient,configuration:this.configuration}}},P5=class{constructor(e,t){this.raw=t,this.uri=e.uri,this.index=e.index,this.name=e.name}toResource(e){return Zt(this.uri,e)}toJSON(){return{uri:this.uri,name:this.name,index:this.index}}};function cm(e){return new P5({uri:e,index:0,name:jg(e)},{uri:e.toString()})}var A5="code-workspace",YB=`.${A5}`,QB=[{name:d(2661,null),extensions:[A5]}],z2=class{constructor(){this.a=new Set(Object.keys(V)),this.b=new Map,this.extUri=new uc(e=>{const t=this.b.get(e.scheme);return!(t===void 0||t&1024)})}$acceptProviderInfos(e,t){t===null?this.b.delete(e.scheme):this.b.set(e.scheme,t)}isFreeScheme(e){return!this.b.has(e)&&!this.a.has(e)}getCapabilities(e){return this.b.get(e)}},Ro=B("IExtHostFileSystemInfo"),Ut=function(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID.bind(crypto);const e=new Uint8Array(16),t=[];for(let i=0;i<256;i++)t.push(i.toString(16).padStart(2,"0"));return function(){crypto.getRandomValues(e),e[6]=e[6]&15|64,e[8]=e[8]&63|128;let r=0,s="";return s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+="-",s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s+=t[e[r++]],s}}(),lm=Object.freeze({create:e=>vo(e.map(t=>t.toString())).join(`\r
`),split:e=>e.split(`\r
`),parse:e=>lm.split(e).filter(t=>!t.startsWith("#"))}),XB=new Uint32Array(10),T5;(function(e){e[e.InitialConsonant=4352]="InitialConsonant",e[e.Vowel=4449]="Vowel",e[e.FinalConsonant=4520]="FinalConsonant",e[e.CompatibilityJamo=12593]="CompatibilityJamo"})(T5||(T5={}));var R5;(function(e){e[e.NUL=0]="NUL",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z"})(R5||(R5={}));var L5;(function(e){e[e.fa=24934]="fa",e[e.fg=26470]="fg",e[e.fq=29030]="fq",e[e.fr=29286]="fr",e[e.ft=29798]="ft",e[e.fv=30310]="fv",e[e.fx=30822]="fx",e[e.hk=27496]="hk",e[e.hl=27752]="hl",e[e.ho=28520]="ho",e[e.ml=27757]="ml",e[e.nj=27246]="nj",e[e.nl=27758]="nl",e[e.np=28782]="np",e[e.qt=29809]="qt",e[e.rt=29810]="rt",e[e.sg=26483]="sg",e[e.sw=30579]="sw"})(L5||(L5={}));var KB=new Uint8Array([114,82,115,101,69,102,97,113,81,116,84,100,119,87,99,122,120,118,103]),eH=new Uint16Array([107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]),tH=new Uint16Array([114,82,29810,115,30579,26483,101,102,29286,24934,29030,29798,30822,30310,26470,97,113,29809,116,84,100,119,99,122,120,118,103]),iH=new Uint16Array([114,82,29810,115,30579,26483,101,69,102,29286,24934,29030,29798,30822,30310,26470,97,113,81,29809,116,84,100,119,87,99,122,120,118,103,107,111,105,79,106,112,117,80,104,27496,28520,27752,121,110,27246,28782,27758,98,109,27757,108]);function N5(...e){return function(t,i){for(let r=0,s=e.length;r<s;r++){const n=e[r](t,i);if(n)return n}return null}}var rH=F5.bind(void 0,!1),M5=F5.bind(void 0,!0);function F5(e,t,i){if(!i||i.length<t.length)return null;let r;return e?r=Mg(i,t):r=i.indexOf(t)===0,r?t.length>0?[{start:0,end:t.length}]:[]:null}function _2(e,t){const i=t.toLowerCase().indexOf(e.toLowerCase());return i===-1?null:[{start:i,end:i+e.length}]}function W2(e,t){return um(e.toLowerCase(),t.toLowerCase(),0,0)}function um(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]===t[r]){let s=null;return(s=um(e,t,i+1,r+1))?U5({start:r,end:r+1},s):null}return um(e,t,i,r+1)}function hm(e){return 97<=e&&e<=122}function ah(e){return 65<=e&&e<=90}function dm(e){return 48<=e&&e<=57}function V2(e){return e===32||e===9||e===10||e===13}var q2=new Set;"()[]{}<>`'\"-/;:,.?!".split("").forEach(e=>q2.add(e.charCodeAt(0)));function O5(e){return hm(e)||ah(e)||dm(e)}function U5(e,t){return t.length===0?t=[e]:e.end===t[0].start?t[0].start=e.start:t.unshift(e),t}function j5(e,t){for(let i=t;i<e.length;i++){const r=e.charCodeAt(i);if(ah(r)||dm(r)||i>0&&!O5(e.charCodeAt(i-1)))return i}return e.length}function fm(e,t,i,r){if(i===e.length)return[];if(r===t.length)return null;if(e[i]!==t[r].toLowerCase())return null;{let s=null,n=r+1;for(s=fm(e,t,i+1,r+1);!s&&(n=j5(t,n))<t.length;)s=fm(e,t,i+1,n),n++;return s===null?null:U5({start:r,end:r+1},s)}}function G2(e){let t=0,i=0,r=0,s=0,n=0;for(let u=0;u<e.length;u++)n=e.charCodeAt(u),ah(n)&&t++,hm(n)&&i++,O5(n)&&r++,dm(n)&&s++;const o=t/e.length,a=i/e.length,c=r/e.length,l=s/e.length;return{upperPercent:o,lowerPercent:a,alphaPercent:c,numericPercent:l}}function J2(e){const{upperPercent:t,lowerPercent:i}=e;return i===0&&t>.6}function Z2(e){const{upperPercent:t,lowerPercent:i,alphaPercent:r,numericPercent:s}=e;return i>.2&&t<.8&&r>.6&&s<.2}function Y2(e){let t=0,i=0,r=0,s=0;for(let n=0;n<e.length;n++)r=e.charCodeAt(n),ah(r)&&t++,hm(r)&&i++,V2(r)&&s++;return(t===0||i===0)&&s===0?e.length<=30:t<=5}function B5(e,t){if(!t||(t=t.trim(),t.length===0)||!Y2(e))return null;t.length>60&&(t=t.substring(0,60));const i=G2(t);if(!Z2(i)){if(!J2(i))return null;t=t.toLowerCase()}let r=null,s=0;for(e=e.toLowerCase();s<t.length&&(r=fm(e,t,0,s))===null;)s=j5(t,s+1);return r}var sH=N5(M5,B5,_2),nH=N5(M5,B5,W2),oH=new dg(1e4),ch=128;function pm(){const e=[],t=[];for(let i=0;i<=ch;i++)t[i]=0;for(let i=0;i<=ch;i++)e.push(t.slice(0));return e}function H5(e){const t=[];for(let i=0;i<=e;i++)t[i]=0;return t}var aH=H5(2*ch),cH=H5(2*ch),lH=pm(),uH=pm(),hH=pm(),z5;(function(e){e[e.Diag=1]="Diag",e[e.Left=2]="Left",e[e.LeftLeft=3]="LeftLeft"})(z5||(z5={}));var _5;(function(e){e.Default=[-100,0];function t(i){return!i||i.length===2&&i[0]===-100&&i[1]===0}e.isDefault=t})(_5||(_5={}));var dH=class{static{this.default={boostFullMatch:!0,firstMatchCanBeWeak:!1}}constructor(e,t){this.firstMatchCanBeWeak=e,this.boostFullMatch=t}},gm=Object.create(null);function g(e,t){if(Ue(t)){const i=gm[t];if(i===void 0)throw new Error(`${e} references an unknown codicon: ${t}`);t=i}return gm[e]=t,{id:e}}function Q2(){return gm}var X2={add:g("add",6e4),plus:g("plus",6e4),gistNew:g("gist-new",6e4),repoCreate:g("repo-create",6e4),lightbulb:g("lightbulb",60001),lightBulb:g("light-bulb",60001),repo:g("repo",60002),repoDelete:g("repo-delete",60002),gistFork:g("gist-fork",60003),repoForked:g("repo-forked",60003),gitPullRequest:g("git-pull-request",60004),gitPullRequestAbandoned:g("git-pull-request-abandoned",60004),recordKeys:g("record-keys",60005),keyboard:g("keyboard",60005),tag:g("tag",60006),gitPullRequestLabel:g("git-pull-request-label",60006),tagAdd:g("tag-add",60006),tagRemove:g("tag-remove",60006),person:g("person",60007),personFollow:g("person-follow",60007),personOutline:g("person-outline",60007),personFilled:g("person-filled",60007),gitBranch:g("git-branch",60008),gitBranchCreate:g("git-branch-create",60008),gitBranchDelete:g("git-branch-delete",60008),sourceControl:g("source-control",60008),mirror:g("mirror",60009),mirrorPublic:g("mirror-public",60009),star:g("star",60010),starAdd:g("star-add",60010),starDelete:g("star-delete",60010),starEmpty:g("star-empty",60010),comment:g("comment",60011),commentAdd:g("comment-add",60011),alert:g("alert",60012),warning:g("warning",60012),search:g("search",60013),searchSave:g("search-save",60013),logOut:g("log-out",60014),signOut:g("sign-out",60014),logIn:g("log-in",60015),signIn:g("sign-in",60015),eye:g("eye",60016),eyeUnwatch:g("eye-unwatch",60016),eyeWatch:g("eye-watch",60016),circleFilled:g("circle-filled",60017),primitiveDot:g("primitive-dot",60017),closeDirty:g("close-dirty",60017),debugBreakpoint:g("debug-breakpoint",60017),debugBreakpointDisabled:g("debug-breakpoint-disabled",60017),debugHint:g("debug-hint",60017),terminalDecorationSuccess:g("terminal-decoration-success",60017),primitiveSquare:g("primitive-square",60018),edit:g("edit",60019),pencil:g("pencil",60019),info:g("info",60020),issueOpened:g("issue-opened",60020),gistPrivate:g("gist-private",60021),gitForkPrivate:g("git-fork-private",60021),lock:g("lock",60021),mirrorPrivate:g("mirror-private",60021),close:g("close",60022),removeClose:g("remove-close",60022),x:g("x",60022),repoSync:g("repo-sync",60023),sync:g("sync",60023),clone:g("clone",60024),desktopDownload:g("desktop-download",60024),beaker:g("beaker",60025),microscope:g("microscope",60025),vm:g("vm",60026),deviceDesktop:g("device-desktop",60026),file:g("file",60027),fileText:g("file-text",60027),more:g("more",60028),ellipsis:g("ellipsis",60028),kebabHorizontal:g("kebab-horizontal",60028),mailReply:g("mail-reply",60029),reply:g("reply",60029),organization:g("organization",60030),organizationFilled:g("organization-filled",60030),organizationOutline:g("organization-outline",60030),newFile:g("new-file",60031),fileAdd:g("file-add",60031),newFolder:g("new-folder",60032),fileDirectoryCreate:g("file-directory-create",60032),trash:g("trash",60033),trashcan:g("trashcan",60033),history:g("history",60034),clock:g("clock",60034),folder:g("folder",60035),fileDirectory:g("file-directory",60035),symbolFolder:g("symbol-folder",60035),logoGithub:g("logo-github",60036),markGithub:g("mark-github",60036),github:g("github",60036),terminal:g("terminal",60037),console:g("console",60037),repl:g("repl",60037),zap:g("zap",60038),symbolEvent:g("symbol-event",60038),error:g("error",60039),stop:g("stop",60039),variable:g("variable",60040),symbolVariable:g("symbol-variable",60040),array:g("array",60042),symbolArray:g("symbol-array",60042),symbolModule:g("symbol-module",60043),symbolPackage:g("symbol-package",60043),symbolNamespace:g("symbol-namespace",60043),symbolObject:g("symbol-object",60043),symbolMethod:g("symbol-method",60044),symbolFunction:g("symbol-function",60044),symbolConstructor:g("symbol-constructor",60044),symbolBoolean:g("symbol-boolean",60047),symbolNull:g("symbol-null",60047),symbolNumeric:g("symbol-numeric",60048),symbolNumber:g("symbol-number",60048),symbolStructure:g("symbol-structure",60049),symbolStruct:g("symbol-struct",60049),symbolParameter:g("symbol-parameter",60050),symbolTypeParameter:g("symbol-type-parameter",60050),symbolKey:g("symbol-key",60051),symbolText:g("symbol-text",60051),symbolReference:g("symbol-reference",60052),goToFile:g("go-to-file",60052),symbolEnum:g("symbol-enum",60053),symbolValue:g("symbol-value",60053),symbolRuler:g("symbol-ruler",60054),symbolUnit:g("symbol-unit",60054),activateBreakpoints:g("activate-breakpoints",60055),archive:g("archive",60056),arrowBoth:g("arrow-both",60057),arrowDown:g("arrow-down",60058),arrowLeft:g("arrow-left",60059),arrowRight:g("arrow-right",60060),arrowSmallDown:g("arrow-small-down",60061),arrowSmallLeft:g("arrow-small-left",60062),arrowSmallRight:g("arrow-small-right",60063),arrowSmallUp:g("arrow-small-up",60064),arrowUp:g("arrow-up",60065),bell:g("bell",60066),bold:g("bold",60067),book:g("book",60068),bookmark:g("bookmark",60069),debugBreakpointConditionalUnverified:g("debug-breakpoint-conditional-unverified",60070),debugBreakpointConditional:g("debug-breakpoint-conditional",60071),debugBreakpointConditionalDisabled:g("debug-breakpoint-conditional-disabled",60071),debugBreakpointDataUnverified:g("debug-breakpoint-data-unverified",60072),debugBreakpointData:g("debug-breakpoint-data",60073),debugBreakpointDataDisabled:g("debug-breakpoint-data-disabled",60073),debugBreakpointLogUnverified:g("debug-breakpoint-log-unverified",60074),debugBreakpointLog:g("debug-breakpoint-log",60075),debugBreakpointLogDisabled:g("debug-breakpoint-log-disabled",60075),briefcase:g("briefcase",60076),broadcast:g("broadcast",60077),browser:g("browser",60078),bug:g("bug",60079),calendar:g("calendar",60080),caseSensitive:g("case-sensitive",60081),check:g("check",60082),checklist:g("checklist",60083),chevronDown:g("chevron-down",60084),chevronLeft:g("chevron-left",60085),chevronRight:g("chevron-right",60086),chevronUp:g("chevron-up",60087),chromeClose:g("chrome-close",60088),chromeMaximize:g("chrome-maximize",60089),chromeMinimize:g("chrome-minimize",60090),chromeRestore:g("chrome-restore",60091),circleOutline:g("circle-outline",60092),circle:g("circle",60092),debugBreakpointUnverified:g("debug-breakpoint-unverified",60092),terminalDecorationIncomplete:g("terminal-decoration-incomplete",60092),circleSlash:g("circle-slash",60093),circuitBoard:g("circuit-board",60094),clearAll:g("clear-all",60095),clippy:g("clippy",60096),closeAll:g("close-all",60097),cloudDownload:g("cloud-download",60098),cloudUpload:g("cloud-upload",60099),code:g("code",60100),collapseAll:g("collapse-all",60101),colorMode:g("color-mode",60102),commentDiscussion:g("comment-discussion",60103),creditCard:g("credit-card",60105),dash:g("dash",60108),dashboard:g("dashboard",60109),database:g("database",60110),debugContinue:g("debug-continue",60111),debugDisconnect:g("debug-disconnect",60112),debugPause:g("debug-pause",60113),debugRestart:g("debug-restart",60114),debugStart:g("debug-start",60115),debugStepInto:g("debug-step-into",60116),debugStepOut:g("debug-step-out",60117),debugStepOver:g("debug-step-over",60118),debugStop:g("debug-stop",60119),debug:g("debug",60120),deviceCameraVideo:g("device-camera-video",60121),deviceCamera:g("device-camera",60122),deviceMobile:g("device-mobile",60123),diffAdded:g("diff-added",60124),diffIgnored:g("diff-ignored",60125),diffModified:g("diff-modified",60126),diffRemoved:g("diff-removed",60127),diffRenamed:g("diff-renamed",60128),diff:g("diff",60129),diffSidebyside:g("diff-sidebyside",60129),discard:g("discard",60130),editorLayout:g("editor-layout",60131),emptyWindow:g("empty-window",60132),exclude:g("exclude",60133),extensions:g("extensions",60134),eyeClosed:g("eye-closed",60135),fileBinary:g("file-binary",60136),fileCode:g("file-code",60137),fileMedia:g("file-media",60138),filePdf:g("file-pdf",60139),fileSubmodule:g("file-submodule",60140),fileSymlinkDirectory:g("file-symlink-directory",60141),fileSymlinkFile:g("file-symlink-file",60142),fileZip:g("file-zip",60143),files:g("files",60144),filter:g("filter",60145),flame:g("flame",60146),foldDown:g("fold-down",60147),foldUp:g("fold-up",60148),fold:g("fold",60149),folderActive:g("folder-active",60150),folderOpened:g("folder-opened",60151),gear:g("gear",60152),gift:g("gift",60153),gistSecret:g("gist-secret",60154),gist:g("gist",60155),gitCommit:g("git-commit",60156),gitCompare:g("git-compare",60157),compareChanges:g("compare-changes",60157),gitMerge:g("git-merge",60158),githubAction:g("github-action",60159),githubAlt:g("github-alt",60160),globe:g("globe",60161),grabber:g("grabber",60162),graph:g("graph",60163),gripper:g("gripper",60164),heart:g("heart",60165),home:g("home",60166),horizontalRule:g("horizontal-rule",60167),hubot:g("hubot",60168),inbox:g("inbox",60169),issueReopened:g("issue-reopened",60171),issues:g("issues",60172),italic:g("italic",60173),jersey:g("jersey",60174),json:g("json",60175),kebabVertical:g("kebab-vertical",60176),key:g("key",60177),law:g("law",60178),lightbulbAutofix:g("lightbulb-autofix",60179),linkExternal:g("link-external",60180),link:g("link",60181),listOrdered:g("list-ordered",60182),listUnordered:g("list-unordered",60183),liveShare:g("live-share",60184),loading:g("loading",60185),location:g("location",60186),mailRead:g("mail-read",60187),mail:g("mail",60188),markdown:g("markdown",60189),megaphone:g("megaphone",60190),mention:g("mention",60191),milestone:g("milestone",60192),gitPullRequestMilestone:g("git-pull-request-milestone",60192),mortarBoard:g("mortar-board",60193),move:g("move",60194),multipleWindows:g("multiple-windows",60195),mute:g("mute",60196),noNewline:g("no-newline",60197),note:g("note",60198),octoface:g("octoface",60199),openPreview:g("open-preview",60200),package:g("package",60201),paintcan:g("paintcan",60202),pin:g("pin",60203),play:g("play",60204),run:g("run",60204),plug:g("plug",60205),preserveCase:g("preserve-case",60206),preview:g("preview",60207),project:g("project",60208),pulse:g("pulse",60209),question:g("question",60210),quote:g("quote",60211),radioTower:g("radio-tower",60212),reactions:g("reactions",60213),references:g("references",60214),refresh:g("refresh",60215),regex:g("regex",60216),remoteExplorer:g("remote-explorer",60217),remote:g("remote",60218),remove:g("remove",60219),replaceAll:g("replace-all",60220),replace:g("replace",60221),repoClone:g("repo-clone",60222),repoForcePush:g("repo-force-push",60223),repoPull:g("repo-pull",60224),repoPush:g("repo-push",60225),report:g("report",60226),requestChanges:g("request-changes",60227),rocket:g("rocket",60228),rootFolderOpened:g("root-folder-opened",60229),rootFolder:g("root-folder",60230),rss:g("rss",60231),ruby:g("ruby",60232),saveAll:g("save-all",60233),saveAs:g("save-as",60234),save:g("save",60235),screenFull:g("screen-full",60236),screenNormal:g("screen-normal",60237),searchStop:g("search-stop",60238),server:g("server",60240),settingsGear:g("settings-gear",60241),settings:g("settings",60242),shield:g("shield",60243),smiley:g("smiley",60244),sortPrecedence:g("sort-precedence",60245),splitHorizontal:g("split-horizontal",60246),splitVertical:g("split-vertical",60247),squirrel:g("squirrel",60248),starFull:g("star-full",60249),starHalf:g("star-half",60250),symbolClass:g("symbol-class",60251),symbolColor:g("symbol-color",60252),symbolConstant:g("symbol-constant",60253),symbolEnumMember:g("symbol-enum-member",60254),symbolField:g("symbol-field",60255),symbolFile:g("symbol-file",60256),symbolInterface:g("symbol-interface",60257),symbolKeyword:g("symbol-keyword",60258),symbolMisc:g("symbol-misc",60259),symbolOperator:g("symbol-operator",60260),symbolProperty:g("symbol-property",60261),wrench:g("wrench",60261),wrenchSubaction:g("wrench-subaction",60261),symbolSnippet:g("symbol-snippet",60262),tasklist:g("tasklist",60263),telescope:g("telescope",60264),textSize:g("text-size",60265),threeBars:g("three-bars",60266),thumbsdown:g("thumbsdown",60267),thumbsup:g("thumbsup",60268),tools:g("tools",60269),triangleDown:g("triangle-down",60270),triangleLeft:g("triangle-left",60271),triangleRight:g("triangle-right",60272),triangleUp:g("triangle-up",60273),twitter:g("twitter",60274),unfold:g("unfold",60275),unlock:g("unlock",60276),unmute:g("unmute",60277),unverified:g("unverified",60278),verified:g("verified",60279),versions:g("versions",60280),vmActive:g("vm-active",60281),vmOutline:g("vm-outline",60282),vmRunning:g("vm-running",60283),watch:g("watch",60284),whitespace:g("whitespace",60285),wholeWord:g("whole-word",60286),window:g("window",60287),wordWrap:g("word-wrap",60288),zoomIn:g("zoom-in",60289),zoomOut:g("zoom-out",60290),listFilter:g("list-filter",60291),listFlat:g("list-flat",60292),listSelection:g("list-selection",60293),selection:g("selection",60293),listTree:g("list-tree",60294),debugBreakpointFunctionUnverified:g("debug-breakpoint-function-unverified",60295),debugBreakpointFunction:g("debug-breakpoint-function",60296),debugBreakpointFunctionDisabled:g("debug-breakpoint-function-disabled",60296),debugStackframeActive:g("debug-stackframe-active",60297),circleSmallFilled:g("circle-small-filled",60298),debugStackframeDot:g("debug-stackframe-dot",60298),terminalDecorationMark:g("terminal-decoration-mark",60298),debugStackframe:g("debug-stackframe",60299),debugStackframeFocused:g("debug-stackframe-focused",60299),debugBreakpointUnsupported:g("debug-breakpoint-unsupported",60300),symbolString:g("symbol-string",60301),debugReverseContinue:g("debug-reverse-continue",60302),debugStepBack:g("debug-step-back",60303),debugRestartFrame:g("debug-restart-frame",60304),debugAlt:g("debug-alt",60305),callIncoming:g("call-incoming",60306),callOutgoing:g("call-outgoing",60307),menu:g("menu",60308),expandAll:g("expand-all",60309),feedback:g("feedback",60310),gitPullRequestReviewer:g("git-pull-request-reviewer",60310),groupByRefType:g("group-by-ref-type",60311),ungroupByRefType:g("ungroup-by-ref-type",60312),account:g("account",60313),gitPullRequestAssignee:g("git-pull-request-assignee",60313),bellDot:g("bell-dot",60314),debugConsole:g("debug-console",60315),library:g("library",60316),output:g("output",60317),runAll:g("run-all",60318),syncIgnored:g("sync-ignored",60319),pinned:g("pinned",60320),githubInverted:g("github-inverted",60321),serverProcess:g("server-process",60322),serverEnvironment:g("server-environment",60323),pass:g("pass",60324),issueClosed:g("issue-closed",60324),stopCircle:g("stop-circle",60325),playCircle:g("play-circle",60326),record:g("record",60327),debugAltSmall:g("debug-alt-small",60328),vmConnect:g("vm-connect",60329),cloud:g("cloud",60330),merge:g("merge",60331),export:g("export",60332),graphLeft:g("graph-left",60333),magnet:g("magnet",60334),notebook:g("notebook",60335),redo:g("redo",60336),checkAll:g("check-all",60337),pinnedDirty:g("pinned-dirty",60338),passFilled:g("pass-filled",60339),circleLargeFilled:g("circle-large-filled",60340),circleLarge:g("circle-large",60341),circleLargeOutline:g("circle-large-outline",60341),combine:g("combine",60342),gather:g("gather",60342),table:g("table",60343),variableGroup:g("variable-group",60344),typeHierarchy:g("type-hierarchy",60345),typeHierarchySub:g("type-hierarchy-sub",60346),typeHierarchySuper:g("type-hierarchy-super",60347),gitPullRequestCreate:g("git-pull-request-create",60348),runAbove:g("run-above",60349),runBelow:g("run-below",60350),notebookTemplate:g("notebook-template",60351),debugRerun:g("debug-rerun",60352),workspaceTrusted:g("workspace-trusted",60353),workspaceUntrusted:g("workspace-untrusted",60354),workspaceUnknown:g("workspace-unknown",60355),terminalCmd:g("terminal-cmd",60356),terminalDebian:g("terminal-debian",60357),terminalLinux:g("terminal-linux",60358),terminalPowershell:g("terminal-powershell",60359),terminalTmux:g("terminal-tmux",60360),terminalUbuntu:g("terminal-ubuntu",60361),terminalBash:g("terminal-bash",60362),arrowSwap:g("arrow-swap",60363),copy:g("copy",60364),personAdd:g("person-add",60365),filterFilled:g("filter-filled",60366),wand:g("wand",60367),debugLineByLine:g("debug-line-by-line",60368),inspect:g("inspect",60369),layers:g("layers",60370),layersDot:g("layers-dot",60371),layersActive:g("layers-active",60372),compass:g("compass",60373),compassDot:g("compass-dot",60374),compassActive:g("compass-active",60375),azure:g("azure",60376),issueDraft:g("issue-draft",60377),gitPullRequestClosed:g("git-pull-request-closed",60378),gitPullRequestDraft:g("git-pull-request-draft",60379),debugAll:g("debug-all",60380),debugCoverage:g("debug-coverage",60381),runErrors:g("run-errors",60382),folderLibrary:g("folder-library",60383),debugContinueSmall:g("debug-continue-small",60384),beakerStop:g("beaker-stop",60385),graphLine:g("graph-line",60386),graphScatter:g("graph-scatter",60387),pieChart:g("pie-chart",60388),bracket:g("bracket",60175),bracketDot:g("bracket-dot",60389),bracketError:g("bracket-error",60390),lockSmall:g("lock-small",60391),azureDevops:g("azure-devops",60392),verifiedFilled:g("verified-filled",60393),newline:g("newline",60394),layout:g("layout",60395),layoutActivitybarLeft:g("layout-activitybar-left",60396),layoutActivitybarRight:g("layout-activitybar-right",60397),layoutPanelLeft:g("layout-panel-left",60398),layoutPanelCenter:g("layout-panel-center",60399),layoutPanelJustify:g("layout-panel-justify",60400),layoutPanelRight:g("layout-panel-right",60401),layoutPanel:g("layout-panel",60402),layoutSidebarLeft:g("layout-sidebar-left",60403),layoutSidebarRight:g("layout-sidebar-right",60404),layoutStatusbar:g("layout-statusbar",60405),layoutMenubar:g("layout-menubar",60406),layoutCentered:g("layout-centered",60407),target:g("target",60408),indent:g("indent",60409),recordSmall:g("record-small",60410),errorSmall:g("error-small",60411),terminalDecorationError:g("terminal-decoration-error",60411),arrowCircleDown:g("arrow-circle-down",60412),arrowCircleLeft:g("arrow-circle-left",60413),arrowCircleRight:g("arrow-circle-right",60414),arrowCircleUp:g("arrow-circle-up",60415),layoutSidebarRightOff:g("layout-sidebar-right-off",60416),layoutPanelOff:g("layout-panel-off",60417),layoutSidebarLeftOff:g("layout-sidebar-left-off",60418),blank:g("blank",60419),heartFilled:g("heart-filled",60420),map:g("map",60421),mapHorizontal:g("map-horizontal",60421),foldHorizontal:g("fold-horizontal",60421),mapFilled:g("map-filled",60422),mapHorizontalFilled:g("map-horizontal-filled",60422),foldHorizontalFilled:g("fold-horizontal-filled",60422),circleSmall:g("circle-small",60423),bellSlash:g("bell-slash",60424),bellSlashDot:g("bell-slash-dot",60425),commentUnresolved:g("comment-unresolved",60426),gitPullRequestGoToChanges:g("git-pull-request-go-to-changes",60427),gitPullRequestNewChanges:g("git-pull-request-new-changes",60428),searchFuzzy:g("search-fuzzy",60429),commentDraft:g("comment-draft",60430),send:g("send",60431),sparkle:g("sparkle",60432),insert:g("insert",60433),mic:g("mic",60434),thumbsdownFilled:g("thumbsdown-filled",60435),thumbsupFilled:g("thumbsup-filled",60436),coffee:g("coffee",60437),snake:g("snake",60438),game:g("game",60439),vr:g("vr",60440),chip:g("chip",60441),piano:g("piano",60442),music:g("music",60443),micFilled:g("mic-filled",60444),repoFetch:g("repo-fetch",60445),copilot:g("copilot",60446),lightbulbSparkle:g("lightbulb-sparkle",60447),robot:g("robot",60448),sparkleFilled:g("sparkle-filled",60449),diffSingle:g("diff-single",60450),diffMultiple:g("diff-multiple",60451),surroundWith:g("surround-with",60452),share:g("share",60453),gitStash:g("git-stash",60454),gitStashApply:g("git-stash-apply",60455),gitStashPop:g("git-stash-pop",60456),vscode:g("vscode",60457),vscodeInsiders:g("vscode-insiders",60458),codeOss:g("code-oss",60459),runCoverage:g("run-coverage",60460),runAllCoverage:g("run-all-coverage",60461),coverage:g("coverage",60462),githubProject:g("github-project",60463),mapVertical:g("map-vertical",60464),foldVertical:g("fold-vertical",60464),mapVerticalFilled:g("map-vertical-filled",60465),foldVerticalFilled:g("fold-vertical-filled",60465),goToSearch:g("go-to-search",60466),percentage:g("percentage",60467),sortPercentage:g("sort-percentage",60467),attach:g("attach",60468),goToEditingSession:g("go-to-editing-session",60469),editSession:g("edit-session",60470),codeReview:g("code-review",60471),copilotWarning:g("copilot-warning",60472),python:g("python",60473),copilotLarge:g("copilot-large",60474),copilotWarningLarge:g("copilot-warning-large",60475),keyboardTab:g("keyboard-tab",60476),copilotBlocked:g("copilot-blocked",60477),copilotNotConnected:g("copilot-not-connected",60478),flag:g("flag",60479),lightbulbEmpty:g("lightbulb-empty",60480),symbolMethodArrow:g("symbol-method-arrow",60481),copilotUnavailable:g("copilot-unavailable",60482),repoPinned:g("repo-pinned",60483),keyboardTabAbove:g("keyboard-tab-above",60484),keyboardTabBelow:g("keyboard-tab-below",60485),gitPullRequestDone:g("git-pull-request-done",60486),mcp:g("mcp",60487),extensionsLarge:g("extensions-large",60488),layoutPanelDock:g("layout-panel-dock",60489),layoutSidebarLeftDock:g("layout-sidebar-left-dock",60490),layoutSidebarRightDock:g("layout-sidebar-right-dock",60491)},K2={dialogError:g("dialog-error","error"),dialogWarning:g("dialog-warning","warning"),dialogInfo:g("dialog-info","info"),dialogClose:g("dialog-close","close"),treeItemExpanded:g("tree-item-expanded","chevron-down"),treeFilterOnTypeOn:g("tree-filter-on-type-on","list-filter"),treeFilterOnTypeOff:g("tree-filter-on-type-off","list-selection"),treeFilterClear:g("tree-filter-clear","close"),treeItemLoading:g("tree-item-loading","loading"),menuSelection:g("menu-selection","check"),menuSubmenu:g("menu-submenu","chevron-right"),menuBarMore:g("menubar-more","more"),scrollbarButtonLeft:g("scrollbar-button-left","triangle-left"),scrollbarButtonRight:g("scrollbar-button-right","triangle-right"),scrollbarButtonUp:g("scrollbar-button-up","triangle-up"),scrollbarButtonDown:g("scrollbar-button-down","triangle-down"),toolBarMore:g("toolbar-more","more"),quickInputBack:g("quick-input-back","arrow-left"),dropDownButton:g("drop-down-button",60084),symbolCustomColor:g("symbol-customcolor",60252),exportIcon:g("export",60332),workspaceUnspecified:g("workspace-unspecified",60355),newLine:g("newline",60394),thumbsDownFilled:g("thumbsdown-filled",60435),thumbsUpFilled:g("thumbsup-filled",60436),gitFetch:g("git-fetch",60445),lightbulbSparkleAutofix:g("lightbulb-sparkle-autofix",60447),debugBreakpointPending:g("debug-breakpoint-pending",60377)},te={...X2,...K2},Lo;(function(e){function t(i){return!!i&&typeof i=="object"&&typeof i.id=="string"}e.isThemeColor=t})(Lo||(Lo={}));var Et;(function(e){e.iconNameSegment="[A-Za-z0-9]+",e.iconNameExpression="[A-Za-z0-9-]+",e.iconModifierExpression="~[A-Za-z]+",e.iconNameCharacter="[A-Za-z0-9~-]";const t=new RegExp(`^(${e.iconNameExpression})(${e.iconModifierExpression})?$`);function i(f){const p=t.exec(f.id);if(!p)return i(te.error);const[,m,w]=p,x=["codicon","codicon-"+m];return w&&x.push("codicon-modifier-"+w.substring(1)),x}e.asClassNameArray=i;function r(f){return i(f).join(" ")}e.asClassName=r;function s(f){return"."+i(f).join(".")}e.asCSSSelector=s;function n(f){return!!f&&typeof f=="object"&&typeof f.id=="string"&&(typeof f.color>"u"||Lo.isThemeColor(f.color))}e.isThemeIcon=n;const o=new RegExp(`^\\$\\((${e.iconNameExpression}(?:${e.iconModifierExpression})?)\\)$`);function a(f){const p=o.exec(f);if(!p)return;const[,m]=p;return{id:m}}e.fromString=a;function c(f){return{id:f}}e.fromId=c;function l(f,p){let m=f.id;const w=m.lastIndexOf("~");return w!==-1&&(m=m.substring(0,w)),p&&(m=`${m}~${p}`),{id:m}}e.modify=l;function u(f){const p=f.id.lastIndexOf("~");if(p!==-1)return f.id.substring(p+1)}e.getModifier=u;function h(f,p){return f.id===p.id&&f.color?.id===p.color?.id}e.isEqual=h})(Et||(Et={}));var mm=new RegExp(`\\$\\(${Et.iconNameExpression}(?:${Et.iconModifierExpression})?\\)`,"g"),eP=new RegExp(`(\\\\)?${mm.source}`,"g");function tP(e){return e.replace(eP,(t,i)=>i?t:`\\${t}`)}var fH=new RegExp(`\\\\${mm.source}`,"g"),pH=new RegExp(`(\\s)?(\\\\)?${mm.source}(\\s)?`,"g"),gH=new RegExp(`\\$\\(${Et.iconNameCharacter}+\\)`,"g"),W5;(function(e){e[e.Paragraph=0]="Paragraph",e[e.Break=1]="Break"})(W5||(W5={}));var No=class X${static lift(t){const i=new X$(t.value,t);return i.uris=t.uris,i.baseUri=t.baseUri?y.revive(t.baseUri):void 0,i}constructor(t="",i=!1){if(this.value=t,typeof this.value!="string")throw Ce("value");typeof i=="boolean"?(this.isTrusted=i,this.supportThemeIcons=!1,this.supportHtml=!1):(this.isTrusted=i.isTrusted??void 0,this.supportThemeIcons=i.supportThemeIcons??!1,this.supportHtml=i.supportHtml??!1)}appendText(t,i=0){return this.value+=iP(this.supportThemeIcons?tP(t):t).replace(/([ \t]+)/g,(r,s)=>"&nbsp;".repeat(s.length)).replace(/\>/gm,"\\>").replace(/\n/g,i===1?`\\
`:`

`),this}appendMarkdown(t){return this.value+=t,this}appendCodeblock(t,i){return this.value+=`
${rP(i,t)}
`,this}appendLink(t,i,r){return this.value+="[",this.value+=this.c(i,"]"),this.value+="](",this.value+=this.c(String(t),")"),r&&(this.value+=` "${this.c(this.c(r,'"'),")")}"`),this.value+=")",this}c(t,i){const r=new RegExp(pn(i),"g");return t.replace(r,(s,n)=>t.charAt(n-1)!=="\\"?`\\${s}`:s)}};function Jr(e){return e instanceof No?!0:e&&typeof e=="object"?typeof e.value=="string"&&(typeof e.isTrusted=="boolean"||typeof e.isTrusted=="object"||e.isTrusted===void 0)&&(typeof e.supportThemeIcons=="boolean"||e.supportThemeIcons===void 0):!1}function iP(e){return e.replace(/[\\`*_{}[\]()#+\-!~]/g,"\\$&")}function rP(e,t){const i=e.match(/^`+/gm)?.reduce((s,n)=>s.length>n.length?s:n).length??0,r=i>=3?i+1:3;return[`${"`".repeat(r)}${t}`,e,`${"`".repeat(r)}`].join(`
`)}function sP(e){const t=[],i=e.split("|").map(s=>s.trim());e=i[0];const r=i[1];if(r){const s=/height=(\d+)/.exec(r),n=/width=(\d+)/.exec(r),o=s?s[1]:"",a=n?n[1]:"",c=isFinite(parseInt(a)),l=isFinite(parseInt(o));c&&t.push(`width="${a}"`),l&&t.push(`height="${o}"`)}return{href:e,dimensions:t}}function vm(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var En=vm();function V5(e){En=e}var q5=/[&<>"']/,nP=new RegExp(q5.source,"g"),G5=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,oP=new RegExp(G5.source,"g"),aP={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},J5=e=>aP[e];function Ui(e,t){if(t){if(q5.test(e))return e.replace(nP,J5)}else if(G5.test(e))return e.replace(oP,J5);return e}var cP=/(^|[^\[])\^/g;function rt(e,t){let i=typeof e=="string"?e:e.source;t=t||"";const r={replace:(s,n)=>{let o=typeof n=="string"?n:n.source;return o=o.replace(cP,"$1"),i=i.replace(s,o),r},getRegex:()=>new RegExp(i,t)};return r}function Z5(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}var xc={exec:()=>null};function Y5(e,t){const i=e.replace(/\|/g,(n,o,a)=>{let c=!1,l=o;for(;--l>=0&&a[l]==="\\";)c=!c;return c?"|":" |"}),r=i.split(/ \|/);let s=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else for(;r.length<t;)r.push("");for(;s<r.length;s++)r[s]=r[s].trim().replace(/\\\|/g,"|");return r}function Ec(e,t,i){const r=e.length;if(r===0)return"";let s=0;for(;s<r;){const n=e.charAt(r-s-1);if(n===t&&!i)s++;else if(n!==t&&i)s++;else break}return e.slice(0,r-s)}function lP(e,t){if(e.indexOf(t[1])===-1)return-1;let i=0;for(let r=0;r<e.length;r++)if(e[r]==="\\")r++;else if(e[r]===t[0])i++;else if(e[r]===t[1]&&(i--,i<0))return r;return-1}function Q5(e,t,i,r){const s=t.href,n=t.title?Ui(t.title):null,o=e[1].replace(/\\([\[\]])/g,"$1");if(e[0].charAt(0)!=="!"){r.state.inLink=!0;const a={type:"link",raw:i,href:s,title:n,text:o,tokens:r.inlineTokens(o)};return r.state.inLink=!1,a}return{type:"image",raw:i,href:s,title:n,text:Ui(o)}}function uP(e,t){const i=e.match(/^(\s+)(?:```)/);if(i===null)return t;const r=i[1];return t.split(`
`).map(s=>{const n=s.match(/^\s+/);if(n===null)return s;const[o]=n;return o.length>=r.length?s.slice(r.length):s}).join(`
`)}var lh=class{options;rules;lexer;constructor(e){this.options=e||En}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const i=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?i:Ec(i,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const i=t[0],r=uP(i,t[3]||"");return{type:"code",raw:i,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let i=t[2].trim();if(/#$/.test(i)){const r=Ec(i,"#");(this.options.pedantic||!r||/ $/.test(r))&&(i=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:i,tokens:this.lexer.inline(i)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:Ec(t[0],`
`)}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let i=Ec(t[0],`
`).split(`
`),r="",s="";const n=[];for(;i.length>0;){let o=!1;const a=[];let c;for(c=0;c<i.length;c++)if(/^ {0,3}>/.test(i[c]))a.push(i[c]),o=!0;else if(!o)a.push(i[c]);else break;i=i.slice(c);const l=a.join(`
`),u=l.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,`
    $1`).replace(/^ {0,3}>[ \t]?/gm,"");r=r?`${r}
${l}`:l,s=s?`${s}
${u}`:u;const h=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(u,n,!0),this.lexer.state.top=h,i.length===0)break;const f=n[n.length-1];if(f?.type==="code")break;if(f?.type==="blockquote"){const p=f,m=p.raw+`
`+i.join(`
`),w=this.blockquote(m);n[n.length-1]=w,r=r.substring(0,r.length-p.raw.length)+w.raw,s=s.substring(0,s.length-p.text.length)+w.text;break}else if(f?.type==="list"){const p=f,m=p.raw+`
`+i.join(`
`),w=this.list(m);n[n.length-1]=w,r=r.substring(0,r.length-f.raw.length)+w.raw,s=s.substring(0,s.length-p.raw.length)+w.raw,i=m.substring(n[n.length-1].raw.length).split(`
`);continue}}return{type:"blockquote",raw:r,tokens:n,text:s}}}list(e){let t=this.rules.block.list.exec(e);if(t){let i=t[1].trim();const r=i.length>1,s={type:"list",raw:"",ordered:r,start:r?+i.slice(0,-1):"",loose:!1,items:[]};i=r?`\\d{1,9}\\${i.slice(-1)}`:`\\${i}`,this.options.pedantic&&(i=r?i:"[*+-]");const n=new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`);let o=!1;for(;e;){let a=!1,c="",l="";if(!(t=n.exec(e))||this.rules.block.hr.test(e))break;c=t[0],e=e.substring(c.length);let u=t[2].split(`
`,1)[0].replace(/^\t+/,x=>" ".repeat(3*x.length)),h=e.split(`
`,1)[0],f=!u.trim(),p=0;if(this.options.pedantic?(p=2,l=u.trimStart()):f?p=t[1].length+1:(p=t[2].search(/[^ ]/),p=p>4?1:p,l=u.slice(p),p+=t[1].length),f&&/^ *$/.test(h)&&(c+=h+`
`,e=e.substring(h.length+1),a=!0),!a){const x=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),E=new RegExp(`^ {0,${Math.min(3,p-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),$=new RegExp(`^ {0,${Math.min(3,p-1)}}(?:\`\`\`|~~~)`),A=new RegExp(`^ {0,${Math.min(3,p-1)}}#`);for(;e;){const Q=e.split(`
`,1)[0];if(h=Q,this.options.pedantic&&(h=h.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),$.test(h)||A.test(h)||x.test(h)||E.test(e))break;if(h.search(/[^ ]/)>=p||!h.trim())l+=`
`+h.slice(p);else{if(f||u.search(/[^ ]/)>=4||$.test(u)||A.test(u)||E.test(u))break;l+=`
`+h}!f&&!h.trim()&&(f=!0),c+=Q+`
`,e=e.substring(Q.length+1),u=h.slice(p)}}s.loose||(o?s.loose=!0:/\n *\n *$/.test(c)&&(o=!0));let m=null,w;this.options.gfm&&(m=/^\[[ xX]\] /.exec(l),m&&(w=m[0]!=="[ ] ",l=l.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:c,task:!!m,checked:w,loose:!1,text:l,tokens:[]}),s.raw+=c}s.items[s.items.length-1].raw=s.items[s.items.length-1].raw.trimEnd(),s.items[s.items.length-1].text=s.items[s.items.length-1].text.trimEnd(),s.raw=s.raw.trimEnd();for(let a=0;a<s.items.length;a++)if(this.lexer.state.top=!1,s.items[a].tokens=this.lexer.blockTokens(s.items[a].text,[]),!s.loose){const c=s.items[a].tokens.filter(u=>u.type==="space"),l=c.length>0&&c.some(u=>/\n.*\n/.test(u.raw));s.loose=l}if(s.loose)for(let a=0;a<s.items.length;a++)s.items[a].loose=!0;return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:"html",block:!0,raw:t[0],pre:t[1]==="pre"||t[1]==="script"||t[1]==="style",text:t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t){const i=t[1].toLowerCase().replace(/\s+/g," "),r=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",s=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:i,raw:t[0],href:r,title:s}}}table(e){const t=this.rules.block.table.exec(e);if(!t||!/[:|]/.test(t[2]))return;const i=Y5(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),s=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split(`
`):[],n={type:"table",raw:t[0],header:[],align:[],rows:[]};if(i.length===r.length){for(const o of r)/^ *-+: *$/.test(o)?n.align.push("right"):/^ *:-+: *$/.test(o)?n.align.push("center"):/^ *:-+ *$/.test(o)?n.align.push("left"):n.align.push(null);for(let o=0;o<i.length;o++)n.header.push({text:i[o],tokens:this.lexer.inline(i[o]),header:!0,align:n.align[o]});for(const o of s)n.rows.push(Y5(o,n.header.length).map((a,c)=>({text:a,tokens:this.lexer.inline(a),header:!1,align:n.align[c]})));return n}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const i=t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:i,tokens:this.lexer.inline(i)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:Ui(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const i=t[2].trim();if(!this.options.pedantic&&/^</.test(i)){if(!/>$/.test(i))return;const n=Ec(i.slice(0,-1),"\\");if((i.length-n.length)%2===0)return}else{const n=lP(t[2],"()");if(n>-1){const a=(t[0].indexOf("!")===0?5:4)+t[1].length+n;t[2]=t[2].substring(0,n),t[0]=t[0].substring(0,a).trim(),t[3]=""}}let r=t[2],s="";if(this.options.pedantic){const n=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);n&&(r=n[1],s=n[3])}else s=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(i)?r=r.slice(1):r=r.slice(1,-1)),Q5(t,{href:r&&r.replace(this.rules.inline.anyPunctuation,"$1"),title:s&&s.replace(this.rules.inline.anyPunctuation,"$1")},t[0],this.lexer)}}reflink(e,t){let i;if((i=this.rules.inline.reflink.exec(e))||(i=this.rules.inline.nolink.exec(e))){const r=(i[2]||i[1]).replace(/\s+/g," "),s=t[r.toLowerCase()];if(!s){const n=i[0].charAt(0);return{type:"text",raw:n,text:n}}return Q5(i,s,i[0],this.lexer)}}emStrong(e,t,i=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r||r[3]&&i.match(/[\p{L}\p{N}]/u))return;if(!(r[1]||r[2]||"")||!i||this.rules.inline.punctuation.exec(i)){const n=[...r[0]].length-1;let o,a,c=n,l=0;const u=r[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(u.lastIndex=0,t=t.slice(-1*e.length+n);(r=u.exec(t))!=null;){if(o=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!o)continue;if(a=[...o].length,r[3]||r[4]){c+=a;continue}else if((r[5]||r[6])&&n%3&&!((n+a)%3)){l+=a;continue}if(c-=a,c>0)continue;a=Math.min(a,a+c+l);const h=[...r[0]][0].length,f=e.slice(0,n+r.index+h+a);if(Math.min(n,a)%2){const m=f.slice(1,-1);return{type:"em",raw:f,text:m,tokens:this.lexer.inlineTokens(m)}}const p=f.slice(2,-2);return{type:"strong",raw:f,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let i=t[2].replace(/\n/g," ");const r=/[^ ]/.test(i),s=/^ /.test(i)&&/ $/.test(i);return r&&s&&(i=i.substring(1,i.length-1)),i=Ui(i,!0),{type:"codespan",raw:t[0],text:i}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let i,r;return t[2]==="@"?(i=Ui(t[1]),r="mailto:"+i):(i=Ui(t[1]),r=i),{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let i,r;if(t[2]==="@")i=Ui(t[0]),r="mailto:"+i;else{let s;do s=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??"";while(s!==t[0]);i=Ui(t[0]),t[1]==="www."?r="http://"+t[0]:r=t[0]}return{type:"link",raw:t[0],text:i,href:r,tokens:[{type:"text",raw:i,text:i}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let i;return this.lexer.state.inRawBlock?i=t[0]:i=Ui(t[0]),{type:"text",raw:t[0],text:i}}}},hP=/^(?: *(?:\n|$))+/,dP=/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fP=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,Sc=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,pP=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,X5=/(?:[*+-]|\d{1,9}[.)])/,K5=rt(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,X5).replace(/blockCode/g,/ {4}/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),wm=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,gP=/^[^\n]+/,bm=/(?!\s*\])(?:\\.|[^\[\]\\])+/,mP=rt(/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/).replace("label",bm).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),vP=rt(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,X5).getRegex(),uh="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",ym=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,wP=rt("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))","i").replace("comment",ym).replace("tag",uh).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),e6=rt(wm).replace("hr",Sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uh).getRegex(),bP=rt(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",e6).getRegex(),xm={blockquote:bP,code:dP,def:mP,fences:fP,heading:pP,hr:Sc,html:wP,lheading:K5,list:vP,newline:hP,paragraph:e6,table:xc,text:gP},t6=rt("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",Sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uh).getRegex(),yP={...xm,table:t6,paragraph:rt(wm).replace("hr",Sc).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",t6).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",uh).getRegex()},xP={...xm,html:rt(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",ym).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:xc,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:rt(wm).replace("hr",Sc).replace("heading",` *#{1,6} *[^
]`).replace("lheading",K5).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},i6=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,EP=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,r6=/^( {2,}|\\)\n(?!\s*$)/,SP=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,kc="\\p{P}\\p{S}",kP=rt(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,kc).getRegex(),$P=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g,CP=rt(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,kc).getRegex(),IP=rt("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,kc).getRegex(),DP=rt("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,kc).getRegex(),PP=rt(/\\([punct])/,"gu").replace(/punct/g,kc).getRegex(),AP=rt(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),TP=rt(ym).replace("(?:-->|$)","-->").getRegex(),RP=rt("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",TP).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),hh=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,LP=rt(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",hh).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),s6=rt(/^!?\[(label)\]\[(ref)\]/).replace("label",hh).replace("ref",bm).getRegex(),n6=rt(/^!?\[(ref)\](?:\[\])?/).replace("ref",bm).getRegex(),NP=rt("reflink|nolink(?!\\()","g").replace("reflink",s6).replace("nolink",n6).getRegex(),Em={_backpedal:xc,anyPunctuation:PP,autolink:AP,blockSkip:$P,br:r6,code:EP,del:xc,emStrongLDelim:CP,emStrongRDelimAst:IP,emStrongRDelimUnd:DP,escape:i6,link:LP,nolink:n6,punctuation:kP,reflink:s6,reflinkSearch:NP,tag:RP,text:SP,url:xc},MP={...Em,link:rt(/^!?\[(label)\]\((.*?)\)/).replace("label",hh).getRegex(),reflink:rt(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",hh).getRegex()},Sm={...Em,escape:rt(i6).replace("])","~|])").getRegex(),url:rt(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},FP={...Sm,br:rt(r6).replace("{2,}","*").getRegex(),text:rt(Sm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},dh={normal:xm,gfm:yP,pedantic:xP},$c={normal:Em,gfm:Sm,breaks:FP,pedantic:MP},Sn=class Ab{tokens;options;state;tokenizer;inlineQueue;constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||En,this.options.tokenizer=this.options.tokenizer||new lh,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const i={block:dh.normal,inline:$c.normal};this.options.pedantic?(i.block=dh.pedantic,i.inline=$c.pedantic):this.options.gfm&&(i.block=dh.gfm,this.options.breaks?i.inline=$c.breaks:i.inline=$c.gfm),this.tokenizer.rules=i}static get rules(){return{block:dh,inline:$c}}static lex(t,i){return new Ab(i).lex(t)}static lexInline(t,i){return new Ab(i).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);for(let i=0;i<this.inlineQueue.length;i++){const r=this.inlineQueue[i];this.inlineTokens(r.src,r.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(t,i=[],r=!1){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(a,c,l)=>c+"    ".repeat(l.length));let s,n,o;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(a=>(s=a.call({lexer:this},t,i))?(t=t.substring(s.raw.length),i.push(s),!0):!1))){if(s=this.tokenizer.space(t)){t=t.substring(s.raw.length),s.raw.length===1&&i.length>0?i[i.length-1].raw+=`
`:i.push(s);continue}if(s=this.tokenizer.code(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(s=this.tokenizer.fences(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.heading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.hr(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.blockquote(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.list(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.html(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.def(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+s.raw,n.text+=`
`+s.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[s.tag]||(this.tokens.links[s.tag]={href:s.href,title:s.title});continue}if(s=this.tokenizer.table(t)){t=t.substring(s.raw.length),i.push(s);continue}if(s=this.tokenizer.lheading(t)){t=t.substring(s.raw.length),i.push(s);continue}if(o=t,this.options.extensions&&this.options.extensions.startBlock){let a=1/0;const c=t.slice(1);let l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},c),typeof l=="number"&&l>=0&&(a=Math.min(a,l))}),a<1/0&&a>=0&&(o=t.substring(0,a+1))}if(this.state.top&&(s=this.tokenizer.paragraph(o))){n=i[i.length-1],r&&n?.type==="paragraph"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s),r=o.length!==t.length,t=t.substring(s.raw.length);continue}if(s=this.tokenizer.text(t)){t=t.substring(s.raw.length),n=i[i.length-1],n&&n.type==="text"?(n.raw+=`
`+s.raw,n.text+=`
`+s.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):i.push(s);continue}if(t){const a="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(a);break}else throw new Error(a)}}return this.state.top=!0,i}inline(t,i=[]){return this.inlineQueue.push({src:t,tokens:i}),i}inlineTokens(t,i=[]){let r,s,n,o=t,a,c,l;if(this.tokens.links){const u=Object.keys(this.tokens.links);if(u.length>0)for(;(a=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)u.includes(a[0].slice(a[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(a=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,a.index)+"["+"a".repeat(a[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(a=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,a.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(c||(l=""),c=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,i))?(t=t.substring(r.raw.length),i.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),s=i[i.length-1],s&&r.type==="text"&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(r=this.tokenizer.emStrong(t,o,l)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),i.push(r);continue}if(r=this.tokenizer.autolink(t)){t=t.substring(r.raw.length),i.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t))){t=t.substring(r.raw.length),i.push(r);continue}if(n=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0;const h=t.slice(1);let f;this.options.extensions.startInline.forEach(p=>{f=p.call({lexer:this},h),typeof f=="number"&&f>=0&&(u=Math.min(u,f))}),u<1/0&&u>=0&&(n=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(n)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),c=!0,s=i[i.length-1],s&&s.type==="text"?(s.raw+=r.raw,s.text+=r.text):i.push(r);continue}if(t){const u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return i}},fh=class{options;parser;constructor(e){this.options=e||En}space(e){return""}code({text:e,lang:t,escaped:i}){const r=(t||"").match(/^\S*/)?.[0],s=e.replace(/\n$/,"")+`
`;return r?'<pre><code class="language-'+Ui(r)+'">'+(i?s:Ui(s,!0))+`</code></pre>
`:"<pre><code>"+(i?s:Ui(s,!0))+`</code></pre>
`}blockquote({tokens:e}){return`<blockquote>
${this.parser.parse(e)}</blockquote>
`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>
`}hr(e){return`<hr>
`}list(e){const t=e.ordered,i=e.start;let r="";for(let o=0;o<e.items.length;o++){const a=e.items[o];r+=this.listitem(a)}const s=t?"ol":"ul",n=t&&i!==1?' start="'+i+'"':"";return"<"+s+n+`>
`+r+"</"+s+`>
`}listitem(e){let t="";if(e.task){const i=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&e.tokens[0].type==="paragraph"?(e.tokens[0].text=i+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&e.tokens[0].tokens[0].type==="text"&&(e.tokens[0].tokens[0].text=i+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:i+" ",text:i+" "}):t+=i+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>
`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>
`}table(e){let t="",i="";for(let s=0;s<e.header.length;s++)i+=this.tablecell(e.header[s]);t+=this.tablerow({text:i});let r="";for(let s=0;s<e.rows.length;s++){const n=e.rows[s];i="";for(let o=0;o<n.length;o++)i+=this.tablecell(n[o]);r+=this.tablerow({text:i})}return r&&(r=`<tbody>${r}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+r+`</table>
`}tablerow({text:e}){return`<tr>
${e}</tr>
`}tablecell(e){const t=this.parser.parseInline(e.tokens),i=e.header?"th":"td";return(e.align?`<${i} align="${e.align}">`:`<${i}>`)+t+`</${i}>
`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:i}){const r=this.parser.parseInline(i),s=Z5(e);if(s===null)return r;e=s;let n='<a href="'+e+'"';return t&&(n+=' title="'+t+'"'),n+=">"+r+"</a>",n}image({href:e,title:t,text:i}){const r=Z5(e);if(r===null)return i;e=r;let s=`<img src="${e}" alt="${i}"`;return t&&(s+=` title="${t}"`),s+=">",s}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}},km=class{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}},kn=class Tb{options;renderer;textRenderer;constructor(t){this.options=t||En,this.options.renderer=this.options.renderer||new fh,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new km}static parse(t,i){return new Tb(i).parse(t)}static parseInline(t,i){return new Tb(i).parseInline(t)}parse(t,i=!0){let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=n,c=this.options.extensions.renderers[a.type].call({parser:this},a);if(c!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(a.type)){r+=c||"";continue}}const o=n;switch(o.type){case"space":{r+=this.renderer.space(o);continue}case"hr":{r+=this.renderer.hr(o);continue}case"heading":{r+=this.renderer.heading(o);continue}case"code":{r+=this.renderer.code(o);continue}case"table":{r+=this.renderer.table(o);continue}case"blockquote":{r+=this.renderer.blockquote(o);continue}case"list":{r+=this.renderer.list(o);continue}case"html":{r+=this.renderer.html(o);continue}case"paragraph":{r+=this.renderer.paragraph(o);continue}case"text":{let a=o,c=this.renderer.text(a);for(;s+1<t.length&&t[s+1].type==="text";)a=t[++s],c+=`
`+this.renderer.text(a);i?r+=this.renderer.paragraph({type:"paragraph",raw:c,text:c,tokens:[{type:"text",raw:c,text:c}]}):r+=c;continue}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}parseInline(t,i){i=i||this.renderer;let r="";for(let s=0;s<t.length;s++){const n=t[s];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[n.type]){const a=this.options.extensions.renderers[n.type].call({parser:this},n);if(a!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=a||"";continue}}const o=n;switch(o.type){case"escape":{r+=i.text(o);break}case"html":{r+=i.html(o);break}case"link":{r+=i.link(o);break}case"image":{r+=i.image(o);break}case"strong":{r+=i.strong(o);break}case"em":{r+=i.em(o);break}case"codespan":{r+=i.codespan(o);break}case"br":{r+=i.br(o);break}case"del":{r+=i.del(o);break}case"text":{r+=i.text(o);break}default:{const a='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},ph=class{options;constructor(e){this.options=e||En}static passThroughHooks=new Set(["preprocess","postprocess","processAllTokens"]);preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}},OP=class{defaults=vm();options=this.setOptions;parse=this.parseMarkdown(Sn.lex,kn.parse);parseInline=this.parseMarkdown(Sn.lexInline,kn.parseInline);Parser=kn;Renderer=fh;TextRenderer=km;Lexer=Sn;Tokenizer=lh;Hooks=ph;constructor(...e){this.use(...e)}walkTokens(e,t){let i=[];for(const r of e)switch(i=i.concat(t.call(this,r)),r.type){case"table":{const s=r;for(const n of s.header)i=i.concat(this.walkTokens(n.tokens,t));for(const n of s.rows)for(const o of n)i=i.concat(this.walkTokens(o.tokens,t));break}case"list":{const s=r;i=i.concat(this.walkTokens(s.items,t));break}default:{const s=r;this.defaults.extensions?.childTokens?.[s.type]?this.defaults.extensions.childTokens[s.type].forEach(n=>{const o=s[n].flat(1/0);i=i.concat(this.walkTokens(o,t))}):s.tokens&&(i=i.concat(this.walkTokens(s.tokens,t)))}}return i}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach(i=>{const r={...i};if(r.async=this.defaults.async||r.async||!1,i.extensions&&(i.extensions.forEach(s=>{if(!s.name)throw new Error("extension name required");if("renderer"in s){const n=t.renderers[s.name];n?t.renderers[s.name]=function(...o){let a=s.renderer.apply(this,o);return a===!1&&(a=n.apply(this,o)),a}:t.renderers[s.name]=s.renderer}if("tokenizer"in s){if(!s.level||s.level!=="block"&&s.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const n=t[s.level];n?n.unshift(s.tokenizer):t[s.level]=[s.tokenizer],s.start&&(s.level==="block"?t.startBlock?t.startBlock.push(s.start):t.startBlock=[s.start]:s.level==="inline"&&(t.startInline?t.startInline.push(s.start):t.startInline=[s.start]))}"childTokens"in s&&s.childTokens&&(t.childTokens[s.name]=s.childTokens)}),r.extensions=t),i.renderer){const s=this.defaults.renderer||new fh(this.defaults);for(const n in i.renderer){if(!(n in s))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const o=n,a=i.renderer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u||""}}r.renderer=s}if(i.tokenizer){const s=this.defaults.tokenizer||new lh(this.defaults);for(const n in i.tokenizer){if(!(n in s))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const o=n,a=i.tokenizer[o],c=s[o];s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.tokenizer=s}if(i.hooks){const s=this.defaults.hooks||new ph;for(const n in i.hooks){if(!(n in s))throw new Error(`hook '${n}' does not exist`);if(n==="options")continue;const o=n,a=i.hooks[o],c=s[o];ph.passThroughHooks.has(n)?s[o]=l=>{if(this.defaults.async)return Promise.resolve(a.call(s,l)).then(h=>c.call(s,h));const u=a.call(s,l);return c.call(s,u)}:s[o]=(...l)=>{let u=a.apply(s,l);return u===!1&&(u=c.apply(s,l)),u}}r.hooks=s}if(i.walkTokens){const s=this.defaults.walkTokens,n=i.walkTokens;r.walkTokens=function(o){let a=[];return a.push(n.call(this,o)),s&&(a=a.concat(s.call(this,o))),a}}this.defaults={...this.defaults,...r}}),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return Sn.lex(e,t??this.defaults)}parser(e,t){return kn.parse(e,t??this.defaults)}parseMarkdown(e,t){return(r,s)=>{const n={...s},o={...this.defaults,...n},a=this.onError(!!o.silent,!!o.async);if(this.defaults.async===!0&&n.async===!1)return a(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(o.hooks&&(o.hooks.options=o),o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(c=>e(c,o)).then(c=>o.hooks?o.hooks.processAllTokens(c):c).then(c=>o.walkTokens?Promise.all(this.walkTokens(c,o.walkTokens)).then(()=>c):c).then(c=>t(c,o)).then(c=>o.hooks?o.hooks.postprocess(c):c).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let c=e(r,o);o.hooks&&(c=o.hooks.processAllTokens(c)),o.walkTokens&&this.walkTokens(c,o.walkTokens);let l=t(c,o);return o.hooks&&(l=o.hooks.postprocess(l)),l}catch(c){return a(c)}}}onError(e,t){return i=>{if(i.message+=`
Please report this to https://github.com/markedjs/marked.`,e){const r="<p>An error occurred:</p><pre>"+Ui(i.message+"",!0)+"</pre>";return t?Promise.resolve(r):r}if(t)return Promise.reject(i);throw i}}},$n=new OP;function it(e,t){return $n.parse(e,t)}it.options=it.setOptions=function(e){return $n.setOptions(e),it.defaults=$n.defaults,V5(it.defaults),it},it.getDefaults=vm,it.defaults=En,it.use=function(...e){return $n.use(...e),it.defaults=$n.defaults,V5(it.defaults),it},it.walkTokens=function(e,t){return $n.walkTokens(e,t)},it.parseInline=$n.parseInline,it.Parser=kn,it.parser=kn.parse,it.Renderer=fh,it.TextRenderer=km,it.Lexer=Sn,it.lexer=Sn.lex,it.Tokenizer=lh,it.Hooks=ph,it.parse=it;var mH=it.options,vH=it.setOptions,wH=it.use,bH=it.walkTokens,yH=it.parseInline,xH=kn.parse,EH=Sn.lex;function UP(e){return JSON.stringify(e,jP)}function o6(e){let t=JSON.parse(e);return t=St(t),t}function jP(e,t){return t instanceof RegExp?{$mid:2,source:t.source,flags:t.flags}:t}function St(e,t=0){if(!e||t>200)return e;if(typeof e=="object"){switch(e.$mid){case 1:return y.revive(e);case 2:return new RegExp(e.source,e.flags);case 17:return new Date(e.source)}if(e instanceof ae||e instanceof Uint8Array)return e;if(Array.isArray(e))for(let i=0;i<e.length;++i)e[i]=St(e[i],t+1);else for(const i in e)Object.hasOwnProperty.call(e,i)&&(e[i]=St(e[i],t+1))}return e}var kr=Object.freeze({text:"text/plain",binary:"application/octet-stream",unknown:"application/unknown",markdown:"text/markdown",latex:"text/latex",uriList:"text/uri-list",html:"text/html"}),BP=/^(.+)\/(.+?)(;.+)?$/;function a6(e,t){const i=BP.exec(e);return i?`${i[1].toLowerCase()}/${i[2].toLowerCase()}${i[3]??""}`:t?void 0:e}var ai=Symbol("unset"),HP=class{constructor(){this.root=new $m,this.a=0}get size(){return this.a}get nodes(){return this.root.children?.values()||Ot.empty()}get entries(){return this.root.children?.entries()||Ot.empty()}insert(e,t,i){this.c(e,r=>r._value=t,i)}mutate(e,t){this.c(e,i=>i._value=t(i._value===ai?void 0:i._value))}mutatePath(e,t){this.c(e,()=>{},i=>t(i))}delete(e){const t=this.b(e);if(!t)return;let i=t.length-1;const r=t[i].node._value;if(r!==ai){for(this.a--,t[i].node._value=ai;i>0;i--){const{node:s,part:n}=t[i];if(s.children?.size||s._value!==ai)break;t[i-1].node.children.delete(n)}return r}}*deleteRecursive(e){const t=this.b(e);if(!t)return;const i=t[t.length-1].node;for(let r=t.length-1;r>0;r--){const s=t[r-1];if(s.node.children.delete(t[r].part),s.node.children.size>0||s.node._value!==ai)break}for(const r of c6(i))r._value!==ai&&(this.a--,yield r._value);i===this.root&&(this.root._value=ai,this.root.children=void 0)}find(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return;t=r}return t._value===ai?void 0:t._value}hasKeyOrParent(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;if(r._value!==ai)return!0;t=r}return!1}hasKeyOrChildren(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return!0}hasKey(e){let t=this.root;for(const i of e){const r=t.children?.get(i);if(!r)return!1;t=r}return t._value!==ai}b(e){const t=[{part:"",node:this.root}];let i=0;for(const r of e){const s=t[i].node.children?.get(r);if(!s)return;t.push({part:r,node:s}),i++}return t}c(e,t,i){let r=this.root;for(const o of e){if(r.children)if(r.children.has(o))r=r.children.get(o);else{const a=new $m;r.children.set(o,a),r=a}else{const a=new $m;r.children=new Map([[o,a]]),r=a}i?.(r)}const s=r._value===ai?0:1;t(r);const n=r._value===ai?0:1;this.a+=n-s}*values(){for(const{_value:e}of c6(this.root))e!==ai&&(yield e)}};function*c6(e){const t=[e];for(;t.length>0;){const i=t.pop();if(yield i,i.children)for(const r of i.children.values())t.push(r)}}var $m=class{constructor(){this._value=ai}get value(){return this._value===ai?void 0:this._value}set value(e){this._value=e===void 0?ai:e}},ji=class fo{constructor(t,i){this.lineNumber=t,this.column=i}with(t=this.lineNumber,i=this.column){return t===this.lineNumber&&i===this.column?this:new fo(t,i)}delta(t=0,i=0){return this.with(Math.max(1,this.lineNumber+t),Math.max(1,this.column+i))}equals(t){return fo.equals(this,t)}static equals(t,i){return!t&&!i?!0:!!t&&!!i&&t.lineNumber===i.lineNumber&&t.column===i.column}isBefore(t){return fo.isBefore(this,t)}static isBefore(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<i.column}isBeforeOrEqual(t){return fo.isBeforeOrEqual(this,t)}static isBeforeOrEqual(t,i){return t.lineNumber<i.lineNumber?!0:i.lineNumber<t.lineNumber?!1:t.column<=i.column}static compare(t,i){const r=t.lineNumber|0,s=i.lineNumber|0;if(r===s){const n=t.column|0,o=i.column|0;return n-o}return r-s}clone(){return new fo(this.lineNumber,this.column)}toString(){return"("+this.lineNumber+","+this.column+")"}static lift(t){return new fo(t.lineNumber,t.column)}static isIPosition(t){return t&&typeof t.lineNumber=="number"&&typeof t.column=="number"}toJSON(){return{lineNumber:this.lineNumber,column:this.column}}},Oe=class Tt{constructor(t,i,r,s){t>r||t===r&&i>s?(this.startLineNumber=r,this.startColumn=s,this.endLineNumber=t,this.endColumn=i):(this.startLineNumber=t,this.startColumn=i,this.endLineNumber=r,this.endColumn=s)}isEmpty(){return Tt.isEmpty(this)}static isEmpty(t){return t.startLineNumber===t.endLineNumber&&t.startColumn===t.endColumn}containsPosition(t){return Tt.containsPosition(this,t)}static containsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<t.startColumn||i.lineNumber===t.endLineNumber&&i.column>t.endColumn)}static strictContainsPosition(t,i){return!(i.lineNumber<t.startLineNumber||i.lineNumber>t.endLineNumber||i.lineNumber===t.startLineNumber&&i.column<=t.startColumn||i.lineNumber===t.endLineNumber&&i.column>=t.endColumn)}containsRange(t){return Tt.containsRange(this,t)}static containsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>t.endColumn)}strictContainsRange(t){return Tt.strictContainsRange(this,t)}static strictContainsRange(t,i){return!(i.startLineNumber<t.startLineNumber||i.endLineNumber<t.startLineNumber||i.startLineNumber>t.endLineNumber||i.endLineNumber>t.endLineNumber||i.startLineNumber===t.startLineNumber&&i.startColumn<=t.startColumn||i.endLineNumber===t.endLineNumber&&i.endColumn>=t.endColumn)}plusRange(t){return Tt.plusRange(this,t)}static plusRange(t,i){let r,s,n,o;return i.startLineNumber<t.startLineNumber?(r=i.startLineNumber,s=i.startColumn):i.startLineNumber===t.startLineNumber?(r=i.startLineNumber,s=Math.min(i.startColumn,t.startColumn)):(r=t.startLineNumber,s=t.startColumn),i.endLineNumber>t.endLineNumber?(n=i.endLineNumber,o=i.endColumn):i.endLineNumber===t.endLineNumber?(n=i.endLineNumber,o=Math.max(i.endColumn,t.endColumn)):(n=t.endLineNumber,o=t.endColumn),new Tt(r,s,n,o)}intersectRanges(t){return Tt.intersectRanges(this,t)}static intersectRanges(t,i){let r=t.startLineNumber,s=t.startColumn,n=t.endLineNumber,o=t.endColumn;const a=i.startLineNumber,c=i.startColumn,l=i.endLineNumber,u=i.endColumn;return r<a?(r=a,s=c):r===a&&(s=Math.max(s,c)),n>l?(n=l,o=u):n===l&&(o=Math.min(o,u)),r>n||r===n&&s>o?null:new Tt(r,s,n,o)}equalsRange(t){return Tt.equalsRange(this,t)}static equalsRange(t,i){return!t&&!i?!0:!!t&&!!i&&t.startLineNumber===i.startLineNumber&&t.startColumn===i.startColumn&&t.endLineNumber===i.endLineNumber&&t.endColumn===i.endColumn}getEndPosition(){return Tt.getEndPosition(this)}static getEndPosition(t){return new ji(t.endLineNumber,t.endColumn)}getStartPosition(){return Tt.getStartPosition(this)}static getStartPosition(t){return new ji(t.startLineNumber,t.startColumn)}toString(){return"["+this.startLineNumber+","+this.startColumn+" -> "+this.endLineNumber+","+this.endColumn+"]"}setEndPosition(t,i){return new Tt(this.startLineNumber,this.startColumn,t,i)}setStartPosition(t,i){return new Tt(t,i,this.endLineNumber,this.endColumn)}collapseToStart(){return Tt.collapseToStart(this)}static collapseToStart(t){return new Tt(t.startLineNumber,t.startColumn,t.startLineNumber,t.startColumn)}collapseToEnd(){return Tt.collapseToEnd(this)}static collapseToEnd(t){return new Tt(t.endLineNumber,t.endColumn,t.endLineNumber,t.endColumn)}delta(t){return new Tt(this.startLineNumber+t,this.startColumn,this.endLineNumber+t,this.endColumn)}isSingleLine(){return this.startLineNumber===this.endLineNumber}static fromPositions(t,i=t){return new Tt(t.lineNumber,t.column,i.lineNumber,i.column)}static lift(t){return t?new Tt(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):null}static isIRange(t){return t&&typeof t.startLineNumber=="number"&&typeof t.startColumn=="number"&&typeof t.endLineNumber=="number"&&typeof t.endColumn=="number"}static areIntersectingOrTouching(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn)}static areIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber||t.endLineNumber===i.startLineNumber&&t.endColumn<=i.startColumn||i.endLineNumber<t.startLineNumber||i.endLineNumber===t.startLineNumber&&i.endColumn<=t.startColumn)}static areOnlyIntersecting(t,i){return!(t.endLineNumber<i.startLineNumber-1||t.endLineNumber===i.startLineNumber&&t.endColumn<i.startColumn-1||i.endLineNumber<t.startLineNumber-1||i.endLineNumber===t.startLineNumber&&i.endColumn<t.startColumn-1)}static compareRangesUsingStarts(t,i){if(t&&i){const n=t.startLineNumber|0,o=i.startLineNumber|0;if(n===o){const a=t.startColumn|0,c=i.startColumn|0;if(a===c){const l=t.endLineNumber|0,u=i.endLineNumber|0;if(l===u){const h=t.endColumn|0,f=i.endColumn|0;return h-f}return l-u}return a-c}return n-o}return(t?1:0)-(i?1:0)}static compareRangesUsingEnds(t,i){return t.endLineNumber===i.endLineNumber?t.endColumn===i.endColumn?t.startLineNumber===i.startLineNumber?t.startColumn-i.startColumn:t.startLineNumber-i.startLineNumber:t.endColumn-i.endColumn:t.endLineNumber-i.endLineNumber}static spansMultipleLines(t){return t.endLineNumber>t.startLineNumber}toJSON(){return this}},l6=class{static insert(e,t){return{range:new Oe(e.lineNumber,e.column,e.lineNumber,e.column),text:t,forceMoveMarkers:!0}}static delete(e){return{range:e,text:null}}static replace(e,t){return{range:e,text:t}}static replaceMove(e,t){return{range:e,text:t,forceMoveMarkers:!0}}},zP=class{constructor(){this.a=new Map,this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=null}handleChange(e){this.c.fire({changedLanguages:e,changedColorMap:!1})}register(e,t){return this.a.set(e,t),this.handleChange([e]),oe(()=>{this.a.get(e)===t&&(this.a.delete(e),this.handleChange([e]))})}get(e){return this.a.get(e)||null}registerFactory(e,t){this.b.get(e)?.dispose();const i=new _P(this,e,t);return this.b.set(e,i),oe(()=>{const r=this.b.get(e);!r||r!==i||(this.b.delete(e),r.dispose())})}async getOrCreate(e){const t=this.get(e);if(t)return t;const i=this.b.get(e);return!i||i.isResolved?null:(await i.resolve(),this.get(e))}isResolved(e){if(this.get(e))return!0;const i=this.b.get(e);return!!(!i||i.isResolved)}setColorMap(e){this.d=e,this.c.fire({changedLanguages:Array.from(this.a.keys()),changedColorMap:!0})}getColorMap(){return this.d}getDefaultBackground(){return this.d&&this.d.length>2?this.d[2]:null}},_P=class extends ne{get isResolved(){return this.c}constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=!1,this.b=null,this.c=!1}dispose(){this.a=!0,super.dispose()}async resolve(){return this.b||(this.b=this.j()),this.b}async j(){const e=await this.h.tokenizationSupport;this.c=!0,e&&!this.a&&this.B(this.f.register(this.g,e))}},u6;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(u6||(u6={}));var h6;(function(e){e[e.Method=0]="Method",e[e.Function=1]="Function",e[e.Constructor=2]="Constructor",e[e.Field=3]="Field",e[e.Variable=4]="Variable",e[e.Class=5]="Class",e[e.Struct=6]="Struct",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Event=10]="Event",e[e.Operator=11]="Operator",e[e.Unit=12]="Unit",e[e.Value=13]="Value",e[e.Constant=14]="Constant",e[e.Enum=15]="Enum",e[e.EnumMember=16]="EnumMember",e[e.Keyword=17]="Keyword",e[e.Text=18]="Text",e[e.Color=19]="Color",e[e.File=20]="File",e[e.Reference=21]="Reference",e[e.Customcolor=22]="Customcolor",e[e.Folder=23]="Folder",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue",e[e.Tool=27]="Tool",e[e.Snippet=28]="Snippet"})(h6||(h6={}));var d6;(function(e){const t=new Map;t.set(0,te.symbolMethod),t.set(1,te.symbolFunction),t.set(2,te.symbolConstructor),t.set(3,te.symbolField),t.set(4,te.symbolVariable),t.set(5,te.symbolClass),t.set(6,te.symbolStruct),t.set(7,te.symbolInterface),t.set(8,te.symbolModule),t.set(9,te.symbolProperty),t.set(10,te.symbolEvent),t.set(11,te.symbolOperator),t.set(12,te.symbolUnit),t.set(13,te.symbolValue),t.set(15,te.symbolEnum),t.set(14,te.symbolConstant),t.set(15,te.symbolEnum),t.set(16,te.symbolEnumMember),t.set(17,te.symbolKeyword),t.set(28,te.symbolSnippet),t.set(18,te.symbolText),t.set(19,te.symbolColor),t.set(20,te.symbolFile),t.set(21,te.symbolReference),t.set(22,te.symbolCustomColor),t.set(23,te.symbolFolder),t.set(24,te.symbolTypeParameter),t.set(25,te.account),t.set(26,te.issues),t.set(27,te.tools);function i(o){let a=t.get(o);return a||(console.info("No codicon found for CompletionItemKind "+o),a=te.symbolProperty),a}e.toIcon=i;function r(o){switch(o){case 0:return d(813,null);case 1:return d(814,null);case 2:return d(815,null);case 3:return d(816,null);case 4:return d(817,null);case 5:return d(818,null);case 6:return d(819,null);case 7:return d(820,null);case 8:return d(821,null);case 9:return d(822,null);case 10:return d(823,null);case 11:return d(824,null);case 12:return d(825,null);case 13:return d(826,null);case 14:return d(827,null);case 15:return d(828,null);case 16:return d(829,null);case 17:return d(830,null);case 18:return d(831,null);case 19:return d(832,null);case 20:return d(833,null);case 21:return d(834,null);case 22:return d(835,null);case 23:return d(836,null);case 24:return d(837,null);case 25:return d(838,null);case 26:return d(839,null);case 27:return d(840,null);case 28:return d(841,null);default:return""}}e.toLabel=r;const s=new Map;s.set("method",0),s.set("function",1),s.set("constructor",2),s.set("field",3),s.set("variable",4),s.set("class",5),s.set("struct",6),s.set("interface",7),s.set("module",8),s.set("property",9),s.set("event",10),s.set("operator",11),s.set("unit",12),s.set("value",13),s.set("constant",14),s.set("enum",15),s.set("enum-member",16),s.set("enumMember",16),s.set("keyword",17),s.set("snippet",28),s.set("text",18),s.set("color",19),s.set("file",20),s.set("reference",21),s.set("customcolor",22),s.set("folder",23),s.set("type-parameter",24),s.set("typeParameter",24),s.set("account",25),s.set("issue",26),s.set("tool",27);function n(o,a){let c=s.get(o);return typeof c>"u"&&!a&&(c=9),c}e.fromString=n})(d6||(d6={}));var f6;(function(e){e[e.Deprecated=1]="Deprecated"})(f6||(f6={}));var p6;(function(e){e[e.None=0]="None",e[e.KeepWhitespace=1]="KeepWhitespace",e[e.InsertAsSnippet=4]="InsertAsSnippet"})(p6||(p6={}));var g6;(function(e){e[e.Word=0]="Word",e[e.Line=1]="Line",e[e.Suggest=2]="Suggest"})(g6||(g6={}));var m6;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(m6||(m6={}));var gh;(function(e){e[e.Automatic=0]="Automatic",e[e.Explicit=1]="Explicit"})(gh||(gh={}));var mh;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(mh||(mh={}));var v6;(function(e){e[e.Invoke=1]="Invoke",e[e.Auto=2]="Auto"})(v6||(v6={}));var w6;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(w6||(w6={}));var b6;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(b6||(b6={}));var y6;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(y6||(y6={}));function WP(e){return e&&y.isUri(e.uri)&&Oe.isIRange(e.range)&&(Oe.isIRange(e.originSelectionRange)||Oe.isIRange(e.targetSelectionRange))}function VP(e){return e&&y.isUri(e.uri)&&Oe.isIRange(e.range)}var x6;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(x6||(x6={}));var SH={17:d(842,null),16:d(843,null),4:d(844,null),13:d(845,null),8:d(846,null),9:d(847,null),21:d(848,null),23:d(849,null),7:d(850,null),0:d(851,null),11:d(852,null),10:d(853,null),19:d(854,null),5:d(855,null),1:d(856,null),2:d(857,null),20:d(858,null),15:d(859,null),18:d(860,null),24:d(861,null),3:d(862,null),6:d(863,null),14:d(864,null),22:d(865,null),25:d(866,null),12:d(867,null)},E6;(function(e){e[e.Deprecated=1]="Deprecated"})(E6||(E6={}));var S6;(function(e){const t=new Map;t.set(0,te.symbolFile),t.set(1,te.symbolModule),t.set(2,te.symbolNamespace),t.set(3,te.symbolPackage),t.set(4,te.symbolClass),t.set(5,te.symbolMethod),t.set(6,te.symbolProperty),t.set(7,te.symbolField),t.set(8,te.symbolConstructor),t.set(9,te.symbolEnum),t.set(10,te.symbolInterface),t.set(11,te.symbolFunction),t.set(12,te.symbolVariable),t.set(13,te.symbolConstant),t.set(14,te.symbolString),t.set(15,te.symbolNumber),t.set(16,te.symbolBoolean),t.set(17,te.symbolArray),t.set(18,te.symbolObject),t.set(19,te.symbolKey),t.set(20,te.symbolNull),t.set(21,te.symbolEnumMember),t.set(22,te.symbolStruct),t.set(23,te.symbolEvent),t.set(24,te.symbolOperator),t.set(25,te.symbolTypeParameter);function i(n){let o=t.get(n);return o||(console.info("No codicon found for SymbolKind "+n),o=te.symbolProperty),o}e.toIcon=i;const r=new Map;r.set(0,20),r.set(1,8),r.set(2,8),r.set(3,8),r.set(4,5),r.set(5,0),r.set(6,9),r.set(7,3),r.set(8,2),r.set(9,15),r.set(10,7),r.set(11,1),r.set(12,4),r.set(13,14),r.set(14,18),r.set(15,13),r.set(16,13),r.set(17,13),r.set(18,13),r.set(19,17),r.set(20,13),r.set(21,16),r.set(22,6),r.set(23,10),r.set(24,11),r.set(25,24);function s(n){let o=r.get(n);return o===void 0&&(console.info("No completion kind found for SymbolKind "+n),o=20),o}e.toCompletionKind=s})(S6||(S6={}));var qP=class{static asEditOperation(e){const t=Oe.lift(e.range);return t.isEmpty()?l6.insert(t.getStartPosition(),e.text):l6.replace(t,e.text)}static isTextEdit(e){const t=e;return typeof t.text=="string"&&Oe.isIRange(t.range)}},Mo=class en{static{this.Comment=new en("comment")}static{this.Imports=new en("imports")}static{this.Region=new en("region")}static fromValue(t){switch(t){case"comment":return en.Comment;case"imports":return en.Imports;case"region":return en.Region}return new en(t)}constructor(t){this.value=t}},k6;(function(e){e[e.AIGenerated=1]="AIGenerated"})(k6||(k6={}));var vh;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(vh||(vh={}));var Cm;(function(e){function t(i){return!i||typeof i!="object"?!1:typeof i.id=="string"&&typeof i.title=="string"}e.is=t})(Cm||(Cm={}));var Fo;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(Fo||(Fo={}));var Cc;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(Cc||(Cc={}));var Ic;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(Ic||(Ic={}));var $6;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})($6||($6={}));var C6;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(C6||(C6={}));var I6;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(I6||(I6={}));var kH=new zP,D6;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(D6||(D6={}));var wh;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(wh||(wh={}));var P6;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(P6||(P6={}));var fi;(function(e){e[e.Hint=1]="Hint",e[e.Info=2]="Info",e[e.Warning=4]="Warning",e[e.Error=8]="Error"})(fi||(fi={})),function(e){function t(c,l){return l-c}e.compare=t;const i=Object.create(null);i[e.Error]=d(2108,null),i[e.Warning]=d(2109,null),i[e.Info]=d(2110,null);function r(c){return i[c]||""}e.toString=r;const s=Object.create(null);s[e.Error]=d(2111,null),s[e.Warning]=d(2112,null),s[e.Info]=d(2113,null);function n(c){return s[c]||""}e.toStringPlural=n;function o(c){switch(c){case mt.Error:return e.Error;case mt.Warning:return e.Warning;case mt.Info:return e.Info;case mt.Ignore:return e.Hint}}e.fromSeverity=o;function a(c){switch(c){case e.Error:return mt.Error;case e.Warning:return mt.Warning;case e.Info:return mt.Info;case e.Hint:return mt.Ignore}}e.toSeverity=a}(fi||(fi={}));var A6;(function(e){const t="";function i(s){return r(s,!0)}e.makeKey=i;function r(s,n){const o=[t];return s.source?o.push(s.source.replace("\xA6","\\\xA6")):o.push(t),s.code?typeof s.code=="string"?o.push(s.code.replace("\xA6","\\\xA6")):o.push(s.code.value.replace("\xA6","\\\xA6")):o.push(t),s.severity!==void 0&&s.severity!==null?o.push(fi.toString(s.severity)):o.push(t),s.message&&n?o.push(s.message.replace("\xA6","\\\xA6")):o.push(t),s.startLineNumber!==void 0&&s.startLineNumber!==null?o.push(s.startLineNumber.toString()):o.push(t),s.startColumn!==void 0&&s.startColumn!==null?o.push(s.startColumn.toString()):o.push(t),s.endLineNumber!==void 0&&s.endLineNumber!==null?o.push(s.endLineNumber.toString()):o.push(t),s.endColumn!==void 0&&s.endColumn!==null?o.push(s.endColumn.toString()):o.push(t),o.push(t),o.join("\xA6")}e.makeKeyOptionalMessage=r})(A6||(A6={}));var $H=B("markerService"),GP=class{constructor(){this.a=new Map}add(e,t){si(Ue(e)),si(wt(t)),si(!this.a.has(e),"There is already an extension with this id"),this.a.set(e,t)}knows(e){return this.a.has(e)}as(e){return this.a.get(e)||null}dispose(){this.a.forEach(e=>{dy(e.dispose)&&e.dispose()}),this.a.clear()}},jt=new GP,T6=B("fileService"),Cn;(function(e){e[e.Unknown=0]="Unknown",e[e.File=1]="File",e[e.Directory=2]="Directory",e[e.SymbolicLink=64]="SymbolicLink"})(Cn||(Cn={}));var Oo;(function(e){e[e.Readonly=1]="Readonly",e[e.Locked=2]="Locked"})(Oo||(Oo={}));var R6;(function(e){e[e.UPDATED=2]="UPDATED",e[e.ADDED=4]="ADDED",e[e.DELETED=8]="DELETED"})(R6||(R6={}));var L6;(function(e){e[e.None=0]="None",e[e.FileReadWrite=2]="FileReadWrite",e[e.FileOpenReadWriteClose=4]="FileOpenReadWriteClose",e[e.FileReadStream=16]="FileReadStream",e[e.FileFolderCopy=8]="FileFolderCopy",e[e.PathCaseSensitive=1024]="PathCaseSensitive",e[e.Readonly=2048]="Readonly",e[e.Trash=4096]="Trash",e[e.FileWriteUnlock=8192]="FileWriteUnlock",e[e.FileAtomicRead=16384]="FileAtomicRead",e[e.FileAtomicWrite=32768]="FileAtomicWrite",e[e.FileAtomicDelete=65536]="FileAtomicDelete",e[e.FileClone=131072]="FileClone"})(L6||(L6={}));var Se;(function(e){e.FileExists="EntryExists",e.FileNotFound="EntryNotFound",e.FileNotADirectory="EntryNotADirectory",e.FileIsADirectory="EntryIsADirectory",e.FileExceedsStorageQuota="EntryExceedsStorageQuota",e.FileTooLarge="EntryTooLarge",e.FileWriteLocked="EntryWriteLocked",e.NoPermissions="NoPermissions",e.Unavailable="Unavailable",e.Unknown="Unknown"})(Se||(Se={}));var N6=class K$ extends Error{static create(t,i){const r=new K$(t.toString(),i);return M6(r,i),r}constructor(t,i){super(t),this.code=i}};function M6(e,t){return e.name=t?`${t} (FileSystemError)`:"FileSystemError",e}function bh(e){if(!e)return Se.Unknown;if(e instanceof N6)return e.code;const t=/^(.+) \(FileSystemError\)$/.exec(e.name);if(!t)return Se.Unknown;switch(t[1]){case Se.FileExists:return Se.FileExists;case Se.FileIsADirectory:return Se.FileIsADirectory;case Se.FileNotADirectory:return Se.FileNotADirectory;case Se.FileNotFound:return Se.FileNotFound;case Se.FileTooLarge:return Se.FileTooLarge;case Se.FileWriteLocked:return Se.FileWriteLocked;case Se.NoPermissions:return Se.NoPermissions;case Se.Unavailable:return Se.Unavailable}return Se.Unknown}function JP(e){if(e instanceof Im)return e.fileOperationResult;switch(bh(e)){case Se.FileNotFound:return 1;case Se.FileIsADirectory:return 0;case Se.FileNotADirectory:return 9;case Se.FileWriteLocked:return 5;case Se.NoPermissions:return 6;case Se.FileExists:return 4;case Se.FileTooLarge:return 7;default:return 10}}var F6;(function(e){e[e.CREATE=0]="CREATE",e[e.DELETE=1]="DELETE",e[e.MOVE=2]="MOVE",e[e.COPY=3]="COPY",e[e.WRITE=4]="WRITE"})(F6||(F6={}));var O6;(function(e){e[e.UPDATED=0]="UPDATED",e[e.ADDED=1]="ADDED",e[e.DELETED=2]="DELETED"})(O6||(O6={}));var CH=class qp{static{this.a=null}constructor(t,i){this.c=i,this.b=void 0,this.d=new _t(()=>{const r=Ds.forUris(()=>this.c);return r.fill(this.rawAdded.map(s=>[s,!0])),r}),this.f=new _t(()=>{const r=Ds.forUris(()=>this.c);return r.fill(this.rawUpdated.map(s=>[s,!0])),r}),this.g=new _t(()=>{const r=Ds.forUris(()=>this.c);return r.fill(this.rawDeleted.map(s=>[s,!0])),r}),this.rawAdded=[],this.rawUpdated=[],this.rawDeleted=[];for(const r of t){switch(r.type){case 1:this.rawAdded.push(r.resource);break;case 0:this.rawUpdated.push(r.resource);break;case 2:this.rawDeleted.push(r.resource);break}this.b!==qp.a&&(typeof r.cId=="number"?this.b===void 0?this.b=r.cId:this.b!==r.cId&&(this.b=qp.a):this.b!==void 0&&(this.b=qp.a))}}contains(t,...i){return this.h(t,{includeChildren:!1},...i)}affects(t,...i){return this.h(t,{includeChildren:!0},...i)}h(t,i,...r){if(!t)return!1;const s=r.length>0;return!!((!s||r.includes(1))&&(this.d.value.get(t)||i.includeChildren&&this.d.value.findSuperstr(t))||(!s||r.includes(0))&&(this.f.value.get(t)||i.includeChildren&&this.f.value.findSuperstr(t))||(!s||r.includes(2))&&(this.g.value.findSubstr(t)||i.includeChildren&&this.g.value.findSuperstr(t)))}gotAdded(){return this.rawAdded.length>0}gotDeleted(){return this.rawDeleted.length>0}gotUpdated(){return this.rawUpdated.length>0}correlates(t){return this.b===t}hasCorrelation(){return typeof this.b=="number"}},Im=class extends Error{constructor(e,t,i){super(e),this.fileOperationResult=t,this.options=i}},U6;(function(e){e[e.FILE_IS_DIRECTORY=0]="FILE_IS_DIRECTORY",e[e.FILE_NOT_FOUND=1]="FILE_NOT_FOUND",e[e.FILE_NOT_MODIFIED_SINCE=2]="FILE_NOT_MODIFIED_SINCE",e[e.FILE_MODIFIED_SINCE=3]="FILE_MODIFIED_SINCE",e[e.FILE_MOVE_CONFLICT=4]="FILE_MOVE_CONFLICT",e[e.FILE_WRITE_LOCKED=5]="FILE_WRITE_LOCKED",e[e.FILE_PERMISSION_DENIED=6]="FILE_PERMISSION_DENIED",e[e.FILE_TOO_LARGE=7]="FILE_TOO_LARGE",e[e.FILE_INVALID_PATH=8]="FILE_INVALID_PATH",e[e.FILE_NOT_DIRECTORY=9]="FILE_NOT_DIRECTORY",e[e.FILE_OTHER_ERROR=10]="FILE_OTHER_ERROR"})(U6||(U6={}));var j6;(function(e){e[e.FILE=0]="FILE",e[e.FOLDER=1]="FOLDER",e[e.ROOT_FOLDER=2]="ROOT_FOLDER"})(j6||(j6={}));var ZP="";function B6(e){if(!(typeof e.size!="number"||typeof e.mtime!="number"))return e.mtime.toString(29)+e.size.toString(31)}var IH=class bi{static{this.KB=1024}static{this.MB=bi.KB*bi.KB}static{this.GB=bi.MB*bi.KB}static{this.TB=bi.GB*bi.KB}static formatSize(t){return cn(t)||(t=0),t<bi.KB?d(2021,null,t.toFixed(0)):t<bi.MB?d(2022,null,(t/bi.KB).toFixed(2)):t<bi.GB?d(2023,null,(t/bi.MB).toFixed(2)):t<bi.TB?d(2024,null,(t/bi.GB).toFixed(2)):d(2025,null,(t/bi.TB).toFixed(2))}},YP=class extends ne{constructor(e,t="",i="",r=!0,s){super(),this.j=this.B(new P),this.onDidChange=this.j.event,this.z=!0,this.m=e,this.n=t,this.w=i,this.z=r,this.D=s}get id(){return this.m}get label(){return this.n}set label(e){this.F(e)}F(e){this.n!==e&&(this.n=e,this.j.fire({label:e}))}get tooltip(){return this.u||""}set tooltip(e){this.G(e)}G(e){this.u!==e&&(this.u=e,this.j.fire({tooltip:e}))}get class(){return this.w}set class(e){this.H(e)}H(e){this.w!==e&&(this.w=e,this.j.fire({class:e}))}get enabled(){return this.z}set enabled(e){this.I(e)}I(e){this.z!==e&&(this.z=e,this.j.fire({enabled:e}))}get checked(){return this.C}set checked(e){this.J(e)}J(e){this.C!==e&&(this.C=e,this.j.fire({checked:e}))}async run(e,t){this.D&&await this.D(e)}},DH=class Rb{constructor(){this.id=Rb.ID,this.label="",this.tooltip="",this.class="separator",this.enabled=!1,this.checked=!1}static join(...t){let i=[];for(const r of t)r.length&&(i.length?i=[...i,new Rb,...r]:i=r);return i}static{this.ID="vs.actions.separator"}async run(){}},PH=class eC extends YP{static{this.ID="vs.actions.empty"}constructor(){super(eC.ID,d(44,null),void 0,!1)}},QP={EditorPane:"workbench.contributions.editors",EditorFactory:"workbench.contributions.editor.inputFactories"},XP={id:"default",displayName:d(4296,null),providerDisplayName:d(4297,null)},H6;(function(e){e[e.PROGRAMMATIC=1]="PROGRAMMATIC",e[e.USER=2]="USER",e[e.EDIT=3]="EDIT",e[e.NAVIGATION=4]="NAVIGATION",e[e.JUMP=5]="JUMP"})(H6||(H6={}));var z6;(function(e){e[e.IDENTICAL=1]="IDENTICAL",e[e.SIMILAR=2]="SIMILAR",e[e.DIFFERENT=3]="DIFFERENT"})(z6||(z6={}));function yh(e){if(Ps(e))return!1;const t=e;return t?.original!==void 0&&t.modified!==void 0}function _6(e){if(Ps(e))return!1;const t=e;return!t||t.resources&&!Array.isArray(t.resources)?!1:!!t.resources||!!t.multiDiffSource}function Dm(e){if(Ps(e)||yh(e))return!1;const t=e;return t?.primary!==void 0&&t.secondary!==void 0}function xh(e){if(Ps(e))return!1;const t=e;return y.isUri(t?.base?.resource)&&y.isUri(t?.input1?.resource)&&y.isUri(t?.input2?.resource)&&y.isUri(t?.result?.resource)}var W6;(function(e){e[e.SHORT=0]="SHORT",e[e.MEDIUM=1]="MEDIUM",e[e.LONG=2]="LONG"})(W6||(W6={}));var V6;(function(e){e[e.EXPLICIT=1]="EXPLICIT",e[e.AUTO=2]="AUTO",e[e.FOCUS_CHANGE=3]="FOCUS_CHANGE",e[e.WINDOW_CHANGE=4]="WINDOW_CHANGE"})(V6||(V6={}));var KP=class{constructor(){this.a=new Map}registerSource(e,t){let i=this.a.get(e);return i||(i={source:e,label:t},this.a.set(e,i)),i.source}getSourceLabel(e){return this.a.get(e)?.label??e}},AH=new KP,q6;(function(e){e[e.None=0]="None",e[e.Readonly=2]="Readonly",e[e.Untitled=4]="Untitled",e[e.Singleton=8]="Singleton",e[e.RequiresTrust=16]="RequiresTrust",e[e.CanSplitInGroup=32]="CanSplitInGroup",e[e.ForceDescription=64]="ForceDescription",e[e.CanDropIntoEditor=128]="CanDropIntoEditor",e[e.MultipleEditors=256]="MultipleEditors",e[e.Scratchpad=512]="Scratchpad"})(q6||(q6={}));var eA=class extends ne{};function Ps(e){return e instanceof eA}function tA(e){const t=e;return y.isUri(t?.preferredResource)}function iA(e){const t=e;return Ps(t?.primary)&&Ps(t?.secondary)}function rA(e){const t=e;return Ps(t?.modified)&&Ps(t?.original)}var G6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.REPLACE=1]="REPLACE",e[e.MOVE=2]="MOVE",e[e.UNPIN=3]="UNPIN"})(G6||(G6={}));var J6;(function(e){e[e.GROUP_ACTIVE=0]="GROUP_ACTIVE",e[e.GROUP_INDEX=1]="GROUP_INDEX",e[e.GROUP_LABEL=2]="GROUP_LABEL",e[e.GROUP_LOCKED=3]="GROUP_LOCKED",e[e.EDITORS_SELECTION=4]="EDITORS_SELECTION",e[e.EDITOR_OPEN=5]="EDITOR_OPEN",e[e.EDITOR_CLOSE=6]="EDITOR_CLOSE",e[e.EDITOR_MOVE=7]="EDITOR_MOVE",e[e.EDITOR_ACTIVE=8]="EDITOR_ACTIVE",e[e.EDITOR_LABEL=9]="EDITOR_LABEL",e[e.EDITOR_CAPABILITIES=10]="EDITOR_CAPABILITIES",e[e.EDITOR_PIN=11]="EDITOR_PIN",e[e.EDITOR_TRANSIENT=12]="EDITOR_TRANSIENT",e[e.EDITOR_STICKY=13]="EDITOR_STICKY",e[e.EDITOR_DIRTY=14]="EDITOR_DIRTY",e[e.EDITOR_WILL_DISPOSE=15]="EDITOR_WILL_DISPOSE"})(J6||(J6={}));var As;(function(e){e[e.PRIMARY=1]="PRIMARY",e[e.SECONDARY=2]="SECONDARY",e[e.BOTH=3]="BOTH",e[e.ANY=4]="ANY"})(As||(As={}));var sA=class{getOriginalUri(e,t){if(!e)return;if(xh(e))return Y6.getOriginalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===As.BOTH)return{primary:this.getOriginalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getOriginalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===As.ANY)return this.getOriginalUri(r,{filterByScheme:t.filterByScheme})??this.getOriginalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===As.PRIMARY?r:s}}if(yh(e)||_6(e)||Dm(e)||xh(e))return;const i=tA(e)?e.preferredResource:e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}a(e){return iA(e)||Dm(e)?{primary:e.primary,secondary:e.secondary}:rA(e)||yh(e)?{primary:e.modified,secondary:e.original}:{primary:void 0,secondary:void 0}}getCanonicalUri(e,t){if(!e)return;if(xh(e))return Y6.getCanonicalUri(e.result,t);if(t?.supportSideBySide){const{primary:r,secondary:s}=this.a(e);if(r&&s){if(t?.supportSideBySide===As.BOTH)return{primary:this.getCanonicalUri(r,{filterByScheme:t.filterByScheme}),secondary:this.getCanonicalUri(s,{filterByScheme:t.filterByScheme})};if(t?.supportSideBySide===As.ANY)return this.getCanonicalUri(r,{filterByScheme:t.filterByScheme})??this.getCanonicalUri(s,{filterByScheme:t.filterByScheme});e=t.supportSideBySide===As.PRIMARY?r:s}}if(yh(e)||_6(e)||Dm(e)||xh(e))return;const i=e.resource;return!i||!t||!t.filterByScheme?i:this.b(i,t.filterByScheme)}b(e,t){if(Array.isArray(t)){if(t.some(i=>e.scheme===i))return e}else if(t===e.scheme)return e}},Z6;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.KEYBOARD=1]="KEYBOARD",e[e.MOUSE=2]="MOUSE"})(Z6||(Z6={}));var Y6=new sA,Q6;(function(e){e[e.LEFT=0]="LEFT",e[e.RIGHT=1]="RIGHT"})(Q6||(Q6={}));var nA=class{constructor(){this.c=new Map,this.d=new Map}start(e){const t=this.a=e.get(fc);for(const[i,r]of this.c)this.e(i,r,t);this.c.clear()}e(e,t,i){const r=i.createInstance(t);this.d.set(e,r)}registerFileEditorFactory(e){if(this.b)throw new Error("Can only register one file editor factory.");this.b=e}getFileEditorFactory(){return wo(this.b)}registerEditorSerializer(e,t){if(this.c.has(e)||this.d.has(e))throw new Error(`A editor serializer with type ID '${e}' was already registered.`);return this.a?this.e(e,t,this.a):this.c.set(e,t),oe(()=>{this.c.delete(e),this.d.delete(e)})}getEditorSerializer(e){return this.d.get(typeof e=="string"?e:e.typeId)}};jt.add(QP.EditorFactory,new nA);var X6;(function(e){e[e.MOST_RECENTLY_ACTIVE=0]="MOST_RECENTLY_ACTIVE",e[e.SEQUENTIAL=1]="SEQUENTIAL"})(X6||(X6={}));var Ts=class{constructor(e,t,i){this.owner=e,this.debugNameSource=t,this.referenceFn=i}getDebugName(e){return oA(e,this)}},K6=new Map,Pm=new WeakMap;function oA(e,t){const i=Pm.get(e);if(i)return i;const r=aA(e,t);if(r){let s=K6.get(r)??0;s++,K6.set(r,s);const n=s===1?r:`${r}#${s}`;return Pm.set(e,n),n}}function aA(e,t){const i=Pm.get(e);if(i)return i;const r=t.owner?lA(t.owner)+".":"";let s;const n=t.debugNameSource;if(n!==void 0)if(typeof n=="function"){if(s=n(),s!==void 0)return r+s}else return r+n;const o=t.referenceFn;if(o!==void 0&&(s=Am(o),s!==void 0))return r+s;if(t.owner!==void 0){const a=cA(t.owner,e);if(a!==void 0)return r+a}}function cA(e,t){for(const i in e)if(e[i]===t)return i}var e7=new Map,t7=new WeakMap;function lA(e){const t=t7.get(e);if(t)return t;const i=i7(e)??"Object";let r=e7.get(i)??0;r++,e7.set(i,r);const s=r===1?i:`${i}#${r}`;return t7.set(e,s),s}function i7(e){const t=e.constructor;if(t)return t.name==="Object"?void 0:t.name}function Am(e){const t=e.toString(),r=/\/\*\*\s*@description\s*([^*]*)\*\//.exec(t);return(r?r[1]:void 0)?.trim()}var Dc=(e,t)=>e===t;function Tm(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!==t.length)return!1;for(let i=0;i<e.length;i++)if(!Tm(e[i],t[i]))return!1;return!0}if(e&&typeof e=="object"&&t&&typeof t=="object"&&Object.getPrototypeOf(e)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){const i=e,r=t,s=Object.keys(i),n=Object.keys(r),o=new Set(n);if(s.length!==n.length)return!1;for(const a of s)if(!o.has(a)||!Tm(i[a],r[a]))return!1;return!0}return!1}function r7(e){const t=new Error("BugIndicatingErrorRecovery: "+e);Gt(t),console.error("recovered from an error that indicates a bug",t)}var In;function Rm(e){In?In instanceof s7?In.loggers.push(e):In=new s7([In,e]):In=e}function Vt(){return In}var Lm=void 0;function uA(e){Lm=e}function hA(e){Lm&&Lm(e)}var s7=class{constructor(e){this.loggers=e}handleObservableCreated(e){for(const t of this.loggers)t.handleObservableCreated(e)}handleOnListenerCountChanged(e,t){for(const i of this.loggers)i.handleOnListenerCountChanged(e,t)}handleObservableUpdated(e,t){for(const i of this.loggers)i.handleObservableUpdated(e,t)}handleAutorunCreated(e){for(const t of this.loggers)t.handleAutorunCreated(e)}handleAutorunDisposed(e){for(const t of this.loggers)t.handleAutorunDisposed(e)}handleAutorunDependencyChanged(e,t,i){for(const r of this.loggers)r.handleAutorunDependencyChanged(e,t,i)}handleAutorunStarted(e){for(const t of this.loggers)t.handleAutorunStarted(e)}handleAutorunFinished(e){for(const t of this.loggers)t.handleAutorunFinished(e)}handleDerivedDependencyChanged(e,t,i){for(const r of this.loggers)r.handleDerivedDependencyChanged(e,t,i)}handleDerivedCleared(e){for(const t of this.loggers)t.handleDerivedCleared(e)}handleBeginTransaction(e){for(const t of this.loggers)t.handleBeginTransaction(e)}handleEndTransaction(e){for(const t of this.loggers)t.handleEndTransaction(e)}};function Pc(e,t){const i=new n7(e,t);try{e(i)}finally{i.finish()}}function dA(e,t,i){e?t(e):Pc(t,i)}var n7=class{constructor(e,t){this._fn=e,this.b=t,this.a=[],Vt()?.handleBeginTransaction(this)}getDebugName(){return this.b?this.b():Am(this._fn)}updateObserver(e,t){if(!this.a){r7("Transaction already finished!"),Pc(i=>{i.updateObserver(e,t)});return}this.a.push({observer:e,observable:t}),e.beginUpdate(t)}finish(){const e=this.a;if(!e){r7("transaction.finish() has already been called!");return}for(let t=0;t<e.length;t++){const{observer:i,observable:r}=e[t];i.endUpdate(r)}this.a=null,Vt()?.handleEndTransaction(this)}debugGetUpdatingObservers(){return this.a}},Nm;function fA(e){Nm=e}var o7;function pA(e){o7=e}var a7;function gA(e){a7=e}var mA=class{get TChange(){return null}reportChanges(){this.get()}read(e){return e?e.readObservable(this):this.get()}map(e,t){const i=t===void 0?void 0:e,r=t===void 0?e:t;return Nm({owner:i,debugName:()=>{const s=Am(r);if(s!==void 0)return s;const o=/^\s*\(?\s*([a-zA-Z_$][a-zA-Z_$0-9]*)\s*\)?\s*=>\s*\1(?:\??)\.([a-zA-Z_$][a-zA-Z_$0-9]*)\s*$/.exec(r.toString());if(o)return`${this.debugName}.${o[2]}`;if(!i)return`${this.debugName} (mapped)`},debugReferenceFn:r},s=>r(this.read(s),s))}flatten(){return Nm({owner:void 0,debugName:()=>`${this.debugName} (flattened)`},e=>this.read(e).read(e))}recomputeInitiallyAndOnChange(e,t){return e.add(o7(this,t)),this}keepObserved(e){return e.add(a7(this)),this}get b(){return this.get()}},Eh=class extends mA{constructor(){super(),this.f=new Set,Vt()?.handleObservableCreated(this)}addObserver(e){const t=this.f.size;this.f.add(e),t===0&&this.g(),t!==this.f.size&&Vt()?.handleOnListenerCountChanged(this,this.f.size)}removeObserver(e){const t=this.f.delete(e);t&&this.f.size===0&&this.h(),t&&Vt()?.handleOnListenerCountChanged(this,this.f.size)}g(){}h(){}log(){const e=!!Vt();return hA(this),e||Vt()?.handleObservableCreated(this),this}debugGetObservers(){return this.f}};function Sh(e,t){let i;return typeof e=="string"?i=new Ts(void 0,e,void 0):i=new Ts(e,void 0,void 0),new Mm(i,t,Dc)}var Mm=class extends Eh{get debugName(){return this.c.getDebugName(this)??"ObservableValue"}constructor(e,t,i){super(),this.c=e,this.d=i,this.a=t,Vt()?.handleObservableUpdated(this,{hadValue:!1,newValue:t,change:void 0,didChange:!0,oldValue:void 0})}get(){return this.a}set(e,t,i){if(i===void 0&&this.d(this.a,e))return;let r;t||(t=r=new n7(()=>{},()=>`Setting ${this.debugName}`));try{const s=this.a;this.i(e),Vt()?.handleObservableUpdated(this,{oldValue:s,newValue:e,change:i,didChange:!0,hadValue:!0});for(const n of this.f)t.updateObserver(n,this),n.handleChange(this,i)}finally{r&&r.finish()}}toString(){return`${this.debugName}: ${this.a}`}i(e){this.a=e}debugGetState(){return{value:this.a}}debugSetValue(e){this.a=e}},c7;(function(e){e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(c7||(c7={}));var l7=class{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i){this._debugNameData=e,this._runFn=t,this.j=i,this.a=2,this.b=0,this.c=!1,this.f=new Set,this.g=new Set,this.i=!1,this.n=void 0,this.p=void 0,this.h=this.j?.createChangeSummary(void 0),Vt()?.handleAutorunCreated(this),this.k(),bo(this)}dispose(){if(!this.c){this.c=!0;for(const e of this.f)e.removeObserver(this);this.f.clear(),this.n!==void 0&&this.n.dispose(),this.p!==void 0&&this.p.dispose(),Vt()?.handleAutorunDisposed(this),yo(this)}}k(){const e=this.g;this.g=this.f,this.f=e,this.a=3;try{if(!this.c){Vt()?.handleAutorunStarted(this);const t=this.h,i=this.p;i!==void 0&&(this.p=void 0);try{this.i=!0,this.j&&(this.j.beforeUpdate?.(this,t),this.h=this.j.createChangeSummary(t)),this.n!==void 0&&(this.n.dispose(),this.n=void 0),this._runFn(this,t)}catch(r){Au(r)}finally{this.i=!1,i!==void 0&&i.dispose()}}}finally{this.c||Vt()?.handleAutorunFinished(this);for(const t of this.g)t.removeObserver(this);this.g.clear()}}toString(){return`Autorun<${this.debugName}>`}beginUpdate(e){this.a===3&&(this.a=1),this.b++}endUpdate(e){try{if(this.b===1)do{if(this.a===1){this.a=3;for(const t of this.f)if(t.reportChanges(),this.a===2)break}this.a!==3&&this.k()}while(this.a!==3)}finally{this.b--}ly(()=>this.b>=0)}handlePossibleChange(e){this.a===3&&this.l(e)&&(this.a=1)}handleChange(e,t){if(this.l(e)){Vt()?.handleAutorunDependencyChanged(this,e,t);try{(this.j?this.j.handleChange({changedObservable:e,change:t,didChange:r=>r===e},this.h):!0)&&(this.a=2)}catch(i){Au(i)}}}l(e){return this.f.has(e)&&!this.g.has(e)}m(){if(!this.i)throw new ui("The reader object cannot be used outside its compute function!")}readObservable(e){if(this.m(),this.c)return e.get();e.addObserver(this);const t=e.get();return this.f.add(e),this.g.delete(e),t}get store(){if(this.m(),this.c)throw new ui("Cannot access store after dispose");return this.n===void 0&&(this.n=new ue),this.n}get delayedStore(){if(this.m(),this.c)throw new ui("Cannot access store after dispose");return this.p===void 0&&(this.p=new ue),this.p}debugGetState(){return{isRunning:this.i,updateCount:this.b,dependencies:this.f,state:this.a}}debugRerun(){this.i?this.a=2:this.k()}};function u7(e){return new l7(new Ts(void 0,void 0,e),e,void 0)}var h7;(function(e){e[e.initial=0]="initial",e[e.dependenciesMightHaveChanged=1]="dependenciesMightHaveChanged",e[e.stale=2]="stale",e[e.upToDate=3]="upToDate"})(h7||(h7={}));var rr=class extends Eh{get debugName(){return this._debugNameData.getDebugName(this)??"(anonymous)"}constructor(e,t,i,r=void 0,s){super(),this._debugNameData=e,this._computeFn=t,this.w=i,this.x=r,this.y=s,this.a=0,this.c=void 0,this.i=0,this.j=new Set,this.k=new Set,this.l=void 0,this.m=!1,this.n=!1,this.p=!1,this.q=!1,this.s=!1,this.t=void 0,this.u=void 0,this.v=null,this.l=this.w?.createChangeSummary(void 0)}h(){this.a=0,this.c=void 0,Vt()?.handleDerivedCleared(this);for(const e of this.j)e.removeObserver(this);this.j.clear(),this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.u!==void 0&&(this.u.dispose(),this.u=void 0),this.x?.()}get(){if(this.n,this.f.size===0){let t;try{this.s=!0;let i;this.w&&(i=this.w.createChangeSummary(void 0),this.w.beforeUpdate?.(this,i)),t=this._computeFn(this,i)}finally{this.s=!1}return this.h(),t}else{do{if(this.a===1){for(const t of this.j)if(t.reportChanges(),this.a===2)break}this.a===1&&(this.a=3),this.a!==3&&this.A()}while(this.a!==3);return this.c}}A(){let e=!1;this.n=!0,this.p=!1;const t=this.k;this.k=this.j,this.j=t;try{const i=this.l;this.s=!0,this.w&&(this.q=!0,this.w.beforeUpdate?.(this,i),this.q=!1,this.l=this.w?.createChangeSummary(i));const r=this.a!==0,s=this.c;this.a=3;const n=this.u;n!==void 0&&(this.u=void 0);try{this.t!==void 0&&(this.t.dispose(),this.t=void 0),this.c=this._computeFn(this,i)}finally{this.s=!1;for(const o of this.k)o.removeObserver(this);this.k.clear(),n!==void 0&&n.dispose()}e=this.p||r&&!this.y(s,this.c),Vt()?.handleObservableUpdated(this,{oldValue:s,newValue:this.c,change:void 0,didChange:e,hadValue:r})}catch(i){Au(i)}if(this.n=!1,!this.p&&e)for(const i of this.f)i.handleChange(this,void 0);else this.p=!1}toString(){return`LazyDerived<${this.debugName}>`}beginUpdate(e){if(this.m)throw new ui("Cyclic deriveds are not supported yet!");this.i++,this.m=!0;try{const t=this.i===1;if(this.a===3&&(this.a=1,!t))for(const i of this.f)i.handlePossibleChange(this);if(t)for(const i of this.f)i.beginUpdate(this)}finally{this.m=!1}}endUpdate(e){if(this.i--,this.i===0){const t=[...this.f];for(const i of t)i.endUpdate(this);if(this.v){const i=[...this.v];this.v=null;for(const r of i)r.endUpdate(this)}}ly(()=>this.i>=0)}handlePossibleChange(e){if(this.a===3&&this.j.has(e)&&!this.k.has(e)){this.a=1;for(const t of this.f)t.handlePossibleChange(this)}}handleChange(e,t){if(this.j.has(e)&&!this.k.has(e)||this.q){Vt()?.handleDerivedDependencyChanged(this,e,t);let i=!1;try{i=this.w?this.w.handleChange({changedObservable:e,change:t,didChange:s=>s===e},this.l):!0}catch(s){Au(s)}const r=this.a===3;if(i&&(this.a===1||r)&&(this.a=2,r))for(const s of this.f)s.handlePossibleChange(this)}}B(){if(!this.s)throw new ui("The reader object cannot be used outside its compute function!")}readObservable(e){this.B(),e.addObserver(this);const t=e.get();return this.j.add(e),this.k.delete(e),t}reportChange(e){this.B(),this.p=!0;for(const t of this.f)t.handleChange(this,e)}get store(){return this.B(),this.t===void 0&&(this.t=new ue),this.t}get delayedStore(){return this.B(),this.u===void 0&&(this.u=new ue),this.u}addObserver(e){const t=!this.f.has(e)&&this.i>0;super.addObserver(e),t&&(this.v&&this.v.has(e)?this.v.delete(e):e.beginUpdate(this))}removeObserver(e){this.f.has(e)&&this.i>0&&(this.v||(this.v=new Set),this.v.add(e)),super.removeObserver(e)}debugGetState(){return{state:this.a,updateCount:this.i,isComputing:this.n,dependencies:this.j,value:this.c}}debugSetValue(e){this.c=e}setValue(e,t,i){this.c=e;const r=this.f;t.updateObserver(this,this);for(const s of r)s.handleChange(this,i)}};function vA(e,t){return t!==void 0?new rr(new Ts(e,void 0,t),t,void 0,void 0,Dc):new rr(new Ts(void 0,void 0,e),e,void 0,void 0,Dc)}function d7(e,t){return new rr(new Ts(e.owner,e.debugName,e.debugReferenceFn),t,void 0,e.onLastObserverRemoved,e.equalsFn??Dc)}fA(d7);var wA=class tC{static fromFn(t){return new tC(t())}constructor(t){this.a=Sh(this,void 0),this.promiseResult=this.a,this.resolvedValue=vA(this,i=>{const r=this.promiseResult.read(i);if(r)return r.getDataOrThrow()}),this.promise=t.then(i=>(Pc(r=>{this.a.set(new f7(i,void 0),r)}),i),i=>{throw Pc(r=>{this.a.set(new f7(void 0,i),r)}),i})}},f7=class{constructor(e,t){this.data=e,this.error=t}getDataOrThrow(){if(this.error)throw this.error;return this.data}};function Fm(...e){let t,i,r;return e.length===3?[t,i,r]=e:[i,r]=e,new Dn(new Ts(t,void 0,r),i,r,()=>Dn.globalTransaction,Dc)}var Dn=class extends Eh{constructor(e,t,i,r,s){super(),this.e=e,this.i=t,this._getValue=i,this.j=r,this.k=s,this.c=!1,this.n=n=>{const o=this._getValue(n),a=this.a,c=!this.c||!this.k(a,o);let l=!1;c&&(this.a=o,this.c&&(l=!0,dA(this.j(),u=>{Vt()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.c});for(const h of this.f)u.updateObserver(h,this),h.handleChange(this,void 0)},()=>{const u=this.l();return"Event fired"+(u?`: ${u}`:"")})),this.c=!0),l||Vt()?.handleObservableUpdated(this,{oldValue:a,newValue:o,change:void 0,didChange:c,hadValue:this.c})}}l(){return this.e.getDebugName(this)}get debugName(){const e=this.l();return"From Event"+(e?`: ${e}`:"")}g(){this.d=this.i(this.n)}h(){this.d.dispose(),this.d=void 0,this.c=!1,this.a=void 0}get(){return this.d?(this.c||this.n(void 0),this.a):this._getValue(void 0)}debugSetValue(e){this.a=e}};(function(e){e.Observer=Dn;function t(i,r){let s=!1;Dn.globalTransaction===void 0&&(Dn.globalTransaction=i,s=!0);try{r()}finally{s&&(Dn.globalTransaction=void 0)}}e.batchEventsGlobally=t})(Fm||(Fm={}));function bA(e){const t=new p7(!1,void 0);return e.addObserver(t),oe(()=>{e.removeObserver(t)})}gA(bA);function yA(e,t){const i=new p7(!0,t);e.addObserver(i);try{i.beginUpdate(e)}finally{i.endUpdate(e)}return oe(()=>{e.removeObserver(i)})}pA(yA);var p7=class{constructor(e,t){this.b=e,this.c=t,this.a=0}beginUpdate(e){this.a++}endUpdate(e){this.a===1&&this.b&&(this.c?this.c(e.get()):e.reportChanges()),this.a--}handlePossibleChange(e){}handleChange(e,t){}};function xA(e,t){return new EA(typeof e=="string"?e:new Ts(e,void 0,void 0),t)}var EA=class extends Eh{constructor(e,t){super(),this.c=t,this.e=()=>{Pc(i=>{for(const r of this.f)i.updateObserver(r,this),r.handleChange(this,void 0)},()=>this.debugName)},this.debugName=typeof e=="string"?e:e.getDebugName(this)??"Observable Signal From Event"}g(){this.a=this.c(this.e)}h(){this.a.dispose(),this.a=void 0}get(){}},kh;function SA(e){kh||(kh=new g7,Rm(kh)),kh.addFilteredObj(e)}var g7=class{constructor(){this.a=0,this.f=new WeakMap}addFilteredObj(e){this.b||(this.b=new Set),this.b.add(e)}c(e){return this.b?.has(e)??!0}d(e){return kA([Uo(IA("|  ",this.a)),e])}e(e){return e.hadValue?e.didChange?[Uo(" "),Gi(Zr(e.oldValue,70),{color:"red",strikeThrough:!0}),Uo(" "),Gi(Zr(e.newValue,60),{color:"green"})]:[Uo(" (unchanged)")]:[Uo(" "),Gi(Zr(e.newValue,60),{color:"green"}),Uo(" (initial)")]}handleObservableCreated(e){if(e instanceof rr){const t=e;if(this.f.set(t,new Set),!1){const r=[];t.__debugUpdating=r;const s=t.beginUpdate;t.beginUpdate=o=>(r.push(o),s.apply(t,[o]));const n=t.endUpdate;t.endUpdate=o=>{const a=r.indexOf(o);return a===-1&&console.error("endUpdate called without beginUpdate",t.debugName,o.debugName),r.splice(a,1),n.apply(t,[o])}}}}handleOnListenerCountChanged(e,t){}handleObservableUpdated(e,t){if(this.c(e)){if(e instanceof rr){this._handleDerivedRecomputed(e,t);return}console.log(...this.d([jo("observable value changed"),Gi(e.debugName,{color:"BlueViolet"}),...this.e(t)]))}}formatChanges(e){if(e.size!==0)return Gi(" (changed deps: "+[...e].map(t=>t.debugName).join(", ")+")",{color:"gray"})}handleDerivedDependencyChanged(e,t,i){this.c(e)&&this.f.get(e)?.add(t)}_handleDerivedRecomputed(e,t){if(!this.c(e))return;const i=this.f.get(e);i&&(console.log(...this.d([jo("derived recomputed"),Gi(e.debugName,{color:"BlueViolet"}),...this.e(t),this.formatChanges(i),{data:[{fn:e._debugNameData.referenceFn??e._computeFn}]}])),i.clear())}handleDerivedCleared(e){this.c(e)&&console.log(...this.d([jo("derived cleared"),Gi(e.debugName,{color:"BlueViolet"})]))}handleFromEventObservableTriggered(e,t){this.c(e)&&console.log(...this.d([jo("observable from event triggered"),Gi(e.debugName,{color:"BlueViolet"}),...this.e(t),{data:[{fn:e._getValue}]}]))}handleAutorunCreated(e){this.c(e)&&this.f.set(e,new Set)}handleAutorunDisposed(e){}handleAutorunDependencyChanged(e,t,i){this.c(e)&&this.f.get(e).add(t)}handleAutorunStarted(e){const t=this.f.get(e);t&&(this.c(e)&&console.log(...this.d([jo("autorun"),Gi(e.debugName,{color:"BlueViolet"}),this.formatChanges(t),{data:[{fn:e._debugNameData.referenceFn??e._runFn}]}])),t.clear(),this.a++)}handleAutorunFinished(e){this.a--}handleBeginTransaction(e){let t=e.getDebugName();t===void 0&&(t=""),this.c(e)&&console.log(...this.d([jo("transaction"),Gi(t,{color:"BlueViolet"}),{data:[{fn:e._fn}]}])),this.a++}handleEndTransaction(){this.a--}};function kA(e){const t=new Array,i=[];let r="";function s(o){if("length"in o)for(const a of o)a&&s(a);else"text"in o?(r+=`%c${o.text}`,t.push(o.style),o.data&&i.push(...o.data)):"data"in o&&i.push(...o.data)}s(e);const n=[r,...t];return n.push(...i),n}function Uo(e){return Gi(e,{color:"black"})}function jo(e){return Gi(DA(`${e}: `,10),{color:"black",bold:!0})}function Gi(e,t={color:"black"}){function i(s){return Object.entries(s).reduce((n,[o,a])=>`${n}${o}:${a};`,"")}const r={color:t.color};return t.strikeThrough&&(r["text-decoration"]="line-through"),t.bold&&(r["font-weight"]="bold"),{text:e,style:i(r)}}function Zr(e,t){switch(typeof e){case"number":return""+e;case"string":return e.length+2<=t?`"${e}"`:`"${e.substr(0,t-7)}"+...`;case"boolean":return e?"true":"false";case"undefined":return"undefined";case"object":return e===null?"null":Array.isArray(e)?$A(e,t):CA(e,t);case"symbol":return e.toString();case"function":return`[[Function${e.name?" "+e.name:""}]]`;default:return""+e}}function $A(e,t){let i="[ ",r=!0;for(const s of e){if(r||(i+=", "),i.length-5>t){i+="...";break}r=!1,i+=`${Zr(s,t-i.length)}`}return i+=" ]",i}function CA(e,t){if(typeof e.toString=="function"&&e.toString!==Object.prototype.toString){const n=e.toString();return n.length<=t?n:n.substring(0,t-3)+"..."}const i=i7(e);let r=i?i+"(":"{ ",s=!0;for(const[n,o]of Object.entries(e)){if(s||(r+=", "),r.length-5>t){r+="...";break}s=!1,r+=`${n}: ${Zr(o,t-r.length)}`}return r+=i?")":" }",r}function IA(e,t){let i="";for(let r=1;r<=t;r++)i+=e;return i}function DA(e,t){for(;e.length<t;)e+=" ";return e}var PA=class Lb{static createHost(t,i){return new Lb(t,i)}static createClient(t,i){return new Lb(t,i)}constructor(t,i){this.b=t,this.c=i,this.a=this.b({handleNotification:n=>{const o=n,a=this.c().notifications[o[0]];if(!a)throw new Error(`Unknown notification "${o[0]}"!`);a(...o[1])},handleRequest:n=>{const o=n;try{return{type:"result",value:this.c().requests[o[0]](...o[1])}}catch(a){return{type:"error",value:a}}}});const r=new Proxy({},{get:(n,o)=>async(...a)=>{const c=await this.a.sendRequest([o,a]);if(c.type==="error")throw c.value;return c.value}}),s=new Proxy({},{get:(n,o)=>(...a)=>{this.a.sendNotification([o,a])}});this.api={notifications:s,requests:r}}};function AA(e,t){const i=globalThis;let r=[],s;const{channel:n,handler:o}=TA({sendNotification:c=>{s?s.sendNotification(c):r.push(c)}});let a;return(i.$$debugValueEditor_debugChannels??(i.$$debugValueEditor_debugChannels={}))[e]=c=>{a=t(),s=c;for(const l of r)c.sendNotification(l);return r=[],o},PA.createClient(n,()=>{if(!a)throw new Error("Not supported");return a})}function TA(e){let t;return{channel:r=>(t=r,{sendNotification:s=>{e.sendNotification(s)},sendRequest:s=>{throw new Error("not supported")}}),handler:{handleRequest:r=>r.type==="notification"?t?.handleNotification(r.data):t?.handleRequest(r.data)}}}function m7(e,t){const i=e.split(`
`);let r=-1;for(const s of i.slice(1)){if(r++,t&&t.test(s))continue;const n=RA(s);if(n)return n}}function RA(e){const t=e.match(/\((.*):(\d+):(\d+)\)/);if(t)return{fileName:t[1],line:parseInt(t[2]),column:parseInt(t[3]),id:e};const i=e.match(/at ([^\(\)]*):(\d+):(\d+)/);if(i)return{fileName:i[1],line:parseInt(i[2]),column:parseInt(i[3]),id:e}}var LA=class{constructor(){this.a=void 0}throttle(e,t){this.a===void 0&&(this.a=setTimeout(()=>{this.a=void 0,e()},t))}dispose(){this.a!==void 0&&clearTimeout(this.a)}};function v7(e,t){for(const i in t)e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?v7(e[i],t[i]):e[i]=t[i]}function w7(e,t){for(const i in t)t[i]===null?delete e[i]:e[i]&&typeof e[i]=="object"&&t[i]&&typeof t[i]=="object"?w7(e[i],t[i]):e[i]=t[i]}var NA=class xu{static{this.a=void 0}static getInstance(){return xu.a===void 0&&(xu.a=new xu),xu.a}j(){const t=[],i=[...this.h];if(i.length===0)return;const r=i.flatMap(n=>n.debugGetUpdatingObservers()??[]).map(n=>n.observer),s=new Set;for(;r.length>0;){const n=r.shift();if(s.has(n))continue;s.add(n);const o=this.n(n,a=>{s.has(a)||r.push(a)});o&&t.push(o)}return{names:i.map(n=>n.getDebugName()??"tx"),affected:t}}k(t){const i=this.f.get(t);if(!i){Gt(new ui("No info found"));return}return i}m(t){const i=this.f.get(t);if(!i){Gt(new ui("No info found"));return}return i}n(t,i){if(t instanceof rr){const r=[...t.debugGetObservers()];for(const c of r)i(c);const s=this.k(t);if(!s)return;const n=t.debugGetState(),o={name:t.debugName,instanceId:s.instanceId,updateCount:n.updateCount},a=[...s.changedObservables].map(c=>this.f.get(c)?.instanceId).filter(Mi);if(n.isComputing)return{...o,type:"observable/derived",state:"updating",changedDependencies:a,initialComputation:!1};switch(n.state){case 0:return{...o,type:"observable/derived",state:"noValue"};case 3:return{...o,type:"observable/derived",state:"upToDate"};case 2:return{...o,type:"observable/derived",state:"stale",changedDependencies:a};case 1:return{...o,type:"observable/derived",state:"possiblyStale"}}}else if(t instanceof l7){const r=this.m(t);if(!r)return;const s={name:t.debugName,instanceId:r.instanceId,updateCount:r.updateCount},n=[...r.changedObservables].map(o=>this.f.get(o).instanceId);if(t.debugGetState().isRunning)return{...s,type:"autorun",state:"updating",changedDependencies:n};switch(t.debugGetState().state){case 3:return{...s,type:"autorun",state:"upToDate"};case 2:return{...s,type:"autorun",state:"stale",changedDependencies:n};case 1:return{...s,type:"autorun",state:"possiblyStale"}}}}p(t){const i=this.k(t);if(i)return{name:t.debugName,instanceId:i.instanceId}}q(t){if(t instanceof rr)return{name:t.toString(),instanceId:this.k(t)?.instanceId};const i=this.m(t);if(i)return{name:t.toString(),instanceId:i.instanceId}}constructor(){this.b=0,this.c=0,this.e=new Map,this.f=new WeakMap,this.g=new Map,this.h=new Set,this.i=AA("observableDevTools",()=>({notifications:{setDeclarationIdFilter:t=>{},logObservableValue:t=>{console.log("logObservableValue",t)},flushUpdates:()=>{this.w()},resetUpdates:()=>{this.r=null,this.i.api.notifications.handleChange(this.u,!0)}},requests:{getDeclarations:()=>{const t={};for(const i of this.e.values())t[i.id]=i;return{decls:t}},getSummarizedInstances:()=>null,getObservableValueInfo:t=>({observers:[...this.g.get(t).debugGetObservers()].map(r=>this.q(r)).filter(Mi)}),getDerivedInfo:t=>{const i=this.g.get(t);return{dependencies:[...i.debugGetState().dependencies].map(r=>this.p(r)).filter(Mi),observers:[...i.debugGetObservers()].map(r=>this.q(r)).filter(Mi)}},getAutorunInfo:t=>({dependencies:[...this.g.get(t).debugGetState().dependencies].map(r=>this.p(r)).filter(Mi)}),getTransactionState:()=>this.j(),setValue:(t,i)=>{const r=this.g.get(t);if(r instanceof rr)r.debugSetValue(i);else if(r instanceof Mm)r.debugSetValue(i);else if(r instanceof Dn)r.debugSetValue(i);else throw new ui("Observable is not supported");const s=[...r.debugGetObservers()];for(const n of s)n.beginUpdate(r);for(const n of s)n.handleChange(r,void 0);for(const n of s)n.endUpdate(r)},getValue:t=>{const i=this.g.get(t);if(i instanceof rr)return Zr(i.debugGetState().value,200);if(i instanceof Mm)return Zr(i.debugGetState().value,200)}}})),this.r=null,this.s=new LA,this.u={},this.w=()=>{this.r!==null&&(this.i.api.notifications.handleChange(this.r,!1),this.r=null)}}v(t){w7(this.u,t),this.r===null?this.r=t:v7(this.r,t),this.s.throttle(this.w,10)}x(t){let i=!0,r;const s=Error;for(;;){const o=s.stackTraceLimit;s.stackTraceLimit=i?6:20;const a=new Error().stack;s.stackTraceLimit=o;let c=m7(a,/[/\\]observableInternal[/\\]|\.observe|[/\\]util(s)?\./);if(!i&&!c&&(c=m7(a,/[/\\]observableInternal[/\\]|\.observe/)),c){r=c;break}if(!i){console.error("Could not find location for declaration",new Error().stack),r={fileName:"unknown",line:0,column:0,id:"unknown"};break}i=!1}let n=this.e.get(r.id);return n===void 0&&(n={id:this.b++,type:t,url:r.fileName,line:r.line,column:r.column},this.e.set(r.id,n),this.v({decls:{[n.id]:n}})),n.id}handleObservableCreated(t){const r={declarationId:this.x("observable/value"),instanceId:this.c++,listenerCount:0,lastValue:void 0,updateCount:0,changedObservables:new Set};this.f.set(t,r)}handleOnListenerCountChanged(t,i){const r=this.k(t);if(r){if(r.listenerCount===0&&i>0){const s=t instanceof rr?"observable/derived":"observable/value";this.g.set(r.instanceId,t),this.v({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,formattedValue:r.lastValue,type:s,name:t.debugName}}})}else r.listenerCount>0&&i===0&&(this.v({instances:{[r.instanceId]:null}}),this.g.delete(r.instanceId));r.listenerCount=i}}handleObservableUpdated(t,i){if(t instanceof rr){this._handleDerivedRecomputed(t,i);return}const r=this.k(t);r&&i.didChange&&(r.lastValue=Zr(i.newValue,30),r.listenerCount>0&&this.v({instances:{[r.instanceId]:{formattedValue:r.lastValue}}}))}handleAutorunCreated(t){const r={declarationId:this.x("autorun"),instanceId:this.c++,updateCount:0,changedObservables:new Set};this.f.set(t,r),this.g.set(r.instanceId,t),r&&this.v({instances:{[r.instanceId]:{instanceId:r.instanceId,declarationId:r.declarationId,runCount:0,type:"autorun",name:t.debugName}}})}handleAutorunDisposed(t){const i=this.m(t);i&&(this.v({instances:{[i.instanceId]:null}}),this.f.delete(t),this.g.delete(i.instanceId))}handleAutorunDependencyChanged(t,i,r){const s=this.m(t);s&&s.changedObservables.add(i)}handleAutorunStarted(t){}handleAutorunFinished(t){const i=this.m(t);i&&(i.changedObservables.clear(),i.updateCount++,this.v({instances:{[i.instanceId]:{runCount:i.updateCount}}}))}handleDerivedDependencyChanged(t,i,r){const s=this.k(t);s&&s.changedObservables.add(i)}_handleDerivedRecomputed(t,i){const r=this.k(t);if(!r)return;const s=Zr(i.newValue,30);r.updateCount++,r.changedObservables.clear(),r.lastValue=s,r.listenerCount>0&&this.v({instances:{[r.instanceId]:{formattedValue:s,recomputationCount:r.updateCount}}})}handleDerivedCleared(t){const i=this.k(t);i&&(i.lastValue=void 0,i.changedObservables.clear(),i.listenerCount>0&&this.v({instances:{[i.instanceId]:{formattedValue:void 0}}}))}handleBeginTransaction(t){this.h.add(t)}handleEndTransaction(t){this.h.delete(t)}};uA(SA);var MA=!1;MA&&Rm(new g7),ac&&ac.VSCODE_DEV_DEBUG&&Rm(NA.getInstance());var $r=class zi{static fromTo(t,i){return new zi(t,i)}static addRange(t,i){let r=0;for(;r<i.length&&i[r].endExclusive<t.start;)r++;let s=r;for(;s<i.length&&i[s].start<=t.endExclusive;)s++;if(r===s)i.splice(r,0,t);else{const n=Math.min(t.start,i[r].start),o=Math.max(t.endExclusive,i[s-1].endExclusive);i.splice(r,s-r,new zi(n,o))}}static tryCreate(t,i){if(!(t>i))return new zi(t,i)}static ofLength(t){return new zi(0,t)}static ofStartAndLength(t,i){return new zi(t,t+i)}static emptyAt(t){return new zi(t,t)}constructor(t,i){if(this.start=t,this.endExclusive=i,t>i)throw new ui(`Invalid range: ${this.toString()}`)}get isEmpty(){return this.start===this.endExclusive}delta(t){return new zi(this.start+t,this.endExclusive+t)}deltaStart(t){return new zi(this.start+t,this.endExclusive)}deltaEnd(t){return new zi(this.start,this.endExclusive+t)}get length(){return this.endExclusive-this.start}toString(){return`[${this.start}, ${this.endExclusive})`}equals(t){return this.start===t.start&&this.endExclusive===t.endExclusive}containsRange(t){return this.start<=t.start&&t.endExclusive<=this.endExclusive}contains(t){return this.start<=t&&t<this.endExclusive}join(t){return new zi(Math.min(this.start,t.start),Math.max(this.endExclusive,t.endExclusive))}intersect(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);if(i<=r)return new zi(i,r)}intersectionLength(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return Math.max(0,r-i)}intersects(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return i<r}intersectsOrTouches(t){const i=Math.max(this.start,t.start),r=Math.min(this.endExclusive,t.endExclusive);return i<=r}isBefore(t){return this.endExclusive<=t.start}isAfter(t){return this.start>=t.endExclusive}slice(t){return t.slice(this.start,this.endExclusive)}substring(t){return t.substring(this.start,this.endExclusive)}clip(t){if(this.isEmpty)throw new ui(`Invalid clipping range: ${this.toString()}`);return Math.max(this.start,Math.min(this.endExclusive-1,t))}clipCyclic(t){if(this.isEmpty)throw new ui(`Invalid clipping range: ${this.toString()}`);return t<this.start?this.endExclusive-(this.start-t)%this.length:t>=this.endExclusive?this.start+(t-this.start)%this.length:t}map(t){const i=[];for(let r=this.start;r<this.endExclusive;r++)i.push(t(r));return i}forEach(t){for(let i=this.start;i<this.endExclusive;i++)t(i)}joinRightTouching(t){if(this.endExclusive!==t.start)throw new ui(`Invalid join: ${this.toString()} and ${t.toString()}`);return new zi(this.start,t.endExclusive)}},Pn="**",Om="/",$h="[/\\\\]",Ch="[^/\\\\]",FA=/\//g;function b7(e,t){switch(e){case 0:return"";case 1:return`${Ch}*?`;default:return`(?:${$h}|${Ch}+${$h}${t?`|${$h}${Ch}+`:""})*?`}}function Um(e,t){if(!e)return[];const i=[];let r=!1,s=!1,n="";for(const o of e){switch(o){case t:if(!r&&!s){i.push(n),n="";continue}break;case"{":r=!0;break;case"}":r=!1;break;case"[":s=!0;break;case"]":s=!1;break}n+=o}return n&&i.push(n),i}function y7(e){if(!e)return"";let t="";const i=Um(e,Om);if(i.every(r=>r===Pn))t=".*";else{let r=!1;i.forEach((s,n)=>{if(s===Pn){if(r)return;t+=b7(2,n===i.length-1)}else{let o=!1,a="",c=!1,l="";for(const u of s){if(u!=="}"&&o){a+=u;continue}if(c&&(u!=="]"||!l)){let h;u==="-"?h=u:(u==="^"||u==="!")&&!l?h="^":u===Om?h="":h=pn(u),l+=h;continue}switch(u){case"{":o=!0;continue;case"[":c=!0;continue;case"}":{const f=`(?:${Um(a,",").map(p=>y7(p)).join("|")})`;t+=f,o=!1,a="";break}case"]":{t+="["+l+"]",c=!1,l="";break}case"?":t+=Ch;continue;case"*":t+=b7(1);continue;default:t+=pn(u)}}n<i.length-1&&(i[n+1]!==Pn||n+2<i.length)&&(t+=$h)}r=s===Pn})}return t}var OA=/^\*\*\/\*\.[\w\.-]+$/,UA=/^\*\*\/([\w\.-]+)\/?$/,jA=/^{\*\*\/\*?[\w\.-]+\/?(,\*\*\/\*?[\w\.-]+\/?)*}$/,BA=/^{\*\*\/\*?[\w\.-]+(\/(\*\*)?)?(,\*\*\/\*?[\w\.-]+(\/(\*\*)?)?)*}$/,HA=/^\*\*((\/[\w\.-]+)+)\/?$/,zA=/^([\w\.-]+(\/[\w\.-]+)*)\/?$/,x7=new dg(1e4),E7=function(){return!1},Cr=function(){return null};function jm(e,t){if(!e)return Cr;let i;typeof e!="string"?i=e.pattern:i=e,i=i.trim();const r=`${i}_${!!t.trimForExclusions}`;let s=x7.get(r);if(s)return S7(s,e);let n;return OA.test(i)?s=_A(i.substr(4),i):(n=UA.exec(Bm(i,t)))?s=WA(n[1],i):(t.trimForExclusions?BA:jA).test(i)?s=VA(i,t):(n=HA.exec(Bm(i,t)))?s=k7(n[1].substr(1),i,!0):(n=zA.exec(Bm(i,t)))?s=k7(n[1],i,!1):s=qA(i),x7.set(r,s),S7(s,e)}function S7(e,t){if(typeof t=="string")return e;const i=function(r,s){return eh(r,t.base,!Es)?e(Q3(r.substr(t.base.length),Xi),s):null};return i.allBasenames=e.allBasenames,i.allPaths=e.allPaths,i.basenames=e.basenames,i.patterns=e.patterns,i}function Bm(e,t){return t.trimForExclusions&&e.endsWith("/**")?e.substr(0,e.length-2):e}function _A(e,t){return function(i,r){return typeof i=="string"&&i.endsWith(e)?t:null}}function WA(e,t){const i=`/${e}`,r=`\\${e}`,s=function(o,a){return typeof o!="string"?null:a?a===e?t:null:o===e||o.endsWith(i)||o.endsWith(r)?t:null},n=[e];return s.basenames=n,s.patterns=[t],s.allBasenames=n,s}function VA(e,t){const i=$7(e.slice(1,-1).split(",").map(a=>jm(a,t)).filter(a=>a!==Cr),e),r=i.length;if(!r)return Cr;if(r===1)return i[0];const s=function(a,c){for(let l=0,u=i.length;l<u;l++)if(i[l](a,c))return e;return null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function k7(e,t,i){const r=Xi===Me.sep,s=r?e:e.replace(FA,Xi),n=Xi+s,o=Me.sep+e;let a;return i?a=function(c,l){return typeof c=="string"&&(c===s||c.endsWith(n)||!r&&(c===e||c.endsWith(o)))?t:null}:a=function(c,l){return typeof c=="string"&&(c===s||!r&&c===e)?t:null},a.allPaths=[(i?"*/":"./")+e],a}function qA(e){try{const t=new RegExp(`^${y7(e)}$`);return function(i){return t.lastIndex=0,typeof i=="string"&&t.test(i)?e:null}}catch{return Cr}}function Ac(e,t,i){return!e||typeof t!="string"?!1:Bo(e)(t,void 0,i)}function Bo(e,t={}){if(!e)return E7;if(typeof e=="string"||GA(e)){const i=jm(e,t);if(i===Cr)return E7;const r=function(s,n){return!!i(s,n)};return i.allBasenames&&(r.allBasenames=i.allBasenames),i.allPaths&&(r.allPaths=i.allPaths),r}return JA(e,t)}function GA(e){const t=e;return t?typeof t.base=="string"&&typeof t.pattern=="string":!1}function JA(e,t){const i=$7(Object.getOwnPropertyNames(e).map(a=>ZA(a,e[a],t)).filter(a=>a!==Cr)),r=i.length;if(!r)return Cr;if(!i.some(a=>!!a.requiresSiblings)){if(r===1)return i[0];const a=function(u,h){let f;for(let p=0,m=i.length;p<m;p++){const w=i[p](u,h);if(typeof w=="string")return w;Cs(w)&&(f||(f=[]),f.push(w))}return f?(async()=>{for(const p of f){const m=await p;if(typeof m=="string")return m}return null})():null},c=i.find(u=>!!u.allBasenames);c&&(a.allBasenames=c.allBasenames);const l=i.reduce((u,h)=>h.allPaths?u.concat(h.allPaths):u,[]);return l.length&&(a.allPaths=l),a}const s=function(a,c,l){let u,h;for(let f=0,p=i.length;f<p;f++){const m=i[f];m.requiresSiblings&&l&&(c||(c=Si(a)),u||(u=c.substr(0,c.length-Vu(a).length)));const w=m(a,c,u,l);if(typeof w=="string")return w;Cs(w)&&(h||(h=[]),h.push(w))}return h?(async()=>{for(const f of h){const p=await f;if(typeof p=="string")return p}return null})():null},n=i.find(a=>!!a.allBasenames);n&&(s.allBasenames=n.allBasenames);const o=i.reduce((a,c)=>c.allPaths?a.concat(c.allPaths):a,[]);return o.length&&(s.allPaths=o),s}function ZA(e,t,i){if(t===!1)return Cr;const r=jm(e,i);if(r===Cr)return Cr;if(typeof t=="boolean")return r;if(t){const s=t.when;if(typeof s=="string"){const n=(o,a,c,l)=>{if(!l||!r(o,a))return null;const u=s.replace("$(basename)",()=>c),h=l(u);return Cs(h)?h.then(f=>f?e:null):h?e:null};return n.requiresSiblings=!0,n}}return r}function $7(e,t){const i=e.filter(a=>!!a.basenames);if(i.length<2)return e;const r=i.reduce((a,c)=>{const l=c.basenames;return l?a.concat(l):a},[]);let s;if(t){s=[];for(let a=0,c=r.length;a<c;a++)s.push(t)}else s=i.reduce((a,c)=>{const l=c.patterns;return l?a.concat(l):a},[]);const n=function(a,c){if(typeof a!="string")return null;if(!c){let u;for(u=a.length;u>0;u--){const h=a.charCodeAt(u-1);if(h===47||h===92)break}c=a.substr(u)}const l=r.indexOf(c);return l!==-1?s[l]:null};n.basenames=r,n.patterns=s,n.allBasenames=r;const o=e.filter(a=>!a.basenames);return o.push(n),o}var YA=B("notebookDocumentService"),Hm=["W","X","Y","Z","a","b","c","d","e","f"],QA=new RegExp(`^[${Hm.join("")}]+`),C7=7;function zm(e){if(e.scheme!==V.vscodeNotebookCell)return;const t=e.fragment.indexOf("s");if(t<0)return;const i=parseInt(e.fragment.substring(0,t).replace(QA,""),C7),r=xo(e.fragment.substring(t+1)).toString();if(!isNaN(i))return{handle:i,notebook:e.with({scheme:r,fragment:null})}}function XA(e,t){const i=t.toString(C7),s=`${i.length<Hm.length?Hm[i.length-1]:"z"}${i}s${Fu(ae.fromString(e.scheme),!0,!0)}`;return e.with({scheme:V.vscodeNotebookCell,fragment:s})}function KA(e){if(e.scheme!==V.vscodeNotebookMetadata)return;const t=xo(e.fragment).toString();return e.with({scheme:t,fragment:null})}function eT(e){const t=`${Fu(ae.fromString(e.scheme),!0,!0)}`;return e.with({scheme:V.vscodeNotebookMetadata,fragment:t})}function I7(e){if(e.scheme!==V.vscodeNotebookCellOutput)return;const t=new URLSearchParams(e.query),i=t.get("openIn");if(!i)return;const r=t.get("outputId")??void 0,s=zm(e.with({scheme:V.vscodeNotebookCell,query:null})),n=t.get("outputIndex")?parseInt(t.get("outputIndex")||"",10):void 0,o=s?s.notebook:e.with({scheme:t.get("notebookScheme")||V.file,fragment:null,query:null}),a=t.get("cellIndex")?parseInt(t.get("cellIndex")||"",10):void 0;return{notebook:o,openIn:i,outputId:r,outputIndex:n,cellHandle:s?.handle,cellFragment:e.fragment,cellIndex:a}}var tT=class{constructor(){this.a=new Ft}getNotebook(e){if(e.scheme===V.vscodeNotebookCell){const t=zm(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}if(e.scheme===V.vscodeNotebookCellOutput){const t=I7(e);if(t){const i=this.a.get(t.notebook);if(i)return i}}return this.a.get(e)}addNotebookDocument(e){this.a.set(e.uri,e)}removeNotebookDocument(e){this.a.delete(e.uri)}};Ve(YA,tT,1);var Ho;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Ho||(Ho={}));var TH=["application/json","application/javascript","text/html","image/svg+xml",kr.latex,kr.markdown,"image/png","image/jpeg",kr.text],RH=[kr.latex,kr.markdown,"application/json","text/html","image/svg+xml","image/png","image/jpeg",kr.text],D7;(function(e){e[e.Running=1]="Running",e[e.Idle=2]="Idle"})(D7||(D7={}));var P7;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(P7||(P7={}));var A7;(function(e){e[e.Unconfirmed=1]="Unconfirmed",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(A7||(A7={}));var T7;(function(e){e[e.WithHardKernelDependency=0]="WithHardKernelDependency",e[e.WithOptionalKernelDependency=1]="WithOptionalKernelDependency",e[e.Pure=2]="Pure",e[e.Never=3]="Never"})(T7||(T7={}));var R7;(function(e){e.Always="always",e.Never="never",e.Optional="optional"})(R7||(R7={}));var sr;(function(e){e[e.ModelChange=1]="ModelChange",e[e.Move=2]="Move",e[e.ChangeCellLanguage=5]="ChangeCellLanguage",e[e.Initialize=6]="Initialize",e[e.ChangeCellMetadata=7]="ChangeCellMetadata",e[e.Output=8]="Output",e[e.OutputItem=9]="OutputItem",e[e.ChangeCellContent=10]="ChangeCellContent",e[e.ChangeDocumentMetadata=11]="ChangeDocumentMetadata",e[e.ChangeCellInternalMetadata=12]="ChangeCellInternalMetadata",e[e.ChangeCellMime=13]="ChangeCellMime",e[e.Unknown=100]="Unknown"})(sr||(sr={}));var L7;(function(e){e[e.Handle=0]="Handle",e[e.Index=1]="Index"})(L7||(L7={}));var N7;(function(e){e[e.Replace=1]="Replace",e[e.Output=2]="Output",e[e.Metadata=3]="Metadata",e[e.CellLanguage=4]="CellLanguage",e[e.DocumentMetadata=5]="DocumentMetadata",e[e.Move=6]="Move",e[e.OutputItems=7]="OutputItems",e[e.PartialMetadata=8]="PartialMetadata",e[e.PartialInternalMetadata=9]="PartialInternalMetadata"})(N7||(N7={}));var M7;(function(e){e.scheme=V.vscodeNotebookMetadata;function t(r){return eT(r)}e.generate=t;function i(r){return KA(r)}e.parse=i})(M7||(M7={}));var Ih;(function(e){e.scheme=V.vscodeNotebookCell;function t(l,u){return XA(l,u)}e.generate=t;function i(l){return zm(l)}e.parse=i;function r(l,u){return l.with({scheme:V.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"editor",outputId:u??"",notebookScheme:l.scheme!==V.file?l.scheme:""}).toString()})}e.generateCellOutputUriWithId=r;function s(l,u,h){return l.with({scheme:V.vscodeNotebookCellOutput,fragment:u.fragment,query:new URLSearchParams({openIn:"notebook",outputIndex:String(h)}).toString()})}e.generateCellOutputUriWithIndex=s;function n(l,u,h,f,p){return l.with({scheme:V.vscodeNotebookCellOutput,query:new URLSearchParams({openIn:"notebookOutputEditor",notebook:l.toString(),cellIndex:String(h),outputId:f,outputIndex:String(p)}).toString()})}e.generateOutputEditorUri=n;function o(l){return I7(l)}e.parseCellOutputUri=o;function a(l,u,h){return e.generate(l,u).with({scheme:h})}e.generateCellPropertyUri=a;function c(l,u){if(l.scheme===u)return e.parse(l.with({scheme:e.scheme}))}e.parseCellPropertyUri=c})(Ih||(Ih={}));var LH=new C("notebookEditorCursorAtBoundary","none"),NH=new C("notebookEditorCursorAtLineBoundary","none"),F7;(function(e){e.default="default",e.option="option"})(F7||(F7={}));var O7;(function(e){e.Cells="cells",e.Text="text",e.None="none"})(O7||(O7={}));var U7;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(U7||(U7={}));var MH=class Gp{static{this.d="notebook/"}static create(t,i){return`${Gp.d}${t}/${i??t}`}static parse(t){if(t.startsWith(Gp.d)){const i=t.substring(Gp.d.length).split("/");if(i.length===2)return{notebookType:i[0],viewType:i[1]}}}};function j7(e){return["application/vnd.code.notebook.stdout","application/vnd.code.notebook.stderr"].includes(e)}var iT=new TextDecoder;function rT(e){const t=[];let i=!1;for(const o of e)(t.length===0||i)&&(t.push(o),i=!0);let r=nT(t);const s=ae.concat(t.map(o=>ae.wrap(o))),n=uT(s);return r=r||n.byteLength!==s.byteLength,{data:n,didCompression:r}}var Dh="\x1B[A",_m=Dh.split("").map(e=>e.charCodeAt(0)),sT=10;function nT(e){let t=!1;return e.forEach((i,r)=>{if(r===0||i.length<Dh.length)return;const s=e[r-1],n=i.subarray(0,Dh.length);if(n[0]===_m[0]&&n[1]===_m[1]&&n[2]===_m[2]){const o=s.lastIndexOf(sT);if(o===-1)return;t=!0,e[r-1]=s.subarray(0,o),e[r]=i.subarray(Dh.length)}}),t}function oT(e){let t=e;do e=t,t=e.replace(/[^\n]\x08/gm,"");while(t.length<e.length);return e}function aT(e){for(e=e.replace(/\r+\n/gm,`
`);e.search(/\r[^$]/g)>-1;){const t=e.match(/^(.*)\r+/m)[1];let i=e.match(/\r+(.*)$/m)[1];i=i+t.slice(i.length,t.length),e=e.replace(/\r+.*$/m,"\r").replace(/^.*\r/m,i)}return e}var cT=8,lT=13;function uT(e){return!e.buffer.includes(cT)&&!e.buffer.includes(lT)?e:ae.fromString(aT(oT(iT.decode(e.buffer))))}var hT=B("productService"),dT="vscode://schemas/vscode-product",Ph=B("configurationService"),B7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.USER=2]="USER",e[e.USER_LOCAL=3]="USER_LOCAL",e[e.USER_REMOTE=4]="USER_REMOTE",e[e.WORKSPACE=5]="WORKSPACE",e[e.WORKSPACE_FOLDER=6]="WORKSPACE_FOLDER",e[e.DEFAULT=7]="DEFAULT",e[e.MEMORY=8]="MEMORY"})(B7||(B7={}));function Wm(e,t){const i=Object.create(null);for(const r in e)H7(i,r,e[r],t);return i}function H7(e,t,i,r){const s=t.split("."),n=s.pop();let o=e;for(let a=0;a<s.length;a++){const c=s[a];let l=o[c];switch(typeof l){case"undefined":l=o[c]=Object.create(null);break;case"object":if(l===null){r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is null`);return}break;default:r(`Ignoring ${t} as ${s.slice(0,a+1).join(".")} is ${JSON.stringify(l)}`);return}o=l}if(typeof o=="object"&&o!==null)try{o[n]=i}catch{r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}else r(`Ignoring ${t} as ${s.join(".")} is ${JSON.stringify(o)}`)}function fT(e,t){const i=t.split(".");z7(e,i)}function z7(e,t){if(!e)return;const i=t.shift();if(t.length===0){delete e[i];return}if(Object.keys(e).indexOf(i)!==-1){const r=e[i];typeof r=="object"&&!Array.isArray(r)&&(z7(r,t),Object.keys(r).length===0&&delete e[i])}}function Ah(e,t,i){function r(o,a){let c=o;for(const l of a){if(typeof c!="object"||c===null)return;c=c[l]}return c}const s=t.split("."),n=r(e,s);return typeof n>"u"?i:n}function pT(e){return e.replace(/[\[\]]/g,"")}function gT(e){let t=!1;const i=new Map,r=new Map;if(mT(e,u=>{if(e===u)return!0;const h=JSON.stringify(u);if(h.length<30)return!0;const f=i.get(h);if(!f){const p={schemas:[u]};return i.set(h,p),r.set(u,p),!0}return f.schemas.push(u),r.set(u,f),t=!0,!1}),i.clear(),!t)return JSON.stringify(e);let n="$defs";for(;e.hasOwnProperty(n);)n+="_";const o=[];function a(u){return JSON.stringify(u,(h,f)=>{if(f!==u){const p=r.get(f);if(p&&p.schemas.length>1)return p.id||(p.id=`_${o.length}`,o.push(p.schemas[0])),{$ref:`#/${n}/${p.id}`}}return f})}const c=a(e),l=[];for(let u=0;u<o.length;u++)l.push(`"_${u}":${a(o[u])}`);return l.length?`${c.substring(0,c.length-1)},"${n}":{${l.join(",")}}}`:c}function zo(e){return typeof e=="object"&&e!==null}function mT(e,t){if(!e||typeof e!="object")return;const i=(...c)=>{for(const l of c)zo(l)&&o.push(l)},r=(...c)=>{for(const l of c)if(zo(l))for(const u in l){const h=l[u];zo(h)&&o.push(h)}},s=(...c)=>{for(const l of c)if(Array.isArray(l))for(const u of l)zo(u)&&o.push(u)},n=c=>{if(Array.isArray(c))for(const l of c)zo(l)&&o.push(l);else zo(c)&&o.push(c)},o=[e];let a=o.pop();for(;a;)t(a)&&(i(a.additionalItems,a.additionalProperties,a.not,a.contains,a.propertyNames,a.if,a.then,a.else,a.unevaluatedItems,a.unevaluatedProperties),r(a.definitions,a.$defs,a.properties,a.patternProperties,a.dependencies,a.dependentSchemas),s(a.anyOf,a.allOf,a.oneOf,a.prefixItems),n(a.items)),a=o.pop()}var Th={JSONContribution:"base.contributions.json"};function _7(e){return e.length>0&&e.charAt(e.length-1)==="#"?e.substring(0,e.length-1):e}var vT=class extends ne{constructor(){super(...arguments),this.a={},this.b={},this.c=this.B(new P),this.onDidChangeSchema=this.c.event,this.f=this.B(new P),this.onDidChangeSchemaAssociations=this.f.event}registerSchema(e,t,i){const r=_7(e);this.a[r]=t,this.c.fire(e),i&&i.add(oe(()=>{delete this.a[r],this.c.fire(e)}))}registerSchemaAssociation(e,t){const i=_7(e);return this.b[i]||(this.b[i]=[]),this.b[i].includes(t)||(this.b[i].push(t),this.f.fire()),oe(()=>{const r=this.b[i];if(r){const s=r.indexOf(t);s!==-1&&(r.splice(s,1),r.length===0&&delete this.b[i],this.f.fire())}})}notifySchemaChanged(e){this.c.fire(e)}getSchemaContributions(){return{schemas:this.a}}getSchemaContent(e){const t=this.a[e];return t?gT(t):void 0}hasSchemaContent(e){return!!this.a[e]}getSchemaAssociations(){return this.b}},wT=new vT;jt.add(Th.JSONContribution,wT);var W7;(function(e){e.Multiline="multilineText",e.Singleline="singlelineText"})(W7||(W7={}));var An={Configuration:"base.contributions.configuration"},V7;(function(e){e[e.APPLICATION=1]="APPLICATION",e[e.MACHINE=2]="MACHINE",e[e.APPLICATION_MACHINE=3]="APPLICATION_MACHINE",e[e.WINDOW=4]="WINDOW",e[e.RESOURCE=5]="RESOURCE",e[e.LANGUAGE_OVERRIDABLE=6]="LANGUAGE_OVERRIDABLE",e[e.MACHINE_OVERRIDABLE=7]="MACHINE_OVERRIDABLE"})(V7||(V7={}));var Rh={properties:{},patternProperties:{}},Lh={properties:{},patternProperties:{}},Nh={properties:{},patternProperties:{}},Mh={properties:{},patternProperties:{}},Fh={properties:{},patternProperties:{}},Oh={properties:{},patternProperties:{}},Tc={properties:{},patternProperties:{}},Tn="vscode://schemas/settings/resourceLanguage",Uh=jt.as(Th.JSONContribution),bT=class extends ne{constructor(){super(),this.a=[],this.n=new Set,this.r=this.B(new P),this.onDidSchemaChange=this.r.event,this.s=this.B(new P),this.onDidUpdateConfiguration=this.s.event,this.b=new Map,this.c={id:"defaultOverrides",title:d(1787,null),properties:{}},this.f=[this.c],this.m={properties:{},patternProperties:{},additionalProperties:!0,allowTrailingCommas:!0,allowComments:!0},this.g={},this.h=new Map,this.j={},Uh.registerSchema(Tn,this.m),this.N()}registerConfiguration(e,t=!0){return this.registerConfigurations([e],t),e}registerConfigurations(e,t=!0){const i=new Set;this.F(e,t,i),Uh.registerSchema(Tn,this.m),this.r.fire(),this.s.fire({properties:i})}deregisterConfigurations(e){const t=new Set;this.G(e,t),Uh.registerSchema(Tn,this.m),this.r.fire(),this.s.fire({properties:t})}updateConfigurations({add:e,remove:t}){const i=new Set;this.G(t,i),this.F(e,!1,i),Uh.registerSchema(Tn,this.m),this.r.fire(),this.s.fire({properties:i})}registerDefaultConfigurations(e){const t=new Set;this.u(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}u(e,t){this.a.push(...e);const i=[];for(const{overrides:r,source:s}of e)for(const n in r){t.add(n);const o=this.b.get(n)??this.b.set(n,{configurationDefaultOverrides:[]}).get(n),a=r[n];if(o.configurationDefaultOverrides.push({value:a,source:s}),Ir.test(n)){const c=this.z(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c,this.y(n,c,s),i.push(...Rc(n))}else{const c=this.C(n,a,s,o.configurationDefaultOverrideValue);if(!c)continue;o.configurationDefaultOverrideValue=c;const l=this.g[n];l&&(this.O(n,l),this.J(n,l))}}this.D(i)}deregisterDefaultConfigurations(e){const t=new Set;this.w(e,t),this.r.fire(),this.s.fire({properties:t,defaultsOverrides:!0})}w(e,t){for(const i of e){const r=this.a.indexOf(i);r!==-1&&this.a.splice(r,1)}for(const{overrides:i,source:r}of e)for(const s in i){const n=this.b.get(s);if(!n)continue;const o=n.configurationDefaultOverrides.findIndex(a=>r?a.source?.id===r.id:a.value===i[s]);if(o!==-1){if(n.configurationDefaultOverrides.splice(o,1),n.configurationDefaultOverrides.length===0&&this.b.delete(s),Ir.test(s)){let a;for(const c of n.configurationDefaultOverrides)a=this.z(s,c.value,c.source,a);a&&!hy(a.value)?(n.configurationDefaultOverrideValue=a,this.y(s,a,r)):(this.b.delete(s),delete this.g[s],delete this.c.properties[s])}else{let a;for(const l of n.configurationDefaultOverrides)a=this.C(s,l.value,l.source,a);n.configurationDefaultOverrideValue=a;const c=this.g[s];c&&(this.O(s,c),this.J(s,c))}t.add(s)}}this.M()}y(e,t,i){const r={type:"object",default:t.value,description:d(1788,null,pT(e)),$ref:Tn,defaultDefaultValue:t.value,source:i,defaultValueSource:i};this.g[e]=r,this.c.properties[e]=r}z(e,t,i,r){const s=r?.value||{},n=r?.source??new Map;if(!(n instanceof Map)){console.error("objectConfigurationSources is not a Map");return}for(const o of Object.keys(t)){const a=t[o];if(wt(a)&&(Ka(s[o])||wt(s[o]))){if(s[o]={...s[o]??{},...a},i)for(const l in a)n.set(`${o}.${l}`,i)}else s[o]=a,i?n.set(o,i):n.delete(o)}return{value:s,source:n}}C(e,t,i,r){const s=this.g[e],n=r?.value??s?.defaultDefaultValue;let o=i;if(wt(t)&&(s!==void 0&&s.type==="object"||s===void 0&&(Ka(n)||wt(n)))){if(o=r?.source??new Map,!(o instanceof Map)){console.error("defaultValueSource is not a Map");return}for(const c in t)i&&o.set(`${e}.${c}`,i);t={...wt(n)?n:{},...t}}return{value:t,source:o}}deltaConfiguration(e){let t=!1;const i=new Set;e.removedDefaults&&(this.w(e.removedDefaults,i),t=!0),e.addedDefaults&&(this.u(e.addedDefaults,i),t=!0),e.removedConfigurations&&this.G(e.removedConfigurations,i),e.addedConfigurations&&this.F(e.addedConfigurations,!1,i),this.r.fire(),this.s.fire({properties:i,defaultsOverrides:t})}notifyConfigurationSchemaUpdated(...e){this.r.fire()}registerOverrideIdentifiers(e){this.D(e),this.r.fire()}D(e){for(const t of e)this.n.add(t);this.M()}F(e,t,i){e.forEach(r=>{this.H(r,t,r.extensionInfo,r.restrictedProperties,void 0,i),this.f.push(r),this.I(r)})}G(e,t){const i=r=>{if(r.properties)for(const s in r.properties){t.add(s);const n=this.g[s];n?.policy?.name&&this.h.delete(n.policy.name),delete this.g[s],this.L(s,r.properties[s])}r.allOf?.forEach(s=>i(s))};for(const r of e){i(r);const s=this.f.indexOf(r);s!==-1&&this.f.splice(s,1)}}H(e,t=!0,i,r,s=4,n){s=bt(e.scope)?s:e.scope;const o=e.properties;if(o)for(const c in o){const l=o[c];if(t&&xT(c,l)){delete o[c];continue}l.source=i,l.defaultDefaultValue=o[c].default,this.O(c,l),Ir.test(c)?l.scope=void 0:(l.scope=bt(l.scope)?s:l.scope,l.restricted=bt(l.restricted)?!!r?.includes(c):l.restricted);const u=o[c].hasOwnProperty("included")&&!o[c].included,h=o[c].policy?.name;u?(this.j[c]=o[c],h&&(this.h.set(h,c),n.add(c)),delete o[c]):(n.add(c),h&&this.h.set(h,c),this.g[c]=o[c],!o[c].deprecationMessage&&o[c].markdownDeprecationMessage&&(o[c].deprecationMessage=o[c].markdownDeprecationMessage))}const a=e.allOf;if(a)for(const c of a)this.H(c,t,i,r,s,n)}getConfigurations(){return this.f}getConfigurationProperties(){return this.g}getPolicyConfigurations(){return this.h}getExcludedConfigurationProperties(){return this.j}getRegisteredDefaultConfigurations(){return[...this.a]}getConfigurationDefaultsOverrides(){const e=new Map;for(const[t,i]of this.b)i.configurationDefaultOverrideValue&&e.set(t,i.configurationDefaultOverrideValue);return e}I(e){const t=i=>{const r=i.properties;if(r)for(const n in r)this.J(n,r[n]);i.allOf?.forEach(t)};t(e)}J(e,t){switch(Rh.properties[e]=t,t.scope){case 1:Lh.properties[e]=t;break;case 2:Mh.properties[e]=t;break;case 3:Nh.properties[e]=t;break;case 7:Fh.properties[e]=t;break;case 4:Oh.properties[e]=t;break;case 5:Tc.properties[e]=t;break;case 6:Tc.properties[e]=t,this.m.properties[e]=t;break}}L(e,t){switch(delete Rh.properties[e],t.scope){case 1:delete Lh.properties[e];break;case 2:delete Mh.properties[e];break;case 3:delete Nh.properties[e];break;case 7:delete Fh.properties[e];break;case 4:delete Oh.properties[e];break;case 5:case 6:delete Tc.properties[e],delete this.m.properties[e];break}}M(){for(const e of this.n.values()){const t=`[${e}]`,i={type:"object",description:d(1789,null),errorMessage:d(1790,null),$ref:Tn};this.O(t,i),Rh.properties[t]=i,Lh.properties[t]=i,Nh.properties[t]=i,Mh.properties[t]=i,Fh.properties[t]=i,Oh.properties[t]=i,Tc.properties[t]=i}}N(){const e={type:"object",description:d(1791,null),errorMessage:d(1792,null),$ref:Tn};Rh.patternProperties[Rs]=e,Lh.patternProperties[Rs]=e,Nh.patternProperties[Rs]=e,Mh.patternProperties[Rs]=e,Fh.patternProperties[Rs]=e,Oh.patternProperties[Rs]=e,Tc.patternProperties[Rs]=e,this.r.fire()}O(e,t){const i=this.b.get(e)?.configurationDefaultOverrideValue;let r,s;i&&(!t.disallowConfigurationDefault||!i.source)&&(r=i.value,s=i.source),Ka(r)&&(r=t.defaultDefaultValue,s=void 0),Ka(r)&&(r=yT(t.type)),t.default=r,t.defaultValueSource=s}},q7="\\[([^\\]]+)\\]",G7=new RegExp(q7,"g"),Rs=`^(${q7})+$`,Ir=new RegExp(Rs);function Rc(e){const t=[];if(Ir.test(e)){let i=G7.exec(e);for(;i?.length;){const r=i[1].trim();r&&t.push(r),i=G7.exec(e)}}return vo(t)}function yT(e){switch(Array.isArray(e)?e[0]:e){case"boolean":return!1;case"integer":case"number":return 0;case"string":return"";case"array":return[];case"object":return{};default:return null}}var jh=new bT;jt.add(An.Configuration,jh);function xT(e,t){return e.trim()?Ir.test(e)?d(1794,null,e):jh.getConfigurationProperties()[e]!==void 0?d(1795,null,e):t.policy?.name&&jh.getPolicyConfigurations().get(t.policy?.name)!==void 0?d(1796,null,e,t.policy?.name,jh.getPolicyConfigurations().get(t.policy?.name)):null:d(1793,null)}var ET=B("requestService");function ST(e){return e.res.statusCode&&e.res.statusCode>=200&&e.res.statusCode<300||e.res.statusCode===1223}function kT(e){return e.res.statusCode===204}async function $T(e){if(!ST(e))throw new Error("Server returned "+e.res.statusCode);if(kT(e))return null;const i=(await ZI(e.stream)).toString();try{return JSON.parse(i)}catch(r){throw r.message+=`:
`+i,r}}var Vm=[],J7=void 0,Z7=void 0;function CT(e=!0,t=!0){if(J7===e&&Z7===t)return;J7=e,Z7=t;const i=jt.as(An.Configuration),r=Vm;Vm=[{id:"http",order:15,title:d(2205,null),type:"object",scope:2,properties:{"http.useLocalProxyConfiguration":{type:"boolean",default:t,markdownDescription:d(2206,null),restricted:!0}}},{id:"http",order:15,title:d(2207,null),type:"object",scope:1,properties:{"http.electronFetch":{type:"boolean",default:!1,description:d(2208,null),restricted:!0}}},{id:"http",order:15,title:d(2209,null),type:"object",scope:e?1:2,properties:{"http.proxy":{type:"string",pattern:"^(https?|socks|socks4a?|socks5h?)://([^:]*(:[^@]*)?@)?([^:]+|\\[[:0-9a-fA-F]+\\])(:\\d+)?/?$|^$",markdownDescription:d(2210,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyStrictSSL":{type:"boolean",default:!0,markdownDescription:d(2211,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyKerberosServicePrincipal":{type:"string",markdownDescription:d(2212,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.noProxy":{type:"array",items:{type:"string"},markdownDescription:d(2213,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxyAuthorization":{type:["null","string"],default:null,markdownDescription:d(2214,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.proxySupport":{type:"string",enum:["off","on","fallback","override"],enumDescriptions:[d(2215,null),d(2216,null),d(2217,null),d(2218,null)],default:"override",markdownDescription:d(2219,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.systemCertificates":{type:"boolean",default:!0,markdownDescription:d(2220,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.experimental.systemCertificatesV2":{type:"boolean",tags:["experimental"],default:!1,markdownDescription:d(2221,null,"`#http.useLocalProxyConfiguration#`"),restricted:!0},"http.fetchAdditionalSupport":{type:"boolean",default:!0,markdownDescription:d(2222,null,"`#http.useLocalProxyConfiguration#`","`#http.proxySupport#`","`#http.systemCertificates#`"),restricted:!0}}}],i.updateConfigurations({add:Vm,remove:r})}CT();var Lc;(function(e){e[e.STORAGE_DOES_NOT_EXIST=0]="STORAGE_DOES_NOT_EXIST",e[e.STORAGE_IN_MEMORY=1]="STORAGE_IN_MEMORY"})(Lc||(Lc={}));var nr;(function(e){e[e.None=0]="None",e[e.Initialized=1]="Initialized",e[e.Closed=2]="Closed"})(nr||(nr={}));var FH=class iC extends ne{static{this.a=100}constructor(t,i=Object.create(null)){super(),this.r=t,this.s=i,this.b=this.B(new Uu),this.onDidChangeStorage=this.b.event,this.c=nr.None,this.f=new Map,this.g=this.B(new zD(iC.a)),this.h=new Set,this.j=new Map,this.m=void 0,this.n=[],this.t()}t(){this.B(this.r.onDidChangeItemsExternal(t=>this.u(t)))}u(t){this.b.pause();try{t.changed?.forEach((i,r)=>this.w(r,i)),t.deleted?.forEach(i=>this.w(i,void 0))}finally{this.b.resume()}}w(t,i){if(this.c===nr.Closed)return;let r=!1;bt(i)?r=this.f.delete(t):this.f.get(t)!==i&&(this.f.set(t,i),r=!0),r&&this.b.fire({key:t,external:!0})}get items(){return this.f}get size(){return this.f.size}async init(){this.c===nr.None&&(this.c=nr.Initialized,this.s.hint!==Lc.STORAGE_DOES_NOT_EXIST&&(this.f=await this.r.getItems()))}get(t,i){const r=this.f.get(t);return bt(r)?i:r}getBoolean(t,i){const r=this.get(t);return bt(r)?i:r==="true"}getNumber(t,i){const r=this.get(t);return bt(r)?i:parseInt(r,10)}getObject(t,i){const r=this.get(t);return bt(r)?i:o6(r)}async set(t,i,r=!1){if(this.c===nr.Closed)return;if(bt(i))return this.delete(t,r);const s=wt(i)||Array.isArray(i)?UP(i):String(i);if(this.f.get(t)!==s)return this.f.set(t,s),this.j.set(t,s),this.h.delete(t),this.b.fire({key:t,external:r}),this.D()}async delete(t,i=!1){if(!(this.c===nr.Closed||!this.f.delete(t)))return this.h.has(t)||this.h.add(t),this.j.delete(t),this.b.fire({key:t,external:i}),this.D()}async optimize(){if(this.c!==nr.Closed)return await this.flush(0),this.r.optimize()}async close(){return this.m||(this.m=this.y()),this.m}async y(){this.c=nr.Closed;try{await this.D(0)}catch{}await this.r.close(()=>this.f)}get z(){return this.j.size>0||this.h.size>0}async C(){if(!this.z)return;const t={insert:this.j,delete:this.h};return this.h=new Set,this.j=new Map,this.r.updateItems(t).finally(()=>{if(!this.z)for(;this.n.length;)this.n.pop()?.()})}async flush(t){if(!(this.c===nr.Closed||this.m))return this.D(t)}async D(t){return this.s.hint===Lc.STORAGE_IN_MEMORY?this.C():this.g.trigger(()=>this.C(),t)}async whenFlushed(){if(this.z)return new Promise(t=>this.n.push(t))}isInMemory(){return this.s.hint===Lc.STORAGE_IN_MEMORY}},qm=B("environmentService"),OH=qm,Y7=B("IUriIdentityService"),Q7;(function(e){e.Settings="settings",e.Keybindings="keybindings",e.Snippets="snippets",e.Prompts="prompts",e.Tasks="tasks",e.Extensions="extensions",e.GlobalState="globalState"})(Q7||(Q7={}));function IT(e){const t=e;return!!(t&&typeof t=="object"&&typeof t.id=="string"&&typeof t.isDefault=="boolean"&&typeof t.name=="string"&&y.isUri(t.location)&&y.isUri(t.globalStorageHome)&&y.isUri(t.settingsResource)&&y.isUri(t.keybindingsResource)&&y.isUri(t.tasksResource)&&y.isUri(t.snippetsHome)&&y.isUri(t.promptsHome)&&y.isUri(t.extensionsResource))}var DT=B("IUserDataProfilesService");function Bh(e,t,i,r,s,n){return{id:e,name:t,location:i,isDefault:!1,icon:s?.icon,globalStorageHome:n&&s?.useDefaultFlags?.globalState?n.globalStorageHome:Zt(i,"globalStorage"),settingsResource:n&&s?.useDefaultFlags?.settings?n.settingsResource:Zt(i,"settings.json"),keybindingsResource:n&&s?.useDefaultFlags?.keybindings?n.keybindingsResource:Zt(i,"keybindings.json"),tasksResource:n&&s?.useDefaultFlags?.tasks?n.tasksResource:Zt(i,"tasks.json"),snippetsHome:n&&s?.useDefaultFlags?.snippets?n.snippetsHome:Zt(i,"snippets"),promptsHome:n&&s?.useDefaultFlags?.prompts?n.promptsHome:Zt(i,"prompts"),extensionsResource:n&&s?.useDefaultFlags?.extensions?n.extensionsResource:Zt(i,"extensions.json"),cacheHome:Zt(r,e),useDefaultFlags:s?.useDefaultFlags,isTransient:s?.transient,workspaces:s?.workspaces}}var X7=class extends ne{static{this.b="userDataProfiles"}static{this.c="profileAssociations"}get defaultProfile(){return this.profiles[0]}get profiles(){return[...this.C.profiles,...this.r.profiles]}constructor(t,i,r,s){super(),this.s=t,this.t=i,this.u=r,this.y=s,this.g=this.B(new P),this.onDidChangeProfiles=this.g.event,this.h=this.B(new P),this.onWillCreateProfile=this.h.event,this.j=this.B(new P),this.onWillRemoveProfile=this.j.event,this.m=this.B(new P),this.onDidResetWorkspaces=this.m.event,this.n=new Map,this.r={profiles:[],emptyWindows:new Map},this.profilesHome=Zt(this.s.userRoamingDataHome,"profiles"),this.f=Zt(this.s.cacheHome,"CachedProfilesData")}init(){this.z=void 0}get C(){if(!this.z){const t=this.D(),i=[t];try{for(const s of this.N()){if(!s.name||!Ue(s.name)||!s.location){this.y.warn("Skipping the invalid stored profile",s.location||s.name);continue}i.push(Bh(tr(s.location),s.name,s.location,this.f,{icon:s.icon,useDefaultFlags:s.useDefaultFlags},t))}}catch(s){this.y.error(s)}const r=new Map;if(i.length)try{const s=this.P();if(s.workspaces)for(const[n,o]of Object.entries(s.workspaces)){const a=y.parse(n),c=i.find(l=>l.id===o);if(c){const l=c.workspaces?c.workspaces.slice(0):[];l.push(a),c.workspaces=l}}if(s.emptyWindows)for(const[n,o]of Object.entries(s.emptyWindows)){const a=i.find(c=>c.id===o);a&&r.set(n,a)}}catch(s){this.y.error(s)}this.z={profiles:i,emptyWindows:r}}return this.z}D(){const t=Bh("__default__profile__",d(2614,null),this.s.userRoamingDataHome,this.f);return{...t,extensionsResource:this.R()??t.extensionsResource,isDefault:!0}}async createTransientProfile(t){const i="Temp",r=new RegExp(`${pn(i)}\\s(\\d+)`);let s=0;for(const o of this.profiles){const a=r.exec(o.name),c=a?parseInt(a[1]):0;s=c>s?c:s}const n=`${i} ${s+1}`;return this.createProfile(pc(Ut()).toString(16),n,{transient:!0},t)}async createNamedProfile(t,i,r){return this.createProfile(pc(Ut()).toString(16),t,i,r)}async createProfile(t,i,r,s){return await this.F(t,i,r,s)}async F(t,i,r,s){if(!Ue(i)||!i)throw new Error("Name of the profile is mandatory and must be of type `string`");let n=this.n.get(i);return n||(n=(async()=>{try{if(this.profiles.find(u=>u.id===t||!u.isTransient&&!r?.transient&&u.name===i))throw new Error(`Profile with ${i} name already exists`);const a=s?this.G(s):void 0;y.isUri(a)&&(r={...r,workspaces:[a]});const c=Bh(t,i,Zt(this.profilesHome,t),this.f,r,this.defaultProfile);await this.t.createFolder(c.location);const l=[];return this.h.fire({profile:c,join(u){l.push(u)}}),await Do.settled(l),a&&!y.isUri(a)&&this.L(a,c,!!c.isTransient),this.I([c],[],[]),c}finally{this.n.delete(i)}})(),this.n.set(i,n)),n}async updateProfile(t,i){const r=[];for(const n of this.profiles){let o;if(t.id===n.id)n.isDefault?i.workspaces&&(o=n,o.workspaces=i.workspaces):o=Bh(n.id,i.name??n.name,n.location,this.f,{icon:i.icon===null?void 0:i.icon??n.icon,transient:i.transient??n.isTransient,useDefaultFlags:i.useDefaultFlags??n.useDefaultFlags,workspaces:i.workspaces??n.workspaces},this.defaultProfile);else if(i.workspaces){const a=n.workspaces?.filter(c=>!i.workspaces?.some(l=>this.u.extUri.isEqual(c,l)));n.workspaces?.length!==a?.length&&(o=n,o.workspaces=a)}o&&r.push(o)}if(!r.length)throw t.isDefault?new Error("Cannot update default profile"):new Error(`Profile '${t.name}' does not exist`);this.I([],[],r);const s=this.profiles.find(n=>n.id===t.id);if(!s)throw new Error(`Profile '${t.name}' was not updated`);return s}async removeProfile(t){if(t.isDefault)throw new Error("Cannot remove default profile");const i=this.profiles.find(s=>s.id===t.id);if(!i)throw new Error(`Profile '${t.name}' does not exist`);const r=[];this.j.fire({profile:i,join(s){r.push(s)}});try{await Promise.allSettled(r)}catch(s){this.y.error(s)}this.I([],[i],[]);try{await this.t.del(i.cacheHome,{recursive:!0})}catch(s){JP(s)!==1&&this.y.error(s)}}async setProfileForWorkspace(t,i){const r=this.profiles.find(n=>n.id===i.id);if(!r)throw new Error(`Profile '${i.name}' does not exist`);const s=this.G(t);if(y.isUri(s)){const n=r.workspaces?[...r.workspaces]:[];n.some(o=>this.u.extUri.isEqual(o,s))||(n.push(s),await this.updateProfile(r,{workspaces:n}))}else this.L(s,r,!1),this.M(this.profiles)}unsetWorkspace(t,i=!1){const r=this.G(t);if(y.isUri(r)){const s=this.getProfileForWorkspace(t);s&&this.updateProfile(s,{workspaces:s.workspaces?.filter(n=>!this.u.extUri.isEqual(n,r))})}else this.L(r,void 0,i),this.M(this.profiles)}async resetWorkspaces(){this.r.emptyWindows.clear(),this.C.emptyWindows.clear();for(const t of this.profiles)t.workspaces=void 0;this.I([],[],this.profiles),this.m.fire()}async cleanUp(){if(await this.t.exists(this.profilesHome)){const t=await this.t.resolve(this.profilesHome);await Promise.all((t.children||[]).filter(i=>i.isDirectory&&this.profiles.every(r=>!this.u.extUri.isEqual(r.location,i.resource))).map(i=>this.t.del(i.resource,{recursive:!0})))}}async cleanUpTransientProfiles(){const t=this.r.profiles.filter(i=>!this.H(i));await Promise.allSettled(t.map(i=>this.removeProfile(i)))}getProfileForWorkspace(t){const i=this.G(t);return y.isUri(i)?this.profiles.find(r=>r.workspaces?.some(s=>this.u.extUri.isEqual(s,i))):this.C.emptyWindows.get(i)??this.r.emptyWindows.get(i)}G(t){return j2(t)?t.uri:B2(t)?t.configPath:t.id}H(t){return!!(t.workspaces?.length||[...this.C.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location))||[...this.r.emptyWindows.values()].some(i=>this.u.extUri.isEqual(i.location,t.location)))}I(t,i,r){const s=[...this.profiles,...t],n=this.r.profiles;this.r.profiles=[];const o=[];for(let a of s){if(i.some(c=>a.id===c.id)){for(const c of[...this.C.emptyWindows.keys()])a.id===this.C.emptyWindows.get(c)?.id&&this.C.emptyWindows.delete(c);continue}if(!a.isDefault){a=r.find(l=>a.id===l.id)??a;const c=n.find(l=>a.id===l.id);if(a.isTransient)this.r.profiles.push(a);else if(c){for(const[l,u]of this.r.emptyWindows.entries())if(a.id===u.id){this.r.emptyWindows.delete(l),this.C.emptyWindows.set(l,a);break}}}a.workspaces?.length===0&&(a.workspaces=void 0),o.push(a)}this.M(o),this.J(t,i,r)}J(t,i,r){this.g.fire({added:t,removed:i,updated:r,all:this.profiles})}L(t,i,r){r=i?.isTransient?!0:r,r?i?this.r.emptyWindows.set(t,i):this.r.emptyWindows.delete(t):(this.r.emptyWindows.delete(t),i?this.C.emptyWindows.set(t,i):this.C.emptyWindows.delete(t))}M(t){const i=[],r={},s={};for(const n of t)if(!n.isTransient&&(n.isDefault||i.push({location:n.location,name:n.name,icon:n.icon,useDefaultFlags:n.useDefaultFlags}),n.workspaces))for(const o of n.workspaces)r[o.toString()]=n.id;for(const[n,o]of this.C.emptyWindows.entries())s[n.toString()]=o.id;this.Q({workspaces:r,emptyWindows:s}),this.O(i),this.z=void 0}N(){return[]}O(t){throw new Error("not implemented")}P(){return{}}Q(t){throw new Error("not implemented")}R(){}};X7=__decorate([__param(0,qm),__param(1,T6),__param(2,Y7),__param(3,We)],X7);var PT="__$__isNewStorageMarker",Hh="__$__targetStorageMarker",AT=B("storageService"),_o;(function(e){e[e.NONE=0]="NONE",e[e.SHUTDOWN=1]="SHUTDOWN"})(_o||(_o={}));var K7;(function(e){e[e.APPLICATION=-1]="APPLICATION",e[e.PROFILE=0]="PROFILE",e[e.WORKSPACE=1]="WORKSPACE"})(K7||(K7={}));var e9;(function(e){e[e.USER=0]="USER",e[e.MACHINE=1]="MACHINE"})(e9||(e9={}));function TT(e){const t=e.get(Hh);if(t)try{return JSON.parse(t)}catch{}return Object.create(null)}var jH=class rC extends ne{static{this.a=60*1e3}constructor(t={flushInterval:rC.a}){super(),this.b=this.B(new Uu),this.f=this.B(new Uu),this.onDidChangeTarget=this.f.event,this.g=this.B(new P),this.onWillSaveState=this.g.event,this.m=this.B(new bs),this.C=void 0,this.F=void 0,this.H=void 0,this.j=this.B(new mn(()=>this.n(),t.flushInterval))}onDidChangeValue(t,i,r){return lt.filter(this.b.event,s=>s.scope===t&&(i===void 0||s.key===i),r)}n(){this.m.value=N4(()=>{this.r()&&this.flush(),this.j.schedule()})}r(){return!0}t(){Hr([this.m,this.j])}initialize(){return this.h||(this.h=(async()=>{hi("code/willInitStorage");try{await this.O()}finally{hi("code/didInitStorage")}this.j.schedule()})()),this.h}u(t,i){const{key:r,external:s}=i;if(r===Hh){switch(t){case-1:this.H=void 0;break;case 0:this.F=void 0;break;case 1:this.C=void 0;break}this.f.fire({scope:t})}else this.b.fire({scope:t,key:r,target:this.J(t)[r],external:s})}w(t){this.g.fire({reason:t})}get(t,i,r){return this.P(i)?.get(t,r)}getBoolean(t,i,r){return this.P(i)?.getBoolean(t,r)}getNumber(t,i,r){return this.P(i)?.getNumber(t,r)}getObject(t,i,r){return this.P(i)?.getObject(t,r)}storeAll(t,i){this.y(()=>{for(const r of t)this.store(r.key,r.value,r.scope,r.target,i)})}store(t,i,r,s,n=!1){if(bt(i)){this.remove(t,r,n);return}this.y(()=>{this.z(t,r,s),this.P(r)?.set(t,i,n)})}remove(t,i,r=!1){this.y(()=>{this.z(t,i,void 0),this.P(i)?.delete(t,r)})}y(t){this.b.pause(),this.f.pause();try{t()}finally{this.b.resume(),this.f.resume()}}keys(t,i){const r=[],s=this.J(t);for(const n of Object.keys(s))s[n]===i&&r.push(n);return r}z(t,i,r,s=!1){const n=this.J(i);typeof r=="number"?n[t]!==r&&(n[t]=r,this.P(i)?.set(Hh,JSON.stringify(n),s)):typeof n[t]=="number"&&(delete n[t],this.P(i)?.set(Hh,JSON.stringify(n),s))}get D(){return this.C||(this.C=this.L(1)),this.C}get G(){return this.F||(this.F=this.L(0)),this.F}get I(){return this.H||(this.H=this.L(-1)),this.H}J(t){switch(t){case-1:return this.I;case 0:return this.G;default:return this.D}}L(t){const i=this.P(t);return i?TT(i):Object.create(null)}isNew(t){return this.getBoolean(PT,t)===!0}async flush(t=_o.NONE){this.g.fire({reason:t});const i=this.P(-1),r=this.P(0),s=this.P(1);switch(t){case _o.NONE:await Do.settled([i?.whenFlushed()??Promise.resolve(),r?.whenFlushed()??Promise.resolve(),s?.whenFlushed()??Promise.resolve()]);break;case _o.SHUTDOWN:await Do.settled([i?.flush(0)??Promise.resolve(),r?.flush(0)??Promise.resolve(),s?.flush(0)??Promise.resolve()]);break}}async log(){const t=this.P(-1)?.items??new Map,i=this.P(0)?.items??new Map,r=this.P(1)?.items??new Map;return RT(t,i,r,this.Q(-1)??"",this.Q(0)??"",this.Q(1)??"")}async optimize(t){return await this.flush(),this.P(t)?.optimize()}async switch(t,i){return this.w(_o.NONE),IT(t)?this.R(t,i):this.S(t,i)}M(t,i){return!(t.id===i.id||t9(i)&&t9(t))}N(t,i,r){this.y(()=>{const s=new Set;for(const[n,o]of t)s.add(n),i.get(n)!==o&&this.u(r,{key:n,external:!0});for(const[n]of i.items)s.has(n)||this.u(r,{key:n,external:!0})})}};function t9(e){return e.isDefault||!!e.useDefaultFlags?.globalState}async function RT(e,t,i,r,s,n){const o=w=>{try{return JSON.parse(w)}catch{return w}},a=new Map,c=new Map;e.forEach((w,x)=>{a.set(x,w),c.set(x,o(w))});const l=new Map,u=new Map;t.forEach((w,x)=>{l.set(x,w),u.set(x,o(w))});const h=new Map,f=new Map;i.forEach((w,x)=>{h.set(x,w),f.set(x,o(w))}),console.group(r!==s?`Storage: Application (path: ${r})`:`Storage: Application & Profile (path: ${r}, default profile)`);const p=[];if(a.forEach((w,x)=>{p.push({key:x,value:w})}),console.table(p),console.groupEnd(),console.log(c),r!==s){console.group(`Storage: Profile (path: ${s}, profile specific)`);const w=[];l.forEach((x,E)=>{w.push({key:E,value:x})}),console.table(w),console.groupEnd(),console.log(u)}console.group(`Storage: Workspace (path: ${n})`);const m=[];h.forEach((w,x)=>{m.push({key:x,value:w})}),console.table(m),console.groupEnd(),console.log(f)}var BH=new C("isMac",Oi,d(1809,null)),HH=new C("isLinux",Es,d(1810,null)),zH=new C("isWindows",ei,d(1811,null)),LT=new C("isWeb",Eo,d(1812,null)),_H=new C("isMacNative",Oi&&!Eo,d(1813,null)),WH=new C("isIOS",k3,d(1814,null)),VH=new C("isMobile",$3,d(1815,null)),qH=new C("isDevelopment",!1,!0),GH=new C("productQualityType","",d(1816,null)),NT="inputFocus",JH=new C(NT,!1,d(1817,null)),MT=B("languageService"),FT=B("modelService"),or,ZH=new C("workbenchState",void 0,{type:"string",description:d(4224,null)}),YH=new C("workspaceFolderCount",0,d(4225,null)),QH=new C("openFolderWorkspaceSupport",!0,!0),XH=new C("enterMultiRootWorkspaceSupport",!0,!0),KH=new C("emptyWorkspaceSupport",!0,!0),ez=new C("dirtyWorkingCopies",!1,d(4226,null)),OT=new C("remoteName","",d(4227,null)),tz=new C("virtualWorkspace","",d(4228,null)),iz=new C("temporaryWorkspace",!1,d(4229,null)),rz=new C("hasWebFileSystemAccess",!1,!0),sz=new C("embedderIdentifier",void 0,d(4230,null)),nz=new C("isFullscreen",!1,d(4231,null)),oz=new C("isAuxiliaryWindowFocusedContext",!1,d(4232,null)),az=new C("isWindowAlwaysOnTop",!1,d(4233,null)),cz=new C("isAuxiliaryWindow",!1,d(4234,null)),lz=new C("activeEditorIsDirty",!1,d(4235,null)),uz=new C("activeEditorIsNotPreview",!1,d(4236,null)),hz=new C("activeEditorIsFirstInGroup",!1,d(4237,null)),dz=new C("activeEditorIsLastInGroup",!1,d(4238,null)),fz=new C("activeEditorIsPinned",!1,d(4239,null)),pz=new C("activeEditorIsReadonly",!1,d(4240,null)),gz=new C("activeCompareEditorCanSwap",!1,d(4241,null)),mz=new C("activeEditorCanToggleReadonly",!0,d(4242,null)),vz=new C("activeEditorCanRevert",!1,d(4243,null)),wz=new C("activeEditorCanSplitInGroup",!0),bz=new C("activeEditor",null,{type:"string",description:d(4244,null)}),yz=new C("activeEditorAvailableEditorIds","",d(4245,null)),xz=new C("textCompareEditorVisible",!1,d(4246,null)),Ez=new C("textCompareEditorActive",!1,d(4247,null)),Sz=new C("sideBySideEditorActive",!1,d(4248,null)),kz=new C("groupEditorsCount",0,d(4249,null)),$z=new C("activeEditorGroupEmpty",!1,d(4250,null)),Cz=new C("activeEditorGroupIndex",0,d(4251,null)),Iz=new C("activeEditorGroupLast",!1,d(4252,null)),Dz=new C("activeEditorGroupLocked",!1,d(4253,null)),UT=new C("multipleEditorGroups",!1,d(4254,null)),Pz=UT.toNegated(),Az=new C("multipleEditorsSelectedInGroup",!1,d(4255,null)),Tz=new C("twoEditorsSelectedInGroup",!1,d(4256,null)),Rz=new C("SelectedEditorsInGroupFileOrUntitledResourceContextKey",!0,d(4257,null)),jT=new C("editorPartMultipleEditorGroups",!1,d(4258,null)),Lz=jT.toNegated(),Nz=new C("editorPartMaximizedEditorGroup",!1,d(4259,null)),Mz=new C("editorIsOpen",!1,d(4260,null)),Fz=new C("inZenMode",!1,d(4261,null)),Oz=new C("isCenteredLayout",!1,d(4262,null)),Uz=new C("splitEditorsVertically",!1,d(4263,null)),jz=new C("mainEditorAreaVisible",!0,d(4264,null)),Bz=new C("editorTabsVisible",!0,d(4265,null)),Hz=new C("sideBarVisible",!1,d(4266,null)),zz=new C("sideBarFocus",!1,d(4267,null)),_z=new C("activeViewlet","",d(4268,null)),Wz=new C("statusBarFocused",!1,d(4269,null)),Vz=new C("titleBarStyle","custom",d(4270,null)),qz=new C("titleBarVisible",!1,d(4271,null)),Gz=new C("isCompactTitleBar",!1,d(4272,null)),Jz=new C("bannerFocused",!1,d(4273,null)),Zz=new C("notificationFocus",!0,d(4274,null)),Yz=new C("notificationCenterVisible",!1,d(4275,null)),Qz=new C("notificationToastsVisible",!1,d(4276,null)),Xz=new C("activeAuxiliary","",d(4277,null)),Kz=new C("auxiliaryBarFocus",!1,d(4278,null)),e_=new C("auxiliaryBarVisible",!1,d(4279,null)),t_=new C("activePanel","",d(4280,null)),i_=new C("panelFocus",!1,d(4281,null)),r_=new C("panelPosition","bottom",d(4282,null)),s_=new C("panelAlignment","center",d(4283,null)),n_=new C("panelVisible",!1,d(4284,null)),o_=new C("panelMaximized",!1,d(4285,null)),a_=new C("focusedView","",d(4286,null)),i9=class{static{or=this}static{this.Scheme=new C("resourceScheme",void 0,{type:"string",description:d(4287,null)})}static{this.Filename=new C("resourceFilename",void 0,{type:"string",description:d(4288,null)})}static{this.Dirname=new C("resourceDirname",void 0,{type:"string",description:d(4289,null)})}static{this.Path=new C("resourcePath",void 0,{type:"string",description:d(4290,null)})}static{this.LangId=new C("resourceLangId",void 0,{type:"string",description:d(4291,null)})}static{this.Resource=new C("resource",void 0,{type:"URI",description:d(4292,null)})}static{this.Extension=new C("resourceExtname",void 0,{type:"string",description:d(4293,null)})}static{this.HasResource=new C("resourceSet",void 0,{type:"boolean",description:d(4294,null)})}static{this.IsFileSystemResource=new C("isFileSystemResource",void 0,{type:"boolean",description:d(4295,null)})}constructor(t,i,r,s){this.m=t,this.n=i,this.o=r,this.p=s,this.a=new ue,this.d=or.Scheme.bindTo(this.m),this.f=or.Filename.bindTo(this.m),this.g=or.Dirname.bindTo(this.m),this.h=or.Path.bindTo(this.m),this.i=or.LangId.bindTo(this.m),this.c=or.Resource.bindTo(this.m),this.j=or.Extension.bindTo(this.m),this.k=or.HasResource.bindTo(this.m),this.l=or.IsFileSystemResource.bindTo(this.m),this.a.add(i.onDidChangeFileSystemProviderRegistrations(()=>{const n=this.get();this.l.set(!!(n&&i.hasProvider(n)))})),this.a.add(s.onModelAdded(n=>{Io(n.uri,this.get())&&this.q()})),this.a.add(s.onModelLanguageChanged(n=>{Io(n.model.uri,this.get())&&this.q()}))}dispose(){this.a.dispose()}q(){const t=this.get();if(!t){this.i.set(null);return}const i=this.p.getModel(t)?.getLanguageId()??this.o.guessLanguageIdByFilepathOrFirstLine(t);this.i.set(i)}set(t){t=t??void 0,!Io(this.b,t)&&(this.b=t,this.m.bufferChangeEvents(()=>{this.c.set(t?t.toString():null),this.d.set(t?t.scheme:null),this.f.set(t?tr(t):null),this.g.set(t?this.r(th(t)):null),this.h.set(t?this.r(t):null),this.q(),this.j.set(t?TD(t):null),this.k.set(!!t),this.l.set(t?this.n.hasProvider(t):!1)}))}r(t){return t.scheme===V.file?t.fsPath:t.path}reset(){this.b=void 0,this.m.bufferChangeEvents(()=>{this.c.reset(),this.d.reset(),this.f.reset(),this.g.reset(),this.h.reset(),this.i.reset(),this.j.reset(),this.k.reset(),this.l.reset()})}get(){return this.b}};i9=or=__decorate([__param(0,rm),__param(1,T6),__param(2,MT),__param(3,FT)],i9);var r9;(function(e){e.UseFileStorage="chat.useFileStorage",e.AgentEnabled="chat.agent.enabled",e.Edits2Enabled="chat.edits2.enabled",e.ExtensionToolsEnabled="chat.extensionTools.enabled"})(r9||(r9={}));var Dr;(function(e){e.Ask="ask",e.Edit="edit",e.Agent="agent"})(Dr||(Dr={}));var ti;(function(e){e.Panel="panel",e.Terminal="terminal",e.Notebook="notebook",e.Editor="editor"})(ti||(ti={})),function(e){function t(i){switch(i){case"panel":return e.Panel;case"terminal":return e.Terminal;case"notebook":return e.Notebook;case"editor":return e.Editor}return e.Panel}e.fromRaw=t}(ti||(ti={}));var Ls;(function(e){e.responseVote=new C("chatSessionResponseVote","",{type:"string",description:d(5639,null)}),e.responseDetectedAgentCommand=new C("chatSessionResponseDetectedAgentOrCommand",!1,{type:"boolean",description:d(5640,null)}),e.responseSupportsIssueReporting=new C("chatResponseSupportsIssueReporting",!1,{type:"boolean",description:d(5641,null)}),e.responseIsFiltered=new C("chatSessionResponseFiltered",!1,{type:"boolean",description:d(5642,null)}),e.responseHasError=new C("chatSessionResponseError",!1,{type:"boolean",description:d(5643,null)}),e.requestInProgress=new C("chatSessionRequestInProgress",!1,{type:"boolean",description:d(5644,null)}),e.isRequestPaused=new C("chatRequestIsPaused",!1,{type:"boolean",description:d(5645,null)}),e.canRequestBePaused=new C("chatCanRequestBePaused",!1,{type:"boolean",description:d(5646,null)}),e.isResponse=new C("chatResponse",!1,{type:"boolean",description:d(5647,null)}),e.isRequest=new C("chatRequest",!1,{type:"boolean",description:d(5648,null)}),e.itemId=new C("chatItemId","",{type:"string",description:d(5649,null)}),e.lastItemId=new C("chatLastItemId",[],{type:"string",description:d(5650,null)}),e.editApplied=new C("chatEditApplied",!1,{type:"boolean",description:d(5651,null)}),e.inputHasText=new C("chatInputHasText",!1,{type:"boolean",description:d(5652,null)}),e.inputHasFocus=new C("chatInputHasFocus",!1,{type:"boolean",description:d(5653,null)}),e.inChatInput=new C("inChatInput",!1,{type:"boolean",description:d(5654,null)}),e.inChatSession=new C("inChat",!1,{type:"boolean",description:d(5655,null)}),e.hasPromptFile=new C("chatPromptFileAttached",!1,{type:"boolean",description:d(5656,null)}),e.chatMode=new C("chatMode",Dr.Ask,{type:"string",description:d(5657,null)}),e.supported=gt.or(LT.negate(),OT.notEqualsTo(""),gt.has("config.chat.experimental.serverlessWebEnabled")),e.enabled=new C("chatIsEnabled",!1,{type:"boolean",description:d(5658,null)}),e.extensionParticipantRegistered=new C("chatPanelExtensionParticipantRegistered",!1,{type:"boolean",description:d(5659,null)}),e.panelParticipantRegistered=new C("chatPanelParticipantRegistered",!1,{type:"boolean",description:d(5660,null)}),e.editingParticipantRegistered=new C("chatEditingParticipantRegistered",!1,{type:"boolean",description:d(5661,null)}),e.chatEditingCanUndo=new C("chatEditingCanUndo",!1,{type:"boolean",description:d(5662,null)}),e.chatEditingCanRedo=new C("chatEditingCanRedo",!1,{type:"boolean",description:d(5663,null)}),e.extensionInvalid=new C("chatExtensionInvalid",!1,{type:"boolean",description:d(5664,null)}),e.inputCursorAtTop=new C("chatCursorAtTop",!1),e.inputHasAgent=new C("chatInputHasAgent",!1),e.location=new C("chatLocation",void 0),e.inQuickChat=new C("quickChatHasFocus",!1,{type:"boolean",description:d(5665,null)}),e.hasFileAttachments=new C("chatHasFileAttachments",!1,{type:"boolean",description:d(5666,null)}),e.languageModelsAreUserSelectable=new C("chatModelsAreUserSelectable",!1,{type:"boolean",description:d(5667,null)}),e.Setup={hidden:new C("chatSetupHidden",!1,!0),installed:new C("chatSetupInstalled",!1,!0),disabled:new C("chatSetupDisabled",!1,!0),later:new C("chatSetupLater",!1,!0)},e.Entitlement={signedOut:new C("chatEntitlementSignedOut",!1,!0),canSignUp:new C("chatPlanCanSignUp",!1,!0),free:new C("chatPlanFree",!1,!0),pro:new C("chatPlanPro",!1,!0),proPlus:new C("chatPlanProPlus",!1,!0),business:new C("chatPlanBusiness",!1,!0),enterprise:new C("chatPlanEnterprise",!1,!0)},e.chatQuotaExceeded=new C("chatQuotaExceeded",!1,!0),e.completionsQuotaExceeded=new C("completionsQuotaExceeded",!1,!0),e.Editing={agentModeDisallowed:new C("chatAgentModeDisallowed",void 0,{type:"boolean",description:d(5668,null)}),hasToolConfirmation:new C("chatHasToolConfirmation",!1,{type:"boolean",description:d(5669,null)})},e.Tools={toolsCount:new C("toolsCount",0,{type:"number",description:d(5670,null)})},e.Modes={hasCustomChatModes:new C("chatHasCustomChatModes",!1,{type:"boolean",description:d(5671,null)})},e.panelLocation=new C("chatPanelLocation",void 0,{type:"number",description:d(5672,null)})})(Ls||(Ls={}));var s9;(function(e){e.inEditingMode=gt.or(Ls.chatMode.isEqualTo(Dr.Edit),Ls.chatMode.isEqualTo(Dr.Agent))})(s9||(s9={}));var Nc,BT=B("chatAgentService"),n9=class extends ne{static{this.AGENT_LEADER="@"}constructor(t){super(),this.t=t,this.b=new Map,this.f=new P,this.onDidChangeAgents=this.f.event,this.g=new Set,this.r=!1,this.s=new Map,this.y=new Map,this.h=Ls.enabled.bindTo(this.t),this.j=Ls.extensionParticipantRegistered.bindTo(this.t),this.m=Ls.panelParticipantRegistered.bindTo(this.t),this.n=Ls.editingParticipantRegistered.bindTo(this.t),this.B(t.onDidChangeContext(i=>{i.affectsSome(this.g)&&this.w()}))}registerAgent(t,i){if(this.getAgent(t))throw new Error(`Agent already registered: ${JSON.stringify(t)}`);const s=this,n=i.slashCommands;i={...i,get slashCommands(){return n.filter(a=>!a.when||s.t.contextMatchesRules(gt.deserialize(a.when)))}};const o={data:i};return this.b.set(t,o),this.u(),this.w(),this.f.fire(void 0),oe(()=>{this.b.delete(t),this.u(),this.w(),this.f.fire(void 0)})}u(){this.g.clear();for(const t of this.b.values())if(t.data.when){const i=gt.deserialize(t.data.when);for(const r of i?.keys()||[])this.g.add(r)}}w(){let t=!1,i=!1,r=!1,s=!1;for(const n of this.getAgents())n.isDefault&&(n.isCore||(i=!0),n.modes.includes(Dr.Agent)?s=!0:n.modes.includes(Dr.Edit)?t=!0:r=!0);this.n.set(t),this.m.set(r),this.j.set(i),s!==this.r&&(this.r=s,this.f.fire(this.getDefaultAgent(ti.Panel,Dr.Agent)))}registerAgentImplementation(t,i){const r=this.b.get(t);if(!r)throw new Error(`Unknown agent: ${JSON.stringify(t)}`);if(r.impl)throw new Error(`Agent already has implementation: ${JSON.stringify(t)}`);return r.data.isDefault&&this.h.set(!0),r.impl=i,this.f.fire(new zh(r.data,i)),oe(()=>{r.impl=void 0,this.f.fire(void 0),r.data.isDefault&&this.h.set(Ot.some(this.b.values(),s=>s.data.isDefault))})}registerDynamicAgent(t,i){t.isDynamic=!0;const r={data:t,impl:i};return this.b.set(t.id,r),this.f.fire(new zh(t,i)),oe(()=>{this.b.delete(t.id),this.f.fire(void 0)})}registerAgentCompletionProvider(t,i){return this.y.set(t,i),{dispose:()=>{this.y.delete(t)}}}async getAgentCompletionItems(t,i,r){return await this.y.get(t)?.(i,r)??[]}updateAgent(t,i){const r=this.b.get(t);if(!r?.impl)throw new Error(`No activated agent with id ${JSON.stringify(t)} registered`);r.data.metadata={...r.data.metadata,...i},this.f.fire(new zh(r.data,r.impl))}getDefaultAgent(t,i=Dr.Ask){return this.z(this.getActivatedAgents().filter(r=>i&&!r.modes.includes(i)?!1:!!r.isDefault&&r.locations.includes(t)))}get hasToolsAgent(){return!!this.r}getContributedDefaultAgent(t){return this.z(this.getAgents().filter(i=>!!i.isDefault&&i.locations.includes(t)))}z(t){return gI(t,i=>!i.isCore)??t.at(-1)}getAgent(t,i=!1){if(!(!this.C(t)&&!i))return this.b.get(t)?.data}C(t){const i=typeof t=="string"?this.b.get(t):t;return!i?.data.when||this.t.contextMatchesRules(gt.deserialize(i.data.when))}getAgentByFullyQualifiedId(t){const i=Ot.find(this.b.values(),r=>HT(r.data)===t)?.data;if(!(i&&!this.C(i.id)))return i}getAgents(){return Array.from(this.b.values()).map(t=>t.data).filter(t=>this.C(t.id))}getActivatedAgents(){return Array.from(this.b.values()).filter(t=>!!t.impl).filter(t=>this.C(t.data.id)).map(t=>new zh(t.data,t.impl))}getAgentsByName(t){return this.D(this.getAgents().filter(i=>i.name===t))}D(t){const i=t.filter(r=>!r.isCore);return i.length>0?i:t}agentHasDupeName(t){const i=this.getAgent(t);return i?this.getAgentsByName(i.name).filter(r=>r.extensionId.value!==i.extensionId.value).length>0:!1}async invokeAgent(t,i,r,s,n){const o=this.b.get(t);if(!o?.impl)throw new Error(`No activated agent with id "${t}"`);return await o.impl.invoke(i,r,s,n)}setRequestPaused(t,i,r){const s=this.b.get(t);if(!s?.impl)throw new Error(`No activated agent with id "${t}"`);s.impl.setRequestPaused?.(i,r)}async getFollowups(t,i,r,s,n){const o=this.b.get(t);return o?.impl?.provideFollowups?o.impl.provideFollowups(i,r,s,n):[]}async getChatTitle(t,i,r){const s=this.b.get(t);if(s?.impl?.provideChatTitle)return s.impl.provideChatTitle(i,r)}registerChatParticipantDetectionProvider(t,i){return this.s.set(t,i),oe(()=>{this.s.delete(t)})}hasChatParticipantDetectionProviders(){return this.s.size>0}async detectAgentOrCommand(t,i,r,s){const n=Ot.first(this.s.values());if(!n)return;const o=this.getAgents().reduce((u,h)=>{if(h.locations.includes(r.location)){u.push({participant:h.id,disambiguation:h.disambiguation??[]});for(const f of h.slashCommands)u.push({participant:h.id,command:f.name,disambiguation:f.disambiguation??[]})}return u},[]),a=await n.provideParticipantDetection(t,i,{...r,participants:o},s);if(!a)return;const c=this.getAgent(a.participant);if(!c)return;if(!a.command)return{agent:c};const l=c?.slashCommands.find(u=>u.name===a.command);if(l)return{agent:c,command:l}}};n9=__decorate([__param(0,rm)],n9);var zh=class{constructor(e,t){this.b=e,this.d=t}get id(){return this.b.id}get name(){return this.b.name??""}get fullName(){return this.b.fullName??""}get description(){return this.b.description??""}get extensionId(){return this.b.extensionId}get extensionPublisherId(){return this.b.extensionPublisherId}get extensionPublisherDisplayName(){return this.b.publisherDisplayName}get extensionDisplayName(){return this.b.extensionDisplayName}get isDefault(){return this.b.isDefault}get isCore(){return this.b.isCore}get metadata(){return this.b.metadata}get slashCommands(){return this.b.slashCommands}get locations(){return this.b.locations}get modes(){return this.b.modes}get disambiguation(){return this.b.disambiguation}async invoke(e,t,i,r){return this.d.invoke(e,t,i,r)}setRequestPaused(e,t){this.d.setRequestPaused&&this.d.setRequestPaused(e,t)}async provideFollowups(e,t,i,r){return this.d.provideFollowups?this.d.provideFollowups(e,t,i,r):[]}toJSON(){return this.b}},u_=B("chatAgentNameService"),o9=class{static{Nc=this}static{this.b="chat.participantNameRegistry"}constructor(t,i,r,s){if(this.h=i,this.i=r,this.j=s,this.f=Sh(this,Object.create(null)),this.g=!1,!t.chatParticipantRegistry)return;this.d=t.chatParticipantRegistry;const n=s.get(Nc.b,-1);try{this.f.set(JSON.parse(n??"{}"),void 0)}catch{s.remove(Nc.b,-1)}this.k()}k(){this.g||this.l().catch(t=>this.i.warn("Failed to fetch chat participant registry",t)).then(()=>Vi(5*60*1e3)).then(()=>this.k())}async l(){const t=await this.h.request({type:"GET",url:this.d},et.None);if(t.res.statusCode!==200)throw new Error("Could not get extensions report.");const i=await $T(t);if(!i||i.version!==1)throw new Error("Unexpected chat participant registry response.");const r=i.restrictedChatParticipants;this.f.set(r,void 0),this.j.store(Nc.b,JSON.stringify(r),-1,1)}getAgentNameRestriction(t){if(t.isCore)return!0;const i=this.m(t.name,t).get(),r=!t.fullName||this.m(t.fullName.replace(/\s/g,""),t).get();return i&&r}m(t,i){return this.f.map(s=>s[t.toLowerCase()]).map(s=>s?s.some(n=>ks(n,n.includes(".")?i.extensionId.value:i.extensionPublisherId)):!0)}dispose(){this.g=!0}};o9=Nc=__decorate([__param(0,hT),__param(1,ET),__param(2,We),__param(3,AT)],o9);function HT(e){return`${e.extensionId.value}.${e.id}`}function a9(e){const t="name"in e?e:{...e,name:e.id};return"extensionPublisherId"in t||(t.extensionPublisherId=t.extensionPublisher??""),"extensionDisplayName"in t||(t.extensionDisplayName=""),"extensionId"in t||(t.extensionId=new je("")),St(t)}var zT=B("chatEditingService"),c9;(function(e){e[e.Modified=0]="Modified",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected"})(c9||(c9={}));var l9;(function(e){e[e.Initial=0]="Initial",e[e.StreamingEdits=1]="StreamingEdits",e[e.Idle=2]="Idle",e[e.Disposed=3]="Disposed"})(l9||(l9={}));var d_=new C("chatEditingWidgetFileState",void 0,d(5673,null)),f_=new C("chatEditingAgentSupportsReadonlyReferences",void 0,d(5674,null)),p_=new C("decidedChatEditingResource",[]),g_=new C("chatEditingResource",void 0),m_=new C("inChatEditingSession",void 0),v_=new C("hasUndecidedChatEditingResource",!1),w_=new C("hasAppliedChatEdits",!1),b_=new C("applyingChatEditsFailed",!1),u9;(function(e){e[e.Created=0]="Created",e[e.Modified=1]="Modified"})(u9||(u9={}));var Gm=class sC{static{this.Kind="text"}constructor(t,i,r){this.range=t,this.editorRange=i,this.text=r,this.kind=sC.Kind}get promptText(){return this.text}},_h="#",_T="@",Mc="/",h9=class nC{static{this.Kind="var"}constructor(t,i,r,s,n){this.range=t,this.editorRange=i,this.variableName=r,this.variableArg=s,this.variableId=n,this.kind=nC.Kind}get text(){const t=this.variableArg?`:${this.variableArg}`:"";return`${_h}${this.variableName}${t}`}get promptText(){return this.text}},d9=class oC{static{this.Kind="tool"}constructor(t,i,r,s,n,o){this.range=t,this.editorRange=i,this.toolName=r,this.toolId=s,this.displayName=n,this.icon=o,this.kind=oC.Kind}get text(){return`${_h}${this.toolName}`}get promptText(){return this.text}toVariableEntry(){return{kind:"tool",id:this.toolId,name:this.toolName,range:this.range,value:void 0,icon:Et.isThemeIcon(this.icon)?this.icon:void 0,fullName:this.displayName}}},f9=class aC{static{this.Kind="toolset"}constructor(t,i,r,s,n,o){this.range=t,this.editorRange=i,this.id=r,this.name=s,this.icon=n,this.tools=o,this.kind=aC.Kind}get text(){return`${_h}${this.name}`}get promptText(){return this.text}toVariableEntry(){return{kind:"toolset",id:this.id,name:this.name,range:this.range,icon:this.icon,value:this.tools}}},p9=class cC{static{this.Kind="agent"}constructor(t,i,r){this.range=t,this.editorRange=i,this.agent=r,this.kind=cC.Kind}get text(){return`${_T}${this.agent.name}`}get promptText(){return""}},g9=class lC{static{this.Kind="subcommand"}constructor(t,i,r){this.range=t,this.editorRange=i,this.command=r,this.kind=lC.Kind}get text(){return`${Mc}${this.command.name}`}get promptText(){return""}},m9=class uC{static{this.Kind="slash"}constructor(t,i,r){this.range=t,this.editorRange=i,this.slashCommand=r,this.kind=uC.Kind}get text(){return`${Mc}${this.slashCommand.command}`}get promptText(){return`${Mc}${this.slashCommand.command}`}},v9=class hC{static{this.Kind="prompt"}constructor(t,i,r){this.range=t,this.editorRange=i,this.slashPromptCommand=r,this.kind=hC.Kind}get text(){return`${Mc}${this.slashPromptCommand.command}`}get promptText(){return`${Mc}${this.slashPromptCommand.command}`}},w9=class dC{static{this.Kind="dynamic"}constructor(t,i,r,s,n,o,a,c,l,u){this.range=t,this.editorRange=i,this.text=r,this.id=s,this.modelDescription=n,this.data=o,this.fullName=a,this.icon=c,this.isFile=l,this.isDirectory=u,this.kind=dC.Kind}get referenceText(){return this.text.replace(_h,"")}get promptText(){return this.text}toVariableEntry(){return this.id==="vscode.problems"?Zm.toEntry(this.data.filter):{kind:this.isDirectory?"directory":this.isFile?"file":"generic",id:this.id,name:this.referenceText,range:this.range,value:this.data,fullName:this.fullName,icon:this.icon}}};function WT(e){return{text:e.text,parts:e.parts.map(t=>{if(t.kind===Gm.Kind)return new Gm(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.text);if(t.kind===h9.Kind)return new h9(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.variableName,t.variableArg,t.variableId||"");if(t.kind===d9.Kind)return new d9(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.toolName,t.toolId,t.displayName,t.icon);if(t.kind===f9.Kind)return new f9(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.id,t.name,t.icon,t.tools??[]);if(t.kind===p9.Kind){let i=t.agent;return i=a9(i),new p9(new $r(t.range.start,t.range.endExclusive),t.editorRange,i)}else{if(t.kind===g9.Kind)return new g9(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.command);if(t.kind===m9.Kind)return new m9(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.slashCommand);if(t.kind===v9.Kind)return new v9(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.slashPromptCommand);if(t.kind===w9.Kind)return new w9(new $r(t.range.start,t.range.endExclusive),t.editorRange,t.text,t.id,t.modelDescription,St(t.data),t.fullName,t.icon,t.isFile,t.isDirectory);throw new Error(`Unknown chat request part: ${t.kind}`)}})}}var b9;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(b9||(b9={}));function VT(e){return!!e&&typeof e=="object"&&"uri"in e&&e.uri instanceof y&&"version"in e&&typeof e.version=="number"&&"ranges"in e&&Array.isArray(e.ranges)&&e.ranges.every(Oe.isIRange)}function qT(e){return!!e&&typeof e=="object"&&"documents"in e&&Array.isArray(e.documents)&&e.documents.every(VT)}var y9;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(y9||(y9={}));var Wh;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(Wh||(Wh={}));var x9;(function(e){e.IncorrectCode="incorrectCode",e.DidNotFollowInstructions="didNotFollowInstructions",e.IncompleteCode="incompleteCode",e.MissingContext="missingContext",e.PoorlyWrittenOrFormatted="poorlyWrittenOrFormatted",e.RefusedAValidRequest="refusedAValidRequest",e.OffensiveOrUnsafe="offensiveOrUnsafe",e.Other="other",e.WillReportIssue="willReportIssue"})(x9||(x9={}));var E9;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(E9||(E9={}));var GT=B("IChatService"),Jm,S9;(function(e){e[e.NotOmitted=0]="NotOmitted",e[e.Partial=1]="Partial",e[e.Full=2]="Full"})(S9||(S9={}));var Zm;(function(e){e.icon=te.error;function t(n){return{filterUri:n.resource,owner:n.owner,problemMessage:n.message,filterRange:{startLineNumber:n.startLineNumber,endLineNumber:n.endLineNumber,startColumn:n.startColumn,endColumn:n.endColumn}}}e.fromMarker=t;function i(n){return{id:r(n),name:s(n),icon:e.icon,value:n,kind:"diagnostic",...n}}e.toEntry=i;function r(n){return[n.filterUri,n.owner,n.filterSeverity,n.filterRange?.startLineNumber].join(":")}e.id=r;function s(n){let o;if(function(c){c[c.MaxChars=30]="MaxChars",c[c.MaxSpaceLookback=10]="MaxSpaceLookback"}(o||(o={})),n.problemMessage){if(n.problemMessage.length<30)return n.problemMessage;const c=n.problemMessage.lastIndexOf(" ",30);return c===-1||c+10<30?n.problemMessage.substring(0,30)+"\u2026":n.problemMessage.substring(0,c)+"\u2026"}let a=d(5684,null);return n.filterUri&&(a=d(5685,null,tr(n.filterUri))),a}e.label=s})(Zm||(Zm={}));var k9;(function(e){function t(i){return y.isUri(i.value)?i.value:VP(i.value)?i.value.uri:void 0}e.toUri=t})(k9||(k9={}));function JT(e){return e.kind==="image"}var $i={reason:"other"},$9=class{get session(){return this.a}get username(){return this.session.requesterUsername}get avatarIconUri(){return this.session.requesterAvatarIconUri}get attempt(){return this.b}get variableData(){return this.d}set variableData(e){this.d=e}get confirmation(){return this.e}get locationData(){return this.g}get attachedContext(){return this.h}get editedFileEvents(){return this.j}constructor(e){this.a=e.session,this.message=e.message,this.d=e.variableData,this.timestamp=e.timestamp,this.b=e.attempt??0,this.e=e.confirmation,this.g=e.locationData,this.h=e.attachedContext,this.isCompleteAddedRequest=e.isCompleteAddedRequest??!1,this.modelId=e.modelId,this.id=e.restoredId??"request_"+Ut(),this.j=e.editedFileEvents}adoptTo(e){this.a=e}},C9=class{get value(){return this.a}constructor(e){this.b="",this.d="",this.a=e,this.e()}toString(){return this.b}getMarkdown(){return this.d}e(){this.b=this.g(this.a),this.d=this.a.map(e=>e.kind==="inlineReference"?this.h(e):e.kind==="markdownContent"||e.kind==="markdownVuln"?e.content.value:"").filter(e=>e.length>0).join("")}g(e){const t=[];let i=[];for(const r of e){let s;switch(r.kind){case"treeData":case"progressMessage":case"codeblockUri":case"toolInvocation":case"toolInvocationSerialized":case"extensions":case"undoStop":case"prepareToolInvocation":continue;case"inlineReference":s={text:this.h(r)};break;case"command":s={text:r.command.title,isBlock:!0};break;case"textEditGroup":case"notebookEditGroup":s={text:d(5686,null),isBlock:!0};break;case"confirmation":s={text:`${r.title}
${r.message}`,isBlock:!0};break;default:s={text:r.content.value};break}s.isBlock?(i.length&&(t.push(i.join("")),i=[]),t.push(s.text)):i.push(s.text)}return i.length&&t.push(i.join("")),t.join(`

`)}h(e){return"uri"in e.inlineReference?this.j(e.inlineReference.uri):"name"in e.inlineReference?"`"+e.inlineReference.name+"`":this.j(e.inlineReference)}j(e){return e.scheme===V.http||e.scheme===V.https?e.toString(!1):tr(e)}},ZT=class extends C9{constructor(e,t){let i=e.value.findIndex(r=>r.kind==="undoStop"&&r.id===t);e.value[i+1]?.kind==="codeblockUri"&&e.value[i-1]?.kind==="markdownContent"&&i--,super(i===-1?e.value.slice():e.value.slice(0,i)),this.undoStop=t}},YT=class extends C9{get onDidChangeValue(){return this.k.event}constructor(e){super(Ni(e).map(t=>Jr(t)?{content:t,kind:"markdownContent"}:"kind"in t?t:{kind:"treeData",treeData:t})),this.k=new P,this.l=[]}dispose(){this.k.dispose()}clear(){this.a=[],this.e(!0)}updateContent(e,t){if(e.kind==="markdownContent"){const i=this.a.filter(r=>r.kind!=="textEditGroup").at(-1);if(!i||i.kind!=="markdownContent"||!KT(i.content,e.content))this.a.push(e);else{const r=this.a.indexOf(i);this.a[r]={...i,content:eR(i.content,e.content)}}this.e(t)}else if(e.kind==="textEdit"||e.kind==="notebookEdit"){const r=e.uri.scheme===V.vscodeNotebookCell&&!this.a.find(c=>c.kind==="notebookEditGroup")?void 0:Ih.parse(e.uri)?.notebook,s=r??e.uri;let n=!1;const o=e.kind==="textEdit"&&!r?"textEditGroup":"notebookEditGroup",a=o==="textEditGroup"?e.edits:e.edits.map(c=>qP.isTextEdit(c)?{uri:e.uri,edit:c}:c);for(let c=0;!n&&c<this.a.length;c++){const l=this.a[c];l.kind===o&&!l.done&&Io(l.uri,s)&&(l.edits.push(a),l.done=e.done,n=!0)}n||this.a.push({kind:o,uri:s,edits:o==="textEditGroup"?[a]:a,done:e.done}),this.e(t)}else if(e.kind==="progressTask"){const i=this.a.push(e)-1;this.e(t);const r=e.onDidAddProgress(()=>{this.e(!1)});e.task?.().then(s=>{r.dispose(),typeof s=="string"&&(this.a[i].content=new No(s)),this.e(!1)})}else e.kind==="toolInvocation"?(e.confirmationMessages&&e.confirmed.p.then(()=>{this.e(!1)}),e.isCompletePromise.then(()=>{this.e(!1)}),this.a.push(e),this.e(t)):(this.a.push(e),this.e(t))}addCitation(e){this.l.push(e),this.e()}e(e){super.e(),this.k&&(this.b+=this.l.length?`

`+tR(this.l):"",e||this.k.fire())}},Vh=class extends ne{get session(){return this.b}get shouldBeRemovedOnSend(){return this.w}get isComplete(){return this.j}set shouldBeRemovedOnSend(e){this.w=e,this.a.fire($i)}get isCanceled(){return this.m}get vote(){return this.n}get voteDownReason(){return this.t}get followups(){return this.C}get entireResponse(){return this.z||this.y}get result(){return this.u}get username(){return this.session.responderUsername}get avatarIcon(){return this.session.responderAvatarIcon}get agent(){return this.g}get slashCommand(){return this.h}get agentOrSlashCommandDetected(){return this.D??!1}get usedContext(){return this.F}get contentReferences(){return Array.from(this.G)}get codeCitations(){return this.H}get progressMessages(){return this.I}get isStale(){return this.J}get isPaused(){return this.L}get response(){const e=this.w?.afterUndoStop;return e?(this.M?.undoStop!==e&&(this.M=new ZT(this.y,e)),this.M):this.z||this.y}constructor(e){super(),this.a=this.B(new P),this.onDidChange=this.a.event,this.G=[],this.H=[],this.I=[],this.J=!1,this.L=Sh("isPaused",!1),this.b=e.session,this.g=e.agent,this.h=e.slashCommand,this.requestId=e.requestId,this.j=e.isComplete??!1,this.m=e.isCanceled??!1,this.n=e.vote,this.t=e.voteDownReason,this.u=e.result,this.C=e.followups?[...e.followups]:void 0,this.isCompleteAddedRequest=e.isCompleteAddedRequest??!1,this.w=e.shouldBeRemovedOnSend,this.J=Array.isArray(e.responseContent)&&(e.responseContent.length!==0||Jr(e.responseContent)&&e.responseContent.value.length!==0),this.y=this.B(new YT(e.responseContent));const t=xA(this,this.onDidChange);this.isPendingConfirmation=t.map((i,r)=>(t.read(r),this.y.value.some(s=>s.kind==="toolInvocation"&&s.isConfirmed===void 0||s.kind==="confirmation"&&s.isUsed===!1))),this.isInProgress=t.map((i,r)=>(t.read(r),!this.isPendingConfirmation.read(r)&&!this.shouldBeRemovedOnSend&&!this.j)),this.B(this.y.onDidChangeValue(()=>this.a.fire($i))),this.id=e.restoredId??"response_"+Ut()}updateContent(e,t){this.O(()=>this.y.updateContent(e,t))}addUndoStop(e){this.O(()=>{this.a.fire({reason:"undoStop",id:e.id}),this.y.updateContent(e,!0)})}applyReference(e){e.kind==="usedContext"?this.F=e:e.kind==="reference"&&(this.G.push(e),this.a.fire($i))}applyCodeCitation(e){this.H.push(e),this.y.addCitation(e),this.a.fire($i)}setAgent(e,t){this.g=e,this.h=t,this.D=!e.isDefault||!!t,this.a.fire($i)}setResult(e){this.u=e,this.a.fire($i)}complete(){this.u?.errorDetails?.responseIsRedacted&&this.y.clear(),this.j=!0,this.a.fire($i)}cancel(){this.j=!0,this.m=!0,this.a.fire($i)}setFollowups(e){this.C=e,this.a.fire($i)}setVote(e){this.n=e,this.a.fire($i)}setVoteDownReason(e){this.t=e,this.a.fire($i)}setEditApplied(e,t){return!this.response.value.includes(e)||!e.state?!1:(e.state.applied=t,this.a.fire($i),!0)}adoptTo(e){this.b=e,this.a.fire($i)}setPaused(e,t){this.L.set(e,t),this.a.fire($i),this.N?.forEach(i=>i()),this.N=void 0}finalizeUndoState(){this.z=this.response,this.M=void 0,this.w=void 0}O(e){this.L.get()?(this.N??=[],this.N.push(e)):e()}},I9;(function(e){e[e.NotPausable=0]="NotPausable",e[e.Paused=1]="Paused",e[e.Unpaused=2]="Unpaused"})(I9||(I9={}));function QT(e){const t=e;return typeof t=="object"&&typeof t.requesterUsername=="string"}function XT(e){const t=e;return QT(e)&&typeof t.creationDate=="number"&&typeof t.sessionId=="string"&&e.requests.every(i=>!i.usedContext||qT(i.usedContext))}var D9;(function(e){e[e.Removal=0]="Removal",e[e.Resend=1]="Resend",e[e.Adoption=2]="Adoption"})(D9||(D9={}));var P9=Jm=class extends ne{static getDefaultTitle(t){const i=t.at(0)?.message??"";return(typeof i=="string"?i:i.text).split(`
`)[0].substring(0,50)}get sessionId(){return this.h}get requestInProgress(){return this.requestInProgressObs.get()}get requestPausibility(){const t=this.lastRequest;return!t?.response?.agent||t.response.isComplete||t.response.isPendingConfirmation.get()?0:t.response.isPaused.get()?1:2}get hasRequests(){return this.g.length>0}get lastRequest(){return this.g.at(-1)}get creationDate(){return this.j}get lastMessageDate(){return this.m}get n(){return this.G.getDefaultAgent(ti.Panel,Dr.Ask)}get requesterUsername(){return this.n?.metadata.requester?.name??this.C?.requesterUsername??""}get responderUsername(){return this.n?.fullName??this.C?.responderUsername??""}get requesterAvatarIconUri(){return this.n?.metadata.requester?.icon??this.t}get responderAvatarIcon(){return this.n?.metadata.themeIcon??this.u}get isImported(){return this.w}get customTitle(){return this.y}get title(){return this.y||Jm.getDefaultTitle(this.g)}get initialLocation(){return this.D}get editingSessionObs(){return this.z}get editingSession(){return this.z?.promiseResult.get()?.data}constructor(t,i,r,s,n){super(),this.C=t,this.D=i,this.F=r,this.G=s,this.H=n,this.a=this.B(new P),this.onDidDispose=this.a.event,this.b=this.B(new P),this.onDidChange=this.b.event,this.w=!1,this.I=new Ft,this.N=void 0;const o=XT(t);t&&!o&&this.F.warn(`ChatModel#constructor: Loaded malformed session data: ${JSON.stringify(t)}`),this.w=!!t&&!o||(t?.isImported??!1),this.h=o&&t.sessionId||Ut(),this.g=t?this.J(t):[],this.j=o&&t.creationDate||Date.now(),this.m=o&&t.lastMessageDate||this.j,this.y=o?t.customTitle:void 0,this.t=t?.requesterAvatarIconUri&&y.revive(t.requesterAvatarIconUri),this.u=qu(t?.responderAvatarIconUri)?y.revive(t.responderAvatarIconUri):t?.responderAvatarIconUri;const a=Fm(this,this.onDidChange,()=>this.g.at(-1)?.response);this.requestInProgressObs=a.map((c,l)=>c?.isInProgress.read(l)??!1)}startEditingSession(t){const i=t?this.H.startOrContinueGlobalEditingSession(this):this.H.createEditingSession(this);this.z=new wA(i),this.z.promise.then(r=>{this.q.isDisposed?r.dispose():this.B(r)})}notifyEditingAction(t){const i=t.outcome==="accepted"?Wo.Keep:t.outcome==="rejected"?Wo.Undo:t.outcome==="userModified"?Wo.UserModification:null;i!==null&&(!this.I.has(t.uri)||this.I.get(t.uri)?.eventKind===Wo.Keep)&&this.I.set(t.uri,{eventKind:i,uri:t.uri})}J(t){const i=t.requests;if(!Array.isArray(i))return this.F.error(`Ignoring malformed session data: ${JSON.stringify(t)}`),[];try{return i.map(r=>{const s=typeof r.message=="string"?this.M(r.message):WT(r.message),n=this.L(r.variableData),o=new $9({session:this,message:s,variableData:n,timestamp:r.timestamp??-1,restoredId:r.requestId,confirmation:r.confirmation,editedFileEvents:r.editedFileEvents});if(o.shouldBeRemovedOnSend=r.isHidden?{requestId:r.requestId}:r.shouldBeRemovedOnSend,r.response||r.result||r.responseErrorDetails){const a=r.agent&&"metadata"in r.agent?a9(r.agent):void 0,c="responseErrorDetails"in r?{errorDetails:r.responseErrorDetails}:r.result;o.response=new Vh({responseContent:r.response??[new No(r.response)],session:this,agent:a,slashCommand:r.slashCommand,requestId:o.id,isComplete:!0,isCanceled:r.isCanceled,vote:r.vote,voteDownReason:r.voteDownReason,result:c,followups:r.followups,restoredId:r.responseId}),o.response.shouldBeRemovedOnSend=r.isHidden?{requestId:r.requestId}:r.shouldBeRemovedOnSend,r.usedContext&&o.response.applyReference(St(r.usedContext)),r.contentReferences?.forEach(l=>o.response.applyReference(St(l))),r.codeCitations?.forEach(l=>o.response.applyCodeCitation(St(l)))}return o})}catch(r){return this.F.error("Failed to parse chat data",r),[]}}L(t){const i=t&&Array.isArray(t.variables)?t:{variables:[]};return i.variables=i.variables.map(r=>r&&"values"in r&&Array.isArray(r.values)?{kind:"generic",id:r.id??"",name:r.name,value:r.values[0]?.value,range:r.range,modelDescription:r.modelDescription,references:r.references}:r),i}M(t){const i=[new Gm(new $r(0,t.length),{startColumn:1,startLineNumber:1,endColumn:1,endLineNumber:1},t)];return{text:t,parts:i}}toggleLastRequestPaused(t){if(this.requestPausibility!==0&&this.lastRequest?.response?.agent){const i=t??!this.lastRequest.response.isPaused.get();this.lastRequest.response.setPaused(i),this.G.setRequestPaused(this.lastRequest.response.agent.id,this.lastRequest.id,i),this.b.fire({kind:"changedRequest",request:this.lastRequest})}}getRequests(){return this.g}get checkpoint(){return this.N}setDisabledRequests(t){this.g.forEach(i=>{const r=t.find(s=>s.requestId===i.id);i.shouldBeRemovedOnSend=r,i.response&&(i.response.shouldBeRemovedOnSend=r)}),this.b.fire({kind:"setHidden",hiddenRequestIds:t})}addRequest(t,i,r,s,n,o,a,c,l,u){const h=[...this.I.values()];this.I.clear();const f=new $9({session:this,message:t,variableData:i,timestamp:Date.now(),attempt:r,confirmation:o,locationData:a,attachedContext:c,isCompleteAddedRequest:l,modelId:u,editedFileEvents:h.length?h:void 0});return f.response=new Vh({responseContent:[],session:this,agent:s,slashCommand:n,requestId:f.id,isCompleteAddedRequest:l}),this.g.push(f),this.m=Date.now(),this.b.fire({kind:"addRequest",request:f}),f}setCustomTitle(t){this.y=t}updateRequest(t,i){t.variableData=i,this.b.fire({kind:"changedRequest",request:t})}adoptRequest(t){const i=t.session,r=i.g.findIndex(s=>s.id===t.id);r!==-1&&(i.g.splice(r,1),t.adoptTo(this),t.response?.adoptTo(this),this.g.push(t),i.b.fire({kind:"removeRequest",requestId:t.id,responseId:t.response?.id,reason:2}),this.b.fire({kind:"addRequest",request:t}))}acceptResponseProgress(t,i,r){if(t.response||(t.response=new Vh({responseContent:[],session:this,requestId:t.id})),t.response.isComplete)throw new Error("acceptResponseProgress: Adding progress to a completed response");i.kind==="usedContext"||i.kind==="reference"?t.response.applyReference(i):i.kind==="codeCitation"?t.response.applyCodeCitation(i):i.kind==="move"?this.b.fire({kind:"move",target:i.uri,range:i.range}):i.kind==="codeblockUri"&&i.isEdit?(t.response.addUndoStop({id:Ut(),kind:"undoStop"}),t.response.updateContent(i,r)):i.kind==="progressTaskResult"?this.F.error(`Couldn't handle progress: ${JSON.stringify(i)}`):t.response.updateContent(i,r)}removeRequest(t,i=0){const r=this.g.findIndex(n=>n.id===t),s=this.g[r];r!==-1&&(this.b.fire({kind:"removeRequest",requestId:s.id,responseId:s.response?.id,reason:i}),this.g.splice(r,1),s.response?.dispose())}cancelRequest(t){t.response&&t.response.cancel()}setResponse(t,i){t.response||(t.response=new Vh({responseContent:[],session:this,requestId:t.id})),t.response.setResult(i)}completeResponse(t){if(!t.response)throw new Error("Call setResponse before completeResponse");t.response.complete(),this.b.fire({kind:"completedRequest",request:t})}setFollowups(t,i){t.response&&t.response.setFollowups(i)}setResponseModel(t,i){t.response=i,this.b.fire({kind:"addResponse",response:i})}toExport(){return{requesterUsername:this.requesterUsername,requesterAvatarIconUri:this.requesterAvatarIconUri,responderUsername:this.responderUsername,responderAvatarIconUri:this.responderAvatarIcon,initialLocation:this.initialLocation,requests:this.g.map(t=>{const i={...t.message,parts:t.message.parts.map(n=>n&&"toJSON"in n?n.toJSON():n)},r=t.response?.agent,s=r&&"toJSON"in r?r.toJSON():r?{...r}:void 0;return{requestId:t.id,message:i,variableData:t.variableData,response:t.response?t.response.entireResponse.value.map(n=>n.kind==="treeData"?n.treeData:n.kind==="markdownContent"?n.content:n):void 0,responseId:t.response?.id,shouldBeRemovedOnSend:t.shouldBeRemovedOnSend,result:t.response?.result,followups:t.response?.followups,isCanceled:t.response?.isCanceled,vote:t.response?.vote,voteDownReason:t.response?.voteDownReason,agent:s,slashCommand:t.response?.slashCommand,usedContext:t.response?.usedContext,contentReferences:t.response?.contentReferences,codeCitations:t.response?.codeCitations,timestamp:t.timestamp,confirmation:t.confirmation,editedFileEvents:t.editedFileEvents}})}}toJSON(){return{version:3,...this.toExport(),sessionId:this.sessionId,creationDate:this.j,isImported:this.w,lastMessageDate:this.m,customTitle:this.y}}dispose(){this.g.forEach(t=>t.response?.dispose()),this.a.fire(),super.dispose()}};P9=Jm=__decorate([__param(2,We),__param(3,BT),__param(4,zT)],P9);function KT(e,t){if(e.baseUri&&t.baseUri){if(!(e.baseUri.scheme===t.baseUri.scheme&&e.baseUri.authority===t.baseUri.authority&&e.baseUri.path===t.baseUri.path&&e.baseUri.query===t.baseUri.query&&e.baseUri.fragment===t.baseUri.fragment))return!1}else if(e.baseUri||t.baseUri)return!1;return oi(e.isTrusted,t.isTrusted)&&e.supportHtml===t.supportHtml&&e.supportThemeIcons===t.supportThemeIcons}function eR(e,t){const i=typeof t=="string"?t:t.value;return{value:e.value+i,isTrusted:e.isTrusted,supportThemeIcons:e.supportThemeIcons,supportHtml:e.supportHtml,baseUri:e.baseUri}}function tR(e){if(e.length===0)return"";const t=e.reduce((r,s)=>r.add(s.license),new Set);return t.size===1?d(5687,null,t.size):d(5688,null,t.size)}var Wo;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(Wo||(Wo={}));var A9;(function(e){e.scheme="vscode-chat-response-resource";function t(r,s,n,o,a){return y.from({scheme:e.scheme,authority:r,path:`/tool/${s}/${n}/${o}`+(a?`/${a}`:"")})}e.createUri=t;function i(r){if(r.scheme!==e.scheme)return;const s=r.path.split("/");if(s.length<5)return;const[,n,o,a,c]=s;if(n==="tool")return{sessionId:r.authority,requestId:o,toolCallId:a,index:Number(c)}}e.parseUri=i})(A9||(A9={}));var T9;(function(e){e.Delimiter="\0"})(T9||(T9={}));var R9;(function(e){e[e.IsSame=0]="IsSame",e[e.Disconnected=1]="Disconnected",e[e.IsChild=2]="IsChild",e[e.IsParent=3]="IsParent"})(R9||(R9={}));var Le=class Yi{static fromExtHostTestItem(t,i,r=t.parent){if(t._isRoot)return new Yi([i]);const s=[t.id];for(let n=r;n&&n.id!==i;n=n.parent)s.push(n.id);return s.push(i),new Yi(s.reverse())}static isRoot(t){return!t.includes("\0")}static root(t){const i=t.indexOf("\0");return i===-1?t:t.slice(0,i)}static fromString(t){return new Yi(t.split("\0"))}static join(t,i){return new Yi([...t.path,i])}static split(t){return t.split("\0")}static joinToString(t,i){return t.toString()+"\0"+i}static parentId(t){const i=t.lastIndexOf("\0");return i===-1?void 0:t.slice(0,i)}static localId(t){const i=t.lastIndexOf("\0");return i===-1?t:t.slice(i+1)}static isChild(t,i){return i[t.length]==="\0"&&i.startsWith(t)}static compare(t,i){return t===i?0:Yi.isChild(t,i)?2:Yi.isChild(i,t)?3:1}static getLengthOfCommonPrefix(t,i){if(t===0)return 0;let r=0;for(;r<t-1;){for(let s=1;s<t;s++){const n=i(s-1),o=i(s);if(n.path[r]!==o.path[r])return r}r++}return r}constructor(t,i=t.length){if(this.path=t,this.d=i,t.length===0||i<1)throw new Error("cannot create test with empty path")}get rootId(){return new Yi(this.path,1)}get parentId(){return this.d>1?new Yi(this.path,this.d-1):void 0}get localId(){return this.path[this.d-1]}get controllerId(){return this.path[0]}get isRoot(){return this.d===1}*idsFromRoot(){for(let t=1;t<=this.d;t++)yield new Yi(this.path,t)}*idsToRoot(){for(let t=this.d;t>0;t--)yield new Yi(this.path,t)}compare(t){if(typeof t=="string")return Yi.compare(this.toString(),t);for(let i=0;i<t.d&&i<this.d;i++)if(t.path[i]!==this.path[i])return 1;return t.d>this.d?2:t.d<this.d?3:0}toJSON(){return this.toString()}toString(){if(!this.c){this.c=this.path[0];for(let t=1;t<this.d;t++)this.c+="\0",this.c+=this.path[t]}return this.c}},L9;(function(e){e[e.Unset=0]="Unset",e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(L9||(L9={}));var N9;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(N9||(N9={}));var M9;(function(e){e[e.Refresh=2]="Refresh",e[e.CodeRelatedToTest=4]="CodeRelatedToTest",e[e.TestRelatedToCode=8]="TestRelatedToCode"})(M9||(M9={}));var F9;(function(e){e[e.Run=2]="Run",e[e.Debug=4]="Debug",e[e.Coverage=8]="Coverage",e[e.HasNonDefaultProfile=16]="HasNonDefaultProfile",e[e.HasConfigurable=32]="HasConfigurable",e[e.SupportsContinuousRun=64]="SupportsContinuousRun"})(F9||(F9={}));var x_={2:d(12519,null),4:d(12520,null),8:d(12521,null)},iR=e=>"runId"in e,Vo;(function(e){e.serialize=t=>({range:t.range.toJSON(),uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({range:Oe.lift(i.range),uri:t.asCanonicalUri(y.revive(i.uri))})})(Vo||(Vo={}));var O9;(function(e){e[e.Error=0]="Error",e[e.Output=1]="Output"})(O9||(O9={}));var qh;(function(e){e.serialize=t=>({label:t.label,uri:t.uri?.toJSON(),position:t.position?.toJSON()}),e.deserialize=(t,i)=>({label:i.label,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,position:i.position?ji.lift(i.position):void 0})})(qh||(qh={}));var Gh;(function(e){e.serialize=t=>({message:t.message,type:0,expected:t.expected,actual:t.actual,contextValue:t.contextValue,location:t.location&&Vo.serialize(t.location),stackTrace:t.stackTrace?.map(qh.serialize)}),e.deserialize=(t,i)=>({message:i.message,type:0,expected:i.expected,actual:i.actual,contextValue:i.contextValue,location:i.location&&Vo.deserialize(t,i.location),stackTrace:i.stackTrace&&i.stackTrace.map(r=>qh.deserialize(t,r))})})(Gh||(Gh={}));var Jh;(function(e){e.serialize=t=>({message:t.message,type:1,offset:t.offset,length:t.length,location:t.location&&Vo.serialize(t.location)}),e.deserialize=(t,i)=>({message:i.message,type:1,offset:i.offset,length:i.length,location:i.location&&Vo.deserialize(t,i.location)})})(Jh||(Jh={}));var Zh;(function(e){e.serialize=t=>t.type===0?Gh.serialize(t):Jh.serialize(t),e.deserialize=(t,i)=>i.type===0?Gh.deserialize(t,i):Jh.deserialize(t,i),e.isDiffable=t=>t.type===0&&t.actual!==void 0&&t.expected!==void 0})(Zh||(Zh={}));var Fc;(function(e){e.serializeWithoutMessages=t=>({state:t.state,duration:t.duration,messages:[]}),e.serialize=t=>({state:t.state,duration:t.duration,messages:t.messages.map(Zh.serialize)}),e.deserialize=(t,i)=>({state:i.state,duration:i.duration,messages:i.messages.map(r=>Zh.deserialize(t,r))})})(Fc||(Fc={}));var U9="\0",Yh=(e,t)=>e+U9+t,j9=e=>{const t=e.indexOf(U9);return{ctrlId:e.slice(0,t),tagId:e.slice(t+1)}},Qh;(function(e){e.serialize=t=>({extId:t.extId,label:t.label,tags:t.tags,busy:t.busy,children:void 0,uri:t.uri?.toJSON(),range:t.range?.toJSON()||null,description:t.description,error:t.error,sortText:t.sortText}),e.deserialize=(t,i)=>({extId:i.extId,label:i.label,tags:i.tags,busy:i.busy,children:void 0,uri:i.uri?t.asCanonicalUri(y.revive(i.uri)):void 0,range:i.range?Oe.lift(i.range):null,description:i.description,error:i.error,sortText:i.sortText})})(Qh||(Qh={}));var B9;(function(e){e[e.NotExpandable=0]="NotExpandable",e[e.Expandable=1]="Expandable",e[e.BusyExpanding=2]="BusyExpanding",e[e.Expanded=3]="Expanded"})(B9||(B9={}));var Ns;(function(e){e.serialize=t=>({expand:t.expand,item:Qh.serialize(t.item)}),e.deserialize=(t,i)=>({controllerId:Le.root(i.item.extId),expand:i.expand,item:Qh.deserialize(t,i.item)})})(Ns||(Ns={}));var Oc;(function(e){e.serialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.uri!==void 0&&(i.uri=t.item.uri?.toJSON()),t.item.range!==void 0&&(i.range=t.item.range?.toJSON()),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}},e.deserialize=t=>{let i;return t.item&&(i={},t.item.label!==void 0&&(i.label=t.item.label),t.item.tags!==void 0&&(i.tags=t.item.tags),t.item.busy!==void 0&&(i.busy=t.item.busy),t.item.range!==void 0&&(i.range=t.item.range?Oe.lift(t.item.range):null),t.item.description!==void 0&&(i.description=t.item.description),t.item.error!==void 0&&(i.error=t.item.error),t.item.sortText!==void 0&&(i.sortText=t.item.sortText)),{extId:t.extId,expand:t.expand,item:i}}})(Oc||(Oc={}));var Ym=(e,t)=>{t.expand!==void 0&&(e.expand=t.expand),t.item!==void 0&&(e.item=e.item?Object.assign(e.item,t.item):t.item)},H9;(function(e){e.serializeWithoutMessages=t=>({...Ns.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Fc.serializeWithoutMessages)}),e.serialize=t=>({...Ns.serialize(t),ownComputedState:t.ownComputedState,computedState:t.computedState,tasks:t.tasks.map(Fc.serialize)}),e.deserialize=(t,i)=>({...Ns.deserialize(t,i),ownComputedState:i.ownComputedState,computedState:i.computedState,tasks:i.tasks.map(r=>Fc.deserialize(t,r)),retired:!0})})(H9||(H9={}));var Qm;(function(e){e.empty=()=>({covered:0,total:0}),e.sum=(t,i)=>{t.covered+=i.covered,t.total+=i.total}})(Qm||(Qm={}));var z9;(function(e){e.serialize=t=>({id:t.id,statement:t.statement,branch:t.branch,declaration:t.declaration,testIds:t.testIds,uri:t.uri.toJSON()}),e.deserialize=(t,i)=>({id:i.id,statement:i.statement,branch:i.branch,declaration:i.declaration,testIds:i.testIds,uri:t.asCanonicalUri(y.revive(i.uri))}),e.empty=(t,i)=>({id:t,uri:i,statement:Qm.empty()})})(z9||(z9={}));function Xm(e){return{...e,location:e.location?.toJSON()}}function Km(e){return e.location=e.location?ji.isIPosition(e.location)?ji.lift(e.location):Oe.lift(e.location):void 0,e}var _9;(function(e){e[e.Declaration=0]="Declaration",e[e.Statement=1]="Statement",e[e.Branch=2]="Branch"})(_9||(_9={}));var W9;(function(e){e.serialize=t=>t.type===0?Kh.serialize(t):ed.serialize(t),e.deserialize=t=>t.type===0?Kh.deserialize(t):ed.deserialize(t)})(W9||(W9={}));var Xh;(function(e){e.serialize=Xm,e.deserialize=Km})(Xh||(Xh={}));var Kh;(function(e){e.serialize=Xm,e.deserialize=Km})(Kh||(Kh={}));var ed;(function(e){e.serialize=t=>({...Xm(t),branches:t.branches?.map(Xh.serialize)}),e.deserialize=t=>({...Km(t),branches:t.branches?.map(Xh.deserialize)})})(ed||(ed={}));var V9;(function(e){e[e.Add=0]="Add",e[e.Update=1]="Update",e[e.DocumentSynced=2]="DocumentSynced",e[e.Remove=3]="Remove",e[e.IncrementPendingExtHosts=4]="IncrementPendingExtHosts",e[e.Retire=5]="Retire",e[e.AddTag=6]="AddTag",e[e.RemoveTag=7]="RemoveTag"})(V9||(V9={}));var td;(function(e){e.deserialize=(t,i)=>i.op===0?{op:i.op,item:Ns.deserialize(t,i.item)}:i.op===1?{op:i.op,item:Oc.deserialize(i.item)}:i.op===2?{op:i.op,uri:t.asCanonicalUri(y.revive(i.uri)),docv:i.docv}:i,e.serialize=t=>t.op===0?{op:t.op,item:Ns.serialize(t.item)}:t.op===1?{op:t.op,item:Oc.serialize(t.item)}:t})(td||(td={}));var rR=class{constructor(e){this.l=e,this.f=new Map,this.g=new Map,this.h=new Set,this.j=0,this.k=0,this.tags=this.f}apply(e){const t=this.x();for(const i of e)switch(i.op){case 0:this.p(Ns.deserialize(this.l,i.item),t);break;case 1:this.q(Oc.deserialize(i.item),t);break;case 3:this.v(i.itemId,t);break;case 5:this.w(i.itemId);break;case 4:this.updatePendingRoots(i.amount);break;case 6:this.f.set(i.tag.id,i.tag);break;case 7:this.f.delete(i.id);break}t.complete?.()}p(e,t){const i=Le.parentId(e.item.extId)?.toString();let r;if(!i)r=this.y(e),this.h.add(r),this.g.set(e.item.extId,r);else if(this.g.has(i)){const s=this.g.get(i);s.children.add(e.item.extId),r=this.y(e,s),this.g.set(e.item.extId,r)}else{console.error(`Test with unknown parent ID: ${JSON.stringify(e)}`);return}return t.add?.(r),e.expand===2&&this.j++,r}q(e,t){const i=this.g.get(e.extId);if(i)return e.expand!==void 0&&(i.expand===2&&this.j--,e.expand===2&&this.j++),Ym(i,e),t.update?.(i),i}v(e,t){const i=this.g.get(e);if(!i)return;const r=Le.parentId(i.item.extId)?.toString();r?this.g.get(r).children.delete(i.item.extId):this.h.delete(i);const s=[[e]];for(;s.length;)for(const n of s.pop()){const o=this.g.get(n);o&&(s.push(o.children),this.g.delete(n),t.remove?.(o,o!==i),o.expand===2&&this.j--)}}w(e){}updatePendingRoots(e){this.k+=e}x(){return{}}},sR=B("editorGroupsService"),q9;(function(e){e[e.UP=0]="UP",e[e.DOWN=1]="DOWN",e[e.LEFT=2]="LEFT",e[e.RIGHT=3]="RIGHT"})(q9||(q9={}));var G9;(function(e){e[e.HORIZONTAL=0]="HORIZONTAL",e[e.VERTICAL=1]="VERTICAL"})(G9||(G9={}));var J9;(function(e){e[e.FIRST=0]="FIRST",e[e.LAST=1]="LAST",e[e.NEXT=2]="NEXT",e[e.PREVIOUS=3]="PREVIOUS"})(J9||(J9={}));var Z9;(function(e){e[e.MAXIMIZE=0]="MAXIMIZE",e[e.EXPAND=1]="EXPAND",e[e.EVEN=2]="EVEN"})(Z9||(Z9={}));var Y9;(function(e){e[e.COPY_EDITORS=0]="COPY_EDITORS",e[e.MOVE_EDITORS=1]="MOVE_EDITORS"})(Y9||(Y9={}));var Q9;(function(e){e[e.CREATION_TIME=0]="CREATION_TIME",e[e.MOST_RECENTLY_ACTIVE=1]="MOST_RECENTLY_ACTIVE",e[e.GRID_APPEARANCE=2]="GRID_APPEARANCE"})(Q9||(Q9={}));var X9;(function(e){e[e.NEW_EDITOR=1]="NEW_EDITOR",e[e.MOVE_EDITOR=2]="MOVE_EDITOR",e[e.COPY_EDITOR=3]="COPY_EDITOR"})(X9||(X9={}));var E_=B("editorService"),nR=-1,oR=-2,e1="^([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$",S_=new RegExp(e1),K9;(function(e){e.COMMAND="command",e.SETTINGS_SYNC="settingsSync"})(K9||(K9={}));var e8;(function(e){e.NoneOrRelevance="NoneOrRelevance",e.LastUpdatedDate="LastUpdatedDate",e.Title="Title",e.PublisherName="PublisherName",e.InstallCount="InstallCount",e.PublishedDate="PublishedDate",e.AverageRating="AverageRating",e.WeightedRating="WeightedRating"})(e8||(e8={}));var t8;(function(e){e[e.Default=0]="Default",e[e.Ascending=1]="Ascending",e[e.Descending=2]="Descending"})(t8||(t8={}));var i8;(function(e){e.Category="Category",e.ExtensionId="ExtensionId",e.ExtensionName="ExtensionName",e.ExcludeWithFlags="ExcludeWithFlags",e.Featured="Featured",e.SearchText="SearchText",e.Tag="Tag",e.Target="Target"})(i8||(i8={}));var r8;(function(e){e.Install="install",e.Uninstall="uninstall"})(r8||(r8={}));var s8;(function(e){e[e.None=1]="None",e[e.Install=2]="Install",e[e.Update=3]="Update",e[e.Migrate=4]="Migrate"})(s8||(s8={}));var k_=B("extensionGalleryService"),n8;(function(e){e.Timeout="Timeout",e.Cancelled="Cancelled",e.Failed="Failed",e.DownloadFailedWriting="DownloadFailedWriting",e.Offline="Offline"})(n8||(n8={}));var o8;(function(e){e.NotFound="NotFound",e.Unsupported="Unsupported",e.Deprecated="Deprecated",e.Malicious="Malicious",e.Incompatible="Incompatible",e.IncompatibleApi="IncompatibleApi",e.IncompatibleTargetPlatform="IncompatibleTargetPlatform",e.ReleaseVersionNotFound="ReleaseVersionNotFound",e.Invalid="Invalid",e.Download="Download",e.DownloadSignature="DownloadSignature",e.DownloadFailedWriting="DownloadFailedWriting",e.UpdateMetadata="UpdateMetadata",e.Extract="Extract",e.Scanning="Scanning",e.ScanningExtension="ScanningExtension",e.ReadRemoved="ReadRemoved",e.UnsetRemoved="UnsetRemoved",e.Delete="Delete",e.Rename="Rename",e.IntializeDefaultProfile="IntializeDefaultProfile",e.AddToProfile="AddToProfile",e.InstalledExtensionNotFound="InstalledExtensionNotFound",e.PostInstall="PostInstall",e.CorruptZip="CorruptZip",e.IncompleteZip="IncompleteZip",e.PackageNotSigned="PackageNotSigned",e.SignatureVerificationInternal="SignatureVerificationInternal",e.SignatureVerificationFailed="SignatureVerificationFailed",e.NotAllowed="NotAllowed",e.Gallery="Gallery",e.Cancelled="Cancelled",e.Unknown="Unknown",e.Internal="Internal"})(o8||(o8={}));var a8;(function(e){e.NotSigned="NotSigned",e.Success="Success",e.RequiredArgumentMissing="RequiredArgumentMissing",e.InvalidArgument="InvalidArgument",e.PackageIsUnreadable="PackageIsUnreadable",e.UnhandledException="UnhandledException",e.SignatureManifestIsMissing="SignatureManifestIsMissing",e.SignatureManifestIsUnreadable="SignatureManifestIsUnreadable",e.SignatureIsMissing="SignatureIsMissing",e.SignatureIsUnreadable="SignatureIsUnreadable",e.CertificateIsUnreadable="CertificateIsUnreadable",e.SignatureArchiveIsUnreadable="SignatureArchiveIsUnreadable",e.FileAlreadyExists="FileAlreadyExists",e.SignatureArchiveIsInvalidZip="SignatureArchiveIsInvalidZip",e.SignatureArchiveHasSameSignatureFile="SignatureArchiveHasSameSignatureFile",e.PackageIntegrityCheckFailed="PackageIntegrityCheckFailed",e.SignatureIsInvalid="SignatureIsInvalid",e.SignatureManifestIsInvalid="SignatureManifestIsInvalid",e.SignatureIntegrityCheckFailed="SignatureIntegrityCheckFailed",e.EntryIsMissing="EntryIsMissing",e.EntryIsTampered="EntryIsTampered",e.Untrusted="Untrusted",e.CertificateRevoked="CertificateRevoked",e.SignatureIsNotValid="SignatureIsNotValid",e.UnknownError="UnknownError",e.PackageIsInvalidZip="PackageIsInvalidZip",e.SignatureArchiveHasTooManyEntries="SignatureArchiveHasTooManyEntries"})(a8||(a8={}));var $_=B("extensionManagementService"),C_=B("IGlobalExtensionEnablementService"),I_=B("IExtensionTipsService"),D_=B("IAllowedExtensionsService"),P_=Bu(1933,"Extensions"),A_=Bu(1934,"Preferences"),aR="extensions.allowed";jt.as(An.Configuration).registerConfiguration({id:"extensions",order:30,title:d(1916,null),type:"object",properties:{[aR]:{type:"object",markdownDescription:d(1917,null),default:"*",defaultSnippets:[{body:{},description:d(1918,null)},{body:{"*":!0},description:d(1919,null)}],scope:1,policy:{name:"AllowedExtensions",minimumVersion:"1.96",description:d(1920,null)},additionalProperties:!1,patternProperties:{"([a-z0-9A-Z][a-z0-9-A-Z]*)\\.([a-z0-9A-Z][a-z0-9-A-Z]*)$":{anyOf:[{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1921,null),enumDescriptions:[d(1922,null),d(1923,null),d(1924,null)]},{type:"array",items:{type:"string"},description:d(1925,null)}]},"([a-z0-9A-Z][a-z0-9-A-Z]*)$":{type:["boolean","string"],enum:[!0,!1,"stable"],description:d(1926,null),enumDescriptions:[d(1927,null),d(1928,null),d(1929,null)]},"\\*":{type:"boolean",enum:[!0,!1],description:d(1930,null),enumDescriptions:[d(1931,null),d(1932,null)]}}}}});var T_=B("telemetryService"),R_=B("customEndpointTelemetryService"),c8;(function(e){e[e.NONE=0]="NONE",e[e.CRASH=1]="CRASH",e[e.ERROR=2]="ERROR",e[e.USAGE=3]="USAGE"})(c8||(c8={}));var l8;(function(e){e.OFF="off",e.CRASH="crash",e.ERROR="error",e.ON="all"})(l8||(l8={}));var t1=class{constructor(e){this.value=e,this.isTrustedTelemetryValue=!0}},cR=class{constructor(){this.telemetryLevel=0,this.sessionId="someValue.sessionId",this.machineId="someValue.machineId",this.sqmId="someValue.sqmId",this.devDeviceId="someValue.devDeviceId",this.firstSessionDate="someValue.firstSessionDate",this.sendErrorTelemetry=!1}publicLog(){}publicLog2(){}publicLogError(){}publicLogError2(){}setExperimentProperty(){}},L_=new cR,lR="telemetry",uR={id:lR,name:d(2246,null)},hR=new Set(["ssh-remote","dev-container","attached-container","wsl","tunnel","codespaces","amlext"]);function dR(e){if(!e)return"none";const t=Wg(e);return hR.has(t)?t:"other"}function fR(e,t){if(!e||!e.includes("/")&&!e.includes("\\"))return e;let i=e;const r=[];for(const a of t)for(;;){const c=a.exec(e);if(!c)break;r.push([c.index,a.lastIndex])}const s=/^[\\\/]?(node_modules|node_modules\.asar)[\\\/]/,n=/(file:\/\/)?([a-zA-Z]:(\\\\|\\|\/)|(\\\\|\\|\/))?([\w-\._]+(\\\\|\\|\/))+[\w-\._]*/g;let o=0;for(i="";;){const a=n.exec(e);if(!a)break;const c=r.some(([l,u])=>a.index<u&&l<n.lastIndex);!s.test(a[0])&&!c&&(i+=e.substring(o,a.index)+"<REDACTED: user-file-path>",o=n.lastIndex)}return o<e.length&&(i+=e.substr(o)),i}function pR(e){if(!e)return e;const t=[{label:"Google API Key",regex:/AIza[A-Za-z0-9_\\\-]{35}/},{label:"JWT",regex:/eyJ[0eXAiOiJKV1Qi|hbGci|a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+/},{label:"Slack Token",regex:/xox[pbar]\-[A-Za-z0-9]/},{label:"GitHub Token",regex:/(gh[psuro]_[a-zA-Z0-9]{36}|github_pat_[a-zA-Z0-9]{22}_[a-zA-Z0-9]{59})/},{label:"Generic Secret",regex:/(key|token|sig|secret|signature|password|passwd|pwd|android:value)[^a-zA-Z0-9]/i},{label:"CLI Credentials",regex:/((login|psexec|(certutil|psexec)\.exe).{1,50}(\s-u(ser(name)?)?\s+.{3,100})?\s-(admin|user|vm|root)?p(ass(word)?)?\s+["']?[^$\-\/\s]|(^|[\s\r\n\\])net(\.exe)?.{1,5}(user\s+|share\s+\/user:| user -? secrets ? set) \s + [^ $\s \/])/},{label:"Microsoft Entra ID",regex:/eyJ(?:0eXAiOiJKV1Qi|hbGci|[a-zA-Z0-9\-_]+\.[a-zA-Z0-9\-_]+\.)/},{label:"Email",regex:/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/}];for(const i of t)if(i.regex.test(e))return`<REDACTED: ${i.label}>`;return e}function u8(e,t){return To(e,i=>{if(i instanceof t1||Object.hasOwnProperty.call(i,"isTrustedTelemetryValue"))return i.value;if(typeof i=="string"){let r=i.replaceAll("%20"," ");r=fR(r,t);for(const s of t)r=r.replace(s,"");return r=pR(r),r}})}function gR(e,t){return e.uuid&&t.uuid?e.uuid===t.uuid:e.id===t.id?!0:Ng(e.id,t.id)===0}var N_=new je("pprice.better-merge"),mR=class{constructor(){this.a=new Map,this.b=new WeakMap}register(e,t){this.a.set(e,t)}readActivationEvents(e){return this.b.has(e)||this.b.set(e,this.c(e)),this.b.get(e)}createActivationEventsMap(e){const t=Object.create(null);for(const i of e){const r=this.readActivationEvents(i);r.length>0&&(t[je.toKey(i.identifier)]=r)}return t}c(e){if(typeof e.main>"u"&&typeof e.browser>"u")return[];const t=Array.isArray(e.activationEvents)?e.activationEvents.slice(0):[];for(let i=0;i<t.length;i++)t[i]==="onUri"&&(t[i]=`onUri:${je.toKey(e.identifier)}`);if(!e.contributes)return t;for(const i in e.contributes){const r=this.a.get(i);if(!r)continue;const s=e.contributes[i],n=Array.isArray(s)?s:[s];try{r(n,t)}catch(o){Gt(o)}}return t}},vR=new mR,wR=Object.freeze({identifier:new je("nullExtensionDescription"),name:"Null Extension Description",version:"0.0.0",publisher:"vscode",engines:{vscode:""},extensionLocation:y.parse("void:location"),isBuiltin:!1,targetPlatform:"undefined",isUserBuiltin:!1,isUnderDevelopment:!1,preRelease:!1}),M_=B("extensionService"),h8=class{constructor(e){this.dependency=e}},d8;(function(e){e[e.EagerAutoStart=1]="EagerAutoStart",e[e.EagerManualStart=2]="EagerManualStart",e[e.Lazy=3]="Lazy"})(d8||(d8={}));function Ge(e,t){return e.enabledApiProposals?e.enabledApiProposals.includes(t):!1}function L(e,t){if(!Ge(e,t))throw new Error(`Extension '${e.identifier.value}' CANNOT use API proposal: ${t}.
Its package.json#enabledApiProposals-property declares: ${e.enabledApiProposals?.join(", ")??"[]"} but NOT ${t}.
 The missing proposal MUST be added and you must start in extension development mode or use the following command line switch: --enable-proposed-api ${e.identifier.value}`)}var f8;(function(e){e[e.Normal=0]="Normal",e[e.Immediate=1]="Immediate"})(f8||(f8={}));var p8;(function(e){e[e.Upsert=0]="Upsert",e[e.SetTags=1]="SetTags",e[e.UpdateCanResolveChildren=2]="UpdateCanResolveChildren",e[e.RemoveChild=3]="RemoveChild",e[e.SetProp=4]="SetProp",e[e.Bulk=5]="Bulk",e[e.DocumentSynced=6]="DocumentSynced"})(p8||(p8={}));var Uc=(e,t)=>e===t,bR={range:(e,t)=>e===t?!0:!e||!t?!1:e.equalsRange(t),busy:Uc,label:Uc,description:Uc,error:Uc,sortText:Uc,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.includes(i)))},yR=Object.entries(bR),xR=(e,t)=>{let i;for(const[r,s]of yR)s(e[r],t[r])||(i?i[r]=t[r]:i={[r]:t[r]});return i},ER=class extends ne{get root(){return this.s.root}constructor(e){super(),this.s=e,this.f=this.B(new mn(()=>this.flushDiff(),200)),this.g=this.B(new P),this.tree=new Map,this.j=new Map,this.m=[],this.onDidGenerateDiff=this.g.event,this.root.canResolveChildren=!0,this.z(this.root,void 0)}set resolveHandler(e){this.h=e;for(const t of this.tree.values())this.J(t)}get resolveHandler(){return this.h}collectDiff(){const e=this.m;return this.m=[],e}pushDiff(e){switch(e.op){case 2:{for(const t of this.m)if(t.op===2&&t.uri===e.uri){t.docv=e.docv;return}break}case 1:{const t=this.m[this.m.length-1];if(t){if(t.op===1&&t.item.extId===e.item.extId){Ym(t.item,e.item);return}if(t.op===0&&t.item.item.extId===e.item.extId){Ym(t.item,e.item);return}}break}}this.m.push(e),this.f.isScheduled()||this.f.schedule()}expand(e,t){const i=this.tree.get(e);if(i){if((i.expandLevels===void 0||t>i.expandLevels)&&(i.expandLevels=t),i.expand===1){const r=this.M(i);return r.isOpen()?this.L(i,t-1):r.wait().then(()=>this.L(i,t-1))}else if(i.expand===3)return i.resolveBarrier?.isOpen()===!1?i.resolveBarrier.wait().then(()=>this.L(i,t-1)):this.L(i,t-1)}}dispose(){for(const e of this.tree.values())this.s.getApiFor(e.actual).listener=void 0;this.tree.clear(),this.m=[],super.dispose()}w(e,t){switch(t.op){case 3:this.O(Le.joinToString(e.fullId,t.id));break;case 0:this.z(t.item,e);break;case 5:for(const i of t.ops)this.w(e,i);break;case 1:this.C(t.new,t.old,e.fullId.toString());break;case 2:this.J(e);break;case 4:this.pushDiff({op:1,item:{extId:e.fullId.toString(),item:t.update}});break;case 6:this.y(e.actual.uri);break;default:pg(t)}}y(e){e&&this.pushDiff({op:2,uri:e,docv:this.s.getDocumentVersion(e)})}z(e,t){const i=Le.fromExtHostTestItem(e,this.root.id,t?.actual),r=this.s.getApiFor(e);r.parent&&r.parent!==t?.actual&&this.s.getChildren(r.parent).delete(e.id);let s=this.tree.get(i.toString());if(!s){s={fullId:i,actual:e,expandLevels:t?.expandLevels?t.expandLevels-1:void 0,expand:0},e.tags.forEach(this.D,this),this.tree.set(s.fullId.toString(),s),this.G(e,t),this.pushDiff({op:0,item:{controllerId:this.s.controllerId,expand:s.expand,item:this.s.toITestItem(e)}}),this.I(e,s,t);return}if(s.actual===e){this.H(e,s,t);return}if(s.actual.uri?.toString()!==e.uri?.toString())return this.O(i.toString()),this.z(e,t);const n=this.s.getChildren(s.actual),o=s.actual,a=xR(this.s.toITestItem(o),this.s.toITestItem(e));this.s.getApiFor(o).listener=void 0,s.actual=e,s.resolveBarrier=void 0,s.expand=0,a&&(a.hasOwnProperty("tags")&&(this.C(e.tags,o.tags,i.toString()),delete a.tags),this.w(s,{op:4,update:a})),this.I(e,s,t);for(const[l,u]of n)this.s.getChildren(e).get(u.id)||this.O(Le.joinToString(i,u.id));const c=s.expandLevels;c!==void 0&&queueMicrotask(()=>{s.expand===1&&(s.expandLevels=void 0,this.expand(i.toString(),c))}),this.y(s.actual.uri)}C(e,t,i){const r=new Set(t.map(s=>s.id));for(const s of e)r.delete(s.id)||this.D(s);this.pushDiff({op:1,item:{extId:i,item:{tags:e.map(s=>Yh(this.s.controllerId,s.id))}}}),r.forEach(this.F,this)}D(e){const t=this.j.get(e.id);t?t.refCount++:(this.j.set(e.id,{refCount:1}),this.pushDiff({op:6,tag:{id:Yh(this.s.controllerId,e.id)}}))}F(e){const t=this.j.get(e);t&&!--t.refCount&&(this.j.delete(e),this.pushDiff({op:7,id:Yh(this.s.controllerId,e)}))}G(e,t){this.s.getApiFor(e).parent=t&&t.actual!==this.root?t.actual:void 0}H(e,t,i){this.G(e,i);const r=this.s.getApiFor(e);r.parent=i?.actual,r.listener=s=>this.w(t,s),this.J(t)}I(e,t,i){this.H(e,t,i);for(const[r,s]of this.s.getChildren(e))this.z(s,t)}J(e){let t;this.h?e.resolveBarrier?t=e.resolveBarrier.isOpen()?3:2:t=e.actual.canResolveChildren?1:0:t=0,t!==e.expand&&(e.expand=t,this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:t}}),t===1&&e.expandLevels!==void 0&&this.M(e))}L(e,t){if(t<0)return;const i=[];for(const[r,s]of this.s.getChildren(e.actual)){const n=this.expand(Le.joinToString(e.fullId,s.id),t);Cs(n)&&i.push(n)}if(i.length)return Promise.all(i).then(()=>{})}M(e){if(e.resolveBarrier)return e.resolveBarrier;if(!this.h){const s=new Er;return s.open(),s}e.expand=2,this.N(e);const t=e.resolveBarrier=new Er,i=s=>{console.error(`Unhandled error in resolveHandler of test controller "${this.s.controllerId}"`,s)};let r;try{r=this.h(e.actual===this.root?void 0:e.actual)}catch(s){i(s)}return Cs(r)?r.catch(i).then(()=>{t.open(),this.J(e)}):(t.open(),this.J(e)),e.resolveBarrier}N(e){this.pushDiff({op:1,item:{extId:e.fullId.toString(),expand:e.expand}})}O(e){const t=this.tree.get(e);if(!t)throw new Error("attempting to remove non-existent child");this.pushDiff({op:3,itemId:e});const i=[t];for(;i.length;){const r=i.pop();if(r){this.s.getApiFor(r.actual).listener=void 0;for(const s of r.actual.tags)this.F(s.id);this.tree.delete(r.fullId.toString());for(const[s,n]of this.s.getChildren(r.actual))i.push(this.tree.get(Le.joinToString(r.fullId,n.id)))}}}flushDiff(){const e=this.collectDiff();e.length&&this.g.fire(e)}},SR=class extends Error{constructor(e){super(`Attempted to insert a duplicate test item ID ${e}`)}},id=class extends Error{constructor(e){super(`TestItem with ID "${e}" is invalid. Make sure to create it from the createTestItem method.`)}},kR=class extends Error{constructor(e,t,i){super(`TestItem with ID "${e}" is from controller "${t}" and cannot be added as a child of an item from controller "${i}".`)}},$R=(e,t,i)=>{let r=new Map;return{get size(){return r.size},forEach(s,n){for(const o of r.values())s.call(n,o,this)},[Symbol.iterator](){return r.entries()},replace(s){const n=new Map,o=new Set(r.keys()),a={op:5,ops:[]};for(const c of s){if(!(c instanceof i))throw new id(c.id);const l=t(c).controllerId;if(l!==e.controllerId)throw new kR(c.id,l,e.controllerId);if(n.has(c.id))throw new SR(c.id);n.set(c.id,c),o.delete(c.id),a.ops.push({op:0,item:c})}for(const c of o.keys())a.ops.push({op:3,id:c});e.listener?.(a),r=n},add(s){if(!(s instanceof i))throw new id(s.id);r.set(s.id,s),e.listener?.({op:0,item:s})},delete(s){r.delete(s)&&e.listener?.({op:3,id:s})},get(s){return r.get(s)},toJSON(){return Array.from(r.values())}}},g8=new WeakMap,CR=(e,t)=>{const i={controllerId:t};return g8.set(e,i),i},rd=e=>{const t=g8.get(e);if(!t)throw new id(e?.id||"<unknown>");return t},F_=B("remoteAuthorityResolverService"),m8;(function(e){e[e.WebSocket=0]="WebSocket",e[e.Managed=1]="Managed"})(m8||(m8={}));var IR=class{constructor(e){this.id=e,this.type=1}toString(){return`Managed(${this.id})`}},DR=class{constructor(e,t){this.host=e,this.port=t,this.type=0}toString(){return`WebSocket(${this.host}:${this.port})`}},Yr;(function(e){e.Unknown="Unknown",e.NotAvailable="NotAvailable",e.TemporarilyNotAvailable="TemporarilyNotAvailable",e.NoResolverFound="NoResolverFound",e.InvalidAuthority="InvalidAuthority"})(Yr||(Yr={}));function v8(e){const t=e.indexOf("+");return t===-1?e:e.substring(0,t)}var i1,Rn,Qr,r1,Ln,Ms,Nn,s1,n1,sd,jc,o1,Pr,Ar,a1,pi,c1;function re(e){return Object.assign(e,{apply:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const r=i.length===1?[]:i[1];return Reflect.construct(e,r,i[0].constructor)}},call:function(...i){if(i.length===0)return Reflect.construct(e,[]);{const[r,...s]=i;return Reflect.construct(e,s,r.constructor)}}})}var l1;(function(e){e[e.Top=0]="Top",e[e.Bottom=1]="Bottom"})(l1||(l1={}));var w8;(function(e){e[e.TerminalCommand=0]="TerminalCommand",e[e.Opener=1]="Opener",e[e.Command=3]="Command"})(w8||(w8={}));var Pe=i1=class{static from(...t){let i=t;return new i1(function(){if(i){for(const r of i)r&&typeof r.dispose=="function"&&r.dispose();i=void 0}})}#e;constructor(t){this.#e=t}dispose(){typeof this.#e=="function"&&(this.#e(),this.#e=void 0)}};Pe=i1=__decorate([re],Pe);var Ae=Rn=class{static Min(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isBefore(i)&&(i=s)}return i}static Max(...t){if(t.length===0)throw new TypeError;let i=t[0];for(let r=1;r<t.length;r++){const s=t[r];s.isAfter(i)&&(i=s)}return i}static isPosition(t){if(!t)return!1;if(t instanceof Rn)return!0;const{line:i,character:r}=t;return typeof i=="number"&&typeof r=="number"}static of(t){if(t instanceof Rn)return t;if(this.isPosition(t))return new Rn(t.line,t.character);throw new Error("Invalid argument, is NOT a position-like object")}get line(){return this.c}get character(){return this.e}constructor(t,i){if(t<0)throw Ce("line must be non-negative");if(i<0)throw Ce("character must be non-negative");this.c=t,this.e=i}isBefore(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<t.e}isBeforeOrEqual(t){return this.c<t.c?!0:t.c<this.c?!1:this.e<=t.e}isAfter(t){return!this.isBeforeOrEqual(t)}isAfterOrEqual(t){return!this.isBefore(t)}isEqual(t){return this.c===t.c&&this.e===t.e}compareTo(t){return this.c<t.c?-1:this.c>t.line?1:this.e<t.e?-1:this.e>t.e?1:0}translate(t,i=0){if(t===null||i===null)throw Ce();let r;return typeof t>"u"?r=0:typeof t=="number"?r=t:(r=typeof t.lineDelta=="number"?t.lineDelta:0,i=typeof t.characterDelta=="number"?t.characterDelta:0),r===0&&i===0?this:new Rn(this.line+r,this.character+i)}with(t,i=this.character){if(t===null||i===null)throw Ce();let r;return typeof t>"u"?r=this.line:typeof t=="number"?r=t:(r=typeof t.line=="number"?t.line:this.line,i=typeof t.character=="number"?t.character:this.character),r===this.line&&i===this.character?this:new Rn(r,i)}toJSON(){return{line:this.line,character:this.character}}[Symbol.for("debug.description")](){return`(${this.line}:${this.character})`}};Ae=Rn=__decorate([re],Ae);var ke=Qr=class{static isRange(t){return t instanceof Qr?!0:t?Ae.isPosition(t.start)&&Ae.isPosition(t.end):!1}static of(t){if(t instanceof Qr)return t;if(this.isRange(t))return new Qr(t.start,t.end);throw new Error("Invalid argument, is NOT a range-like object")}get start(){return this.c}get end(){return this.e}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Ae(t,i),o=new Ae(r,s)):Ae.isPosition(t)&&Ae.isPosition(i)&&(n=Ae.of(t),o=Ae.of(i)),!n||!o)throw new Error("Invalid arguments");n.isBefore(o)?(this.c=n,this.e=o):(this.c=o,this.e=n)}contains(t){return Qr.isRange(t)?this.contains(t.start)&&this.contains(t.end):Ae.isPosition(t)?!(Ae.of(t).isBefore(this.c)||this.e.isBefore(t)):!1}isEqual(t){return this.c.isEqual(t.c)&&this.e.isEqual(t.e)}intersection(t){const i=Ae.Max(t.start,this.c),r=Ae.Min(t.end,this.e);if(!i.isAfter(r))return new Qr(i,r)}union(t){if(this.contains(t))return this;if(t.contains(this))return t;const i=Ae.Min(t.start,this.c),r=Ae.Max(t.end,this.end);return new Qr(i,r)}get isEmpty(){return this.c.isEqual(this.e)}get isSingleLine(){return this.c.line===this.e.line}with(t,i=this.end){if(t===null||i===null)throw Ce();let r;return t?Ae.isPosition(t)?r=t:(r=t.start||this.start,i=t.end||this.end):r=this.start,r.isEqual(this.c)&&i.isEqual(this.end)?this:new Qr(r,i)}toJSON(){return[this.start,this.end]}[Symbol.for("debug.description")](){return b8(this)}};ke=Qr=__decorate([re],ke);var Xr=r1=class extends ke{static isSelection(t){return t instanceof r1?!0:t?ke.isRange(t)&&Ae.isPosition(t.anchor)&&Ae.isPosition(t.active)&&typeof t.isReversed=="boolean":!1}get anchor(){return this.f}get active(){return this.g}constructor(t,i,r,s){let n,o;if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"?(n=new Ae(t,i),o=new Ae(r,s)):Ae.isPosition(t)&&Ae.isPosition(i)&&(n=Ae.of(t),o=Ae.of(i)),!n||!o)throw new Error("Invalid arguments");super(n,o),this.f=n,this.g=o}get isReversed(){return this.f===this.e}toJSON(){return{start:this.start,end:this.end,active:this.active,anchor:this.anchor}}[Symbol.for("debug.description")](){return PR(this)}};Xr=r1=__decorate([re],Xr);function b8(e){return e.isEmpty?`[${e.start.line}:${e.start.character})`:`[${e.start.line}:${e.start.character} -> ${e.end.line}:${e.end.character})`}function PR(e){let t=b8(e);return e.isEmpty||(e.active.isEqual(e.start)?t=`|${t}`:t=`${t}|`),t}var y8=e=>{if(typeof e!="string"||e.length===0||!/^[0-9A-Za-z_\-]+$/.test(e))throw Ce("connectionToken")},AR=class{static isResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.host=="string"&&typeof e.port=="number"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t,i){if(typeof e!="string"||e.length===0)throw Ce("host");if(typeof t!="number"||t===0||Math.round(t)!==t)throw Ce("port");typeof i<"u"&&y8(i),this.host=e,this.port=Math.round(t),this.connectionToken=i}},nd=class{static isManagedResolvedAuthority(e){return e&&typeof e=="object"&&typeof e.makeConnection=="function"&&(e.connectionToken===void 0||typeof e.connectionToken=="string")}constructor(e,t){this.makeConnection=e,this.connectionToken=t,typeof t<"u"&&y8(t)}},qo=class Jp extends Error{static NotAvailable(t,i){return new Jp(t,Yr.NotAvailable,i)}static TemporarilyNotAvailable(t){return new Jp(t,Yr.TemporarilyNotAvailable)}constructor(t,i=Yr.Unknown,r){super(t),this._message=t,this._code=i,this._detail=r,Object.setPrototypeOf(this,Jp.prototype)}},ar;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(ar||(ar={}));var Go;(function(e){e[e.Replace=1]="Replace",e[e.Append=2]="Append",e[e.Prepend=3]="Prepend"})(Go||(Go={}));var Fs=Ln=class{static isTextEdit(t){return t instanceof Ln?!0:t?ke.isRange(t)&&typeof t.newText=="string":!1}static replace(t,i){return new Ln(t,i)}static insert(t,i){return Ln.replace(new ke(t,t),i)}static delete(t){return Ln.replace(t,"")}static setEndOfLine(t){const i=new Ln(new ke(new Ae(0,0),new Ae(0,0)),"");return i.newEol=t,i}get range(){return this.c}set range(t){if(t&&!ke.isRange(t))throw Ce("range");this.c=t}get newText(){return this.e||""}set newText(t){if(t&&typeof t!="string")throw Ce("newText");this.e=t}get newEol(){return this.f}set newEol(t){if(t&&typeof t!="number")throw Ce("newEol");this.f=t}constructor(t,i){this.c=t,this.e=i}toJSON(){return{range:this.range,newText:this.newText,newEol:this.f}}};Fs=Ln=__decorate([re],Fs);var od=Ms=class{static isNotebookCellEdit(t){return t instanceof Ms?!0:t?lr.isNotebookRange(t)&&Array.isArray(t.newCells):!1}static replaceCells(t,i){return new Ms(t,i)}static insertCells(t,i){return new Ms(new lr(t,t),i)}static deleteCells(t){return new Ms(t,[])}static updateCellMetadata(t,i){const r=new Ms(new lr(t,t),[]);return r.newCellMetadata=i,r}static updateNotebookMetadata(t){const i=new Ms(new lr(0,0),[]);return i.newNotebookMetadata=t,i}constructor(t,i){this.range=t,this.newCells=i}};od=Ms=__decorate([re],od);var u1=class Zp{static isSnippetTextEdit(t){return t instanceof Zp?!0:t?ke.isRange(t.range)&&Fn.isSnippetString(t.snippet):!1}static replace(t,i){return new Zp(t,i)}static insert(t,i){return Zp.replace(new ke(t,t),i)}constructor(t,i){this.range=t,this.snippet=i}},x8;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.Cell=3]="Cell",e[e.CellReplace=5]="CellReplace",e[e.Snippet=6]="Snippet"})(x8||(x8={}));var Mn=class{constructor(){this.c=[]}_allEntries(){return this.c}renameFile(t,i,r,s){this.c.push({_type:1,from:t,to:i,options:r,metadata:s})}createFile(t,i,r){this.c.push({_type:1,from:void 0,to:t,options:i,metadata:r})}deleteFile(t,i,r){this.c.push({_type:1,from:t,to:void 0,options:i,metadata:r})}e(t,i,r){this.c.push({_type:3,metadata:r,uri:t,edit:{editType:5,metadata:i}})}f(t,i,r,s){const n=i.start,o=i.end;(n!==o||r.length>0)&&this.c.push({_type:5,uri:t,index:n,count:o-n,cells:r,metadata:s})}g(t,i,r,s){this.c.push({_type:3,metadata:s,uri:t,edit:{editType:3,index:i,metadata:r}})}replace(t,i,r,s){this.c.push({_type:2,uri:t,edit:new Fs(i,r),metadata:s})}insert(t,i,r,s){this.replace(t,new ke(i,i),r,s)}delete(t,i,r){this.replace(t,i,"",r)}has(t){return this.c.some(i=>i._type===2&&i.uri.toString()===t.toString())}set(t,i){if(i)for(const r of i){if(!r)continue;let s,n;Array.isArray(r)?(s=r[0],n=r[1]):s=r,od.isNotebookCellEdit(s)?s.newCellMetadata?this.g(t,s.range.start,s.newCellMetadata,n):s.newNotebookMetadata?this.e(t,s.newNotebookMetadata,n):this.f(t,s.range,s.newCells,n):u1.isSnippetTextEdit(s)?this.c.push({_type:6,uri:t,range:s.range,edit:s.snippet,metadata:n,keepWhitespace:s.keepWhitespace}):this.c.push({_type:2,uri:t,edit:s,metadata:n})}else{for(let r=0;r<this.c.length;r++){const s=this.c[r];switch(s._type){case 2:case 6:case 3:case 5:s.uri.toString()===t.toString()&&(this.c[r]=void 0);break}}yI(this.c)}}get(t){const i=[];for(const r of this.c)r._type===2&&r.uri.toString()===t.toString()&&i.push(r.edit);return i}entries(){const t=new Ft;for(const i of this.c)if(i._type===2){let r=t.get(i.uri);r||(r=[i.uri,[]],t.set(i.uri,r)),r[1].push(i.edit)}return[...t.values()]}get size(){return this.entries().length}toJSON(){return this.entries()}};Mn=__decorate([re],Mn);var Fn=Nn=class{static isSnippetString(t){return t instanceof Nn?!0:t?typeof t.value=="string":!1}static c(t){return t.replace(/\$|}|\\/g,"\\$&")}constructor(t){this.e=1,this.value=t||""}appendText(t){return this.value+=Nn.c(t),this}appendTabstop(t=this.e++){return this.value+="$",this.value+=t,this}appendPlaceholder(t,i=this.e++){if(typeof t=="function"){const r=new Nn;r.e=this.e,t(r),this.e=r.e,t=r.value}else t=Nn.c(t);return this.value+="${",this.value+=i,this.value+=":",this.value+=t,this.value+="}",this}appendChoice(t,i=this.e++){const r=t.map(s=>s.replaceAll(/[|\\,]/g,"\\$&")).join(",");return this.value+="${",this.value+=i,this.value+="|",this.value+=r,this.value+="|}",this}appendVariable(t,i){if(typeof i=="function"){const r=new Nn;r.e=this.e,i(r),this.e=r.e,i=r.value}else typeof i=="string"&&(i=i.replace(/\$|}/g,"\\$&"));return this.value+="${",this.value+=t,i&&(this.value+=":",this.value+=i),this.value+="}",this}};Fn=Nn=__decorate([re],Fn);var On;(function(e){e[e.Unnecessary=1]="Unnecessary",e[e.Deprecated=2]="Deprecated"})(On||(On={}));var Qt;(function(e){e[e.Hint=3]="Hint",e[e.Information=2]="Information",e[e.Warning=1]="Warning",e[e.Error=0]="Error"})(Qt||(Qt={}));var Bi=s1=class{static isLocation(t){return t instanceof s1?!0:t?ke.isRange(t.range)&&y.isUri(t.uri):!1}constructor(t,i){if(this.uri=t,i)if(ke.isRange(i))this.range=ke.of(i);else if(Ae.isPosition(i))this.range=new ke(i,i);else throw new Error("Illegal argument")}toJSON(){return{uri:this.uri,range:this.range}}};Bi=s1=__decorate([re],Bi);var Bc=class{static is(t){return t?typeof t.message=="string"&&t.location&&ke.isRange(t.location.range)&&y.isUri(t.location.uri):!1}constructor(t,i){this.location=t,this.message=i}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.location.range.isEqual(i.location.range)&&t.location.uri.toString()===i.location.uri.toString()}};Bc=__decorate([re],Bc);var ad=class{constructor(t,i,r=Qt.Error){if(!ke.isRange(t))throw new TypeError("range must be set");if(!i)throw new TypeError("message must be set");this.range=t,this.message=i,this.severity=r}toJSON(){return{severity:Qt[this.severity],message:this.message,range:this.range,source:this.source,code:this.code}}static isEqual(t,i){return t===i?!0:!t||!i?!1:t.message===i.message&&t.severity===i.severity&&t.code===i.code&&t.severity===i.severity&&t.source===i.source&&t.range.isEqual(i.range)&&Li(t.tags,i.tags)&&Li(t.relatedInformation,i.relatedInformation,Bc.isEqual)}};ad=__decorate([re],ad);var cd=class{constructor(t,i){if(!t)throw new Error("Illegal argument, contents must be defined");Array.isArray(t)?this.contents=t:this.contents=[t],this.range=i}};cd=__decorate([re],cd);var ld=class extends cd{constructor(t,i,r,s){super(t,i),this.canIncreaseVerbosity=r,this.canDecreaseVerbosity=s}};ld=__decorate([re],ld);var h1;(function(e){e[e.Increase=0]="Increase",e[e.Decrease=1]="Decrease"})(h1||(h1={}));var Hc;(function(e){e[e.Text=0]="Text",e[e.Read=1]="Read",e[e.Write=2]="Write"})(Hc||(Hc={}));var ud=class{constructor(t,i=Hc.Text){this.range=t,this.kind=i}toJSON(){return{range:this.range,kind:Hc[this.kind]}}};ud=__decorate([re],ud);var hd=class{constructor(t,i){this.uri=t,this.highlights=i}toJSON(){return{uri:this.uri,highlights:this.highlights.map(t=>t.toJSON())}}};hd=__decorate([re],hd);var Ze;(function(e){e[e.File=0]="File",e[e.Module=1]="Module",e[e.Namespace=2]="Namespace",e[e.Package=3]="Package",e[e.Class=4]="Class",e[e.Method=5]="Method",e[e.Property=6]="Property",e[e.Field=7]="Field",e[e.Constructor=8]="Constructor",e[e.Enum=9]="Enum",e[e.Interface=10]="Interface",e[e.Function=11]="Function",e[e.Variable=12]="Variable",e[e.Constant=13]="Constant",e[e.String=14]="String",e[e.Number=15]="Number",e[e.Boolean=16]="Boolean",e[e.Array=17]="Array",e[e.Object=18]="Object",e[e.Key=19]="Key",e[e.Null=20]="Null",e[e.EnumMember=21]="EnumMember",e[e.Struct=22]="Struct",e[e.Event=23]="Event",e[e.Operator=24]="Operator",e[e.TypeParameter=25]="TypeParameter"})(Ze||(Ze={}));var zc;(function(e){e[e.Deprecated=1]="Deprecated"})(zc||(zc={}));var _c=n1=class{static validate(t){if(!t.name)throw new Error("name must not be falsy")}constructor(t,i,r,s,n){this.name=t,this.kind=i,this.containerName=n,typeof r=="string"&&(this.containerName=r),s instanceof Bi?this.location=s:r instanceof ke&&(this.location=new Bi(s,r)),n1.validate(this)}toJSON(){return{name:this.name,kind:Ze[this.kind],location:this.location,containerName:this.containerName}}};_c=n1=__decorate([re],_c);var Wc=sd=class{static validate(t){if(!t.name)throw new Error("name must not be falsy");if(!t.range.contains(t.selectionRange))throw new Error("selectionRange must be contained in fullRange");t.children?.forEach(sd.validate)}constructor(t,i,r,s,n){this.name=t,this.detail=i,this.kind=r,this.range=s,this.selectionRange=n,this.children=[],sd.validate(this)}};Wc=sd=__decorate([re],Wc);var Vc;(function(e){e[e.Invoke=1]="Invoke",e[e.Automatic=2]="Automatic"})(Vc||(Vc={}));var qc=class{constructor(t,i){this.title=t,this.kind=i}};qc=__decorate([re],qc);var nt=class{static{jc=this}static{this.c="."}constructor(t){this.value=t}append(t){return new jc(this.value?this.value+jc.c+t:t)}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+jc.c)}};nt=jc=__decorate([re],nt),nt.Empty=new nt(""),nt.QuickFix=nt.Empty.append("quickfix"),nt.Refactor=nt.Empty.append("refactor"),nt.RefactorExtract=nt.Refactor.append("extract"),nt.RefactorInline=nt.Refactor.append("inline"),nt.RefactorMove=nt.Refactor.append("move"),nt.RefactorRewrite=nt.Refactor.append("rewrite"),nt.Source=nt.Empty.append("source"),nt.SourceOrganizeImports=nt.Source.append("organizeImports"),nt.SourceFixAll=nt.Source.append("fixAll"),nt.Notebook=nt.Empty.append("notebook");var Gc=class{constructor(t,i){if(this.range=t,this.parent=i,i&&!i.range.contains(this.range))throw new Error("Invalid argument: parent must contain this range")}};Gc=__decorate([re],Gc);var d1=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},E8=class{constructor(e,t){this.fromRanges=t,this.from=e}},S8=class{constructor(e,t){this.fromRanges=t,this.to=e}},Jo;(function(e){e[e.Information=0]="Information",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(Jo||(Jo={}));var dd=class{constructor(t,i){this.range=t,this.command=i}get isResolved(){return!!this.command}};dd=__decorate([re],dd);var Ci=o1=class{#e;static isMarkdownString(t){return t instanceof o1?!0:t&&t.appendCodeblock&&t.appendMarkdown&&t.appendText&&t.value!==void 0}constructor(t,i=!1){this.#e=new No(t,{supportThemeIcons:i})}get value(){return this.#e.value}set value(t){this.#e.value=t}get isTrusted(){return this.#e.isTrusted}set isTrusted(t){this.#e.isTrusted=t}get supportThemeIcons(){return this.#e.supportThemeIcons}set supportThemeIcons(t){this.#e.supportThemeIcons=t}get supportHtml(){return this.#e.supportHtml}set supportHtml(t){this.#e.supportHtml=t}get baseUri(){return this.#e.baseUri}set baseUri(t){this.#e.baseUri=t}appendText(t){return this.#e.appendText(t),this}appendMarkdown(t){return this.#e.appendMarkdown(t),this}appendCodeblock(t,i){return this.#e.appendCodeblock(i??"",t),this}};Ci=o1=__decorate([re],Ci);var f1=class{constructor(t,i){this.label=t,this.documentation=i}};f1=__decorate([re],f1);var p1=class{constructor(t,i){this.label=t,this.documentation=i,this.parameters=[]}};p1=__decorate([re],p1);var g1=class{constructor(){this.activeSignature=0,this.activeParameter=0,this.signatures=[]}};g1=__decorate([re],g1);var m1;(function(e){e[e.Invoke=1]="Invoke",e[e.TriggerCharacter=2]="TriggerCharacter",e[e.ContentChange=3]="ContentChange"})(m1||(m1={}));var v1;(function(e){e[e.Type=1]="Type",e[e.Parameter=2]="Parameter"})(v1||(v1={}));var fd=class{constructor(t){this.value=t}};fd=__decorate([re],fd);var pd=class{constructor(t,i,r){this.position=t,this.label=i,this.kind=r}};pd=__decorate([re],pd);var Zo;(function(e){e[e.Invoke=0]="Invoke",e[e.TriggerCharacter=1]="TriggerCharacter",e[e.TriggerForIncompleteCompletions=2]="TriggerForIncompleteCompletions"})(Zo||(Zo={}));var de;(function(e){e[e.Text=0]="Text",e[e.Method=1]="Method",e[e.Function=2]="Function",e[e.Constructor=3]="Constructor",e[e.Field=4]="Field",e[e.Variable=5]="Variable",e[e.Class=6]="Class",e[e.Interface=7]="Interface",e[e.Module=8]="Module",e[e.Property=9]="Property",e[e.Unit=10]="Unit",e[e.Value=11]="Value",e[e.Enum=12]="Enum",e[e.Keyword=13]="Keyword",e[e.Snippet=14]="Snippet",e[e.Color=15]="Color",e[e.File=16]="File",e[e.Reference=17]="Reference",e[e.Folder=18]="Folder",e[e.EnumMember=19]="EnumMember",e[e.Constant=20]="Constant",e[e.Struct=21]="Struct",e[e.Event=22]="Event",e[e.Operator=23]="Operator",e[e.TypeParameter=24]="TypeParameter",e[e.User=25]="User",e[e.Issue=26]="Issue"})(de||(de={}));var Jc;(function(e){e[e.Deprecated=1]="Deprecated"})(Jc||(Jc={}));var gd=class{constructor(t,i){this.label=t,this.kind=i}toJSON(){return{label:this.label,kind:this.kind&&de[this.kind],detail:this.detail,documentation:this.documentation,sortText:this.sortText,filterText:this.filterText,preselect:this.preselect,insertText:this.insertText,textEdit:this.textEdit}}};gd=__decorate([re],gd);var Yo=class{constructor(t=[],i=!1){this.items=t,this.isIncomplete=i}};Yo=__decorate([re],Yo);var w1=class{constructor(t,i,r){this.insertText=t,this.range=i,this.command=r}};w1=__decorate([re],w1);var b1=class{constructor(t){this.commands=void 0,this.suppressSuggestions=void 0,this.items=t}};b1=__decorate([re],b1);var Un;(function(e){e[e.Unknown=0]="Unknown",e[e.Word=1]="Word",e[e.Line=2]="Line",e[e.Suggest=3]="Suggest"})(Un||(Un={}));var Qo;(function(e){e[e.Accepted=0]="Accepted",e[e.Rejected=1]="Rejected",e[e.Ignored=2]="Ignored"})(Qo||(Qo={}));var Zc;(function(e){e[e.Active=-1]="Active",e[e.Beside=-2]="Beside",e[e.One=1]="One",e[e.Two=2]="Two",e[e.Three=3]="Three",e[e.Four=4]="Four",e[e.Five=5]="Five",e[e.Six=6]="Six",e[e.Seven=7]="Seven",e[e.Eight=8]="Eight",e[e.Nine=9]="Nine"})(Zc||(Zc={}));var Os;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Os||(Os={}));function TR(e,t){return`${je.toKey(e)}.${t}`}var cr;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval"})(cr||(cr={}));var Xo;(function(e){e[e.Manual=1]="Manual",e[e.AfterDelay=2]="AfterDelay",e[e.FocusOut=3]="FocusOut"})(Xo||(Xo={}));var md;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(md||(md={}));var Ko;(function(e){e[e.Keyboard=1]="Keyboard",e[e.Mouse=2]="Mouse",e[e.Command=3]="Command"})(Ko||(Ko={}));var ea;(function(e){e[e.Addition=1]="Addition",e[e.Deletion=2]="Deletion",e[e.Modification=3]="Modification"})(ea||(ea={}));var Yc;(function(e){e[e.Undo=1]="Undo",e[e.Redo=2]="Redo"})(Yc||(Yc={}));var jn;(function(e){e[e.OpenOpen=0]="OpenOpen",e[e.ClosedClosed=1]="ClosedClosed",e[e.OpenClosed=2]="OpenClosed",e[e.ClosedOpen=3]="ClosedOpen"})(jn||(jn={})),function(e){function t(i){switch(i){case"keyboard":return e.Keyboard;case"mouse":return e.Mouse;case"api":case"code.jump":case"code.navigation":return e.Command}}e.fromValue=t}(Ko||(Ko={}));var ta;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(ta||(ta={})),function(e){function t(i){switch(i){case e.Other:return"other";case e.Comment:return"comment";case e.String:return"string";case e.RegEx:return"regex"}return"other"}e.toString=t}(ta||(ta={}));var vd=class{constructor(t,i){if(i&&!y.isUri(i))throw Ce("target");if(!ke.isRange(t)||t.isEmpty)throw Ce("range");this.range=t,this.target=i}};vd=__decorate([re],vd);var ia=class{constructor(t,i,r,s){this.red=t,this.green=i,this.blue=r,this.alpha=s}};ia=__decorate([re],ia);var wd=class{constructor(t,i){if(i&&!(i instanceof ia))throw Ce("color");if(!ke.isRange(t)||t.isEmpty)throw Ce("range");this.range=t,this.color=i}};wd=__decorate([re],wd);var bd=class{constructor(t){if(!t||typeof t!="string")throw Ce("label");this.label=t}};bd=__decorate([re],bd);var k8;(function(e){e[e.RGB=0]="RGB",e[e.HEX=1]="HEX",e[e.HSL=2]="HSL"})(k8||(k8={}));var y1;(function(e){e[e.Error=0]="Error",e[e.Warning=1]="Warning",e[e.Information=2]="Information"})(y1||(y1={}));var x1;(function(e){e[e.Unknown=0]="Unknown",e[e.Shutdown=1]="Shutdown",e[e.Process=2]="Process",e[e.User=3]="User",e[e.Extension=4]="Extension"})(x1||(x1={}));var Qc;(function(e){e[e.Low=0]="Low",e[e.Medium=1]="Medium",e[e.High=2]="High"})(Qc||(Qc={}));var E1;(function(e){e[e.Sh=1]="Sh",e[e.Bash=2]="Bash",e[e.Fish=3]="Fish",e[e.Csh=4]="Csh",e[e.Ksh=5]="Ksh",e[e.Zsh=6]="Zsh",e[e.CommandPrompt=7]="CommandPrompt",e[e.GitBash=8]="GitBash",e[e.PowerShell=9]="PowerShell",e[e.Python=10]="Python",e[e.Julia=11]="Julia",e[e.NuShell=12]="NuShell",e[e.Node=13]="Node"})(E1||(E1={}));var RR=class{constructor(e,t,i){if(this.startIndex=e,this.length=t,this.tooltip=i,typeof e!="number"||e<0)throw Ce("startIndex");if(typeof t!="number"||t<1)throw Ce("length");if(i!==void 0&&typeof i!="string")throw Ce("tooltip")}},LR=class{constructor(e){this.uri=e}},NR=class{constructor(e){this.terminalCommand=e}},S1;(function(e){e[e.Panel=1]="Panel",e[e.Editor=2]="Editor"})(S1||(S1={}));var MR=class{constructor(e){if(this.options=e,typeof e!="object")throw Ce("options")}},k1;(function(e){e[e.File=0]="File",e[e.Folder=1]="Folder",e[e.Method=2]="Method",e[e.Alias=3]="Alias",e[e.Argument=4]="Argument",e[e.Option=5]="Option",e[e.OptionValue=6]="OptionValue",e[e.Flag=7]="Flag"})(k1||(k1={}));var FR=class{constructor(e,t,i,r,s,n,o,a,c){this.label=e,this.icon=t,this.detail=i,this.documentation=r,this.isFile=s,this.isDirectory=n,this.isKeyword=o,this.replacementIndex=a??0,this.replacementLength=c??0}},OR=class{constructor(e,t){this.items=e??[],this.resourceRequestConfig=t}},$1;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})($1||($1={}));var C1;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(C1||(C1={}));var I1;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(I1||(I1={}));var Xc=class{static{Pr=this}static{this.Clean=new Pr("clean","Clean")}static{this.Build=new Pr("build","Build")}static{this.Rebuild=new Pr("rebuild","Rebuild")}static{this.Test=new Pr("test","Test")}static from(t){switch(t){case"clean":return Pr.Clean;case"build":return Pr.Build;case"rebuild":return Pr.Rebuild;case"test":return Pr.Test;default:return}}constructor(t,i){if(this.label=i,typeof t!="string"||typeof i!="string")throw Ce("name");this.c=t}get id(){return this.c}};Xc=Pr=__decorate([re],Xc);function $8(e){let t="";for(let i=0;i<e.length;i++)t+=e[i].replace(/,/g,",,")+",";return t}var ra=class{constructor(t,i,r){if(typeof t!="string")throw Ce("process");this.e=[],this.c=t,i!==void 0&&(Array.isArray(i)?(this.e=i,this.f=r):this.f=i)}get process(){return this.c}set process(t){if(typeof t!="string")throw Ce("process");this.c=t}get args(){return this.e}set args(t){Array.isArray(t)||(t=[]),this.e=t}get options(){return this.f}set options(t){this.f=t}computeId(){const t=[];if(t.push("process"),this.c!==void 0&&t.push(this.c),this.e&&this.e.length>0)for(const i of this.e)t.push(i);return $8(t)}};ra=__decorate([re],ra);var Bn=class{constructor(t,i,r){if(this.f=[],Array.isArray(i)){if(!t)throw Ce("command can't be undefined or null");if(typeof t!="string"&&typeof t.value!="string")throw Ce("command");this.e=t,i&&(this.f=i),this.g=r}else{if(typeof t!="string")throw Ce("commandLine");this.c=t,this.g=i}}get commandLine(){return this.c}set commandLine(t){if(typeof t!="string")throw Ce("commandLine");this.c=t}get command(){return this.e?this.e:""}set command(t){if(typeof t!="string"&&typeof t.value!="string")throw Ce("command");this.e=t}get args(){return this.f}set args(t){this.f=t||[]}get options(){return this.g}set options(t){this.g=t}computeId(){const t=[];if(t.push("shell"),this.c!==void 0&&t.push(this.c),this.e!==void 0&&t.push(typeof this.e=="string"?this.e:this.e.value),this.f&&this.f.length>0)for(const i of this.f)t.push(typeof i=="string"?i:i.value);return $8(t)}};Bn=__decorate([re],Bn);var D1;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(D1||(D1={}));var Us;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace"})(Us||(Us={}));var P1=class{constructor(e){this.c=e}computeId(){return"customExecution"+Ut()}set callback(e){this.c=e}get callback(){return this.c}},yd=class{static{Ar=this}static{this.c="customExecution"}static{this.e="process"}static{this.f="shell"}static{this.g="$empty"}constructor(t,i,r,s,n,o){this.k=!1,this.l=this.definition=t;let a;typeof i=="string"?(this.o=this.name=i,this.w=this.source=r,this.execution=s,a=n,this.k=!0):i===Us.Global||i===Us.Workspace?(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o):(this.target=i,this.o=this.name=r,this.w=this.source=s,this.execution=n,a=o),typeof a=="string"?(this.r=[a],this.t=!0):Array.isArray(a)?(this.r=a,this.t=!0):(this.r=[],this.t=!1),this.u=!1,this.y=Object.create(null),this.z=Object.create(null)}get _id(){return this.j}set _id(t){this.j=t}get _deprecated(){return this.k}B(){this.j!==void 0&&(this.j=void 0,this.m=void 0,this.C())}C(){this.q instanceof ra?this.l={type:Ar.e,id:this.q.computeId()}:this.q instanceof Bn?this.l={type:Ar.f,id:this.q.computeId()}:this.q instanceof P1?this.l={type:Ar.c,id:this.q.computeId()}:this.l={type:Ar.g,id:Ut()}}get definition(){return this.l}set definition(t){if(t==null)throw Ce("Kind can't be undefined or null");this.B(),this.l=t}get scope(){return this.m}set target(t){this.B(),this.m=t}get name(){return this.o}set name(t){if(typeof t!="string")throw Ce("name");this.B(),this.o=t}get execution(){return this.q}set execution(t){t===null&&(t=void 0),this.B(),this.q=t;const i=this.l.type;(Ar.g===i||Ar.e===i||Ar.f===i||Ar.c===i)&&this.C()}get problemMatchers(){return this.r}set problemMatchers(t){if(Array.isArray(t))this.B(),this.r=t,this.t=!0;else{this.B(),this.r=[],this.t=!1;return}}get hasDefinedMatchers(){return this.t}get isBackground(){return this.u}set isBackground(t){t!==!0&&t!==!1&&(t=!1),this.B(),this.u=t}get source(){return this.w}set source(t){if(typeof t!="string"||t.length===0)throw Ce("source must be a string of length > 0");this.B(),this.w=t}get group(){return this.x}set group(t){t===null&&(t=void 0),this.B(),this.x=t}get detail(){return this.A}set detail(t){t===null&&(t=void 0),this.A=t}get presentationOptions(){return this.y}set presentationOptions(t){t==null&&(t=Object.create(null)),this.B(),this.y=t}get runOptions(){return this.z}set runOptions(t){t==null&&(t=Object.create(null)),this.B(),this.z=t}};yd=Ar=__decorate([re],yd);var js;(function(e){e[e.SourceControl=1]="SourceControl",e[e.Window=10]="Window",e[e.Notification=15]="Notification"})(js||(js={}));var A1;(function(e){function t(i){const r=i;return cn(r.value)?r.tooltip&&!Ue(r.tooltip)?(console.log("INVALID view badge, invalid tooltip",r.tooltip),!1):!0:(console.log("INVALID view badge, invalid value",r.value),!1)}e.isViewBadge=t})(A1||(A1={}));var xd=a1=class{static isTreeItem(t,i){const r=t;if(r.checkboxState!==void 0){const s=cn(r.checkboxState)?r.checkboxState:wt(r.checkboxState)&&cn(r.checkboxState.state)?r.checkboxState.state:void 0,n=!cn(r.checkboxState)&&wt(r.checkboxState)?r.checkboxState.tooltip:void 0;if(s===void 0||s!==Tr.Checked&&s!==Tr.Unchecked||n!==void 0&&!Ue(n))return console.log("INVALID tree item, invalid checkboxState",r.checkboxState),!1}if(t instanceof a1)return!0;if(r.label!==void 0&&!Ue(r.label)&&!r.label?.label)return console.log("INVALID tree item, invalid label",r.label),!1;if(r.id!==void 0&&!Ue(r.id))return console.log("INVALID tree item, invalid id",r.id),!1;if(r.iconPath!==void 0&&!Ue(r.iconPath)&&!y.isUri(r.iconPath)&&(!r.iconPath||!Ue(r.iconPath.id))){const s=r.iconPath;if(!s||!Ue(s.light)&&!y.isUri(s.light)&&!Ue(s.dark)&&!y.isUri(s.dark))return console.log("INVALID tree item, invalid iconPath",r.iconPath),!1}return r.description!==void 0&&!Ue(r.description)&&typeof r.description!="boolean"?(console.log("INVALID tree item, invalid description",r.description),!1):r.resourceUri!==void 0&&!y.isUri(r.resourceUri)?(console.log("INVALID tree item, invalid resourceUri",r.resourceUri),!1):r.tooltip!==void 0&&!Ue(r.tooltip)&&!(r.tooltip instanceof Ci)?(console.log("INVALID tree item, invalid tooltip",r.tooltip),!1):r.command!==void 0&&!r.command.command?(console.log("INVALID tree item, invalid command",r.command),!1):r.collapsibleState!==void 0&&r.collapsibleState<Hn.None&&r.collapsibleState>Hn.Expanded?(console.log("INVALID tree item, invalid collapsibleState",r.collapsibleState),!1):r.contextValue!==void 0&&!Ue(r.contextValue)?(console.log("INVALID tree item, invalid contextValue",r.contextValue),!1):r.accessibilityInformation!==void 0&&!r.accessibilityInformation?.label?(console.log("INVALID tree item, invalid accessibilityInformation",r.accessibilityInformation),!1):!0}constructor(t,i=Hn.None){this.collapsibleState=i,y.isUri(t)?this.resourceUri=t:this.label=t}};xd=a1=__decorate([re],xd);var Hn;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(Hn||(Hn={}));var Tr;(function(e){e[e.Unchecked=0]="Unchecked",e[e.Checked=1]="Checked"})(Tr||(Tr={}));var Ed=class{async asString(){return typeof this.value=="string"?this.value:JSON.stringify(this.value)}asFile(){}constructor(t){this.value=t}};Ed=__decorate([re],Ed);var Sd=class extends Ed{},UR=class extends Sd{#e;constructor(e){super(""),this.#e=e}asFile(){return this.#e}},jR=class{constructor(e,t,i,r){this.name=e,this.uri=t,this._itemId=i,this.c=r}data(){return this.c()}},sa=class{#e=new Map;constructor(t){for(const[i,r]of t??[]){const s=this.#e.get(this.#t(i));s?s.push(r):this.#e.set(this.#t(i),[r])}}get(t){return this.#e.get(this.#t(t))?.[0]}set(t,i){this.#e.set(this.#t(t),[i])}forEach(t,i){for(const[r,s]of this.#e)for(const n of s)t.call(i,n,r,this)}*[Symbol.iterator](){for(const[t,i]of this.#e)for(const r of i)yield[t,r]}#t(t){return t.toLowerCase()}};sa=__decorate([re],sa);var T1=class{constructor(t,i,r){this.insertText=t,this.title=i,this.kind=r}};T1=__decorate([re],T1);var R1;(function(e){e[e.Automatic=0]="Automatic",e[e.PasteAs=1]="PasteAs"})(R1||(R1={}));var Bs=class Yp{static{this.c="."}constructor(t){this.value=t}append(...t){return new Yp((this.value?[this.value,...t]:t).join(Yp.c))}intersects(t){return this.contains(t)||t.contains(this)}contains(t){return this.value===t.value||t.value.startsWith(this.value+Yp.c)}};Bs.Empty=new Bs(""),Bs.Text=new Bs("text"),Bs.TextUpdateImports=Bs.Text.append("updateImports");var BR=class{constructor(e,t,i){this.title=t,this.insertText=e,this.kind=i}},ci=class{constructor(t,i){this.id=t,this.color=i}static isThemeIcon(t){return typeof t.id!="string"?(console.log("INVALID ThemeIcon, invalid id",t.id),!1):!0}};ci=__decorate([re],ci),ci.File=new ci("file"),ci.Folder=new ci("folder");var Kc=class{constructor(t){this.id=t}};Kc=__decorate([re],Kc);var na;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.WorkspaceFolder=3]="WorkspaceFolder"})(na||(na={}));var oa=class{get base(){return this.c}set base(t){this.c=t,this.e=y.file(t)}get baseUri(){return this.e}set baseUri(t){this.e=t,this.c=t.fsPath}constructor(t,i){if(typeof t!="string"&&(!t||!y.isUri(t)&&!y.isUri(t.uri)))throw Ce("base");if(typeof i!="string")throw Ce("pattern");typeof t=="string"?this.baseUri=y.file(t):y.isUri(t)?this.baseUri=t:this.baseUri=t.uri,this.pattern=i}toJSON(){return{pattern:this.pattern,base:this.base,baseUri:this.baseUri.toJSON()}}};oa=__decorate([re],oa);var C8=new WeakMap;function HR(e,t){C8.set(e,t)}var aa=class{constructor(t,i,r,s,n){this.enabled=typeof t=="boolean"?t:!0,typeof i=="string"&&(this.condition=i),typeof r=="string"&&(this.hitCondition=r),typeof s=="string"&&(this.logMessage=s),typeof n=="string"&&(this.mode=n)}get id(){return this.c||(this.c=C8.get(this)??Ut()),this.c}};aa=__decorate([re],aa);var zn=class extends aa{constructor(t,i,r,s,n,o){if(super(i,r,s,n,o),t===null)throw Ce("location");this.location=t}};zn=__decorate([re],zn);var _n=class extends aa{constructor(t,i,r,s,n,o){super(i,r,s,n,o),this.functionName=t}};_n=__decorate([re],_n);var kd=class extends aa{constructor(t,i,r,s,n,o,a,c){if(super(s,n,o,a,c),!i)throw Ce("dataId");this.label=t,this.dataId=i,this.canPersist=r}};kd=__decorate([re],kd);var $d=class{constructor(t,i,r){this.command=t,this.args=i||[],this.options=r}};$d=__decorate([re],$d);var el=class{constructor(t,i){this.port=t,this.host=i}};el=__decorate([re],el);var Cd=class{constructor(t){this.path=t}};Cd=__decorate([re],Cd);var tl=class{constructor(t){this.implementation=t}};tl=__decorate([re],tl);var I8=class{constructor(e,t,i){this.session=e,this.threadId=t,this.frameId=i}},D8=class{constructor(e,t){this.session=e,this.threadId=t}},Id=class{constructor(t,i){this.range=t,this.expression=i}};Id=__decorate([re],Id);var il;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(il||(il={}));var Dd=class{constructor(t,i){this.range=t,this.text=i}};Dd=__decorate([re],Dd);var Pd=class{constructor(t,i,r=!0){this.range=t,this.variableName=i,this.caseSensitiveLookup=r}};Pd=__decorate([re],Pd);var Ad=class{constructor(t,i){this.range=t,this.expression=i}};Ad=__decorate([re],Ad);var L1=class{constructor(t,i){this.frameId=t,this.stoppedLocation=i}};L1=__decorate([re],L1);var N1;(function(e){e[e.AIGenerated=1]="AIGenerated"})(N1||(N1={}));var rl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(rl||(rl={}));var zR=class{constructor(e,t){this.newSymbolName=e,this.tags=t}},ca;(function(e){e[e.Changed=1]="Changed",e[e.Created=2]="Created",e[e.Deleted=3]="Deleted"})(ca||(ca={}));var Dt=pi=class extends Error{static FileExists(t){return new pi(t,Se.FileExists,pi.FileExists)}static FileNotFound(t){return new pi(t,Se.FileNotFound,pi.FileNotFound)}static FileNotADirectory(t){return new pi(t,Se.FileNotADirectory,pi.FileNotADirectory)}static FileIsADirectory(t){return new pi(t,Se.FileIsADirectory,pi.FileIsADirectory)}static NoPermissions(t){return new pi(t,Se.NoPermissions,pi.NoPermissions)}static Unavailable(t){return new pi(t,Se.Unavailable,pi.Unavailable)}constructor(t,i=Se.Unknown,r){super(y.isUri(t)?t.toString(!0):t),this.code=r?.name??"Unknown",M6(this,i),Object.setPrototypeOf(this,pi.prototype),typeof Error.captureStackTrace=="function"&&typeof r=="function"&&Error.captureStackTrace(this,r)}};Dt=pi=__decorate([re],Dt);var M1=class{constructor(t,i,r){this.start=t,this.end=i,this.kind=r}};M1=__decorate([re],M1);var Kr;(function(e){e[e.Comment=1]="Comment",e[e.Imports=2]="Imports",e[e.Region=3]="Region"})(Kr||(Kr={}));var sl;(function(e){e[e.Collapsed=0]="Collapsed",e[e.Expanded=1]="Expanded"})(sl||(sl={}));var F1;(function(e){e[e.Editing=0]="Editing",e[e.Preview=1]="Preview"})(F1||(F1={}));var O1;(function(e){e[e.Published=0]="Published",e[e.Draft=1]="Draft"})(O1||(O1={}));var nl;(function(e){e[e.Unresolved=0]="Unresolved",e[e.Resolved=1]="Resolved"})(nl||(nl={}));var ol;(function(e){e[e.Current=0]="Current",e[e.Outdated=1]="Outdated"})(ol||(ol={}));var al;(function(e){e[e.Reply=1]="Reply",e[e.Comment=2]="Comment"})(al||(al={}));var U1=class{constructor(e,t=[]){this.tokenTypes=e,this.tokenModifiers=t}};function _R(e){return typeof e>"u"||PI(e)}var WR=class fC{constructor(t){if(this.c=0,this.e=0,this.f=!0,this.g=[],this.j=0,this.k=new Map,this.l=new Map,this.m=!1,t){this.m=!0;for(let i=0,r=t.tokenTypes.length;i<r;i++)this.k.set(t.tokenTypes[i],i);for(let i=0,r=t.tokenModifiers.length;i<r;i++)this.l.set(t.tokenModifiers[i],i)}}push(t,i,r,s,n){if(typeof t=="number"&&typeof i=="number"&&typeof r=="number"&&typeof s=="number"&&(typeof n=="number"||typeof n>"u"))return typeof n>"u"&&(n=0),this.q(t,i,r,s,n);if(ke.isRange(t)&&typeof i=="string"&&_R(r))return this.o(t,i,r);throw Ce()}o(t,i,r){if(!this.m)throw new Error("Legend must be provided in constructor");if(t.start.line!==t.end.line)throw new Error("`range` cannot span multiple lines");if(!this.k.has(i))throw new Error("`tokenType` is not in the provided legend");const s=t.start.line,n=t.start.character,o=t.end.character-t.start.character,a=this.k.get(i);let c=0;if(r)for(const l of r){if(!this.l.has(l))throw new Error("`tokenModifier` is not in the provided legend");const u=this.l.get(l);c|=1<<u>>>0}this.q(s,n,o,a,c)}q(t,i,r,s,n){if(this.f&&(t<this.c||t===this.c&&i<this.e)){this.f=!1;const c=this.g.length/5|0;let l=0,u=0;for(let h=0;h<c;h++){let f=this.g[5*h],p=this.g[5*h+1];f===0?(f=l,p+=u):f+=l,this.g[5*h]=f,this.g[5*h+1]=p,l=f,u=p}}let o=t,a=i;this.f&&this.j>0&&(o-=this.c,o===0&&(a-=this.e)),this.g[this.j++]=o,this.g[this.j++]=a,this.g[this.j++]=r,this.g[this.j++]=s,this.g[this.j++]=n,this.c=t,this.e=i}static r(t){const i=[],r=t.length/5|0;for(let a=0;a<r;a++)i[a]=a;i.sort((a,c)=>{const l=t[5*a],u=t[5*c];if(l===u){const h=t[5*a+1],f=t[5*c+1];return h-f}return l-u});const s=new Uint32Array(t.length);let n=0,o=0;for(let a=0;a<r;a++){const c=5*i[a],l=t[c+0],u=t[c+1],h=t[c+2],f=t[c+3],p=t[c+4],m=l-n,w=m===0?u-o:u,x=5*a;s[x+0]=m,s[x+1]=w,s[x+2]=h,s[x+3]=f,s[x+4]=p,n=l,o=u}return s}build(t){return this.f?new la(new Uint32Array(this.g),t):new la(fC.r(this.g),t)}},la=class{constructor(e,t){this.resultId=t,this.data=e}},P8=class{constructor(e,t,i){this.start=e,this.deleteCount=t,this.data=i}},Td=class{constructor(e,t){this.resultId=t,this.edits=e}},Rd;(function(e){e[e.Separate=0]="Separate",e[e.MergeWithParent=1]="MergeWithParent"})(Rd||(Rd={}));var VR=class{constructor(e){this.name=e}},j1;(function(e){e[e.Title=1]="Title",e[e.Inline=2]="Inline"})(j1||(j1={}));var cl=class{static{this.Back={iconPath:new ci("arrow-left")}}constructor(){}};cl=__decorate([re],cl);var ll;(function(e){e[e.Separator=-1]="Separator",e[e.Default=0]="Default"})(ll||(ll={}));var ua;(function(e){e[e.Info=1]="Info",e[e.Warning=2]="Warning",e[e.Error=3]="Error"})(ua||(ua={}));var Wn;(function(e){e[e.UI=1]="UI",e[e.Workspace=2]="Workspace"})(Wn||(Wn={}));var B1=class{static validate(e){if(typeof e.badge=="string"){let t=m4(e.badge,0);if(t<e.badge.length&&(t+=m4(e.badge,t)),e.badge.length>t)throw new Error("The 'badge'-property must be undefined or a short character")}else if(e.badge&&!ci.isThemeIcon(e.badge))throw new Error("The 'badge'-property is not a valid ThemeIcon");if(!e.color&&!e.badge&&!e.tooltip)throw new Error("The decoration is empty");return!0}constructor(e,t,i){this.badge=e,this.tooltip=t,this.color=i}},Ld=class{constructor(t){this.kind=t}};Ld=__decorate([re],Ld);var Hs;(function(e){e[e.Light=1]="Light",e[e.Dark=2]="Dark",e[e.HighContrast=3]="HighContrast",e[e.HighContrastLight=4]="HighContrastLight"})(Hs||(Hs={}));var lr=class Nb{static isNotebookRange(t){return t instanceof Nb?!0:t?typeof t.start=="number"&&typeof t.end=="number":!1}get start(){return this.c}get end(){return this.e}get isEmpty(){return this.c===this.e}constructor(t,i){if(t<0)throw Ce("start must be positive");if(i<0)throw Ce("end must be positive");t<=i?(this.c=t,this.e=i):(this.c=i,this.e=t)}with(t){let i=this.c,r=this.e;return t.start!==void 0&&(i=t.start),t.end!==void 0&&(r=t.end),i===this.c&&r===this.e?this:new Nb(i,r)}},Nd=class Mb{static validate(t){if(typeof t.kind!="number")throw new Error("NotebookCellData MUST have 'kind' property");if(typeof t.value!="string")throw new Error("NotebookCellData MUST have 'value' property");if(typeof t.languageId!="string")throw new Error("NotebookCellData MUST have 'languageId' property")}static isNotebookCellDataArray(t){return Array.isArray(t)&&t.every(i=>Mb.isNotebookCellData(i))}static isNotebookCellData(t){return!0}constructor(t,i,r,s,n,o,a){this.kind=t,this.value=i,this.languageId=r,this.mime=s,this.outputs=n??[],this.metadata=o,this.executionSummary=a,Mb.validate(this)}},A8=class{constructor(e){this.cells=e}},T8=class gs{static isNotebookCellOutputItem(t){return t instanceof gs?!0:t?typeof t.mime=="string"&&t.data instanceof Uint8Array:!1}static error(t){const i={name:t.name,message:t.message,stack:t.stack};return gs.json(i,"application/vnd.code.notebook.error")}static stdout(t){return gs.text(t,"application/vnd.code.notebook.stdout")}static stderr(t){return gs.text(t,"application/vnd.code.notebook.stderr")}static bytes(t,i="application/octet-stream"){return new gs(t,i)}static#e=new TextEncoder;static text(t,i=kr.text){const r=gs.#e.encode(String(t));return new gs(r,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return gs.text(r,i)}constructor(t,i){this.data=t,this.mime=i;const r=a6(i,!0);if(!r)throw new Error(`INVALID mime type: ${i}. Must be in the format "type/subtype[;optionalparameter]"`);this.mime=r}},Md=class Fb{static isNotebookCellOutput(t){return t instanceof Fb?!0:!t||typeof t!="object"?!1:typeof t.id=="string"&&Array.isArray(t.items)}static ensureUniqueMimeTypes(t,i=!1){const r=new Set,s=new Set;for(let n=0;n<t.length;n++){const o=t[n],a=a6(o.mime);if(!r.has(a)||j7(a)){r.add(a);continue}s.add(n),i&&console.warn(`DUPLICATED mime type '${o.mime}' will be dropped`)}return s.size===0?t:t.filter((n,o)=>!s.has(o))}constructor(t,i,r){this.items=Fb.ensureUniqueMimeTypes(t,!0),typeof i=="string"?(this.id=i,this.metadata=r):(this.id=Ut(),this.metadata=i??r)}},qR=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},Vn;(function(e){e[e.Markup=1]="Markup",e[e.Code=2]="Code"})(Vn||(Vn={}));var H1;(function(e){e[e.Idle=1]="Idle",e[e.Pending=2]="Pending",e[e.Executing=3]="Executing"})(H1||(H1={}));var Fd;(function(e){e[e.Left=1]="Left",e[e.Right=2]="Right"})(Fd||(Fd={}));var Od;(function(e){e[e.Default=0]="Default",e[e.InCenter=1]="InCenter",e[e.InCenterIfOutsideViewport=2]="InCenterIfOutsideViewport",e[e.AtTop=3]="AtTop"})(Od||(Od={}));var GR=class{constructor(e,t){this.text=e,this.alignment=t}},z1;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred"})(z1||(z1={}));var Ud;(function(e){e[e.Default=1]="Default",e[e.Preferred=2]="Preferred",e[e.Hidden=-1]="Hidden"})(Ud||(Ud={}));var R8=class{constructor(e,t=[]){this.uri=e,this.provides=Ni(t)}},JR=class{constructor(e){this.label=e}},ul;(function(e){e[e.Named=1]="Named",e[e.Indexed=2]="Indexed"})(ul||(ul={}));var _1=class{constructor(t,i){this.label=t,this.timestamp=i}};_1=__decorate([re],_1);var ha;(function(e){e[e.Production=1]="Production",e[e.Development=2]="Development",e[e.Test=3]="Test"})(ha||(ha={}));var jd;(function(e){e[e.Node=1]="Node",e[e.Webworker=2]="Webworker"})(jd||(jd={}));var zs;(function(e){e[e.Other=0]="Other",e[e.Comment=1]="Comment",e[e.String=2]="String",e[e.RegEx=3]="RegEx"})(zs||(zs={}));var ZR=class{constructor(e,t){this.ranges=e,this.wordPattern=t}},YR=class{constructor(e){this.c=e}get autoForwardAction(){return this.c}},W1;(function(e){e[e.Queued=1]="Queued",e[e.Running=2]="Running",e[e.Passed=3]="Passed",e[e.Failed=4]="Failed",e[e.Skipped=5]="Skipped",e[e.Errored=6]="Errored"})(W1||(W1={}));var da;(function(e){e[e.Run=1]="Run",e[e.Debug=2]="Debug",e[e.Coverage=3]="Coverage"})(da||(da={}));var L8=class{constructor(e,t,i){this.controllerId=e,this.profileId=t,this.kind=i}},Bd=class{constructor(t=void 0,i=void 0,r=void 0,s=!1,n=!0){this.include=t,this.exclude=i,this.profile=r,this.continuous=s,this.preserveFocus=n}};Bd=__decorate([re],Bd);var Hd=c1=class{static diff(t,i,r){const s=new c1(t);return s.expectedOutput=i,s.actualOutput=r,s}constructor(t){this.message=t}};Hd=c1=__decorate([re],Hd);var hl=class{constructor(t){this.id=t}};hl=__decorate([re],hl);var QR=class{constructor(e,t,i){this.label=e,this.uri=t,this.position=i}},zd=class{constructor(e,t){this.covered=e,this.total=t,_d(this)}};function _d(e){if(e){if(e.covered>e.total)throw new Error(`The total number of covered items (${e.covered}) cannot be greater than the total (${e.total})`);if(e.total<0)throw new Error(`The number of covered items (${e.total}) cannot be negative`)}}var Wd=class pC{static fromDetails(t,i){const r=new zd(0,0),s=new zd(0,0),n=new zd(0,0);for(const a of i)if("branches"in a){r.total+=1,r.covered+=a.executed?1:0;for(const c of a.branches)s.total+=1,s.covered+=c.executed?1:0}else n.total+=1,n.covered+=a.executed?1:0;const o=new pC(t,r,s.total>0?s:void 0,n.total>0?n:void 0);return o.detailedCoverage=i,o}constructor(t,i,r,s,n=[]){this.uri=t,this.statementCoverage=i,this.branchCoverage=r,this.declarationCoverage=s,this.includesTests=n}},N8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i=[]){this.executed=e,this.location=t,this.branches=i}},M8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.executed=e,this.location=t,this.label=i}},F8=class{get executionCount(){return+this.executed}set executionCount(e){this.executed=e}constructor(e,t,i){this.name=e,this.executed=t,this.location=i}},V1;(function(e){e[e.None=0]="None",e[e.Option=1]="Option",e[e.Default=2]="Default",e[e.Preferred=3]="Preferred"})(V1||(V1={}));var q1;(function(e){e[e.Untrusted=0]="Untrusted",e[e.Trusted=1]="Trusted",e[e.Unspecified=2]="Unspecified"})(q1||(q1={}));var G1;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(G1||(G1={}));var J1=class{constructor(e,t,i,r,s,n){this.kind=e,this.name=t,this.detail=i,this.uri=r,this.range=s,this.selectionRange=n}},Z1=class{constructor(e){this.uri=e}},Vd=class{constructor(e,t){this.original=e,this.modified=t}},O8=class{constructor(e,t,i,r){this.base=e,this.input1=t,this.input2=i,this.result=r}},Y1=class{constructor(e,t){this.uri=e,this.viewType=t}},U8=class{constructor(e){this.viewType=e}},Q1=class{constructor(e,t){this.uri=e,this.notebookType=t}},X1=class{constructor(e,t,i){this.original=e,this.modified=t,this.notebookType=i}},j8=class{constructor(){}},B8=class{constructor(e,t){this.uri=e,this.inputBoxUri=t}},H8=class{constructor(){}},z8=class{constructor(e){this.textDiffs=e}},K1;(function(e){e[e.Down=0]="Down",e[e.Up=1]="Up"})(K1||(K1={}));var ev;(function(e){e[e.Action=1]="Action",e[e.Toolbar=2]="Toolbar"})(ev||(ev={}));var tv;(function(e){e[e.Short=1]="Short",e[e.Medium=2]="Medium",e[e.Full=3]="Full"})(tv||(tv={}));var XR=class{constructor(e,t,i){this.id=e,this.label=t,this.values=i}},qn;(function(e){e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.Saved=3]="Saved"})(qn||(qn={}));var iv;(function(e){e[e.Keep=1]="Keep",e[e.Undo=2]="Undo",e[e.UserModification=3]="UserModification"})(iv||(iv={}));var rv;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful",e[e.Undone=2]="Undone",e[e.Accepted=3]="Accepted",e[e.Bug=4]="Bug"})(rv||(rv={}));var dl;(function(e){e[e.Unhelpful=0]="Unhelpful",e[e.Helpful=1]="Helpful"})(dl||(dl={}));var qd=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ci(e):e}},fl=class{constructor(e,t){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ci(e):e,this.vulnerabilities=t}},Gd=class{constructor(e,t,i,r){this.title=e,this.message=t,this.data=i,this.buttons=r}},Jd=class{constructor(e,t){this.value=e,this.baseUri=t}},pl=class{constructor(e,t){this.value=e,this.value2=e,this.title=t}},sv=class{constructor(e){this.value=e}},Zd=class{constructor(e,t){this.value=e,this.task=t}},gl=class{constructor(e){if(typeof e!="string"&&e.isTrusted===!0)throw new Error("The boolean form of MarkdownString.isTrusted is NOT supported for chat participants.");this.value=typeof e=="string"?new Ci(e):e}},Yd=class{constructor(e){this.value=e}},Gn=class{constructor(e,t,i){this.value=e,this.iconPath=t,this.options=i}},Qd=class{constructor(e,t){this.value=e,this.isEdit=t}},Xd=class{constructor(e,t,i){this.value=e,this.license=t,this.snippet=i}},Kd=class{constructor(e,t){this.uri=e,this.range=t}},nv=class{constructor(e){this.extensions=e}},ml=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},ef=class{constructor(e,t){this.uri=e,t===!0?(this.isDone=!0,this.edits=[]):this.edits=Array.isArray(t)?t:[t]}},vl=class{constructor(e){this.toolName=e}},ov=class{constructor(e,t,i,r,s,n){this.prompt=e,this.command=t,this.references=i,this.participant=r,this.toolReferences=s,this.editedFileEvents=n}},_8=class{constructor(e,t,i,r){this.response=e,this.result=t,this.participant=i,this.command=r}},ur;(function(e){e[e.Panel=1]="Panel",e[e.Terminal=2]="Terminal",e[e.Notebook=3]="Notebook",e[e.Editor=4]="Editor"})(ur||(ur={}));var av;(function(e){e[e.Complete=1]="Complete",e[e.Partial=2]="Partial",e[e.Omitted=3]="Omitted"})(av||(av={}));var W8=class{constructor(e,t,i){this.document=e,this.selection=t,this.wholeRange=i}},V8=class{constructor(e){this.cell=e}},q8=class{constructor(e,t,i){this.mimeType=e,this.data=t,this.reference=i}},G8=class{constructor(e){this.diagnostics=e}},Ii;(function(e){e[e.User=1]="User",e[e.Assistant=2]="Assistant",e[e.System=3]="System"})(Ii||(Ii={}));var tf=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},cv=class{constructor(e,t,i){this.callId=e,this.content=t,this.isError=i??!1}},KR=class{constructor(e,t,i,r){this.command=e,this.language=t,this.confirmationMessages=i,this.presentation=r}},lv;(function(e){e[e.Info=0]="Info",e[e.Warning=1]="Warning",e[e.Error=2]="Error"})(lv||(lv={}));var J8=class Ob{static User(t,i){return new Ob(Ii.User,t,i)}static Assistant(t,i){return new Ob(Ii.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new ut(t)]:this.c=t}get content(){return this.c}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},Z8=class Ub{static User(t,i){return new Ub(Ii.User,t,i)}static Assistant(t,i){return new Ub(Ii.Assistant,t,i)}set content(t){typeof t=="string"?this.c=[new ut(t)]:this.c=t}get content(){return this.c}set content2(t){t&&(this.content=t.map(i=>typeof i=="string"?new ut(i):i))}get content2(){return this.content.map(t=>t instanceof ut?t.value:t)}constructor(t,i,r){this.c=[],this.role=t,this.content=i,this.name=r}},Jn=class{constructor(e,t,i){this.callId=e,this.name=t,this.input=i}},ut=class{constructor(e){this.value=e}toJSON(){return{$mid:21,value:this.value}}},es=class Qp{constructor(t,i){this.mimeType=i,this.data=t}static image(t,i){return new Qp(t,i)}static json(t,i="text/x-json"){const r=JSON.stringify(t,void 0,"	");return new Qp(ae.fromString(r).buffer,i)}static text(t,i=kr.text){return new Qp(ae.fromString(t).buffer,i)}toJSON(){return{$mid:23,mimeType:this.mimeType,data:this.data}}},ts;(function(e){e.PNG="image/png",e.JPEG="image/jpeg",e.GIF="image/gif",e.WEBP="image/webp",e.BMP="image/bmp"})(ts||(ts={}));var Rr=class{constructor(e){this.value=e}toJSON(){return{$mid:22,value:this.value}}},is=class Ur extends Error{static#e="LanguageModelError";static NotFound(t){return new Ur(t,Ur.NotFound.name)}static NoPermissions(t){return new Ur(t,Ur.NoPermissions.name)}static Blocked(t){return new Ur(t,Ur.Blocked.name)}static tryDeserialize(t){if(t.name===Ur.#e)return new Ur(t.message,t.code,t.cause)}constructor(t,i,r){super(t,{cause:r}),this.name=Ur.#e,this.code=i??""}},rf=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},Y8=class{constructor(e){this.content=e}toJSON(){return{$mid:20,content:this.content}}},eL=class extends rf{},uv;(function(e){e[e.Auto=1]="Auto",e[e.Required=2]="Required"})(uv||(uv={}));var hv;(function(e){e[e.SymbolInformation=1]="SymbolInformation",e[e.CommandInformation=2]="CommandInformation",e[e.SearchInformation=3]="SearchInformation",e[e.SettingInformation=4]="SettingInformation"})(hv||(hv={}));var dv;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(dv||(dv={}));var fv;(function(e){e[e.Started=1]="Started",e[e.Recognizing=2]="Recognizing",e[e.Recognized=3]="Recognized",e[e.Stopped=4]="Stopped",e[e.Error=5]="Error"})(fv||(fv={}));var pv;(function(e){e[e.Started=1]="Started",e[e.Stopped=2]="Stopped",e[e.Error=3]="Error"})(pv||(pv={}));var gv;(function(e){e[e.Recognized=1]="Recognized",e[e.Stopped=2]="Stopped"})(gv||(gv={}));var tL=class{constructor(e,t){this.text=e,this.range=t}},wl;(function(e){e[e.Invoke=0]="Invoke",e[e.Automatic=1]="Automatic"})(wl||(wl={}));var iL=class{constructor(e,t,i,r={},s){this.label=e,this.command=t,this.args=i,this.env=r,this.version=s}},rL=class{constructor(e,t,i={},r){this.label=e,this.uri=t,this.headers=i,this.version=r}},YW=B("IAiSettingsSearchService"),_s;(function(e){e[e.EMBEDDED=1]="EMBEDDED",e[e.LLM_RANKED=2]="LLM_RANKED",e[e.CANCELED=3]="CANCELED"})(_s||(_s={}));var sL={IconContribution:"base.contributions.icons"},Q8;(function(e){function t(i,r){let s=i.defaults;for(;Et.isThemeIcon(s);){const n=fa.getIcon(s.id);if(!n)return;s=n.defaults}return s}e.getDefinition=t})(Q8||(Q8={}));var X8;(function(e){function t(r){return{weight:r.weight,style:r.style,src:r.src.map(s=>({format:s.format,location:s.location.toString()}))}}e.toJSONObject=t;function i(r){const s=n=>Ue(n)?n:void 0;if(r&&Array.isArray(r.src)&&r.src.every(n=>Ue(n.format)&&Ue(n.location)))return{weight:s(r.weight),style:s(r.style),src:r.src.map(n=>({format:n.format,location:y.parse(n.location)}))}}e.fromJSONObject=i})(X8||(X8={}));var nL=/^([\w_-]+)$/,oL=d(2535,null),aL=class extends ne{constructor(){super(),this.a=this.B(new P),this.onDidChange=this.a.event,this.f={definitions:{icons:{type:"object",properties:{fontId:{type:"string",description:d(2536,null),pattern:nL.source,patternErrorMessage:oL},fontCharacter:{type:"string",description:d(2537,null)}},additionalProperties:!1,defaultSnippets:[{body:{fontCharacter:"\\\\e030"}}]}},type:"object",properties:{}},this.g={type:"string",pattern:`^${Et.iconNameExpression}$`,enum:[],enumDescriptions:[]},this.b={},this.h={}}registerIcon(e,t,i,r){const s=this.b[e];if(s){if(i&&!s.description){s.description=i,this.f.properties[e].markdownDescription=`${i} $(${e})`;const a=this.g.enum.indexOf(e);a!==-1&&(this.g.enumDescriptions[a]=i),this.a.fire()}return s}const n={id:e,description:i,defaults:t,deprecationMessage:r};this.b[e]=n;const o={$ref:"#/definitions/icons"};return r&&(o.deprecationMessage=r),i&&(o.markdownDescription=`${i}: $(${e})`),this.f.properties[e]=o,this.g.enum.push(e),this.g.enumDescriptions.push(i||""),this.a.fire(),{id:e}}deregisterIcon(e){delete this.b[e],delete this.f.properties[e];const t=this.g.enum.indexOf(e);t!==-1&&(this.g.enum.splice(t,1),this.g.enumDescriptions.splice(t,1)),this.a.fire()}getIcons(){return Object.keys(this.b).map(e=>this.b[e])}getIcon(e){return this.b[e]}getIconSchema(){return this.f}getIconReferenceSchema(){return this.g}registerIconFont(e,t){const i=this.h[e];return i||(this.h[e]=t,this.a.fire(),t)}deregisterIconFont(e){delete this.h[e]}getIconFont(e){return this.h[e]}toString(){const e=(s,n)=>s.id.localeCompare(n.id),t=s=>{for(;Et.isThemeIcon(s.defaults);)s=this.b[s.defaults.id];return`codicon codicon-${s?s.id:""}`},i=[];i.push("| preview     | identifier                        | default codicon ID                | description"),i.push("| ----------- | --------------------------------- | --------------------------------- | --------------------------------- |");const r=Object.keys(this.b).map(s=>this.b[s]);for(const s of r.filter(n=>!!n.description).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|${Et.isThemeIcon(s.defaults)?s.defaults.id:s.id}|${s.description||""}|`);i.push("| preview     | identifier                        "),i.push("| ----------- | --------------------------------- |");for(const s of r.filter(n=>!Et.isThemeIcon(n.defaults)).sort(e))i.push(`|<i class="${t(s)}"></i>|${s.id}|`);return i.join(`
`)}},fa=new aL;jt.add(sL.IconContribution,fa);function bl(e,t,i,r){return fa.registerIcon(e,t,i,r)}function cL(){const e=Q2();for(const t in e){const i="\\"+e[t].toString(16);fa.registerIcon(t,{fontCharacter:i})}}cL();var K8="vscode://schemas/icons",ex=jt.as(Th.JSONContribution);ex.registerSchema(K8,fa.getIconSchema());var tx=new mn(()=>ex.notifySchemaChanged(K8),200);fa.onDidChange(()=>{tx.isScheduled()||tx.schedule()});var QW=bl("widget-close",te.close,d(2538,null)),XW=bl("goto-previous-location",te.arrowUp,d(2539,null)),KW=bl("goto-next-location",te.arrowDown,d(2540,null)),eV=Et.modify(te.sync,"spin"),tV=Et.modify(te.loading,"spin"),yl;(function(e){e.LATEST_PROTOCOL_VERSION="2025-03-26",e.JSONRPC_VERSION="2.0",e.PARSE_ERROR=-32700,e.INVALID_REQUEST=-32600,e.METHOD_NOT_FOUND=-32601,e.INVALID_PARAMS=-32602,e.INTERNAL_ERROR=-32603})(yl||(yl={}));function lL(e,t){return je.toKey(e)+"/"+t}var ix;(function(e){e[e.WorkspaceFolder=0]="WorkspaceFolder",e[e.Workspace=100]="Workspace",e[e.User=200]="User",e[e.Extension=300]="Extension",e[e.Filesystem=400]="Filesystem",e[e.RemoteBoost=-50]="RemoteBoost"})(ix||(ix={}));var rx;(function(e){function t(i,r){return i.id===r.id&&i.remoteAuthority===r.remoteAuthority&&i.label===r.label&&i.isTrustedByDefault===r.isTrustedByDefault}e.equals=t})(rx||(rx={}));var sx;(function(e){function t(s){return s}e.toSerialized=t;function i(s){return{id:s.id,label:s.label,cacheNonce:s.cacheNonce,launch:xl.fromSerialized(s.launch),variableReplacement:s.variableReplacement?mv.fromSerialized(s.variableReplacement):void 0}}e.fromSerialized=i;function r(s,n){return s.id===n.id&&s.label===n.label&&Li(s.roots,n.roots,(o,a)=>o.toString()===a.toString())&&oi(s.launch,n.launch)&&oi(s.presentation,n.presentation)&&oi(s.variableReplacement,n.variableReplacement)&&oi(s.devMode,n.devMode)}e.equals=r})(sx||(sx={}));var mv;(function(e){function t(r){return r}e.toSerialized=t;function i(r){return{section:r.section,folder:r.folder?{...r.folder,uri:y.revive(r.folder.uri)}:void 0,target:r.target}}e.fromSerialized=i})(mv||(mv={}));var nx;(function(e){e[e.HasUnknown=0]="HasUnknown",e[e.LoadingUnknown=1]="LoadingUnknown",e[e.AllKnown=2]="AllKnown"})(nx||(nx={}));var iV=B("IMcpService"),ox;(function(e){e[e.Unknown=0]="Unknown",e[e.Cached=1]="Cached",e[e.Outdated=2]="Outdated",e[e.RefreshingFromUnknown=3]="RefreshingFromUnknown",e[e.RefreshingFromCached=4]="RefreshingFromCached",e[e.Live=5]="Live"})(ox||(ox={}));var ax;(function(e){e[e.Stdio=1]="Stdio",e[e.HTTP=2]="HTTP"})(ax||(ax={}));var xl;(function(e){function t(r){return r}e.toSerialized=t;function i(r){switch(r.type){case 2:return{type:r.type,uri:y.revive(r.uri),headers:r.headers};case 1:return{type:r.type,cwd:r.cwd,command:r.command,args:r.args,env:r.env,envFile:r.envFile}}}e.fromSerialized=i})(xl||(xl={}));var cx;(function(e){let t;(function(i){i[i.Stopped=0]="Stopped",i[i.Starting=1]="Starting",i[i.Running=2]="Running",i[i.Error=3]="Error"})(t=e.Kind||(e.Kind={})),e.toString=i=>{switch(i.state){case 0:return d(8856,null);case 1:return d(8857,null);case 2:return d(8858,null);case 3:return d(8859,null,i.message);default:pg(i)}},e.toKindString=i=>{switch(i){case 0:return"stopped";case 1:return"starting";case 2:return"running";case 3:return"error";default:pg(i)}},e.canBeStarted=i=>i===3||i===0,e.isRunning=i=>!e.canBeStarted(i.state)})(cx||(cx={}));var uL=B("IMcpWorkbenchService"),lx=class extends ne{constructor(t,i){super(),this.f=t,this.B(i.onChange(this.update,this))}set mcpServer(t){this.f.forEach(i=>i.mcpServer=t)}update(t){for(const i of this.f)t&&i.mcpServer?t.name===i.mcpServer.name&&(i.mcpServer=t):i.update()}};lx=__decorate([__param(1,uL)],lx);var sV=new C("mcpServersGalleryEnabled",!1),nV=new C("hasInstalledMcpServers",!1),oV=bl("mcp-server",te.mcp,d(8860,null)),ux;(function(e){e.scheme="mcp-resource";function t(r,s){return typeof s=="string"&&(s=y.parse(s)),s.with({scheme:e.scheme,authority:by(ae.fromString(r.id)),path:["",s.scheme,s.authority].join("/")+s.path})}e.fromServer=t;function i(r){if(typeof r=="string"&&(r=y.parse(r)),r.scheme!==e.scheme)throw new Error(`Invalid MCP resource URI: ${r.toString()}`);const s=r.path.split("/");if(s.length<3)throw new Error(`Invalid MCP resource URI: ${r.toString()}`);const[,n,o,...a]=s;return{definitionId:KI(r.authority).toString(),resourceURI:r.with({scheme:n,authority:o,path:"/"+a.join("/")})}}e.toServer=i})(ux||(ux={}));var hx;(function(e){e[e.Logging=1]="Logging",e[e.Completions=2]="Completions",e[e.Prompts=4]="Prompts",e[e.PromptsListChanged=8]="PromptsListChanged",e[e.Resources=16]="Resources",e[e.ResourcesSubscribe=32]="ResourcesSubscribe",e[e.ResourcesListChanged=64]="ResourcesListChanged",e[e.Tools=128]="Tools",e[e.ToolsListChanged=256]="ToolsListChanged"})(hx||(hx={}));var aV=B("IMcpServerSampling"),dx;(function(e){e.Prefix="mcp_",e[e.MaxPrefixLen=18]="MaxPrefixLen",e[e.MaxLength=64]="MaxLength"})(dx||(dx={}));var hr;(function(e){function t(r){const{selectionStartLineNumber:s,selectionStartColumn:n,positionLineNumber:o,positionColumn:a}=r,c=new Ae(s-1,n-1),l=new Ae(o-1,a-1);return new Xr(c,l)}e.to=t;function i(r){const{anchor:s,active:n}=r;return{selectionStartLineNumber:s.line+1,selectionStartColumn:s.character+1,positionLineNumber:n.line+1,positionColumn:n.character+1}}e.from=i})(hr||(hr={}));var F;(function(e){function t(r){if(!r)return;const{start:s,end:n}=r;return{startLineNumber:s.line+1,startColumn:s.character+1,endLineNumber:n.line+1,endColumn:n.character+1}}e.from=t;function i(r){if(!r)return;const{startLineNumber:s,startColumn:n,endLineNumber:o,endColumn:a}=r;return new ke(s-1,n-1,o-1,a-1)}e.to=i})(F||(F={}));var Lr;(function(e){function t(r){return{uri:r.uri,range:F.from(r.range)}}e.from=t;function i(r){return new Bi(y.revive(r.uri),F.to(r.range))}e.to=i})(Lr||(Lr={}));var vv;(function(e){function t(i){switch(i){case 1:return zs.Comment;case 0:return zs.Other;case 3:return zs.RegEx;case 2:return zs.String}}e.to=t})(vv||(vv={}));var ze;(function(e){function t(r){return new Ae(r.lineNumber-1,r.column-1)}e.to=t;function i(r){return{lineNumber:r.line+1,column:r.character+1}}e.from=i})(ze||(ze={}));var pa;(function(e){function t(s,n,o){return vt(Ni(s).map(a=>i(a,n,o)))}e.from=t;function i(s,n,o){if(typeof s=="string")return{$serialized:!0,language:s,isBuiltin:o?.isBuiltin};if(s)return{$serialized:!0,language:s.language,scheme:r(s.scheme,n),pattern:Pi.from(s.pattern)??void 0,exclusive:s.exclusive,notebookType:s.notebookType,isBuiltin:o?.isBuiltin}}function r(s,n){return n&&typeof s=="string"?n.transformOutgoingScheme(s):s}})(pa||(pa={}));var sf;(function(e){function t(r){switch(r){case On.Unnecessary:return 1;case On.Deprecated:return 2}}e.from=t;function i(r){switch(r){case 1:return On.Unnecessary;case 2:return On.Deprecated;default:return}}e.to=i})(sf||(sf={}));var ga;(function(e){function t(r){let s;return r.code&&(Ue(r.code)||cn(r.code)?s=String(r.code):s={value:String(r.code.value),target:r.code.target}),{...F.from(r.range),message:r.message,source:r.source,code:s,severity:El.from(r.severity),relatedInformation:r.relatedInformation&&r.relatedInformation.map(nf.from),tags:Array.isArray(r.tags)?vt(r.tags.map(sf.from)):void 0}}e.from=t;function i(r){const s=new ad(F.to(r),r.message,El.to(r.severity));return s.source=r.source,s.code=Ue(r.code)?r.code:r.code?.value,s.relatedInformation=r.relatedInformation&&r.relatedInformation.map(nf.to),s.tags=r.tags&&vt(r.tags.map(sf.to)),s}e.to=i})(ga||(ga={}));var nf;(function(e){function t(r){return{...F.from(r.location.range),message:r.message,resource:r.location.uri}}e.from=t;function i(r){return new Bc(new Bi(r.resource,F.to(r)),r.message)}e.to=i})(nf||(nf={}));var El;(function(e){function t(r){switch(r){case Qt.Error:return fi.Error;case Qt.Warning:return fi.Warning;case Qt.Information:return fi.Info;case Qt.Hint:return fi.Hint}return fi.Error}e.from=t;function i(r){switch(r){case fi.Info:return Qt.Information;case fi.Warning:return Qt.Warning;case fi.Error:return Qt.Error;case fi.Hint:return Qt.Hint;default:return Qt.Error}}e.to=i})(El||(El={}));var Pt;(function(e){function t(r){return typeof r=="number"&&r>=Zc.One?r-1:r===Zc.Beside?oR:nR}e.from=t;function i(r){if(typeof r=="number"&&r>=0)return r+1;throw new Error("invalid 'EditorGroupColumn'")}e.to=i})(Pt||(Pt={}));function hL(e){return typeof e.range<"u"}function fx(e){return e.length===0?!0:!!hL(e[0])}var we;(function(e){function t(a){return a.map(e.from)}e.fromMany=t;function i(a){return a&&typeof a=="object"&&typeof a.language=="string"&&typeof a.value=="string"}function r(a){let c;if(i(a)){const{language:h,value:f}=a;c={value:"```"+h+`
`+f+"\n```\n"}}else Ci.isMarkdownString(a)?c={value:a.value,isTrusted:a.isTrusted,supportThemeIcons:a.supportThemeIcons,supportHtml:a.supportHtml,baseUri:a.baseUri}:typeof a=="string"?c={value:a}:c={value:""};const l=Object.create(null);c.uris=l;const u=({href:h})=>{try{let f=y.parse(h,!0);f=f.with({query:s(f.query,l)}),l[h]=f}catch{}return""};return it.walkTokens(it.lexer(c.value),h=>{h.type==="link"?u({href:h.href}):h.type==="image"&&typeof h.href=="string"&&u(sP(h.href))}),c}e.from=r;function s(a,c){if(!a)return a;let l;try{l=o6(a)}catch{}if(!l)return a;let u=!1;return l=To(l,h=>{if(y.isUri(h)){const f=`__uri_${Math.random().toString(16).slice(2,8)}`;return c[f]=h,u=!0,f}else return}),u?JSON.stringify(l):a}function n(a){const c=new Ci(a.value,a.supportThemeIcons);return c.isTrusted=a.isTrusted,c.supportHtml=a.supportHtml,c.baseUri=a.baseUri?y.from(a.baseUri):void 0,c}e.to=n;function o(a){if(a)return typeof a=="string"?a:e.from(a)}e.fromStrict=o})(we||(we={}));function dL(e){return fx(e)?e.map(t=>({range:F.from(t.range),hoverMessage:Array.isArray(t.hoverMessage)?we.fromMany(t.hoverMessage):t.hoverMessage?we.from(t.hoverMessage):void 0,renderOptions:t.renderOptions})):e.map(t=>({range:F.from(t)}))}function of(e){return typeof e>"u"?e:typeof e=="string"?y.file(e):e}var ma;(function(e){function t(i){return typeof i>"u"?i:{contentText:i.contentText,contentIconPath:i.contentIconPath?of(i.contentIconPath):void 0,border:i.border,borderColor:i.borderColor,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,color:i.color,backgroundColor:i.backgroundColor,margin:i.margin,width:i.width,height:i.height}}e.from=t})(ma||(ma={}));var af;(function(e){function t(i){return typeof i>"u"?i:{backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?of(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ma.from(i.before):void 0,after:i.after?ma.from(i.after):void 0}}e.from=t})(af||(af={}));var wv;(function(e){function t(i){if(typeof i>"u")return i;switch(i){case jn.OpenOpen:return 0;case jn.ClosedClosed:return 1;case jn.OpenClosed:return 2;case jn.ClosedOpen:return 3}}e.from=t})(wv||(wv={}));var bv;(function(e){function t(i){return{isWholeLine:i.isWholeLine,rangeBehavior:i.rangeBehavior?wv.from(i.rangeBehavior):void 0,overviewRulerLane:i.overviewRulerLane,light:i.light?af.from(i.light):void 0,dark:i.dark?af.from(i.dark):void 0,backgroundColor:i.backgroundColor,outline:i.outline,outlineColor:i.outlineColor,outlineStyle:i.outlineStyle,outlineWidth:i.outlineWidth,border:i.border,borderColor:i.borderColor,borderRadius:i.borderRadius,borderSpacing:i.borderSpacing,borderStyle:i.borderStyle,borderWidth:i.borderWidth,fontStyle:i.fontStyle,fontWeight:i.fontWeight,textDecoration:i.textDecoration,cursor:i.cursor,color:i.color,opacity:i.opacity,letterSpacing:i.letterSpacing,gutterIconPath:i.gutterIconPath?of(i.gutterIconPath):void 0,gutterIconSize:i.gutterIconSize,overviewRulerColor:i.overviewRulerColor,before:i.before?ma.from(i.before):void 0,after:i.after?ma.from(i.after):void 0}}e.from=t})(bv||(bv={}));var At;(function(e){function t(r){return{text:r.newText,eol:r.newEol&&ya.from(r.newEol),range:F.from(r.range)}}e.from=t;function i(r){const s=new Fs(F.to(r.range),r.text);return s.newEol=typeof r.eol>"u"?void 0:ya.to(r.eol),s}e.to=i})(At||(At={}));var Di;(function(e){function t(r,s){const n={edits:[]};if(r instanceof Mn){const o=new oy;for(const a of r._allEntries())a._type===1&&y.isUri(a.to)&&a.from===void 0&&o.add(a.to);for(const a of r._allEntries())if(a._type===1){let c;a.options?.contents&&(ArrayBuffer.isView(a.options.contents)?c={type:"base64",value:Fu(ae.wrap(a.options.contents))}:c={type:"dataTransferItem",id:a.options.contents._itemId}),n.edits.push({oldResource:a.from,newResource:a.to,options:{...a.options,contents:c},metadata:a.metadata})}else a._type===2?n.edits.push({resource:a.uri,textEdit:At.from(a.edit),versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===6?n.edits.push({resource:a.uri,textEdit:{range:F.from(a.range),text:a.edit.value,insertAsSnippet:!0,keepWhitespace:a.keepWhitespace},versionId:o.has(a.uri)?void 0:s?.getTextDocumentVersion(a.uri),metadata:a.metadata}):a._type===3?n.edits.push({metadata:a.metadata,resource:a.uri,cellEdit:a.edit,notebookVersionId:s?.getNotebookDocumentVersion(a.uri)}):a._type===5&&n.edits.push({metadata:a.metadata,resource:a.uri,notebookVersionId:s?.getNotebookDocumentVersion(a.uri),cellEdit:{editType:1,index:a.index,count:a.count,cells:a.cells.map(Ea.from)}})}return n}e.from=t;function i(r){const s=new Mn,n=new Ft;for(const o of r.edits)if(o.textEdit){const a=o,c=y.revive(a.resource),l=F.to(a.textEdit.range),u=a.textEdit.text,h=a.textEdit.insertAsSnippet;let f;h?f=u1.replace(l,new Fn(u)):f=Fs.replace(l,u);const p=n.get(c);p?p.push(f):n.set(c,[f])}else s.renameFile(y.revive(o.oldResource),y.revive(o.newResource),o.options);for(const[o,a]of n)s.set(o,a);return s}e.to=i})(Di||(Di={}));var Ji;(function(e){const t=Object.create(null);t[Ze.File]=0,t[Ze.Module]=1,t[Ze.Namespace]=2,t[Ze.Package]=3,t[Ze.Class]=4,t[Ze.Method]=5,t[Ze.Property]=6,t[Ze.Field]=7,t[Ze.Constructor]=8,t[Ze.Enum]=9,t[Ze.Interface]=10,t[Ze.Function]=11,t[Ze.Variable]=12,t[Ze.Constant]=13,t[Ze.String]=14,t[Ze.Number]=15,t[Ze.Boolean]=16,t[Ze.Array]=17,t[Ze.Object]=18,t[Ze.Key]=19,t[Ze.Null]=20,t[Ze.EnumMember]=21,t[Ze.Struct]=22,t[Ze.Event]=23,t[Ze.Operator]=24,t[Ze.TypeParameter]=25;function i(s){return typeof t[s]=="number"?t[s]:6}e.from=i;function r(s){for(const n in t)if(t[n]===s)return Number(n);return Ze.Property}e.to=r})(Ji||(Ji={}));var rs;(function(e){function t(r){switch(r){case zc.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return zc.Deprecated}}e.to=i})(rs||(rs={}));var Zn;(function(e){function t(r){return{name:r.name,kind:Ji.from(r.kind),tags:r.tags&&r.tags.map(rs.from),containerName:r.containerName,location:gi.from(r.location)}}e.from=t;function i(r){const s=new _c(r.name,Ji.to(r.kind),r.containerName,gi.to(r.location));return s.tags=r.tags&&r.tags.map(rs.to),s}e.to=i})(Zn||(Zn={}));var yv;(function(e){function t(r){const s={name:r.name||"!!MISSING: name!!",detail:r.detail,range:F.from(r.range),selectionRange:F.from(r.selectionRange),kind:Ji.from(r.kind),tags:r.tags?.map(rs.from)??[]};return r.children&&(s.children=r.children.map(t)),s}e.from=t;function i(r){const s=new Wc(r.name,r.detail,Ji.to(r.kind),F.to(r.range),F.to(r.selectionRange));return Xa(r.tags)&&(s.tags=r.tags.map(rs.to)),r.children&&(s.children=r.children.map(i)),s}e.to=i})(yv||(yv={}));var Yn;(function(e){function t(r){const s=new d1(Ji.to(r.kind),r.name,r.detail||"",y.revive(r.uri),F.to(r.range),F.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,name:r.name,detail:r.detail,kind:Ji.from(r.kind),uri:r.uri,range:F.from(r.range),selectionRange:F.from(r.selectionRange),tags:r.tags?.map(rs.from)}}e.from=i})(Yn||(Yn={}));var xv;(function(e){function t(i){return new E8(Yn.to(i.from),i.fromRanges.map(r=>F.to(r)))}e.to=t})(xv||(xv={}));var Ev;(function(e){function t(i){return new S8(Yn.to(i.to),i.fromRanges.map(r=>F.to(r)))}e.to=t})(Ev||(Ev={}));var gi;(function(e){function t(r){return{range:r.range&&F.from(r.range),uri:r.uri}}e.from=t;function i(r){return new Bi(y.revive(r.uri),F.to(r.range))}e.to=i})(gi||(gi={}));var Sl;(function(e){function t(r){const s=r,n=r;return{originSelectionRange:s.originSelectionRange?F.from(s.originSelectionRange):void 0,uri:s.targetUri?s.targetUri:n.uri,range:F.from(s.targetRange?s.targetRange:n.range),targetSelectionRange:s.targetSelectionRange?F.from(s.targetSelectionRange):void 0}}e.from=t;function i(r){return{targetUri:y.revive(r.uri),targetRange:F.to(r.range),targetSelectionRange:r.targetSelectionRange?F.to(r.targetSelectionRange):void 0,originSelectionRange:r.originSelectionRange?F.to(r.originSelectionRange):void 0}}e.to=i})(Sl||(Sl={}));var kl;(function(e){function t(r){return{range:F.from(r.range),contents:we.fromMany(r.contents),canIncreaseVerbosity:r.canIncreaseVerbosity,canDecreaseVerbosity:r.canDecreaseVerbosity}}e.from=t;function i(r){const s=r.contents.map(we.to),n=F.to(r.range),o=r.canIncreaseVerbosity,a=r.canDecreaseVerbosity;return new ld(s,n,o,a)}e.to=i})(kl||(kl={}));var Sv;(function(e){function t(r){return{range:F.from(r.range),expression:r.expression}}e.from=t;function i(r){return new Id(F.to(r.range),r.expression)}e.to=i})(Sv||(Sv={}));var cf;(function(e){function t(r){if(r instanceof Dd)return{type:"text",range:F.from(r.range),text:r.text};if(r instanceof Pd)return{type:"variable",range:F.from(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};if(r instanceof Ad)return{type:"expression",range:F.from(r.range),expression:r.expression};throw new Error("Unknown 'InlineValue' type")}e.from=t;function i(r){switch(r.type){case"text":return{range:F.to(r.range),text:r.text};case"variable":return{range:F.to(r.range),variableName:r.variableName,caseSensitiveLookup:r.caseSensitiveLookup};case"expression":return{range:F.to(r.range),expression:r.expression}}}e.to=i})(cf||(cf={}));var lf;(function(e){function t(r){return{frameId:r.frameId,stoppedLocation:F.from(r.stoppedLocation)}}e.from=t;function i(r){return new L1(r.frameId,F.to(r.stoppedLocation))}e.to=i})(lf||(lf={}));var va;(function(e){function t(r){return{range:F.from(r.range),kind:r.kind}}e.from=t;function i(r){return new ud(F.to(r.range),r.kind)}e.to=i})(va||(va={}));var kv;(function(e){function t(r){return{uri:r.uri,highlights:r.highlights.map(va.from)}}e.from=t;function i(r){return new hd(y.revive(r.uri),r.highlights.map(va.to))}e.to=i})(kv||(kv={}));var $v;(function(e){function t(i){switch(i){case 1:return Zo.TriggerCharacter;case 2:return Zo.TriggerForIncompleteCompletions;case 0:default:return Zo.Invoke}}e.to=t})($v||($v={}));var Cv;(function(e){function t(i){return{triggerKind:$v.to(i.triggerKind),triggerCharacter:i.triggerCharacter}}e.to=t})(Cv||(Cv={}));var uf;(function(e){function t(r){switch(r){case Jc.Deprecated:return 1}}e.from=t;function i(r){switch(r){case 1:return Jc.Deprecated}}e.to=i})(uf||(uf={}));var hf;(function(e){const t=new Map([[de.Method,0],[de.Function,1],[de.Constructor,2],[de.Field,3],[de.Variable,4],[de.Class,5],[de.Interface,7],[de.Struct,6],[de.Module,8],[de.Property,9],[de.Unit,12],[de.Value,13],[de.Constant,14],[de.Enum,15],[de.EnumMember,16],[de.Keyword,17],[de.Snippet,28],[de.Text,18],[de.Color,19],[de.File,20],[de.Reference,21],[de.Folder,23],[de.Event,10],[de.Operator,11],[de.TypeParameter,24],[de.Issue,26],[de.User,25]]);function i(n){return t.get(n)??9}e.from=i;const r=new Map([[0,de.Method],[1,de.Function],[2,de.Constructor],[3,de.Field],[4,de.Variable],[5,de.Class],[7,de.Interface],[6,de.Struct],[8,de.Module],[9,de.Property],[12,de.Unit],[13,de.Value],[14,de.Constant],[15,de.Enum],[16,de.EnumMember],[17,de.Keyword],[28,de.Snippet],[18,de.Text],[19,de.Color],[20,de.File],[21,de.Reference],[23,de.Folder],[10,de.Event],[11,de.Operator],[24,de.TypeParameter],[25,de.User],[26,de.Issue]]);function s(n){return r.get(n)??de.Property}e.to=s})(hf||(hf={}));var Iv;(function(e){function t(i,r){const s=new gd(i.label);return s.insertText=i.insertText,s.kind=hf.to(i.kind),s.tags=i.tags?.map(uf.to),s.detail=i.detail,s.documentation=Jr(i.documentation)?we.to(i.documentation):i.documentation,s.sortText=i.sortText,s.filterText=i.filterText,s.preselect=i.preselect,s.commitCharacters=i.commitCharacters,Oe.isIRange(i.range)?s.range=F.to(i.range):typeof i.range=="object"&&(s.range={inserting:F.to(i.range.insert),replacing:F.to(i.range.replace)}),s.keepWhitespace=typeof i.insertTextRules>"u"?!1:!!(i.insertTextRules&1),typeof i.insertTextRules<"u"&&i.insertTextRules&4?s.insertText=new Fn(i.insertText):(s.insertText=i.insertText,s.textEdit=s.range instanceof ke?new Fs(s.range,s.insertText):void 0),i.additionalTextEdits&&i.additionalTextEdits.length>0&&(s.additionalTextEdits=i.additionalTextEdits.map(n=>At.to(n))),s.command=r&&i.command?r.fromInternal(i.command):void 0,s}e.to=t})(Iv||(Iv={}));var df;(function(e){function t(r){if(typeof r.label!="string"&&!Array.isArray(r.label))throw new TypeError("Invalid label");return{label:r.label,documentation:we.fromStrict(r.documentation)}}e.from=t;function i(r){return{label:r.label,documentation:Jr(r.documentation)?we.to(r.documentation):r.documentation}}e.to=i})(df||(df={}));var ff;(function(e){function t(r){return{label:r.label,documentation:we.fromStrict(r.documentation),parameters:Array.isArray(r.parameters)?r.parameters.map(df.from):[],activeParameter:r.activeParameter}}e.from=t;function i(r){return{label:r.label,documentation:Jr(r.documentation)?we.to(r.documentation):r.documentation,parameters:Array.isArray(r.parameters)?r.parameters.map(df.to):[],activeParameter:r.activeParameter}}e.to=i})(ff||(ff={}));var $l;(function(e){function t(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(ff.from):[]}}e.from=t;function i(r){return{activeSignature:r.activeSignature,activeParameter:r.activeParameter,signatures:Array.isArray(r.signatures)?r.signatures.map(ff.to):[]}}e.to=i})($l||($l={}));var Dv;(function(e){function t(i,r){const s=new pd(ze.to(r.position),typeof r.label=="string"?r.label:r.label.map(Pv.to.bind(void 0,i)),r.kind&&pf.to(r.kind));return s.textEdits=r.textEdits&&r.textEdits.map(At.to),s.tooltip=Jr(r.tooltip)?we.to(r.tooltip):r.tooltip,s.paddingLeft=r.paddingLeft,s.paddingRight=r.paddingRight,s}e.to=t})(Dv||(Dv={}));var Pv;(function(e){function t(i,r){const s=new fd(r.label);return s.tooltip=Jr(r.tooltip)?we.to(r.tooltip):r.tooltip,Cm.is(r.command)&&(s.command=i.fromInternal(r.command)),r.location&&(s.location=gi.to(r.location)),s}e.to=t})(Pv||(Pv={}));var pf;(function(e){function t(r){return r}e.from=t;function i(r){return r}e.to=i})(pf||(pf={}));var Qn;(function(e){function t(r){return{range:F.from(r.range),url:r.target,tooltip:r.tooltip}}e.from=t;function i(r){let s;if(r.url)try{s=typeof r.url=="string"?y.parse(r.url,!0):y.revive(r.url)}catch{}const n=new vd(F.to(r.range),s);return n.tooltip=r.tooltip,n}e.to=i})(Qn||(Qn={}));var gf;(function(e){function t(r){const s=new bd(r.label);return r.textEdit&&(s.textEdit=At.to(r.textEdit)),r.additionalTextEdits&&(s.additionalTextEdits=r.additionalTextEdits.map(n=>At.to(n))),s}e.to=t;function i(r){return{label:r.label,textEdit:r.textEdit?At.from(r.textEdit):void 0,additionalTextEdits:r.additionalTextEdits?r.additionalTextEdits.map(s=>At.from(s)):void 0}}e.from=i})(gf||(gf={}));var wa;(function(e){function t(r){return new ia(r[0],r[1],r[2],r[3])}e.to=t;function i(r){return[r.red,r.green,r.blue,r.alpha]}e.from=i})(wa||(wa={}));var Av;(function(e){function t(r){return{range:F.from(r.range)}}e.from=t;function i(r){return new Gc(F.to(r.range))}e.to=i})(Av||(Av={}));var mf;(function(e){function t(i){switch(i){case 2:return Xo.AfterDelay;case 1:return Xo.Manual;case 3:case 4:return Xo.FocusOut}}e.to=t})(mf||(mf={}));var ba;(function(e){function t(r){switch(r){case cr.Off:return 0;case cr.Relative:return 2;case cr.Interval:return 3;case cr.On:default:return 1}}e.from=t;function i(r){switch(r){case 0:return cr.Off;case 2:return cr.Relative;case 3:return cr.Interval;case 1:default:return cr.On}}e.to=i})(ba||(ba={}));var ya;(function(e){function t(r){if(r===ar.CRLF)return 1;if(r===ar.LF)return 0}e.from=t;function i(r){if(r===1)return ar.CRLF;if(r===0)return ar.LF}e.to=i})(ya||(ya={}));var vf;(function(e){function t(i){if(typeof i=="object")return i.viewId;switch(i){case js.SourceControl:return 3;case js.Window:return 10;case js.Notification:return 15}throw new Error("Unknown 'ProgressLocation'")}e.from=t})(vf||(vf={}));var wf;(function(e){function t(r){const s={start:r.start+1,end:r.end+1};return r.kind&&(s.kind=bf.from(r.kind)),s}e.from=t;function i(r){const s={start:r.start-1,end:r.end-1};return r.kind&&(s.kind=bf.to(r.kind)),s}e.to=i})(wf||(wf={}));var bf;(function(e){function t(r){if(r)switch(r){case Kr.Comment:return Mo.Comment;case Kr.Imports:return Mo.Imports;case Kr.Region:return Mo.Region}}e.from=t;function i(r){if(r)switch(r.value){case Mo.Comment.value:return Kr.Comment;case Mo.Imports.value:return Kr.Imports;case Mo.Region.value:return Kr.Region}}e.to=i})(bf||(bf={}));var Cl;(function(e){function t(i){if(i)return{pinned:typeof i.preview=="boolean"?!i.preview:void 0,inactive:i.background,preserveFocus:i.preserveFocus,selection:typeof i.selection=="object"?F.from(i.selection):void 0,override:typeof i.override=="boolean"?XP.id:void 0}}e.from=t})(Cl||(Cl={}));var Pi;(function(e){function t(n){return n instanceof oa?n.toJSON():typeof n=="string"?n:i(n)||r(n)?new oa(n.baseUri??n.base,n.pattern).toJSON():n}e.from=t;function i(n){const o=n;return o?y.isUri(o.baseUri)&&typeof o.pattern=="string":!1}function r(n){const o=n;return o?typeof o.base=="string"&&typeof o.pattern=="string":!1}function s(n){return typeof n=="string"?n:new oa(y.revive(n.baseUri),n.pattern)}e.to=s})(Pi||(Pi={}));var Tv;(function(e){function t(i){if(i){if(Array.isArray(i))return i.map(t);if(typeof i=="string")return i;{const r=i;return{language:r.language,scheme:r.scheme,pattern:Pi.from(r.pattern)??void 0,exclusive:r.exclusive,notebookType:r.notebookType}}}else return}e.from=t})(Tv||(Tv={}));var Nr;(function(e){function t(r){return{start:r.start,end:r.end}}e.from=t;function i(r){return new lr(r.start,r.end)}e.to=i})(Nr||(Nr={}));var xa;(function(e){function t(r){return{timing:typeof r.runStartTime=="number"&&typeof r.runEndTime=="number"?{startTime:r.runStartTime,endTime:r.runEndTime}:void 0,executionOrder:r.executionOrder,success:r.lastRunSuccess}}e.to=t;function i(r){return{lastRunSuccess:r.success,runStartTime:r.timing?.startTime,runEndTime:r.timing?.endTime,executionOrder:r.executionOrder}}e.from=i})(xa||(xa={}));var Il;(function(e){function t(r){switch(r){case Vn.Markup:return Ho.Markup;case Vn.Code:default:return Ho.Code}}e.from=t;function i(r){switch(r){case Ho.Markup:return Vn.Markup;case Ho.Code:default:return Vn.Code}}e.to=i})(Il||(Il={}));var Ws;(function(e){function t(r){const s={metadata:r.metadata??Object.create(null),cells:[]};for(const n of r.cells)Nd.validate(n),s.cells.push(Ea.from(n));return s}e.from=t;function i(r){const s=new A8(r.cells.map(Ea.to));return hy(r.metadata)||(s.metadata=r.metadata),s}e.to=i})(Ws||(Ws={}));var Ea;(function(e){function t(r){return{cellKind:Il.from(r.kind),language:r.languageId,mime:r.mime,source:r.value,metadata:r.metadata,internalMetadata:xa.from(r.executionSummary??{}),outputs:r.outputs?r.outputs.map(Vs.from):[]}}e.from=t;function i(r){return new Nd(Il.to(r.cellKind),r.source,r.language,r.mime,r.outputs?r.outputs.map(Vs.to):void 0,r.metadata,r.internalMetadata?xa.to(r.internalMetadata):void 0)}e.to=i})(Ea||(Ea={}));var Sa;(function(e){function t(r){return{mime:r.mime,valueBytes:ae.wrap(r.data)}}e.from=t;function i(r){return new T8(r.valueBytes.buffer,r.mime)}e.to=i})(Sa||(Sa={}));var Vs;(function(e){function t(r){return{outputId:r.id,items:r.items.map(Sa.from),metadata:r.metadata}}e.from=t;function i(r){const s=r.items.map(Sa.to);return new Md(s,r.outputId,r.metadata)}e.to=i})(Vs||(Vs={}));var yf;(function(e){function t(s){return r(s)?{include:Pi.from(s.include)??void 0,exclude:Pi.from(s.exclude)??void 0}:Pi.from(s)??void 0}e.from=t;function i(s){return r(s)?{include:Pi.to(s.include),exclude:Pi.to(s.exclude)}:Pi.to(s)}e.to=i;function r(s){const n=s;return n?!bt(n.include)&&!bt(n.exclude):!1}})(yf||(yf={}));var Rv;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{alignment:i.alignment===Fd.Left?1:2,command:r.toInternal(n,s),text:i.text,tooltip:i.tooltip,accessibilityInformation:i.accessibilityInformation,priority:i.priority}}e.from=t})(Rv||(Rv={}));var Lv;(function(e){function t(i,r,s){const n=typeof i.command=="string"?{title:"",command:i.command}:i.command;return{command:r.toInternal(n,s),label:i.label,description:i.description,detail:i.detail,documentation:i.documentation}}e.from=t})(Lv||(Lv={}));var Nv;(function(e){function t(i){return{transientOutputs:i?.transientOutputs??!1,transientCellMetadata:i?.transientCellMetadata??{},transientDocumentMetadata:i?.transientDocumentMetadata??{},cellContentMetadata:i?.cellContentMetadata??{}}}e.from=t})(Nv||(Nv={}));var xf;(function(e){function t(r){return{uri:r.uri,provides:r.provides}}e.from=t;function i(r){return new R8(y.revive(r.uri),r.provides)}e.to=i})(xf||(xf={}));var ka;(function(e){function t(r){return{message:we.fromStrict(r.message)||"",type:0,expected:r.expectedOutput,actual:r.actualOutput,contextValue:r.contextValue,location:r.location&&{range:F.from(r.location.range),uri:r.location.uri},stackTrace:r.stackTrace?.map(s=>({label:s.label,position:s.position&&ze.from(s.position),uri:s.uri&&y.revive(s.uri).toJSON()}))}}e.from=t;function i(r){const s=new Hd(typeof r.message=="string"?r.message:we.to(r.message));return s.actualOutput=r.actual,s.expectedOutput=r.expected,s.contextValue=r.contextValue,s.location=r.location?gi.to(r.location):void 0,s}e.to=i})(ka||(ka={}));var dr;(function(e){e.namespace=Yh,e.denamespace=j9})(dr||(dr={}));var Mv;(function(e){function t(i){return{controllerId:i.controllerId,profileId:i.profileId,group:$a.from(i.kind)}}e.from=t})(Mv||(Mv={}));var $a;(function(e){const t={[da.Coverage]:8,[da.Debug]:4,[da.Run]:2};function i(r){return t.hasOwnProperty(r)?t[r]:2}e.from=i})($a||($a={}));var qs;(function(e){function t(r){const s=rd(r).controllerId;return{extId:Le.fromExtHostTestItem(r,s).toString(),label:r.label,uri:y.revive(r.uri),busy:r.busy,tags:r.tags.map(n=>dr.namespace(s,n.id)),range:Oe.lift(F.from(r.range)),description:r.description||null,sortText:r.sortText||null,error:r.error&&we.fromStrict(r.error)||null}}e.from=t;function i(r){return{parent:void 0,error:void 0,id:Le.fromString(r.extId).localId,label:r.label,uri:y.revive(r.uri),tags:(r.tags||[]).map(s=>{const{tagId:n}=dr.denamespace(s);return new hl(n)}),children:{add:()=>{},delete:()=>{},forEach:()=>{},*[Symbol.iterator](){},get:()=>{},replace:()=>{},size:0},range:F.to(r.range||void 0),canResolveChildren:!1,busy:r.busy,description:r.description||void 0,sortText:r.sortText||void 0}}e.toPlain=i})(qs||(qs={})),function(e){function t(r){return{id:r.id}}e.from=t;function i(r){return new hl(r.id)}e.to=i}(dr||(dr={}));var Fv;(function(e){const t=(r,s)=>{const n=r.value;if(!n)return;const o={...qs.toPlain(n.item),parent:s,taskStates:n.tasks.map(a=>({state:a.state,duration:a.duration,messages:a.messages.filter(c=>c.type===0).map(ka.to)})),children:[]};if(r.children)for(const a of r.children.values()){const c=t(a,o);c&&o.children.push(c)}return o};function i(r){const s=new HP;for(const a of r.items)s.insert(Le.fromString(a.item.extId).path,a);const n=[s.nodes],o=[];for(;n.length;)for(const a of n.pop())a.value?o.push(a):a.children&&n.push(a.children.values());return{completedAt:r.completedAt,results:o.map(a=>t(a)).filter(Mi)}}e.to=i})(Fv||(Fv={}));var Dl;(function(e){function t(a){return{covered:a.covered,total:a.total}}function i(a){return"line"in a?ze.from(a):F.from(a)}function r(a){if(a)return"endLineNumber"in a?F.to(a):ze.to(a)}function s(a){if(a.type===1){const c=[];if(a.branches)for(const l of a.branches)c.push({executed:l.count,location:r(l.location),label:l.label});return new N8(a.count,r(a.location),a.branches?.map(l=>new M8(l.count,r(l.location),l.label)))}else return new F8(a.name,a.count,r(a.location))}e.to=s;function n(a){if(typeof a.executed=="number"&&a.executed<0)throw new Error(`Invalid coverage count ${a.executed}`);return"branches"in a?{count:a.executed,location:i(a.location),type:1,branches:a.branches.length?a.branches.map(c=>({count:c.executed,location:c.location&&i(c.location),label:c.label})):void 0}:{type:0,name:a.name,count:a.executed,location:i(a.location)}}e.fromDetails=n;function o(a,c,l){return _d(l.statementCoverage),_d(l.branchCoverage),_d(l.declarationCoverage),{id:c,uri:l.uri,statement:t(l.statementCoverage),branch:l.branchCoverage&&t(l.branchCoverage),declaration:l.declarationCoverage&&t(l.declarationCoverage),testIds:l instanceof Wd&&l.includesTests.length?l.includesTests.map(u=>Le.fromExtHostTestItem(u,a).toString()):void 0}}e.fromFile=o})(Dl||(Dl={}));var Ov;(function(e){function t(i){switch(i){case 1:return Vc.Invoke;case 2:return Vc.Automatic}}e.to=t})(Ov||(Ov={}));var Xn;(function(e){function t(r){const s=new J1(Ji.to(r.kind),r.name,r.detail||"",y.revive(r.uri),F.to(r.range),F.to(r.selectionRange));return s._sessionId=r._sessionId,s._itemId=r._itemId,s}e.to=t;function i(r,s,n){if(s=s??r._sessionId,n=n??r._itemId,s===void 0||n===void 0)throw new Error("invalid item");return{_sessionId:s,_itemId:n,kind:Ji.from(r.kind),name:r.name,detail:r.detail??"",uri:r.uri,range:F.from(r.range),selectionRange:F.from(r.selectionRange),tags:r.tags?.map(rs.from)}}e.from=i})(Xn||(Xn={}));var Ef;(function(e){function t(i){if(i)return{value:i.value,tooltip:i.tooltip}}e.from=t})(Ef||(Ef={}));var Kn;(function(e){function t(n,o,a){const c=o.fileData;return c?new UR(new jR(c.name,y.revive(c.uri),c.id,fg(()=>a(c.id)))):n===kr.uriList&&o.uriListData?new Sd(s(o.uriListData)):new Sd(o.asString)}e.to=t;async function i(n,o,a=Ut()){const c=await o.asString();if(n===kr.uriList)return{id:a,asString:c,fileData:void 0,uriListData:r(c)};const l=o.asFile();return{id:a,asString:c,fileData:l?{name:l.name,uri:l.uri,id:l._itemId??l.id}:void 0}}e.from=i;function r(n){return lm.split(n).map(o=>{if(o.startsWith("#"))return o;try{return y.parse(o)}catch{}return o})}function s(n){return lm.create(n.map(o=>typeof o=="string"?o:y.revive(o)))}})(Kn||(Kn={}));var Ca;(function(e){function t(s,n){const o=s.items.map(([a,c])=>[a,Kn.to(a,c,n)]);return new sa(o)}e.toDataTransfer=t;async function i(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Kn.from(o,a)]))}}e.from=i;async function r(s){return{items:await Promise.all(Array.from(s,async([o,a])=>[o,await Kn.from(o,a,a.id)]))}}e.fromList=r})(Ca||(Ca={}));var Sf;(function(e){function t(r,s){return{kind:"reply",agentId:r.participant??s?.agentId??"",subCommand:r.command??s?.command,message:r.prompt,title:r.label}}e.from=t;function i(r){return{prompt:r.message,label:r.title,participant:r.agentId,command:r.subCommand}}e.to=i})(Sf||(Sf={}));var Ia;(function(e){function t(r){switch(r){case 0:return Ii.System;case 1:return Ii.User;case 2:return Ii.Assistant}}e.to=t;function i(r){switch(r){case Ii.System:return 0;case Ii.User:return 1;case Ii.Assistant:return 2}return 1}e.from=i})(Ia||(Ia={}));var px;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new ut(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new ut(l.value):new Rr(l.value));return new tf(a.toolCallId,c,a.isError)}else{if(a.type==="image_url")return;if(a.type==="tool_use")return new Jn(a.toolCallId,a.name,a.parameters)}}).filter(a=>a!==void 0),n=Ia.to(r.role);return new J8(n,s,r.name)}e.to=t;function i(r){const s=Ia.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new ut(o)]);const a=o.map(c=>{if(c instanceof tf)return{type:"tool_result",toolCallId:c.callId,value:vt(c.content.map(l=>l instanceof ut?{type:"text",value:l.value}:l instanceof Rr?{type:"prompt_tsx",value:l.value}:void 0)),isError:c.isError};if(c instanceof Jn)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof ut)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(px||(px={}));var Pl;(function(e){function t(r){const s=r.content.map(a=>{if(a.type==="text")return new ut(a.value);if(a.type==="tool_result"){const c=a.value.map(l=>l.type==="text"?new ut(l.value):l.type==="data"?new es(l.value.data.buffer,l.value.mimeType):new Rr(l.value));return new cv(a.toolCallId,c,a.isError)}else return a.type==="image_url"?new es(a.value.data.buffer,a.value.mimeType):a.type==="data"?new es(a.data.buffer,a.mimeType):new Jn(a.toolCallId,a.name,a.parameters)}),n=Ia.to(r.role);return new Z8(n,s,r.name)}e.to=t;function i(r){const s=Ia.from(r.role),n=r.name;let o=r.content;typeof o=="string"&&(o=[new ut(o)]);const a=o.map(c=>{if(c instanceof cv||c instanceof tf)return{type:"tool_result",toolCallId:c.callId,value:vt(c.content.map(l=>l instanceof ut?{type:"text",value:l.value}:l instanceof Rr?{type:"prompt_tsx",value:l.value}:l instanceof es?{type:"data",value:{mimeType:l.mimeType,data:ae.wrap(l.data)}}:void 0)),isError:c.isError};if(c instanceof es)return fL(c)?{type:"image_url",value:{mimeType:c.mimeType,data:ae.wrap(c.data)}}:{type:"data",mimeType:c.mimeType,data:ae.wrap(c.data)};if(c instanceof Jn)return{type:"tool_use",toolCallId:c.callId,name:c.name,parameters:c.input};if(c instanceof ut)return{type:"text",value:c.value};if(typeof c!="string")throw new Error("Unexpected chat message content type llm 2");return{type:"text",value:c}});return{role:s,name:n,content:a}}e.from=i})(Pl||(Pl={}));function fL(e){switch(e.mimeType){case ts.PNG:case ts.JPEG:case ts.GIF:case ts.WEBP:case ts.BMP:return!0;default:return!1}}var Al;(function(e){function t(r){return{kind:"markdownContent",content:we.from(r.value)}}e.from=t;function i(r){return new qd(we.to(r.content))}e.to=i})(Al||(Al={}));var kf;(function(e){function t(r){return{kind:"codeblockUri",uri:r.value,isEdit:r.isEdit}}e.from=t;function i(r){return new Qd(y.revive(r.uri),r.isEdit)}e.to=i})(kf||(kf={}));var $f;(function(e){function t(r){return{kind:"markdownVuln",content:we.from(r.value),vulnerabilities:r.vulnerabilities}}e.from=t;function i(r){return new fl(we.to(r.content),r.vulnerabilities)}e.to=i})($f||($f={}));var Cf;(function(e){function t(i){return{kind:"confirmation",title:i.title,message:i.message,data:i.data,buttons:i.buttons}}e.from=t})(Cf||(Cf={}));var Tl;(function(e){function t(r){const{value:s,baseUri:n}=r;function o(a,c){return a.map(l=>{const u=y.joinPath(c,l.name);return{label:l.name,uri:u,children:l.children&&o(l.children,u)}})}return{kind:"treeData",treeData:{label:tr(n),uri:n,children:o(s,n)}}}e.from=t;function i(r){const s=St(r.treeData);function n(c){return c.map(l=>({name:l.label,children:l.children&&n(l.children)}))}const o=s.uri,a=s.children?n(s.children):[];return new Jd(a,o)}e.to=i})(Tl||(Tl={}));var Da;(function(e){function t(r){const s=o=>y.isUri(o),n=o=>"name"in o;return{kind:"inlineReference",name:r.title,inlineReference:s(r.value)?r.value:n(r.value)?Zn.from(r.value):Lr.from(r.value)}}e.from=t;function i(r){const s=St(r);return new pl(y.isUri(s.inlineReference)?s.inlineReference:"location"in s.inlineReference?Zn.to(s.inlineReference):Lr.to(s.inlineReference),r.name)}e.to=i})(Da||(Da={}));var Rl;(function(e){function t(r){return{kind:"progressMessage",content:we.from(r.value)}}e.from=t;function i(r){return new sv(r.content.value)}e.to=i})(Rl||(Rl={}));var Ll;(function(e){function t(r){return{kind:"warning",content:we.from(r.value)}}e.from=t;function i(r){return new gl(r.content.value)}e.to=i})(Ll||(Ll={}));var Uv;(function(e){function t(i){return{kind:"extensions",extensions:i.extensions}}e.from=t})(Uv||(Uv={}));var jv;(function(e){function t(r){return{kind:"move",uri:r.uri,range:F.from(r.range)}}e.from=t;function i(r){return new Kd(y.revive(r.uri),F.to(r.range))}e.to=i})(jv||(jv={}));var Nl;(function(e){function t(r){return{kind:"prepareToolInvocation",toolName:r.toolName}}e.from=t;function i(r){return new vl(r.toolName)}e.to=i})(Nl||(Nl={}));var If;(function(e){function t(i){return{kind:"progressTask",content:we.from(i.value)}}e.from=t})(If||(If={}));var Bv;(function(e){function t(i){return{kind:"progressTaskResult",content:typeof i=="string"?we.from(i):void 0}}e.from=t})(Bv||(Bv={}));var Ml;(function(e){function t(r,s,n){return{kind:"command",command:s.toInternal(r.value,n)??{command:r.value.command,title:r.value.title}}}e.from=t;function i(r,s){return new Yd(s.fromInternal(r.command)??{command:r.command.id,title:r.command.title})}e.to=i})(Ml||(Ml={}));var Df;(function(e){function t(r){return{kind:"textEdit",uri:r.uri,edits:r.edits.map(s=>At.from(s)),done:r.isDone}}e.from=t;function i(r){const s=new ml(y.revive(r.uri),r.edits.map(n=>At.to(n)));return s.isDone=r.done,s}e.to=i})(Df||(Df={}));var Pf;(function(e){function t(i){return i.newCellMetadata?{editType:3,index:i.range.start,metadata:i.newCellMetadata}:i.newNotebookMetadata?{editType:5,metadata:i.newNotebookMetadata}:{editType:1,index:i.range.start,count:i.range.end-i.range.start,cells:i.newCells.map(Ea.from)}}e.from=t})(Pf||(Pf={}));var Af;(function(e){function t(i){return{kind:"notebookEdit",uri:i.uri,edits:i.edits.map(Pf.from),done:i.isDone}}e.from=t})(Af||(Af={}));var eo;(function(e){function t(r){const s=Et.isThemeIcon(r.iconPath)?r.iconPath:y.isUri(r.iconPath)?{light:y.revive(r.iconPath)}:r.iconPath&&"light"in r.iconPath&&"dark"in r.iconPath&&y.isUri(r.iconPath.light)&&y.isUri(r.iconPath.dark)?{light:y.revive(r.iconPath.light),dark:y.revive(r.iconPath.dark)}:void 0;return typeof r.value=="object"&&"variableName"in r.value?{kind:"reference",reference:{variableName:r.value.variableName,value:y.isUri(r.value.value)||!r.value.value?r.value.value:Lr.from(r.value.value)},iconPath:s,options:r.options}:{kind:"reference",reference:y.isUri(r.value)||typeof r.value=="string"?r.value:Lr.from(r.value),iconPath:s,options:r.options}}e.from=t;function i(r){const s=St(r),n=o=>y.isUri(o)?o:Lr.to(o);return new Gn(typeof s.reference=="string"?s.reference:"variableName"in s.reference?{variableName:s.reference.variableName,value:s.reference.value&&n(s.reference.value)}:n(s.reference))}e.to=i})(eo||(eo={}));var Tf;(function(e){function t(i){return{kind:"codeCitation",value:i.value,license:i.license,snippet:i.snippet}}e.from=t})(Tf||(Tf={}));var Rf;(function(e){function t(s,n,o){return s instanceof qd?Al.from(s):s instanceof pl?Da.from(s):s instanceof Gn?eo.from(s):s instanceof sv?Rl.from(s):s instanceof Jd?Tl.from(s):s instanceof Yd?Ml.from(s,n,o):s instanceof ml?Df.from(s):s instanceof ef?Af.from(s):s instanceof fl?$f.from(s):s instanceof Qd?kf.from(s):s instanceof gl?Ll.from(s):s instanceof Gd?Cf.from(s):s instanceof Xd?Tf.from(s):s instanceof Kd?jv.from(s):s instanceof nv?Uv.from(s):s instanceof vl?Nl.from(s):{kind:"markdownContent",content:we.from("")}}e.from=t;function i(s,n){switch(s.kind){case"reference":return eo.to(s);case"markdownContent":case"inlineReference":case"progressMessage":case"treeData":case"command":return r(s,n)}}e.to=i;function r(s,n){switch(s.kind){case"markdownContent":return Al.to(s);case"inlineReference":return Da.to(s);case"progressMessage":return;case"treeData":return Tl.to(s);case"command":return Ml.to(s,n)}}e.toContent=r})(Rf||(Rf={}));var Lf;(function(e){function t(i,r,s,n,o,a,c){const l=[],u=[];for(const f of i.variables.variables)f.kind==="tool"?l.push(f):f.kind==="toolset"?l.push(...f.value):u.push(f);const h={id:i.requestId,prompt:i.message,command:i.command,attempt:i.attempt??0,enableCommandDetection:i.enableCommandDetection??!0,isParticipantDetected:i.isParticipantDetected??!1,references:u.map(f=>Mf.to(f,n,c)).filter(Mi),toolReferences:l.map(Fl.to),location:Nf.to(i.location),acceptedConfirmationData:i.acceptedConfirmationData,rejectedConfirmationData:i.rejectedConfirmationData,location2:r,toolInvocationToken:Object.freeze({sessionId:i.sessionId}),tools:o,model:s,editedFileEvents:i.editedFileEvents,modeInstructions:i.modeInstructions};return Ge(a,"chatParticipantPrivate")||(delete h.id,delete h.attempt,delete h.enableCommandDetection,delete h.isParticipantDetected,delete h.location,delete h.location2,delete h.editedFileEvents),Ge(a,"chatParticipantAdditions")||(delete h.acceptedConfirmationData,delete h.rejectedConfirmationData,delete h.tools),h}e.to=t})(Lf||(Lf={}));var Hv;(function(e){function t(i){return{prompt:i.prompt,files:i.files.map(r=>y.revive(r))}}e.to=t})(Hv||(Hv={}));var Nf;(function(e){function t(r){switch(r){case ti.Notebook:return ur.Notebook;case ti.Terminal:return ur.Terminal;case ti.Panel:return ur.Panel;case ti.Editor:return ur.Editor}}e.to=t;function i(r){switch(r){case ur.Notebook:return ti.Notebook;case ur.Terminal:return ti.Terminal;case ur.Panel:return ti.Panel;case ur.Editor:return ti.Editor}}e.from=i})(Nf||(Nf={}));var Mf;(function(e){function t(i,r,s){let n=i.value;if(!n){let o;try{o=JSON.stringify(i)}catch{o=`kind=${i.kind}, id=${i.id}, name=${i.name}`}s.error(`[ChatPromptReference] Ignoring invalid reference in variable: ${o}`);return}if(qu(n))n=y.revive(n);else if(n&&typeof n=="object"&&"uri"in n&&"range"in n&&qu(n.uri))n=Lr.to(St(n));else if(JT(i)){const o=i.references?.[0]?.reference;n=new q8(i.mimeType??"image/png",()=>Promise.resolve(new Uint8Array(Object.values(i.value))),o&&y.isUri(o)?o:void 0)}else if(i.kind==="diagnostic"){const o=i.filterSeverity&&El.to(i.filterSeverity),a=i.filterUri&&y.revive(i.filterUri).toString();n=new G8(r.map(([c,l])=>i.filterUri&&c.toString()!==a?[c,[]]:[c,l.filter(u=>!(o&&u.severity>o||i.filterRange&&!Oe.areIntersectingOrTouching(i.filterRange,F.from(u.range))))]).filter(([,c])=>c.length>0))}return{id:i.id,name:i.name,range:i.range&&[i.range.start,i.range.endExclusive],value:n,modelDescription:i.modelDescription}}e.to=t})(Mf||(Mf={}));var Fl;(function(e){function t(i){if(i.value)throw new Error("Invalid tool reference");return{name:i.id,range:i.range&&[i.range.start,i.range.endExclusive]}}e.to=t})(Fl||(Fl={}));var zv;(function(e){function t(i,r,s){return{id:i.id,label:i.label,fullName:i.fullName,icon:i.icon?.id,value:i.values[0].value,insertText:i.insertText,detail:i.detail,documentation:i.documentation,command:r.toInternal(i.command,s)}}e.from=t})(zv||(zv={}));var Pa;(function(e){function t(s){return{errorDetails:s.errorDetails,metadata:r(s.metadata),nextQuestion:s.nextQuestion}}e.to=t;function i(s){return{errorDetails:s.errorDetails,metadata:s.metadata,nextQuestion:s.nextQuestion}}e.from=i;function r(s){return To(s,n=>{if(n.$mid===20)return new rf(To(n.content,r));if(n.$mid===21)return new ut(n.value);if(n.$mid===22)return new Rr(n.value)})}})(Pa||(Pa={}));var _v;(function(e){function t(i,r,s){if(r.action.kind==="vote")return;const n=Pa.to(i);if(r.action.kind==="command"){const o=r.action.commandButton.command;return{action:{kind:"command",commandButton:{command:s.fromInternal(o)??{command:o.id,title:o.title}}},result:n}}else return r.action.kind==="followUp"?{action:{kind:"followUp",followup:Sf.to(r.action.followup)},result:n}:r.action.kind==="inlineChat"?{action:{kind:"editor",accepted:r.action.action==="accepted"},result:n}:r.action.kind==="chatEditingSessionAction"?{action:{kind:"chatEditingSessionAction",outcome:new Map([["accepted",qn.Accepted],["rejected",qn.Rejected],["saved",qn.Saved]]).get(r.action.outcome)??qn.Rejected,uri:y.revive(r.action.uri),hasRemainingEdits:r.action.hasRemainingEdits},result:n}:{action:r.action,result:n}}e.to=t})(_v||(_v={}));var Ff;(function(e){function t(i,r,s){return"terminalCommand"in i?{terminalCommand:i.terminalCommand,shouldExecute:i.shouldExecute}:"uri"in i?{uri:i.uri}:r.toInternal(i,s)}e.from=t})(Ff||(Ff={}));var Of;(function(e){function t(i){return{...i,documentation:we.fromStrict(i.documentation)}}e.from=t})(Of||(Of={}));var Wv;(function(e){function t(i){return Array.isArray(i)?{items:i.map(r=>Of.from(r))}:{items:i.items.map(r=>Of.from(r)),resourceRequestConfig:i.resourceRequestConfig?Vv.from(i.resourceRequestConfig):void 0}}e.from=t})(Wv||(Wv={}));var Vv;(function(e){function t(i){return{...i,pathSeparator:ei?"\\":"/",cwd:i.cwd?y.revive(i.cwd):void 0}}e.from=t})(Vv||(Vv={}));var qv;(function(e){function t(i){return{kind:Gv.to(i.kind),acceptedLength:i.acceptedLength}}e.to=t})(qv||(qv={}));var Gv;(function(e){function t(i){switch(i){case 0:return Un.Word;case 1:return Un.Line;case 2:return Un.Suggest;default:return Un.Unknown}}e.to=t})(Gv||(Gv={}));var Jv;(function(e){function t(i,r){if(i.kind===mh.Ignored){const s=i.supersededBy?r(i.supersededBy):void 0;return{kind:Qo.Ignored,supersededBy:s,userTypingDisagreed:i.userTypingDisagreed}}else if(i.kind===mh.Accepted)return{kind:Qo.Accepted};return{kind:Qo.Rejected}}e.to=t})(Jv||(Jv={}));var Zv;(function(e){function t(i,r){return{id:r,label:i.label,description:i.description,canEdit:i.canEdit,collapsibleState:i.collapsibleState||0,contextValue:i.contextValue}}e.from=t})(Zv||(Zv={}));var gx;(function(e){function t(i){return{name:i.id,description:i.modelDescription,inputSchema:i.inputSchema,tags:i.tags??[]}}e.to=t})(gx||(gx={}));var mx;(function(e){function t(r){return new rf(r.content.map(s=>s.kind==="text"?new ut(s.value):new Rr(s.value)))}e.to=t;function i(r,s){return r.toolResultMessage&&L(s,"chatParticipantPrivate"),{content:r.content.map(n=>{if(n instanceof ut)return{kind:"text",value:n.value};if(n instanceof Rr)return{kind:"promptTsx",value:n.value};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:we.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(n=>y.isUri(n)?n:Lr.from(n))}}e.from=i})(mx||(mx={}));var Uf;(function(e){function t(r){return new Y8(r.content.map(s=>{if(s.kind==="text")return new ut(s.value);if(s.kind==="data"){const n=Object.values(ts).includes(s.value.mimeType)?s.value.mimeType:void 0;if(!n)throw new Error("Invalid MIME type");return new es(s.value.data.buffer,n)}else return new Rr(s.value)}))}e.to=t;function i(r,s){r.toolResultMessage&&L(s,"chatParticipantPrivate");let n=!1;const o={content:r.content.map(a=>{if(a instanceof ut)return{kind:"text",value:a.value};if(a instanceof Rr)return{kind:"promptTsx",value:a.value};if(a instanceof es)return n=!0,{kind:"data",value:{mimeType:a.mimeType,data:ae.wrap(a.data)}};throw new Error("Unknown LanguageModelToolResult part type")}),toolResultMessage:we.fromStrict(r.toolResultMessage),toolResultDetails:r.toolResultDetails?.map(a=>y.isUri(a)?a:Lr.from(a))};return n?new ni(o):o}e.from=i})(Uf||(Uf={}));var Yv;(function(e){function t(i){return i}e.fromThemeIcon=t})(Yv||(Yv={}));var Qv;(function(e){function t(r){return{query:r.query,kind:i(r.kind),settings:r.settings}}e.fromSettingsSearchResult=t;function i(r){switch(r){case _s.EMBEDDED:return _s.EMBEDDED;case _s.LLM_RANKED:return _s.LLM_RANKED;case _s.CANCELED:return _s.CANCELED;default:throw new Error("Unknown AiSettingsSearchResultKind")}}})(Qv||(Qv={}));var Ol;(function(e){function t(r){return!!r.uri}function i(r){return xl.toSerialized(t(r)?{type:2,uri:r.uri,headers:Object.entries(r.headers)}:{type:1,cwd:r.cwd?.fsPath,args:r.args,command:r.command,env:r.env,envFile:void 0})}e.from=i})(Ol||(Ol={}));var Gs=class{constructor(e,t,i){this.uri=e,this.ranges=t,this.previewText=i}},Xv=class{constructor(e,t,i){this.uri=e,this.text=t,this.lineNumber=i}},Kv=class{constructor(e){this.keyword=e}},ss;(function(e){e[e.None=1]="None",e[e.FilesExclude=2]="FilesExclude",e[e.SearchAndFilesExclude=3]="SearchAndFilesExclude"})(ss||(ss={}));var jf;(function(e){e[e.Information=1]="Information",e[e.Warning=2]="Warning"})(jf||(jf={}));var vx=2e4,wx="\u27EA ",bx=" characters skipped \u27EB",pL=(wx.length+bx.length+5)*2,cV=B("searchService"),yx;(function(e){e[e.file=0]="file",e[e.text=1]="text",e[e.aiText=2]="aiText"})(yx||(yx={}));var xx;(function(e){e[e.File=1]="File",e[e.Text=2]="Text",e[e.aiText=3]="aiText"})(xx||(xx={}));function Ex(e){return!!e.rangeLocations&&!!e.previewText}var Sx;(function(e){e[e.Normal=0]="Normal",e[e.NewSearchStarted=1]="NewSearchStarted"})(Sx||(Sx={}));var gL=class{constructor(e,t,i,r){this.rangeLocations=[],this.webviewIndex=r;const s=Array.isArray(t)?t:[t];if(i&&i.matchLines===1&&mL(s)){e=fD(e,i.matchLines);let n="",o=0,a=0;const c=Math.floor(i.charsPerLine/5);for(const l of s){const u=Math.max(l.startColumn-c,0),h=l.startColumn+i.charsPerLine;if(u>a+c+pL){const f=wx+(u-a)+bx;n+=f+e.slice(u,h),o+=u-(a+f.length)}else n+=e.slice(a,h);a=h,this.rangeLocations.push({source:l,preview:new vL(0,l.startColumn-o,l.endColumn-o)})}this.previewText=n}else{const n=Array.isArray(t)?t[0].startLineNumber:t.startLineNumber,o=ug(t,a=>({preview:new kx(a.startLineNumber-n,a.startColumn,a.endLineNumber-n,a.endColumn),source:a}));this.rangeLocations=Array.isArray(o)?o:[o],this.previewText=e}}};function mL(e){const t=e[0].startLineNumber;for(const i of e)if(i.startLineNumber!==t||i.endLineNumber!==t)return!1;return!0}var kx=class{constructor(e,t,i,r){this.startLineNumber=e,this.startColumn=t,this.endLineNumber=i,this.endColumn=r}},vL=class extends kx{constructor(e,t,i){super(e,t,e,i)}},$x;(function(e){e.List="list",e.Tree="tree"})($x||($x={}));var Cx;(function(e){e.Default="default",e.FileNames="fileNames",e.Type="type",e.Modified="modified",e.CountDescending="countDescending",e.CountAscending="countAscending"})(Cx||(Cx={}));var Ix;(function(e){e.Auto="auto",e.Manual="manual",e.RunOnEmpty="runOnEmpty"})(Ix||(Ix={}));function wL(e,t=!0){const i=e&&e.files&&e.files.exclude,r=t&&e&&e.search&&e.search.exclude;if(!i&&!r)return;if(!i||!r)return i||r||void 0;let s=Object.create(null);return s=xn(s,tt(i)),s=xn(s,tt(r),!0),s}function Dx(e,t){return e.excludePattern&&Ac(e.excludePattern,t)?!1:e.includePattern||e.usingSearchPaths?e.includePattern&&Ac(e.includePattern,t)?!0:e.usingSearchPaths?!!e.folderQueries&&e.folderQueries.some(i=>{const r=i.folder.fsPath;if(eh(t,r)){const s=cc(r,t);return!i.includePattern||!!Ac(i.includePattern,s)}else return!1}):!1:!0}var Px;(function(e){e[e.unknownEncoding=1]="unknownEncoding",e[e.regexParseError=2]="regexParseError",e[e.globParseError=3]="globParseError",e[e.invalidLiteral=4]="invalidLiteral",e[e.rgProcessError=5]="rgProcessError",e[e.other=6]="other",e[e.canceled=7]="canceled"})(Px||(Px={}));function Aa(e,t){const i={...e||{},...t||{}};return Object.keys(i).filter(r=>{const s=i[r];return typeof s=="boolean"&&s})}var Ax=class{constructor(e,t){this.c=null,this.a=t.excludePattern?.map(r=>({...e.excludePattern||{},...r.pattern||{}}))??[],this.a.length===0&&(this.a=[e.excludePattern||{}]),this.b=this.a.map(r=>Bo(r));let i=e.includePattern;t.includePattern&&(i?i={...i,...t.includePattern}:i=t.includePattern),i&&(this.c=Bo(i))}d(e,t,i){let r=null;for(const s of this.b){const n=s(e,t,i);if(typeof n=="string"){r=n;break}}return r}matchesExcludesSync(e,t,i){return!!(this.b&&this.d(e,t,i))}includedInQuerySync(e,t,i){return!(this.b&&this.d(e,t,i)||this.c&&!this.c(e,t,i))}includedInQuery(e,t,i){const r=()=>this.c?!!this.c(e,t,i):!0;return Promise.all(this.b.map(s=>{const n=s(e,t,i);return Cs(n)?n.then(o=>o?!1:r()):r()})).then(s=>s.some(n=>!!n))}hasSiblingExcludeClauses(){return this.a.reduce((e,t)=>bL(t)||e,!1)}};function bL(e){for(const t in e)if(typeof e[t]!="boolean")return!0;return!1}function yL(e){if(!e)return;let t;return i=>(t||(t=(e()||Promise.resolve([])).then(r=>r?Tx(r):{})),t.then(r=>!!r[i]))}function xL(e){if(!e)return;let t;return i=>{if(!t){const r=e();t=r?Tx(r):{}}return!!t[i]}}function Tx(e){const t={};for(const i of e)t[i]=!0;return t}function Rx(e){return e.flatMap(t=>t.patterns.map(i=>t.baseUri?{baseUri:t.baseUri,pattern:i}:i))}var e0={matchLines:100,charsPerLine:1e4},EL=!1,SL=class{constructor(e,t,i){this.id=e,this.dependencies=t,this.callback=i}},to;(function(e){e[e.Uninitialized=1]="Uninitialized",e[e.InitializedInternal=2]="InitializedInternal",e[e.InitializedExternal=3]="InitializedExternal"})(to||(to={}));var kL=class gC{static{this.INSTANCE=new gC}constructor(){this.a=typeof self=="object"&&self.constructor&&self.constructor.name==="DedicatedWorkerGlobalScope",this.b=typeof document=="object",this.c=[],this.d=to.Uninitialized}g(){if(this.d===to.Uninitialized){if(globalThis.define){this.d=to.InitializedExternal;return}}else return;this.d=to.InitializedInternal,globalThis.define=(t,i,r)=>{typeof t!="string"&&(r=i,i=t,t=null),(typeof i!="object"||!Array.isArray(i))&&(r=i,i=null),this.c.push(new SL(t,i,r))},globalThis.define.amd=!0,this.b?this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??window.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){if(t.startsWith(window.location.origin)||t.startsWith(`${V.vscodeFileResource}://${I4}`))return t;throw new Error(`[trusted_script_src] Invalid script url: ${t}`)}}):this.a&&(this.f=globalThis._VSCODE_WEB_PACKAGE_TTP??globalThis.trustedTypes?.createPolicy("amdLoader",{createScriptURL(t){return t}}))}async load(t){if(this.g(),this.d===to.InitializedExternal)return new Promise(o=>{const a=Ut();globalThis.define(a,[t],function(c){o(c)})});const i=await(this.a?this.i(t):this.b?this.h(t):this.j(t));if(!i){console.warn(`Did not receive a define call from script ${t}`);return}const r={},s=[],n=[];if(Array.isArray(i.dependencies))for(const o of i.dependencies)o==="exports"?s.push(r):n.push(o);if(n.length>0)throw new Error(`Cannot resolve dependencies for script ${t}. The dependencies are: ${n.join(", ")}`);return typeof i.callback=="function"?i.callback(...s)??r:i.callback}h(t){return new Promise((i,r)=>{const s=document.createElement("script");s.setAttribute("async","async"),s.setAttribute("type","text/javascript");const n=()=>{s.removeEventListener("load",o),s.removeEventListener("error",a)},o=c=>{n(),i(this.c.pop())},a=c=>{n(),r(c)};s.addEventListener("load",o),s.addEventListener("error",a),this.f&&(t=this.f.createScriptURL(t)),s.setAttribute("src",t),window.document.getElementsByTagName("head")[0].appendChild(s)})}async i(t){return this.f&&(t=this.f.createScriptURL(t)),await import(t),this.c.pop()}async j(t){try{const i=(await import("fs")).default,r=(await import("vm")).default,s=(await import("module")).default,n=y.parse(t).fsPath,o=i.readFileSync(n).toString(),a=s.wrap(o.replace(/^#!.*/,""));return new r.Script(a).runInThisContext().apply(),this.c.pop()}catch(i){throw i}}},t0=new Map;async function i0(e,t,i){i===void 0&&(i=!!(globalThis._VSCODE_PRODUCT_JSON??globalThis.vscode?.context?.configuration()?.product)?.commit);const r=t?`${e}/${t}`:e;if(t0.has(r))return t0.get(r);let s;if(/^\w[\w\d+.-]*:\/\//.test(r))s=r;else{const c=`${EL&&i&&!Eo?ID:CD}/${r}`;s=D4.asBrowserUri(c).toString(!0)}const n=kL.INSTANCE.load(s);return t0.set(r,n),n}var Bf="utf8",r0="utf8bom",Hf="utf16be",zf="utf16le",_f=[254,255],s0=[255,254],Ul=[239,187,191],$L=512,CL=512,IL=512*8,DL=512*128,Lx;(function(e){e[e.STREAM_IS_BINARY=1]="STREAM_IS_BINARY"})(Lx||(Lx={}));var PL=class extends Error{constructor(e,t){super(e),this.decodeStreamErrorKind=t}},AL=class mC{static async create(t){let i;if(t!==Bf)i=(await i0("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getDecoder(Nx(t));else{const r=new TextDecoder;i={write(s){return r.decode(s,{stream:!0})},end(){return r.decode()}}}return new mC(i)}constructor(t){this.a=t}write(t){return this.a.write(t)}end(){return this.a.end()}};function TL(e,t){const i=t.minBytesRequiredForDetection??t.guessEncoding?IL:CL;return new Promise((r,s)=>{const n=gy(h=>h.join("")),o=[];let a=0,c;const l=new at,u=async()=>{try{const h=await BL({buffer:ae.concat(o),bytesRead:a},t.guessEncoding,t.candidateGuessEncodings);if(h.seemsBinary&&t.acceptTextOnly)throw new PL("Stream is binary but only text is accepted for decoding",1);h.encoding=await t.overwriteEncoding(h.encoding),c=await AL.create(h.encoding);const f=c.write(ae.concat(o).buffer);n.write(f),o.length=0,a=0,r({stream:n,detected:h})}catch(h){l.cancel(),n.destroy(),s(h)}};vy(e,{onData:async h=>{c?n.write(c.write(h.buffer)):(o.push(h),a+=h.byteLength,a>=i&&(e.pause(),await u(),setTimeout(()=>e.resume())))},onError:h=>n.error(h),onEnd:async()=>{c||await u(),n.end(c?.end())}},l.token)})}async function RL(e,t,i){const s=(await i0("@vscode/iconv-lite-umd","lib/iconv-lite-umd.js")).getEncoder(Nx(t),i);let n=!1,o=!1;return{read(){if(o)return null;const a=e.read();if(typeof a!="string"){if(o=!0,!n&&i?.addBOM)switch(t){case Bf:case r0:return ae.wrap(Uint8Array.from(Ul));case Hf:return ae.wrap(Uint8Array.from(_f));case zf:return ae.wrap(Uint8Array.from(s0))}const c=s.end();return c&&c.length>0?(n=!0,ae.wrap(c)):null}return n=!0,ae.wrap(s.write(a))}}}function Nx(e){return e===r0||e===null?Bf:e}function LL(e,t){if(!e||t<_f.length)return null;const i=e.readUInt8(0),r=e.readUInt8(1);if(i===_f[0]&&r===_f[1])return Hf;if(i===s0[0]&&r===s0[1])return zf;if(t<Ul.length)return null;const s=e.readUInt8(2);return i===Ul[0]&&r===Ul[1]&&s===Ul[2]?r0:null}var NL=["ascii","utf-16","utf-32"];async function ML(e,t){const i=await i0("jschardet","dist/jschardet.min.js"),r=e.slice(0,DL),s=jL(r.buffer);t&&(t=vt(t.map(a=>UL(a))),t.length===0&&(t=void 0));let n;try{n=i.detect(s,t?{detectEncodings:t}:void 0)}catch{return null}if(!n||!n.encoding)return null;const o=n.encoding.toLowerCase();return 0<=NL.indexOf(o)?null:OL(n.encoding)}var FL={ibm866:"cp866",big5:"cp950"};function Mx(e){return e.replace(/[^a-zA-Z0-9]/g,"").toLowerCase()}function OL(e){const t=Mx(e);return FL[t]||t}function UL(e){const t=Mx(e),i=HL[t];return i?i.guessableName:void 0}function jL(e){let t="";for(let i=0;i<e.length;i++)t+=String.fromCharCode(e[i]);return t}function BL({buffer:e,bytesRead:t},i,r){let s=LL(e,t),n=!1;if(s!==Hf&&s!==zf&&e){let o=!0,a=!0,c=!1;for(let l=0;l<t&&l<$L;l++){const u=l%2===1,h=e.readUInt8(l)===0;if(h&&(c=!0),o&&(u&&!h||!u&&h)&&(o=!1),a&&(u&&h||!u&&!h)&&(a=!1),h&&!o&&!a)break}c&&(o?s=zf:a?s=Hf:n=!0)}return i&&!n&&!s&&e?ML(e.slice(0,t),r).then(o=>({seemsBinary:!1,encoding:o})):{seemsBinary:n,encoding:s}}var n0={utf8:{labelLong:"UTF-8",labelShort:"UTF-8",order:1,alias:"utf8bom",guessableName:"UTF-8"},utf8bom:{labelLong:"UTF-8 with BOM",labelShort:"UTF-8 with BOM",encodeOnly:!0,order:2,alias:"utf8"},utf16le:{labelLong:"UTF-16 LE",labelShort:"UTF-16 LE",order:3,guessableName:"UTF-16LE"},utf16be:{labelLong:"UTF-16 BE",labelShort:"UTF-16 BE",order:4,guessableName:"UTF-16BE"},windows1252:{labelLong:"Western (Windows 1252)",labelShort:"Windows 1252",order:5,guessableName:"windows-1252"},iso88591:{labelLong:"Western (ISO 8859-1)",labelShort:"ISO 8859-1",order:6},iso88593:{labelLong:"Western (ISO 8859-3)",labelShort:"ISO 8859-3",order:7},iso885915:{labelLong:"Western (ISO 8859-15)",labelShort:"ISO 8859-15",order:8},macroman:{labelLong:"Western (Mac Roman)",labelShort:"Mac Roman",order:9},cp437:{labelLong:"DOS (CP 437)",labelShort:"CP437",order:10},windows1256:{labelLong:"Arabic (Windows 1256)",labelShort:"Windows 1256",order:11},iso88596:{labelLong:"Arabic (ISO 8859-6)",labelShort:"ISO 8859-6",order:12},windows1257:{labelLong:"Baltic (Windows 1257)",labelShort:"Windows 1257",order:13},iso88594:{labelLong:"Baltic (ISO 8859-4)",labelShort:"ISO 8859-4",order:14},iso885914:{labelLong:"Celtic (ISO 8859-14)",labelShort:"ISO 8859-14",order:15},windows1250:{labelLong:"Central European (Windows 1250)",labelShort:"Windows 1250",order:16,guessableName:"windows-1250"},iso88592:{labelLong:"Central European (ISO 8859-2)",labelShort:"ISO 8859-2",order:17,guessableName:"ISO-8859-2"},cp852:{labelLong:"Central European (CP 852)",labelShort:"CP 852",order:18},windows1251:{labelLong:"Cyrillic (Windows 1251)",labelShort:"Windows 1251",order:19,guessableName:"windows-1251"},cp866:{labelLong:"Cyrillic (CP 866)",labelShort:"CP 866",order:20,guessableName:"IBM866"},cp1125:{labelLong:"Cyrillic (CP 1125)",labelShort:"CP 1125",order:21,guessableName:"IBM1125"},iso88595:{labelLong:"Cyrillic (ISO 8859-5)",labelShort:"ISO 8859-5",order:22,guessableName:"ISO-8859-5"},koi8r:{labelLong:"Cyrillic (KOI8-R)",labelShort:"KOI8-R",order:23,guessableName:"KOI8-R"},koi8u:{labelLong:"Cyrillic (KOI8-U)",labelShort:"KOI8-U",order:24},iso885913:{labelLong:"Estonian (ISO 8859-13)",labelShort:"ISO 8859-13",order:25},windows1253:{labelLong:"Greek (Windows 1253)",labelShort:"Windows 1253",order:26,guessableName:"windows-1253"},iso88597:{labelLong:"Greek (ISO 8859-7)",labelShort:"ISO 8859-7",order:27,guessableName:"ISO-8859-7"},windows1255:{labelLong:"Hebrew (Windows 1255)",labelShort:"Windows 1255",order:28,guessableName:"windows-1255"},iso88598:{labelLong:"Hebrew (ISO 8859-8)",labelShort:"ISO 8859-8",order:29,guessableName:"ISO-8859-8"},iso885910:{labelLong:"Nordic (ISO 8859-10)",labelShort:"ISO 8859-10",order:30},iso885916:{labelLong:"Romanian (ISO 8859-16)",labelShort:"ISO 8859-16",order:31},windows1254:{labelLong:"Turkish (Windows 1254)",labelShort:"Windows 1254",order:32},iso88599:{labelLong:"Turkish (ISO 8859-9)",labelShort:"ISO 8859-9",order:33},windows1258:{labelLong:"Vietnamese (Windows 1258)",labelShort:"Windows 1258",order:34},gbk:{labelLong:"Simplified Chinese (GBK)",labelShort:"GBK",order:35},gb18030:{labelLong:"Simplified Chinese (GB18030)",labelShort:"GB18030",order:36},cp950:{labelLong:"Traditional Chinese (Big5)",labelShort:"Big5",order:37,guessableName:"Big5"},big5hkscs:{labelLong:"Traditional Chinese (Big5-HKSCS)",labelShort:"Big5-HKSCS",order:38},shiftjis:{labelLong:"Japanese (Shift JIS)",labelShort:"Shift JIS",order:39,guessableName:"SHIFT_JIS"},eucjp:{labelLong:"Japanese (EUC-JP)",labelShort:"EUC-JP",order:40,guessableName:"EUC-JP"},euckr:{labelLong:"Korean (EUC-KR)",labelShort:"EUC-KR",order:41,guessableName:"EUC-KR"},windows874:{labelLong:"Thai (Windows 874)",labelShort:"Windows 874",order:42},iso885911:{labelLong:"Latin/Thai (ISO 8859-11)",labelShort:"ISO 8859-11",order:43},koi8ru:{labelLong:"Cyrillic (KOI8-RU)",labelShort:"KOI8-RU",order:44},koi8t:{labelLong:"Tajik (KOI8-T)",labelShort:"KOI8-T",order:45},gb2312:{labelLong:"Simplified Chinese (GB 2312)",labelShort:"GB 2312",order:46,guessableName:"GB2312"},cp865:{labelLong:"Nordic DOS (CP 865)",labelShort:"CP 865",order:47},cp850:{labelLong:"Western European DOS (CP 850)",labelShort:"CP 850",order:48}},HL=(()=>{const e={};for(const t in n0)n0[t].guessableName&&(e[t]=n0[t]);return e})(),lV=B("textFileService"),Fx;(function(e){e[e.FILE_IS_BINARY=0]="FILE_IS_BINARY"})(Fx||(Fx={}));var Ox;(function(e){e[e.SAVED=0]="SAVED",e[e.DIRTY=1]="DIRTY",e[e.PENDING_SAVE=2]="PENDING_SAVE",e[e.CONFLICT=3]="CONFLICT",e[e.ORPHAN=4]="ORPHAN",e[e.ERROR=5]="ERROR"})(Ox||(Ox={}));var Ux;(function(e){e[e.EDITOR=1]="EDITOR",e[e.REFERENCE=2]="REFERENCE",e[e.OTHER=3]="OTHER"})(Ux||(Ux={}));var jx;(function(e){e[e.Encode=0]="Encode",e[e.Decode=1]="Decode"})(jx||(jx={}));function zL(e){let t=!1;return{read(){return t?null:(t=!0,e)}}}function jl(e,t,i){return new uc(r=>o0(r,i)).isEqual(e,t)}function _L(e,t,i){return jl(e.uri,t.uri,i)?0:gn(e.uri.toString(),t.uri.toString())}function WL(e,t,i){return e.index!==t.index?e.index<t.index?-1:1:jl(e.uri,t.uri,i)?gn(e.name,t.name):gn(e.uri.toString(),t.uri.toString())}function Bx(e,t,i,r){const s=e.slice(0).sort((o,a)=>i(o,a,r)),n=t.slice(0).sort((o,a)=>i(o,a,r));return bI(s,n,(o,a)=>i(o,a,r))}function o0(e,t){const i=t.getCapabilities(e.scheme);return!(i&&i&1024)}var a0=class jb extends H2{static toExtHostWorkspace(t,i,r,s){if(!t)return{workspace:null,added:[],removed:[]};const{id:n,name:o,folders:a,configuration:c,transient:l,isUntitled:u}=t,h=[],f=i;i?a.forEach((x,E)=>{const $=y.revive(x.uri),A=jb.o(r||i,$,s);A?(A.name=x.name,A.index=x.index,h.push(A)):h.push({uri:$,name:x.name,index:E})}):h.push(...a.map(({uri:x,name:E,index:$})=>({uri:y.revive(x),name:E,index:$}))),h.sort((x,E)=>x.index<E.index?-1:1);const p=new jb(n,o,h,!!l,c?y.revive(c):null,!!u,x=>o0(x,s)),{added:m,removed:w}=Bx(f?f.workspaceFolders:[],p.workspaceFolders,_L,s);return{workspace:p,added:m,removed:w}}static o(t,i,r){for(let s=0;s<t.folders.length;s++){const n=t.workspaceFolders[s];if(jl(n.uri,i,r))return n}}constructor(t,i,r,s,n,o,a){super(t,r.map(c=>new P5(c)),s,n,a),this.t=i,this.u=o,this.q=[],this.s=Ds.forUris(a,()=>!0),r.forEach(c=>{this.q.push(c),this.s.set(c.uri,c)})}get name(){return this.t}get isUntitled(){return this.u}get workspaceFolders(){return this.q.slice(0)}getWorkspaceFolder(t,i){return i&&this.s.get(t)&&(t=th(t)),this.s.findSubstr(t)}resolveWorkspaceFolder(t){return this.s.get(t)}},c0=class{constructor(t,i,r,s,n){this.c=new P,this.onDidChangeWorkspace=this.c.event,this.g=new P,this.onDidGrantWorkspaceTrust=this.g.event,this.u=[],this.v=!1,this.w=new Map,this.B=0,this.C=new tc,this.D=new Map,this.h=s,this.s=r,this.t=n,this.j=new O2,this.k=new Er,this.o=t.getProxy(J.MainThreadWorkspace),this.q=t.getProxy(J.MainThreadMessageService);const o=i.workspace;this.l=o?new a0(o.id,o.name,[],!!o.transient,o.configuration?y.revive(o.configuration):null,!!o.isUntitled,a=>o0(a,r)):void 0}$initializeWorkspace(t,i){this.v=i,this.$acceptWorkspaceData(t),this.k.open()}waitForInitializeCall(){return this.k.wait()}get workspace(){return this.x}get name(){return this.x?this.x.name:void 0}get workspaceFile(){if(this.x&&this.x.configuration)return this.x.isUntitled?y.from({scheme:V.untitled,path:tr(th(this.x.configuration))}):this.x.configuration}get x(){return this.n||this.l}getWorkspaceFolders(){if(this.x)return this.x.workspaceFolders.slice(0)}async getWorkspaceFolders2(){if(await this.k.wait(),!!this.x)return this.x.workspaceFolders.slice(0)}updateWorkspaceFolders(t,i,r,...s){const n=[];if(Array.isArray(s)&&s.forEach(u=>{y.isUri(u.uri)&&!n.some(h=>jl(h.uri,u.uri,this.s))&&n.push({uri:u.uri,name:u.name||jg(u.uri)})}),this.n||[i,r].some(u=>typeof u!="number"||u<0)||r===0&&n.length===0)return!1;const o=this.x?this.x.workspaceFolders:[];if(i+r>o.length)return!1;const a=o.slice(0);a.splice(i,r,...n.map(u=>({uri:u.uri,name:u.name||jg(u.uri),index:void 0})));for(let u=0;u<a.length;u++){const h=a[u];if(a.some((f,p)=>p!==u&&jl(h.uri,f.uri,this.s)))return!1}a.forEach((u,h)=>u.index=h);const{added:c,removed:l}=Bx(o,a,WL,this.s);if(c.length===0&&l.length===0)return!1;if(this.o){const u=t.displayName||t.name;this.o.$updateWorkspaceFolders(u,i,r,n).then(void 0,h=>{this.n=void 0;const f={source:{identifier:t.identifier,label:t.displayName||t.name}};this.q.$showMessage(U2.Error,d(2913,null,u,h.toString()),f,[])})}return this.y(a),!0}getWorkspaceFolder(t,i){if(this.x)return this.x.getWorkspaceFolder(t,i)}async getWorkspaceFolder2(t,i){if(await this.k.wait(),!!this.x)return this.x.getWorkspaceFolder(t,i)}async resolveWorkspaceFolder(t){if(await this.k.wait(),!!this.x)return this.x.resolveWorkspaceFolder(t)}getPath(){if(!this.x)return;const{folders:t}=this.x;if(t.length!==0)return t[0].uri.fsPath}getRelativePath(t,i){let r,s="";if(typeof t=="string"?(r=y.file(t),s=t):typeof t<"u"&&(r=t,s=t.fsPath),!r)return s;const n=this.getWorkspaceFolder(r,!0);if(!n)return s;typeof i>"u"&&this.x&&(i=this.x.folders.length>1);let o=A4(n.uri,r);return i&&n.name&&(o=`${n.name}/${o}`),o}y(t){this.x&&(this.n=a0.toExtHostWorkspace({id:this.x.id,name:this.x.name,configuration:this.x.configuration,folders:t,isUntitled:this.x.isUntitled},this.x,void 0,this.s).workspace||void 0)}$acceptWorkspaceData(t){const{workspace:i,added:r,removed:s}=a0.toExtHostWorkspace(t,this.l,this.n,this.s);this.l=i||void 0,this.n=void 0,this.c.fire(Object.freeze({added:r,removed:s}))}findFiles(t,i,r,s,n=et.None){this.h.trace(`extHostWorkspace#findFiles: fileSearch, extension: ${s.value}, entryPoint: findFiles`);let o="",a=!0;return i===null?a=!1:i!==void 0&&(typeof i=="string"?o=i:o=i.pattern),this.z({type:"include",value:t},{exclude:[o],maxResults:r,useExcludeSettings:a?ss.FilesExclude:ss.None,useIgnoreFiles:{local:!1}},n)}findFiles2(t,i={},r,s=et.None){return this.h.trace(`extHostWorkspace#findFiles2New: fileSearch, extension: ${r.value}, entryPoint: findFiles2New`),this.z({type:"filePatterns",value:t},i,s)}async z(t,i,r){if(r.isCancellationRequested)return Promise.resolve([]);const s=t.type==="include"?[t.value]:t.value??[];if(!Array.isArray(s))throw console.error("Invalid file pattern provided",s),new Error(`Invalid file pattern provided ${JSON.stringify(s)}`);const n=s.map(o=>{const a=Hx(i.exclude),c={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles?.local=="boolean"?!i.useIgnoreFiles.local:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===ss.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==ss.SearchAndFilesExclude,maxResults:i.maxResults,excludePattern:a.length>0?a:void 0,_reason:"startFileSearch",shouldGlobSearch:t.type==="include"?void 0:!0},l=Wf(Pi.from(o)),u=l?.folder;return t.type==="include"?c.includePattern=l?.pattern:c.filePattern=l?.pattern,{folder:u,options:c}});return this.A(n,r)}async A(t,i){return(await Promise.all(t?.map(s=>this.o.$startFileSearch(s.folder??null,s.options,i).then(n=>Array.isArray(n)?n.map(o=>y.revive(o)):[]))??[])).flat()}findTextInFiles2(t,i,r,s=et.None){this.h.trace(`extHostWorkspace#findTextInFiles2: textSearch, extension: ${r.value}, entryPoint: findTextInFiles2`);const n=f=>{if(!i)return{folder:void 0,options:{}};const p=f?Wf(Pi.from(f)):void 0,m=i.exclude?Hx(i.exclude):void 0;return{options:{ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useIgnoreFiles?.global=="boolean"?!i.useIgnoreFiles?.global:void 0,disregardParentIgnoreFiles:typeof i.useIgnoreFiles?.parent=="boolean"?!i.useIgnoreFiles?.parent:void 0,disregardExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings===ss.None,disregardSearchExcludeSettings:i.useExcludeSettings!==void 0&&i.useExcludeSettings!==ss.SearchAndFilesExclude,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:i.previewOptions?{matchLines:i.previewOptions?.numMatchLines??100,charsPerLine:i.previewOptions?.charsPerLine??1e4}:void 0,surroundingContext:i.surroundingContext,includePattern:p?.pattern,excludePattern:m},folder:p?.folder}},a=(i?.include?.map(f=>n(f))??[n(void 0)]).filter(f=>!!f),c=new ue,l=c.add(new P),u=this.findTextInFilesBase(t,a,(f,p)=>l.fire({result:f,uri:p}),s);return{results:new hc(async f=>{c.add(l.event(p=>{const m=p.result,w=p.uri;Ex(m)?f.emitOne(new Gs(w,m.rangeLocations.map(x=>({previewRange:new ke(x.preview.startLineNumber,x.preview.startColumn,x.preview.endLineNumber,x.preview.endColumn),sourceRange:new ke(x.source.startLineNumber,x.source.startColumn,x.source.endLineNumber,x.source.endColumn)})),m.previewText)):f.emitOne(new Xv(w,m.text,m.lineNumber))})),await u}),complete:u.then(f=>(c.dispose(),{limitHit:f?.limitHit??!1}))}}async findTextInFilesBase(t,i,r,s=et.None){const n=this.j.getNext();let o=!1;if(s.onCancellationRequested(a=>{o=!0}),this.u[n]=a=>{if(o)return;const c=y.revive(a.resource);a.results.forEach(l=>{const u=St(l);r(u,c)})},s.isCancellationRequested)return{};try{const a=await Promise.all(i?.map(c=>this.o.$startTextSearch(t,c.folder??null,c.options,n,s)||{})??[]);return delete this.u[n],a.reduce((c,l)=>({limitHit:c?.limitHit||(l?.limitHit??!1),message:[c?.message??[],l?.message??[]].flat()}),{})??{limitHit:!1}}catch(a){throw delete this.u[n],a}}async findTextInFiles(t,i,r,s,n=et.None){this.h.trace(`extHostWorkspace#findTextInFiles: textSearch, extension: ${s.value}, entryPoint: findTextInFiles`);const o=typeof i.previewOptions>"u"?{matchLines:100,charsPerLine:1e4}:i.previewOptions,a=Wf(Pi.from(i.include)),c=typeof i.exclude=="string"?i.exclude:i.exclude?i.exclude.pattern:void 0,l={ignoreSymlinks:typeof i.followSymlinks=="boolean"?!i.followSymlinks:void 0,disregardIgnoreFiles:typeof i.useIgnoreFiles=="boolean"?!i.useIgnoreFiles:void 0,disregardGlobalIgnoreFiles:typeof i.useGlobalIgnoreFiles=="boolean"?!i.useGlobalIgnoreFiles:void 0,disregardParentIgnoreFiles:typeof i.useParentIgnoreFiles=="boolean"?!i.useParentIgnoreFiles:void 0,disregardExcludeSettings:typeof i.useDefaultExcludes=="boolean"?!i.useDefaultExcludes:!0,disregardSearchExcludeSettings:typeof i.useSearchExclude=="boolean"?!i.useSearchExclude:!0,fileEncoding:i.encoding,maxResults:i.maxResults,previewOptions:o,surroundingContext:i.afterContext,includePattern:a?.pattern,excludePattern:c?[{pattern:c}]:void 0},u=(h,f)=>{Ex(h)?r({uri:f,preview:{text:h.previewText,matches:ug(h.rangeLocations,p=>new ke(p.preview.startLineNumber,p.preview.startColumn,p.preview.endLineNumber,p.preview.endColumn))},ranges:ug(h.rangeLocations,p=>new ke(p.source.startLineNumber,p.source.startColumn,p.source.endLineNumber,p.source.endColumn))}):r({uri:f,text:h.text,lineNumber:h.lineNumber})};return this.findTextInFilesBase(t,[{options:l,folder:a?.folder}],u,n)}$handleTextSearchResult(t,i){this.u[i]?.(t)}async save(t){const i=await this.o.$save(t,{saveAs:!1});return y.revive(i)}async saveAs(t){const i=await this.o.$save(t,{saveAs:!0});return y.revive(i)}saveAll(t){return this.o.$saveAll(t)}resolveProxy(t){return this.o.$resolveProxy(t)}lookupAuthorization(t){return this.o.$lookupAuthorization(t)}lookupKerberosAuthorization(t){return this.o.$lookupKerberosAuthorization(t)}loadCertificates(){return this.o.$loadCertificates()}get trusted(){return this.v}requestWorkspaceTrust(t){return this.o.$requestWorkspaceTrust(t)}$onDidGrantWorkspaceTrust(){this.v||(this.v=!0,this.g.fire())}registerEditSessionIdentityProvider(t,i){if(this.w.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.w.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerEditSessionIdentityProvider(s,r),oe(()=>{this.w.delete(t),this.o.$unregisterEditSessionIdentityProvider(s)})}async $getEditSessionIdentifier(t,i){this.h.info("Getting edit session identifier for workspaceFolder",t);const r=await this.resolveWorkspaceFolder(y.revive(t));if(!r){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",r);const s=this.w.get(r.uri.scheme);if(this.h.info(`Provider for scheme ${r.uri.scheme} is defined: `,!!s),!s)return;const n=await s.provideEditSessionIdentity(r,i);if(this.h.info("Provider returned edit session identifier: ",n),!!n)return n}async $provideEditSessionIdentityMatch(t,i,r,s){this.h.info("Getting edit session identifier for workspaceFolder",t);const n=await this.resolveWorkspaceFolder(y.revive(t));if(!n){this.h.warn("Unable to resolve workspace folder");return}this.h.info("Invoking #provideEditSessionIdentity for workspaceFolder",n);const o=this.w.get(n.uri.scheme);if(this.h.info(`Provider for scheme ${n.uri.scheme} is defined: `,!!o),!o)return;const a=await o.provideEditSessionIdentityMatch?.(i,r,s);if(this.h.info("Provider returned edit session identifier match result: ",a),!!a)return a}getOnWillCreateEditSessionIdentityEvent(t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=t,this.C.event(n,void 0,s)}}async $onWillCreateEditSessionIdentity(t,i,r){const s=await this.resolveWorkspaceFolder(y.revive(t));if(s===void 0)throw new Error("Unable to resolve workspace folder");await this.C.fireAsync({workspaceFolder:s},i,async(n,o)=>{const a=Date.now();await Promise.resolve(n),Date.now()-a>r&&this.h.warn("SLOW edit session create-participant",o.extension.identifier)}),i.isCancellationRequested}registerCanonicalUriProvider(t,i){if(this.D.has(t))throw new Error(`A provider has already been registered for scheme ${t}`);this.D.set(t,i);const r=this.t.transformOutgoingScheme(t),s=this.B++;return this.o.$registerCanonicalUriProvider(s,r),oe(()=>{this.D.delete(t),this.o.$unregisterCanonicalUriProvider(s)})}async provideCanonicalUri(t,i,r){const s=this.D.get(t.scheme);if(!s)return;const n=await s.provideCanonicalUri?.(y.revive(t),i,r);if(n)return n}async $provideCanonicalUri(t,i,r){return this.provideCanonicalUri(y.revive(t),{targetScheme:i},r)}async decode(t,i){const[r,s]=this.F(i),n=await this.o.$resolveDecoding(r,s),o=(await TL(YI(ae.wrap(t)),{...n,acceptTextOnly:!0,overwriteEncoding:a=>a===null||a===n.preferredEncoding?Promise.resolve(n.preferredEncoding):this.o.$validateDetectedEncoding(r,a,s)})).stream;return my(o,a=>a.join(""))}async encode(t,i){const[r,s]=this.F(i),{encoding:n,addBOM:o}=await this.o.$resolveEncoding(r,s);if(n===Bf&&!o)return ae.fromString(t).buffer;const a=await RL(zL(t),n,{addBOM:o});return JI(a).buffer}F(t){const i=qu(t?.uri)?t.uri:void 0,r=typeof t?.encoding=="string"?t.encoding:void 0;return[i,r?{encoding:r}:void 0]}};c0=__decorate([__param(0,Fe),__param(1,It),__param(2,Ro),__param(3,We),__param(4,nh)],c0);var ns=B("IExtHostWorkspace");function Wf(e){let t,i;if(e)return typeof e=="string"?t=e:(t=e.pattern,i=y.revive(e.baseUri)),{pattern:t,folder:i}}function Hx(e){return(e?.map(t=>{if(typeof t=="string")return t===""?void 0:{pattern:t,uri:void 0};{const i=Wf(t);return i?{pattern:i.pattern,uri:i.folder}:void 0}})??[]).filter(t=>!!t)}var zx;(function(e){e[e.None=0]="None",e[e.UnexpectedEndOfComment=1]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=2]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=3]="UnexpectedEndOfNumber",e[e.InvalidUnicode=4]="InvalidUnicode",e[e.InvalidEscapeCharacter=5]="InvalidEscapeCharacter",e[e.InvalidCharacter=6]="InvalidCharacter"})(zx||(zx={}));var _x;(function(e){e[e.OpenBraceToken=1]="OpenBraceToken",e[e.CloseBraceToken=2]="CloseBraceToken",e[e.OpenBracketToken=3]="OpenBracketToken",e[e.CloseBracketToken=4]="CloseBracketToken",e[e.CommaToken=5]="CommaToken",e[e.ColonToken=6]="ColonToken",e[e.NullKeyword=7]="NullKeyword",e[e.TrueKeyword=8]="TrueKeyword",e[e.FalseKeyword=9]="FalseKeyword",e[e.StringLiteral=10]="StringLiteral",e[e.NumericLiteral=11]="NumericLiteral",e[e.LineCommentTrivia=12]="LineCommentTrivia",e[e.BlockCommentTrivia=13]="BlockCommentTrivia",e[e.LineBreakTrivia=14]="LineBreakTrivia",e[e.Trivia=15]="Trivia",e[e.Unknown=16]="Unknown",e[e.EOF=17]="EOF"})(_x||(_x={}));var Wx;(function(e){e[e.InvalidSymbol=1]="InvalidSymbol",e[e.InvalidNumberFormat=2]="InvalidNumberFormat",e[e.PropertyNameExpected=3]="PropertyNameExpected",e[e.ValueExpected=4]="ValueExpected",e[e.ColonExpected=5]="ColonExpected",e[e.CommaExpected=6]="CommaExpected",e[e.CloseBraceExpected=7]="CloseBraceExpected",e[e.CloseBracketExpected=8]="CloseBracketExpected",e[e.EndOfFileExpected=9]="EndOfFileExpected",e[e.InvalidCommentToken=10]="InvalidCommentToken",e[e.UnexpectedEndOfComment=11]="UnexpectedEndOfComment",e[e.UnexpectedEndOfString=12]="UnexpectedEndOfString",e[e.UnexpectedEndOfNumber=13]="UnexpectedEndOfNumber",e[e.InvalidUnicode=14]="InvalidUnicode",e[e.InvalidEscapeCharacter=15]="InvalidEscapeCharacter",e[e.InvalidCharacter=16]="InvalidCharacter"})(Wx||(Wx={}));var l0;(function(e){e.DEFAULT={allowTrailingComma:!0}})(l0||(l0={}));function VL(e,t=!1){let i=0;const r=e.length;let s="",n=0,o=16,a=0;function c(w){let x=0,E=0;for(;x<w;){const $=e.charCodeAt(i);if($>=48&&$<=57)E=E*16+$-48;else if($>=65&&$<=70)E=E*16+$-65+10;else if($>=97&&$<=102)E=E*16+$-97+10;else break;i++,x++}return x<w&&(E=-1),E}function l(w){i=w,s="",n=0,o=16,a=0}function u(){const w=i;if(e.charCodeAt(i)===48)i++;else for(i++;i<e.length&&Ta(e.charCodeAt(i));)i++;if(i<e.length&&e.charCodeAt(i)===46)if(i++,i<e.length&&Ta(e.charCodeAt(i)))for(i++;i<e.length&&Ta(e.charCodeAt(i));)i++;else return a=3,e.substring(w,i);let x=i;if(i<e.length&&(e.charCodeAt(i)===69||e.charCodeAt(i)===101))if(i++,(i<e.length&&e.charCodeAt(i)===43||e.charCodeAt(i)===45)&&i++,i<e.length&&Ta(e.charCodeAt(i))){for(i++;i<e.length&&Ta(e.charCodeAt(i));)i++;x=i}else a=3;return e.substring(w,x)}function h(){let w="",x=i;for(;;){if(i>=r){w+=e.substring(x,i),a=2;break}const E=e.charCodeAt(i);if(E===34){w+=e.substring(x,i),i++;break}if(E===92){if(w+=e.substring(x,i),i++,i>=r){a=2;break}switch(e.charCodeAt(i++)){case 34:w+='"';break;case 92:w+="\\";break;case 47:w+="/";break;case 98:w+="\b";break;case 102:w+="\f";break;case 110:w+=`
`;break;case 114:w+="\r";break;case 116:w+="	";break;case 117:{const A=c(4);A>=0?w+=String.fromCharCode(A):a=4;break}default:a=5}x=i;continue}if(E>=0&&E<=31)if(Vf(E)){w+=e.substring(x,i),a=2;break}else a=6;i++}return w}function f(){if(s="",a=0,n=i,i>=r)return n=r,o=17;let w=e.charCodeAt(i);if(u0(w)){do i++,s+=String.fromCharCode(w),w=e.charCodeAt(i);while(u0(w));return o=15}if(Vf(w))return i++,s+=String.fromCharCode(w),w===13&&e.charCodeAt(i)===10&&(i++,s+=`
`),o=14;switch(w){case 123:return i++,o=1;case 125:return i++,o=2;case 91:return i++,o=3;case 93:return i++,o=4;case 58:return i++,o=6;case 44:return i++,o=5;case 34:return i++,s=h(),o=10;case 47:{const x=i-1;if(e.charCodeAt(i+1)===47){for(i+=2;i<r&&!Vf(e.charCodeAt(i));)i++;return s=e.substring(x,i),o=12}if(e.charCodeAt(i+1)===42){i+=2;const E=r-1;let $=!1;for(;i<E;){if(e.charCodeAt(i)===42&&e.charCodeAt(i+1)===47){i+=2,$=!0;break}i++}return $||(i++,a=1),s=e.substring(x,i),o=13}return s+=String.fromCharCode(w),i++,o=16}case 45:if(s+=String.fromCharCode(w),i++,i===r||!Ta(e.charCodeAt(i)))return o=16;case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return s+=u(),o=11;default:for(;i<r&&p(w);)i++,w=e.charCodeAt(i);if(n!==i){switch(s=e.substring(n,i),s){case"true":return o=8;case"false":return o=9;case"null":return o=7}return o=16}return s+=String.fromCharCode(w),i++,o=16}}function p(w){if(u0(w)||Vf(w))return!1;switch(w){case 125:case 93:case 123:case 91:case 34:case 58:case 44:case 47:return!1}return!0}function m(){let w;do w=f();while(w>=12&&w<=15);return w}return{setPosition:l,getPosition:()=>i,scan:t?m:f,getToken:()=>o,getTokenValue:()=>s,getTokenOffset:()=>n,getTokenLength:()=>i-n,getTokenError:()=>a}}function u0(e){return e===32||e===9||e===11||e===12||e===160||e===5760||e>=8192&&e<=8203||e===8239||e===8287||e===12288||e===65279}function Vf(e){return e===10||e===13||e===8232||e===8233}function Ta(e){return e>=48&&e<=57}var Vx;(function(e){e[e.nullCharacter=0]="nullCharacter",e[e.maxAsciiCharacter=127]="maxAsciiCharacter",e[e.lineFeed=10]="lineFeed",e[e.carriageReturn=13]="carriageReturn",e[e.lineSeparator=8232]="lineSeparator",e[e.paragraphSeparator=8233]="paragraphSeparator",e[e.nextLine=133]="nextLine",e[e.space=32]="space",e[e.nonBreakingSpace=160]="nonBreakingSpace",e[e.enQuad=8192]="enQuad",e[e.emQuad=8193]="emQuad",e[e.enSpace=8194]="enSpace",e[e.emSpace=8195]="emSpace",e[e.threePerEmSpace=8196]="threePerEmSpace",e[e.fourPerEmSpace=8197]="fourPerEmSpace",e[e.sixPerEmSpace=8198]="sixPerEmSpace",e[e.figureSpace=8199]="figureSpace",e[e.punctuationSpace=8200]="punctuationSpace",e[e.thinSpace=8201]="thinSpace",e[e.hairSpace=8202]="hairSpace",e[e.zeroWidthSpace=8203]="zeroWidthSpace",e[e.narrowNoBreakSpace=8239]="narrowNoBreakSpace",e[e.ideographicSpace=12288]="ideographicSpace",e[e.mathematicalSpace=8287]="mathematicalSpace",e[e.ogham=5760]="ogham",e[e._=95]="_",e[e.$=36]="$",e[e._0=48]="_0",e[e._1=49]="_1",e[e._2=50]="_2",e[e._3=51]="_3",e[e._4=52]="_4",e[e._5=53]="_5",e[e._6=54]="_6",e[e._7=55]="_7",e[e._8=56]="_8",e[e._9=57]="_9",e[e.a=97]="a",e[e.b=98]="b",e[e.c=99]="c",e[e.d=100]="d",e[e.e=101]="e",e[e.f=102]="f",e[e.g=103]="g",e[e.h=104]="h",e[e.i=105]="i",e[e.j=106]="j",e[e.k=107]="k",e[e.l=108]="l",e[e.m=109]="m",e[e.n=110]="n",e[e.o=111]="o",e[e.p=112]="p",e[e.q=113]="q",e[e.r=114]="r",e[e.s=115]="s",e[e.t=116]="t",e[e.u=117]="u",e[e.v=118]="v",e[e.w=119]="w",e[e.x=120]="x",e[e.y=121]="y",e[e.z=122]="z",e[e.A=65]="A",e[e.B=66]="B",e[e.C=67]="C",e[e.D=68]="D",e[e.E=69]="E",e[e.F=70]="F",e[e.G=71]="G",e[e.H=72]="H",e[e.I=73]="I",e[e.J=74]="J",e[e.K=75]="K",e[e.L=76]="L",e[e.M=77]="M",e[e.N=78]="N",e[e.O=79]="O",e[e.P=80]="P",e[e.Q=81]="Q",e[e.R=82]="R",e[e.S=83]="S",e[e.T=84]="T",e[e.U=85]="U",e[e.V=86]="V",e[e.W=87]="W",e[e.X=88]="X",e[e.Y=89]="Y",e[e.Z=90]="Z",e[e.ampersand=38]="ampersand",e[e.asterisk=42]="asterisk",e[e.at=64]="at",e[e.backslash=92]="backslash",e[e.bar=124]="bar",e[e.caret=94]="caret",e[e.closeBrace=125]="closeBrace",e[e.closeBracket=93]="closeBracket",e[e.closeParen=41]="closeParen",e[e.colon=58]="colon",e[e.comma=44]="comma",e[e.dot=46]="dot",e[e.doubleQuote=34]="doubleQuote",e[e.equals=61]="equals",e[e.exclamation=33]="exclamation",e[e.greaterThan=62]="greaterThan",e[e.lessThan=60]="lessThan",e[e.minus=45]="minus",e[e.openBrace=123]="openBrace",e[e.openBracket=91]="openBracket",e[e.openParen=40]="openParen",e[e.percent=37]="percent",e[e.plus=43]="plus",e[e.question=63]="question",e[e.semicolon=59]="semicolon",e[e.singleQuote=39]="singleQuote",e[e.slash=47]="slash",e[e.tilde=126]="tilde",e[e.backspace=8]="backspace",e[e.formFeed=12]="formFeed",e[e.byteOrderMark=65279]="byteOrderMark",e[e.tab=9]="tab",e[e.verticalTab=11]="verticalTab"})(Vx||(Vx={}));function qL(e,t,i=l0.DEFAULT){const r=VL(e,!1);function s(q){return q?()=>q(r.getTokenOffset(),r.getTokenLength()):()=>!0}function n(q){return q?he=>q(he,r.getTokenOffset(),r.getTokenLength()):()=>!0}const o=s(t.onObjectBegin),a=n(t.onObjectProperty),c=s(t.onObjectEnd),l=s(t.onArrayBegin),u=s(t.onArrayEnd),h=n(t.onLiteralValue),f=n(t.onSeparator),p=s(t.onComment),m=n(t.onError),w=i&&i.disallowComments,x=i&&i.allowTrailingComma;function E(){for(;;){const q=r.scan();switch(r.getTokenError()){case 4:$(14);break;case 5:$(15);break;case 3:$(13);break;case 1:w||$(11);break;case 2:$(12);break;case 6:$(16);break}switch(q){case 12:case 13:w?$(10):p();break;case 16:$(1);break;case 15:case 14:break;default:return q}}}function $(q,he=[],me=[]){if(m(q),he.length+me.length>0){let Ie=r.getToken();for(;Ie!==17;){if(he.indexOf(Ie)!==-1){E();break}else if(me.indexOf(Ie)!==-1)break;Ie=E()}}}function A(q){const he=r.getTokenValue();return q?h(he):a(he),E(),!0}function Q(){switch(r.getToken()){case 11:{let q=0;try{q=JSON.parse(r.getTokenValue()),typeof q!="number"&&($(2),q=0)}catch{$(2)}h(q);break}case 7:h(null);break;case 8:h(!0);break;case 9:h(!1);break;default:return!1}return E(),!0}function W(){return r.getToken()!==10?($(3,[],[2,5]),!1):(A(!1),r.getToken()===6?(f(":"),E(),z()||$(4,[],[2,5])):$(5,[],[2,5]),!0)}function ce(){o(),E();let q=!1;for(;r.getToken()!==2&&r.getToken()!==17;){if(r.getToken()===5){if(q||$(4,[],[]),f(","),E(),r.getToken()===2&&x)break}else q&&$(6,[],[]);W()||$(4,[],[2,5]),q=!0}return c(),r.getToken()!==2?$(7,[2],[]):E(),!0}function U(){l(),E();let q=!1;for(;r.getToken()!==4&&r.getToken()!==17;){if(r.getToken()===5){if(q||$(4,[],[]),f(","),E(),r.getToken()===4&&x)break}else q&&$(6,[],[]);z()||$(4,[],[4,5]),q=!0}return u(),r.getToken()!==4?$(8,[4],[]):E(),!0}function z(){switch(r.getToken()){case 3:return U();case 1:return ce();case 10:return A(!0);default:return Q()}}return E(),r.getToken()===17?i.allowEmptyContent?!0:($(4,[],[]),!1):z()?(r.getToken()!==17&&$(9,[],[]),!0):($(4,[],[]),!1)}function Bl(e){return Object.isFrozen(e)?e:E5(e)}var Ra=class po{static createEmptyModel(t){return new po({},[],[],void 0,t)}constructor(t,i,r,s,n){this.b=t,this.c=i,this.d=r,this.raw=s,this.f=n,this.a=new Map}get rawConfiguration(){if(!this.g)if(this.raw){const t=(Array.isArray(this.raw)?this.raw:[this.raw]).map(i=>{if(i instanceof po)return i;const r=new GL("",this.f);return r.parseRaw(i),r.configurationModel});this.g=t.reduce((i,r)=>r===i?r:i.merge(r),t[0])}else this.g=this;return this.g}get contents(){return this.b}get overrides(){return this.d}get keys(){return this.c}isEmpty(){return this.c.length===0&&Object.keys(this.b).length===0&&this.d.length===0}getValue(t){return t?Ah(this.contents,t):this.contents}inspect(t,i){const r=this;return{get value(){return Bl(r.rawConfiguration.getValue(t))},get override(){return i?Bl(r.rawConfiguration.getOverrideValue(t,i)):void 0},get merged(){return Bl(i?r.rawConfiguration.override(i).getValue(t):r.rawConfiguration.getValue(t))},get overrides(){const s=[];for(const{contents:n,identifiers:o,keys:a}of r.rawConfiguration.overrides){const c=new po(n,a,[],void 0,r.f).getValue(t);c!==void 0&&s.push({identifiers:o,value:c})}return s.length?Bl(s):void 0}}}getOverrideValue(t,i){const r=this.j(i);return r?t?Ah(r,t):r:void 0}getKeysForOverrideIdentifier(t){const i=[];for(const r of this.overrides)r.identifiers.includes(t)&&i.push(...r.keys);return vo(i)}getAllOverrideIdentifiers(){const t=[];for(const i of this.overrides)t.push(...i.identifiers);return vo(t)}override(t){let i=this.a.get(t);return i||(i=this.h(t),this.a.set(t,i)),i}merge(...t){const i=tt(this.contents),r=tt(this.overrides),s=[...this.keys],n=this.raw?Array.isArray(this.raw)?[...this.raw]:[this.raw]:[this];for(const o of t)if(n.push(...o.raw?Array.isArray(o.raw)?o.raw:[o.raw]:[o]),!o.isEmpty()){this.i(i,o.contents);for(const a of o.overrides){const[c]=r.filter(l=>Li(l.identifiers,a.identifiers));c?(this.i(c.contents,a.contents),c.keys.push(...a.keys),c.keys=vo(c.keys)):r.push(tt(a))}for(const a of o.keys)s.indexOf(a)===-1&&s.push(a)}return new po(i,s,r,!n.length||n.every(o=>o instanceof po)?void 0:n,this.f)}h(t){const i=this.j(t);if(!i||typeof i!="object"||!Object.keys(i).length)return this;const r={};for(const s of vo([...Object.keys(this.contents),...Object.keys(i)])){let n=this.contents[s];const o=i[s];o&&(typeof n=="object"&&typeof o=="object"?(n=tt(n),this.i(n,o)):n=o),r[s]=n}return new po(r,this.keys,this.overrides,void 0,this.f)}i(t,i){for(const r of Object.keys(i)){if(r in t&&wt(t[r])&&wt(i[r])){this.i(t[r],i[r]);continue}t[r]=tt(i[r])}}j(t){let i=null,r=null;const s=n=>{n&&(r?this.i(r,n):r=tt(n))};for(const n of this.overrides)n.identifiers.length===1&&n.identifiers[0]===t?i=n.contents:n.identifiers.includes(t)&&s(n.contents);return s(i),r}toJSON(){return{contents:this.contents,overrides:this.overrides,keys:this.keys}}addValue(t,i){this.k(t,i,!0)}setValue(t,i){this.k(t,i,!1)}removeValue(t){const i=this.keys.indexOf(t);i!==-1&&(this.keys.splice(i,1),fT(this.contents,t),Ir.test(t)&&this.overrides.splice(this.overrides.findIndex(r=>Li(r.identifiers,Rc(t))),1))}k(t,i,r){if(H7(this.contents,t,i,s=>this.f.error(s)),r=r||this.keys.indexOf(t)===-1,r&&this.keys.push(t),Ir.test(t)){const s=Rc(t),n={identifiers:s,keys:Object.keys(this.contents[t]),contents:Wm(this.contents[t],a=>this.f.error(a))},o=this.overrides.findIndex(a=>Li(a.identifiers,s));o!==-1?this.overrides[o]=n:this.overrides.push(n)}}},GL=class{constructor(e,t){this.f=e,this.g=t,this.a=null,this.b=null,this.c=[],this.d=[]}get configurationModel(){return this.b||Ra.createEmptyModel(this.g)}get restrictedConfigurations(){return this.c}get errors(){return this.d}parse(e,t){if(!bt(e)){const i=this.h(e);this.parseRaw(i,t)}}reparse(e){this.a&&this.parseRaw(this.a,e)}parseRaw(e,t){this.a=e;const{contents:i,keys:r,overrides:s,restricted:n,hasExcludedProperties:o}=this.i(e,t);this.b=new Ra(i,r,s,o?[e]:void 0,this.g),this.c=n||[]}h(e){let t={},i=null,r=[];const s=[],n=[];function o(c){Array.isArray(r)?r.push(c):i!==null&&(r[i]=c)}const a={onObjectBegin:()=>{const c={};o(c),s.push(r),r=c,i=null},onObjectProperty:c=>{i=c},onObjectEnd:()=>{r=s.pop()},onArrayBegin:()=>{const c=[];o(c),s.push(r),r=c,i=null},onArrayEnd:()=>{r=s.pop()},onLiteralValue:o,onError:(c,l,u)=>{n.push({error:c,offset:l,length:u})}};if(e)try{qL(e,a),t=r[0]||{}}catch(c){this.g.error(`Error while parsing settings file ${this.f}: ${c}`),this.d=[c]}return t}i(e,t){const i=jt.as(An.Configuration).getConfigurationProperties(),r=this.j(e,i,!0,t);e=r.raw;const s=Wm(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`)),n=Object.keys(e),o=this.m(e,a=>this.g.error(`Conflict in settings file ${this.f}: ${a}`));return{contents:s,keys:n,overrides:o,restricted:r.restricted,hasExcludedProperties:r.hasExcludedProperties}}j(e,t,i,r){let s=!1;if(!r?.scopes&&!r?.skipRestricted&&!r?.exclude?.length)return{raw:e,restricted:[],hasExcludedProperties:s};const n={},o=[];for(const a in e)if(Ir.test(a)&&i){const c=this.j(e[a],t,!1,r);n[a]=c.raw,s=s||c.hasExcludedProperties,o.push(...c.restricted)}else{const c=t[a];c?.restricted&&o.push(a),this.l(a,c,r)?n[a]=e[a]:s=!0}return{raw:n,restricted:o,hasExcludedProperties:s}}l(e,t,i){if(i.exclude?.includes(e))return!1;if(i.include?.includes(e))return!0;if(i.skipRestricted&&t?.restricted||i.skipUnregistered&&!t)return!1;const r=t?typeof t.scope<"u"?t.scope:4:void 0;return r===void 0||i.scopes===void 0?!0:i.scopes.includes(r)}m(e,t){const i=[];for(const r of Object.keys(e))if(Ir.test(r)){const s={};for(const n in e[r])s[n]=e[r][n];i.push({identifiers:Rc(r),keys:Object.keys(s),contents:Wm(s,t)})}return i}},JL=class{constructor(e,t,i,r,s,n,o,a,c,l,u,h,f){this.a=e,this.b=t,this.c=i,this.overrideIdentifiers=r,this.d=s,this.f=n,this.g=o,this.h=a,this.i=c,this.j=l,this.k=u,this.l=h,this.m=f}get value(){return Bl(this.c)}n(e){return e?.value!==void 0||e?.override!==void 0||e?.overrides!==void 0?e:void 0}get q(){return this.p||(this.p=this.d.inspect(this.a,this.b.overrideIdentifier)),this.p}get defaultValue(){return this.q.merged}get default(){return this.n(this.q)}get s(){return this.r===void 0&&(this.r=this.f?this.f.inspect(this.a):null),this.r}get policyValue(){return this.s?.merged}get policy(){return this.s?.value!==void 0?{value:this.s.value}:void 0}get u(){return this.t===void 0&&(this.t=this.g?this.g.inspect(this.a):null),this.t}get applicationValue(){return this.u?.merged}get application(){return this.n(this.u)}get w(){return this.v||(this.v=this.h.inspect(this.a,this.b.overrideIdentifier)),this.v}get userValue(){return this.w.merged}get user(){return this.n(this.w)}get y(){return this.x||(this.x=this.i.inspect(this.a,this.b.overrideIdentifier)),this.x}get userLocalValue(){return this.y.merged}get userLocal(){return this.n(this.y)}get A(){return this.z||(this.z=this.j.inspect(this.a,this.b.overrideIdentifier)),this.z}get userRemoteValue(){return this.A.merged}get userRemote(){return this.n(this.A)}get D(){return this.B===void 0&&(this.B=this.k?this.k.inspect(this.a,this.b.overrideIdentifier):null),this.B}get workspaceValue(){return this.D?.merged}get workspace(){return this.n(this.D)}get F(){return this.E===void 0&&(this.E=this.l?this.l.inspect(this.a,this.b.overrideIdentifier):null),this.E}get workspaceFolderValue(){return this.F?.merged}get workspaceFolder(){return this.n(this.F)}get H(){return this.G===void 0&&(this.G=this.m.inspect(this.a,this.b.overrideIdentifier)),this.G}get memoryValue(){return this.H.merged}get memory(){return this.n(this.H)}},h0=class vC{constructor(t,i,r,s,n,o,a,c,l,u){this.j=t,this.l=i,this.m=r,this.n=s,this.p=n,this.q=o,this.r=a,this.s=c,this.t=l,this.u=u,this.h=null,this.i=new Ft,this.v=null}getValue(t,i,r){return this.w(t,i,r).getValue(t)}updateValue(t,i,r={}){let s;r.resource?(s=this.t.get(r.resource),s||(s=Ra.createEmptyModel(this.u),this.t.set(r.resource,s))):s=this.s,i===void 0?s.removeValue(t):s.setValue(t,i),r.resource||(this.h=null)}inspect(t,i,r){const s=this.w(t,i,r),n=this.A(i.resource,r),o=i.resource?this.t.get(i.resource)||this.s:this.s,a=new Set;for(const c of s.overrides)for(const l of c.identifiers)s.getOverrideValue(t,l)!==void 0&&a.add(l);return new JL(t,i,s.getValue(t),a.size?[...a]:void 0,this.j,this.l.isEmpty()?void 0:this.l,this.applicationConfiguration.isEmpty()?void 0:this.applicationConfiguration,this.userConfiguration,this.localUserConfiguration,this.remoteUserConfiguration,r?this.q:void 0,n||void 0,o)}keys(t){const i=this.A(void 0,t);return{default:this.j.keys.slice(0),user:this.userConfiguration.keys.slice(0),workspace:this.q.keys.slice(0),workspaceFolder:i?i.keys.slice(0):[]}}updateDefaultConfiguration(t){this.j=t,this.h=null,this.i.clear()}updatePolicyConfiguration(t){this.l=t}updateApplicationConfiguration(t){this.m=t,this.h=null,this.i.clear()}updateLocalUserConfiguration(t){this.n=t,this.v=null,this.h=null,this.i.clear()}updateRemoteUserConfiguration(t){this.p=t,this.v=null,this.h=null,this.i.clear()}updateWorkspaceConfiguration(t){this.q=t,this.h=null,this.i.clear()}updateFolderConfiguration(t,i){this.r.set(t,i),this.i.delete(t)}deleteFolderConfiguration(t){this.folderConfigurations.delete(t),this.i.delete(t)}compareAndUpdateDefaultConfiguration(t,i){const r=[];if(!i){const{added:s,updated:n,removed:o}=Js(this.j,t);i=[...s,...n,...o]}for(const s of i)for(const n of Rc(s)){const o=this.j.getKeysForOverrideIdentifier(n),a=t.getKeysForOverrideIdentifier(n),c=[...a.filter(l=>o.indexOf(l)===-1),...o.filter(l=>a.indexOf(l)===-1),...o.filter(l=>!oi(this.j.override(n).getValue(l),t.override(n).getValue(l)))];r.push([n,c])}return this.updateDefaultConfiguration(t),{keys:i,overrides:r}}compareAndUpdatePolicyConfiguration(t){const{added:i,updated:r,removed:s}=Js(this.l,t),n=[...i,...r,...s];return n.length&&this.updatePolicyConfiguration(t),{keys:n,overrides:[]}}compareAndUpdateApplicationConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Js(this.applicationConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateApplicationConfiguration(t),{keys:o,overrides:n}}compareAndUpdateLocalUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Js(this.localUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateLocalUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateRemoteUserConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Js(this.remoteUserConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateRemoteUserConfiguration(t),{keys:o,overrides:n}}compareAndUpdateWorkspaceConfiguration(t){const{added:i,updated:r,removed:s,overrides:n}=Js(this.workspaceConfiguration,t),o=[...i,...r,...s];return o.length&&this.updateWorkspaceConfiguration(t),{keys:o,overrides:n}}compareAndUpdateFolderConfiguration(t,i){const r=this.folderConfigurations.get(t),{added:s,updated:n,removed:o,overrides:a}=Js(r,i),c=[...s,...n,...o];return(c.length||!r)&&this.updateFolderConfiguration(t,i),{keys:c,overrides:a}}compareAndDeleteFolderConfiguration(t){const i=this.folderConfigurations.get(t);if(!i)throw new Error("Unknown folder");this.deleteFolderConfiguration(t);const{added:r,updated:s,removed:n,overrides:o}=Js(i,void 0);return{keys:[...r,...s,...n],overrides:o}}get defaults(){return this.j}get applicationConfiguration(){return this.m}get userConfiguration(){if(!this.v)if(this.p.isEmpty())this.v=this.n;else{const t=this.n.merge(this.p);this.v=new Ra(t.contents,t.keys,t.overrides,void 0,this.u)}return this.v}get localUserConfiguration(){return this.n}get remoteUserConfiguration(){return this.p}get workspaceConfiguration(){return this.q}get folderConfigurations(){return this.r}w(t,i,r){let s=this.x(i,r);if(i.overrideIdentifier&&(s=s.override(i.overrideIdentifier)),!this.l.isEmpty()&&this.l.getValue(t)!==void 0){s=s.merge();for(const n of this.l.keys)s.setValue(n,this.l.getValue(n))}return s}x({resource:t},i){let r=this.y();if(i&&t){const s=i.getFolder(t);s&&(r=this.z(s.uri)||r);const n=this.t.get(t);n&&(r=r.merge(n))}return r}y(){return this.h||(this.h=this.j.merge(this.applicationConfiguration,this.userConfiguration,this.q,this.s)),this.h}z(t){let i=this.i.get(t);if(!i){const r=this.y(),s=this.r.get(t);s?(i=r.merge(s),this.i.set(t,i)):i=r}return i}A(t,i){if(i&&t){const r=i.getFolder(t);if(r)return this.r.get(r.uri)}}toData(){return{defaults:{contents:this.j.contents,overrides:this.j.overrides,keys:this.j.keys},policy:{contents:this.l.contents,overrides:this.l.overrides,keys:this.l.keys},application:{contents:this.applicationConfiguration.contents,overrides:this.applicationConfiguration.overrides,keys:this.applicationConfiguration.keys,raw:Array.isArray(this.applicationConfiguration.raw)?void 0:this.applicationConfiguration.raw},userLocal:{contents:this.localUserConfiguration.contents,overrides:this.localUserConfiguration.overrides,keys:this.localUserConfiguration.keys,raw:Array.isArray(this.localUserConfiguration.raw)?void 0:this.localUserConfiguration.raw},userRemote:{contents:this.remoteUserConfiguration.contents,overrides:this.remoteUserConfiguration.overrides,keys:this.remoteUserConfiguration.keys,raw:Array.isArray(this.remoteUserConfiguration.raw)?void 0:this.remoteUserConfiguration.raw},workspace:{contents:this.q.contents,overrides:this.q.overrides,keys:this.q.keys},folders:[...this.r.keys()].reduce((t,i)=>{const{contents:r,overrides:s,keys:n}=this.r.get(i);return t.push([i,{contents:r,overrides:s,keys:n}]),t},[])}}allKeys(){const t=new Set;return this.j.keys.forEach(i=>t.add(i)),this.userConfiguration.keys.forEach(i=>t.add(i)),this.q.keys.forEach(i=>t.add(i)),this.r.forEach(i=>i.keys.forEach(r=>t.add(r))),[...t.values()]}B(){const t=new Set;return this.j.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.userConfiguration.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.q.getAllOverrideIdentifiers().forEach(i=>t.add(i)),this.r.forEach(i=>i.getAllOverrideIdentifiers().forEach(r=>t.add(r))),[...t.values()]}D(t){const i=new Set;return this.j.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.userConfiguration.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.q.getKeysForOverrideIdentifier(t).forEach(r=>i.add(r)),this.r.forEach(r=>r.getKeysForOverrideIdentifier(t).forEach(s=>i.add(s))),[...i.values()]}static parse(t,i){const r=this.E(t.defaults,i),s=this.E(t.policy,i),n=this.E(t.application,i),o=this.E(t.userLocal,i),a=this.E(t.userRemote,i),c=this.E(t.workspace,i),l=t.folders.reduce((u,h)=>(u.set(y.revive(h[0]),this.E(h[1],i)),u),new Ft);return new vC(r,s,n,o,a,c,l,Ra.createEmptyModel(i),new Ft,i)}static E(t,i){return new Ra(t.contents,t.keys,t.overrides,t.raw,i)}},ZL=class{constructor(e,t,i,r,s){this.change=e,this.f=t,this.g=i,this.h=r,this.i=s,this.a=`
`,this.b=this.a.charCodeAt(0),this.c=46,this.affectedKeys=new Set,this.j=void 0;for(const n of e.keys)this.affectedKeys.add(n);for(const[,n]of e.overrides)for(const o of n)this.affectedKeys.add(o);this.d=this.a;for(const n of this.affectedKeys)this.d+=n+this.a}get previousConfiguration(){return!this.j&&this.f&&(this.j=h0.parse(this.f.data,this.i)),this.j}affectsConfiguration(e,t){const i=this.a+e,r=this.d.indexOf(i);if(r<0)return!1;const s=r+i.length;if(s>=this.d.length)return!1;const n=this.d.charCodeAt(s);if(n!==this.b&&n!==this.c)return!1;if(t){const o=this.previousConfiguration?this.previousConfiguration.getValue(e,t,this.f?.workspace):void 0,a=this.g.getValue(e,t,this.h);return!oi(o,a)}return!0}};function Js(e,t){const{added:i,removed:r,updated:s}=qx(t?.rawConfiguration,e?.rawConfiguration),n=[],o=e?.getAllOverrideIdentifiers()||[],a=t?.getAllOverrideIdentifiers()||[];if(t){const c=a.filter(l=>!o.includes(l));for(const l of c)n.push([l,t.getKeysForOverrideIdentifier(l)])}if(e){const c=o.filter(l=>!a.includes(l));for(const l of c)n.push([l,e.getKeysForOverrideIdentifier(l)])}if(t&&e){for(const c of o)if(a.includes(c)){const l=qx({contents:e.getOverrideValue(void 0,c)||{},keys:e.getKeysForOverrideIdentifier(c)},{contents:t.getOverrideValue(void 0,c)||{},keys:t.getKeysForOverrideIdentifier(c)});n.push([c,[...l.added,...l.removed,...l.updated]])}}return{added:i,removed:r,updated:s,overrides:n}}function qx(e,t){const i=e?t?e.keys.filter(n=>t.keys.indexOf(n)===-1):[...e.keys]:[],r=t?e?t.keys.filter(n=>e.keys.indexOf(n)===-1):[...t.keys]:[],s=[];if(e&&t){for(const n of t.keys)if(e.keys.indexOf(n)!==-1){const o=Ah(t.contents,n),a=Ah(e.contents,n);oi(o,a)||s.push(n)}}return{added:i,removed:r,updated:s}}function qf(e,t){if(t){const i=t.split(".");let r=e;for(let s=0;r&&s<i.length;s++)r=r[i[s]];return r}}function YL(e){return e instanceof y}function QL(e){return e&&e.uri instanceof y&&e.languageId&&typeof e.languageId=="string"}function XL(e){return e&&!e.uri&&e.languageId&&typeof e.languageId=="string"}function KL(e){return e&&e.uri instanceof y&&(!e.name||typeof e.name=="string")&&(!e.index||typeof e.index=="number")}function Gx(e){if(YL(e))return{resource:e};if(QL(e))return{resource:e.uri,overrideIdentifier:e.languageId};if(XL(e))return{overrideIdentifier:e.languageId};if(KL(e))return{resource:e.uri};if(e===null)return{resource:null}}var d0=class{constructor(t,i,r){this.a=t.getProxy(J.MainThreadConfiguration),this.c=i,this.b=r,this.d=new Er,this.e=null}getConfigProvider(){return this.d.wait().then(t=>this.e)}$initializeConfiguration(t){this.e=new eN(this.a,this.c,t,this.b),this.d.open()}$acceptConfigurationChanged(t,i){this.getConfigProvider().then(r=>r.$acceptConfigurationChanged(t,i))}};d0=__decorate([__param(0,Fe),__param(1,ns),__param(2,We)],d0);var eN=class{constructor(e,t,i,r){this.a=new P,this.b=e,this.f=r,this.c=t,this.e=h0.parse(i,r),this.d=this.k(i.configurationScopes)}get onDidChangeConfiguration(){return this.a&&this.a.event}$acceptConfigurationChanged(e,t){const i={data:this.e.toData(),workspace:this.c.workspace};this.e=h0.parse(e,this.f),this.d=this.k(e.configurationScopes),this.a.fire(this.j(t,i))}getConfiguration(e,t,i){const r=Gx(t)||{},s=this.g(this.e.getValue(e,r,this.c.workspace));e&&this.h(e,r,i?.identifier);function n(a){if(a==null)return null;if(typeof a=="boolean")return a?2:5;switch(a){case na.Global:return 2;case na.Workspace:return 5;case na.WorkspaceFolder:return 6}}const o={has(a){return typeof qf(s,a)<"u"},get:(a,c)=>{this.h(e?`${e}.${a}`:a,r,i?.identifier);let l=qf(s,a);if(typeof l>"u")l=c;else{let u;const h=(f,p)=>{if(wt(f)){let m;const w=()=>{u=u||tt(s),m=m||qf(u,p)};return new Proxy(f,{get:(x,E)=>{if(typeof E=="string"&&E.toLowerCase()==="tojson")return w(),()=>m;if(u)return m=m||qf(u,p),m[E];const $=x[E];return typeof E=="string"?h($,`${p}.${E}`):$},set:(x,E,$)=>(w(),m&&(m[E]=$),!0),deleteProperty:(x,E)=>(w(),m&&delete m[E],!0),defineProperty:(x,E,$)=>(w(),m&&Object.defineProperty(m,E,$),!0)})}return Array.isArray(f)?tt(f):f};l=h(l,a)}return l},update:(a,c,l,u)=>{a=e?`${e}.${a}`:a;const h=n(l);return c!==void 0?this.b.$updateConfigurationOption(h,a,c,r,u):this.b.$removeConfigurationOption(h,a,r,u)},inspect:a=>{a=e?`${e}.${a}`:a;const c=this.e.inspect(a,r,this.c.workspace);if(c)return{key:a,defaultValue:tt(c.policy?.value??c.default?.value),globalLocalValue:tt(c.userLocal?.value),globalRemoteValue:tt(c.userRemote?.value),globalValue:tt(c.user?.value??c.application?.value),workspaceValue:tt(c.workspace?.value),workspaceFolderValue:tt(c.workspaceFolder?.value),defaultLanguageValue:tt(c.default?.override),globalLocalLanguageValue:tt(c.userLocal?.override),globalRemoteLanguageValue:tt(c.userRemote?.override),globalLanguageValue:tt(c.user?.override??c.application?.override),workspaceLanguageValue:tt(c.workspace?.override),workspaceFolderLanguageValue:tt(c.workspaceFolder?.override),languageIds:tt(c.overrideIdentifiers)}}};return typeof s=="object"&&xn(o,s,!1),Object.freeze(o)}g(e){const t=i=>wt(i)?new Proxy(i,{get:(r,s)=>t(r[s]),set:(r,s,n)=>{throw new Error(`TypeError: Cannot assign to read only property '${String(s)}' of object`)},deleteProperty:(r,s)=>{throw new Error(`TypeError: Cannot delete read only property '${String(s)}' of object`)},defineProperty:(r,s)=>{throw new Error(`TypeError: Cannot define property '${String(s)}' for a readonly object`)},setPrototypeOf:r=>{throw new Error("TypeError: Cannot set prototype for a readonly object")},isExtensible:()=>!1,preventExtensions:()=>!0}):i;return t(e)}h(e,t,i){const r=Ir.test(e)?5:this.d.get(e),s=i?`[${i.value}] `:"";if(r===5){typeof t?.resource>"u"&&this.f.warn(`${s}Accessing a resource scoped configuration without providing a resource is not expected. To get the effective value for '${e}', provide the URI of a resource or 'null' for any resource.`);return}if(r===4){t?.resource&&this.f.warn(`${s}Accessing a window scoped configuration for a resource is not expected. To associate '${e}' to a resource, define its scope to 'resource' in configuration contributions in 'package.json'.`);return}}j(e,t){const i=new ZL(e,t,this.e,this.c.workspace,this.f);return Object.freeze({affectsConfiguration:(r,s)=>i.affectsConfiguration(r,Gx(s))})}k(e){return e.reduce((t,i)=>(t.set(i[0],i[1]),t),new Map)}},os=B("IExtHostConfiguration"),tN=class{constructor(e,t){this.versionId=e,this.removedDueToLooping=t}},Hl=class wC extends ne{static isHostExtension(t,i,r){if(i.getExtensionDescription(t))return!1;const s=r.getExtensionDescription(t);return s?!!((s.main||s.browser)&&s.api==="none"):!1}constructor(t,i){super(),this.n=t,this.c=this.B(new P),this.onDidChange=this.c.event,this.f=0,this.g=i,this.r()}r(){this.g.sort(rN),this.h=new qr,this.j=[],this.m=new Map;for(const t of this.g){if(this.h.has(t.identifier)){console.error("Extension `"+t.identifier.value+"` is already registered");continue}this.h.set(t.identifier,t),this.j.push(t);const i=this.n.readActivationEvents(t);for(const r of i)this.m.has(r)||this.m.set(r,[]),this.m.get(r).push(t)}}set(t){return this.g=t,this.r(),this.f++,this.c.fire(void 0),{versionId:this.f}}deltaExtensions(t,i){this.g=Zx(this.g,i),this.g=this.g.concat(t);const r=wC.s(this.g);return this.g=Zx(this.g,r.map(s=>s.identifier)),this.r(),this.f++,this.c.fire(void 0),new tN(this.f,r)}static s(t){const i=new class{constructor(){this.c=new Map,this.d=new Set,this.e=[]}addNode(a){this.d.has(a)||(this.d.add(a),this.e.push(a))}addArc(a,c){this.addNode(a),this.addNode(c),this.c.has(a)?this.c.get(a).push(c):this.c.set(a,[c])}getArcs(a){return this.c.has(a)?this.c.get(a):[]}hasOnlyGoodArcs(a,c){const l=i.getArcs(a);for(let u=0;u<l.length;u++)if(!c.has(l[u]))return!1;return!0}getNodes(){return this.e}},r=new qr;for(const a of t)if(r.set(a.identifier,a),a.extensionDependencies)for(const c of a.extensionDependencies)i.addArc(je.toKey(a.identifier),je.toKey(c));const s=new Set;i.getNodes().filter(a=>i.getArcs(a).length===0).forEach(a=>s.add(a));const n=i.getNodes().filter(a=>!s.has(a));let o;do{o=!1;for(let a=0;a<n.length;a++){const c=n[a];i.hasOnlyGoodArcs(c,s)&&(n.splice(a,1),a--,s.add(c),o=!0)}}while(o);return n.map(a=>r.get(a))}containsActivationEvent(t){return this.m.has(t)}containsExtension(t){return this.h.has(t)}getExtensionDescriptionsForActivationEvent(t){const i=this.m.get(t);return i?i.slice(0):[]}getAllExtensionDescriptions(){return this.j.slice(0)}getSnapshot(){return new iN(this.f,this.getAllExtensionDescriptions())}getExtensionDescription(t){const i=this.h.get(t);return i||void 0}getExtensionDescriptionByUUID(t){for(const i of this.j)if(i.uuid===t)return i}getExtensionDescriptionByIdOrUUID(t,i){return this.getExtensionDescription(t)??(i?this.getExtensionDescriptionByUUID(i):void 0)}},iN=class{constructor(e,t){this.versionId=e,this.extensions=t}},Jx;(function(e){e[e.Builtin=0]="Builtin",e[e.User=1]="User",e[e.Dev=2]="Dev"})(Jx||(Jx={}));function rN(e,t){const i=e.isBuiltin?0:e.isUnderDevelopment?2:1,r=t.isBuiltin?0:t.isUnderDevelopment?2:1;if(i!==r)return i-r;const s=Me.basename(e.extensionLocation.path),n=Me.basename(t.extensionLocation.path);return s<n?-1:s>n?1:0}function Zx(e,t){const i=new vn(t);return e.filter(r=>!i.has(r.identifier))}var Gf=class bC{static{this.NONE=new bC(!1,-1,-1,-1)}constructor(t,i,r,s){this.startup=t,this.codeLoadingTime=i,this.activateCallTime=r,this.activateResolvedTime=s}},f0=class{constructor(e){this.a=e,this.b=-1,this.c=-1,this.d=-1,this.f=-1,this.g=-1,this.h=-1}j(e,t){return e===-1||t===-1?-1:t-e}build(){return new Gf(this.a,this.j(this.b,this.c),this.j(this.d,this.f),this.j(this.g,this.h))}codeLoadingStart(){this.b=Date.now()}codeLoadingStop(){this.c=Date.now()}activateCallStart(){this.d=Date.now()}activateCallStop(){this.f=Date.now()}activateResolveStart(){this.g=Date.now()}activateResolveStop(){this.h=Date.now()}},Jf=class{constructor(e,t,i,r,s,n){this.activationFailed=e,this.activationFailedError=t,this.activationTimes=i,this.module=r,this.exports=s,this.disposable=n}},sN=class extends Jf{constructor(e){super(!1,null,e,{activate:void 0,deactivate:void 0},void 0,ne.None)}},nN=class extends Jf{constructor(){super(!1,null,Gf.NONE,{activate:void 0,deactivate:void 0},void 0,ne.None)}},Zf=class extends Jf{constructor(e){super(!0,e,Gf.NONE,{activate:void 0,deactivate:void 0},void 0,ne.None)}},p0=class{constructor(t,i,r,s){this.g=s,this.a=t,this.b=i,this.c=r,this.d=new qr,this.f=Object.create(null)}dispose(){for(const[t,i]of this.d)i.dispose()}async waitForActivatingExtensions(){const t=[];for(const[i,r]of this.d)t.push(r.wait());await Promise.all(t)}isActivated(t){const i=this.d.get(t);return!!(i&&i.value)}getActivatedExtension(t){const i=this.d.get(t);if(!i||!i.value)throw new Error(`Extension '${t.value}' is not known or not activated`);return i.value}async activateByEvent(t,i){if(this.f[t])return;const r=this.a.getExtensionDescriptionsForActivationEvent(t);await this.h(r.map(s=>({id:s.identifier,reason:{startup:i,extensionId:s.identifier,activationEvent:t}}))),this.f[t]=!0}activateById(t,i){const r=this.a.getExtensionDescription(t);if(!r)throw new Error(`Extension '${t.value}' is not known`);return this.h([{id:r.identifier,reason:i}])}async h(t){const i=t.filter(r=>!this.isActivated(r.id)).map(r=>this.j(r));await Promise.all(i.map(r=>r.wait()))}j(t){if(this.d.has(t.id))return this.d.get(t.id);if(this.l(t.id))return this.k(t,null,[],null);const i=this.a.getExtensionDescription(t.id);if(!i){const n=new Error(`Cannot activate unknown extension '${t.id.value}'`),o=this.k(t,null,[],new Zf(n));return this.c.onExtensionActivationError(t.id,n,new h8(t.id.value)),o}const r=[],s=typeof i.extensionDependencies>"u"?[]:i.extensionDependencies;for(const n of s){if(this.m(n))continue;const o=this.d.get(n);if(o){r.push(o);continue}if(this.l(n)){r.push(this.j({id:this.b.getExtensionDescription(n).identifier,reason:t.reason}));continue}const a=this.a.getExtensionDescription(n);if(a){if(!a.main&&!a.browser)continue;r.push(this.j({id:a.identifier,reason:t.reason}));continue}const c=i.displayName||i.identifier.value,l=new Error(`Cannot activate the '${c}' extension because it depends on unknown extension '${n}'`),u=this.k(t,i.displayName,[],new Zf(l));return this.c.onExtensionActivationError(i.identifier,l,new h8(n)),u}return this.k(t,i.displayName,r,null)}k(t,i,r,s){const n=new g0(t.id,i,t.reason,r,s,this.c,this.g);return this.d.set(t.id,n),n}l(t){return Hl.isHostExtension(t,this.a,this.b)}m(t){const i=this.b.getExtensionDescription(t);return i?!i.main&&!i.browser:!1}};p0=__decorate([__param(3,We)],p0);var g0=class{get value(){return this.h}get friendlyName(){return this.d||this.c.value}constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.j=o,this.k=a,this.a=new Er,this.b=!1,this.l()}dispose(){this.b=!0}wait(){return this.a.wait()}async l(){await this.m(),this.a.open()}async m(){if(!this.h){for(;this.g.length>0;){for(let t=0;t<this.g.length;t++){const i=this.g[t];if(i.value&&!i.value.activationFailed){this.g.splice(t,1),t--;continue}if(i.value&&i.value.activationFailed){const r=new Error(`Cannot activate the '${this.friendlyName}' extension because its dependency '${i.friendlyName}' failed to activate`);r.detail=i.value.activationFailedError,this.h=new Zf(r),this.j.onExtensionActivationError(this.c,r,null);return}}this.g.length>0&&await Promise.race(this.g.map(t=>t.wait()))}await this.n()}}async n(){try{this.h=await this.j.actualActivateExtension(this.c,this.f)}catch(t){const i=new Error;if(t&&t.name&&(i.name=t.name),t&&t.message?i.message=`Activating extension '${this.c.value}' failed: ${t.message}.`:i.message=`Activating extension '${this.c.value}' failed: ${t}.`,t&&t.stack&&(i.stack=t.stack),this.h=new Zf(i),this.b&&yr(t))return;this.j.onExtensionActivationError(this.c,i,null),this.k.error(`Activating extension ${this.c.value} failed due to an error:`),this.k.error(t)}}};g0=__decorate([__param(6,We)],g0);var Yx=class{constructor(e,t){this.c=t,this.b=new P,this.onDidChangeStorage=this.b.event,this.a=e.getProxy(J.MainThreadStorage)}registerExtensionStorageKeysToSync(e,t){this.a.$registerExtensionStorageKeysToSync(e,t)}async initializeExtensionStorage(e,t,i){const r=await this.a.$initializeExtensionStorage(e,t);let s;return r&&(s=this.d(e,t,r)),s||i}setValue(e,t,i){return this.a.$setValue(e,t,i)}$acceptValue(e,t,i){const r=this.d(e,t,i);r&&this.b.fire({shared:e,key:t,value:r})}d(e,t,i){try{return JSON.parse(i)}catch(r){this.c.error(`[extHostStorage] unexpected error parsing storage contents (extensionId: ${t}, global: ${e}): ${r}`)}}},m0=B("IExtHostStorage"),Qx=class{constructor(e,t,i){this.h=new Map,this.a=e,this.b=t,this.c=i,this.d=this.c.initializeExtensionStorage(this.b,this.a,Object.create(null)).then(r=>(this.f=r,this)),this.g=this.c.onDidChangeStorage(r=>{r.shared===this.b&&r.key===this.a&&(this.f=r.value)}),this.i=new mn(()=>{const r=this.h;this.h=new Map,(async()=>{try{await this.c.setValue(this.b,this.a,this.f);for(const s of r.values())s.complete()}catch(s){for(const n of r.values())n.error(s)}})()},0)}keys(){return Object.entries(this.f??{}).filter(([,e])=>e!==void 0).map(([e])=>e)}get whenReady(){return this.d}get(e,t){let i=this.f[e];return typeof i>"u"&&(i=t),i}update(e,t){t!==null&&typeof t=="object"?this.f[e]=JSON.parse(JSON.stringify(t)):this.f[e]=t;const i=this.h.get(e);if(i!==void 0)return i.p;const r=new Is;return this.h.set(e,r),this.i.isScheduled()||this.i.schedule(),r.p}dispose(){this.g.dispose()}},oN=class extends Qx{setKeysForSync(e){this.c.registerExtensionStorageKeysToSync({id:this.a,version:this.j.version},e)}constructor(e,t){super(e.identifier.value,!0,t),this.j=e}},Mr,v0=Mr=class{constructor(t,i){this.b=new Map,this.c=new qD,this.a=t.getProxy(J.MainThreadFileSystem);const r=this;this.value=Object.freeze({async stat(s){try{let n;const o=r.b.get(s.scheme);return o?(await r.a.$ensureActivation(s.scheme),n=await o.impl.stat(s)):n=await r.a.$stat(s),{type:n.type,ctime:n.ctime,mtime:n.mtime,size:n.size,permissions:n.permissions===Oo.Readonly?1:void 0}}catch(n){Mr.e(n)}},async readDirectory(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readDirectory(s)).slice()):await r.a.$readdir(s)}catch(n){return Mr.e(n)}},async createDirectory(s){try{const n=r.b.get(s.scheme);return n&&!n.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(n.impl,n.extUri,s)):await r.a.$mkdir(s)}catch(n){return Mr.e(n)}},async readFile(s){try{const n=r.b.get(s.scheme);return n?(await r.a.$ensureActivation(s.scheme),(await n.impl.readFile(s)).slice()):(await r.a.$readFile(s)).buffer}catch(n){return Mr.e(n)}},async writeFile(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly?(await r.a.$ensureActivation(s.scheme),await r.d(o.impl,o.extUri,o.extUri.dirname(s)),await r.c.queueFor(s,()=>Promise.resolve(o.impl.writeFile(s,n,{create:!0,overwrite:!0})))):await r.a.$writeFile(s,ae.wrap(n))}catch(o){return Mr.e(o)}},async delete(s,n){try{const o=r.b.get(s.scheme);return o&&!o.isReadonly&&!n?.useTrash?(await r.a.$ensureActivation(s.scheme),await o.impl.delete(s,{recursive:!1,...n})):await r.a.$delete(s,{recursive:!1,useTrash:!1,atomic:!1,...n})}catch(o){return Mr.e(o)}},async rename(s,n,o){try{return await r.a.$rename(s,n,{overwrite:!1,...o})}catch(a){return Mr.e(a)}},async copy(s,n,o){try{return await r.a.$copy(s,n,{overwrite:!1,...o})}catch(a){return Mr.e(a)}},isWritableFileSystem(s){const n=i.getCapabilities(s);if(typeof n=="number")return!(n&2048)}})}async d(t,i,r){const s=[];for(;!i.isEqual(r,i.dirname(r));)try{if(((await t.stat(r)).type&Cn.Directory)===0)throw Dt.FileExists(`Unable to create folder '${r.scheme===V.file?r.fsPath:r.toString(!0)}' that already exists but is not a directory`);break}catch(n){if(bh(n)!==Se.FileNotFound)throw n;s.push(i.basename(r)),r=i.dirname(r)}for(let n=s.length-1;n>=0;n--){r=i.joinPath(r,s[n]);try{await t.createDirectory(r)}catch(o){if(bh(o)!==Se.FileExists)throw o}}}static e(t){if(t instanceof Dt)throw t;if(t instanceof N6)switch(t.code){case Se.FileExists:throw Dt.FileExists(t.message);case Se.FileNotFound:throw Dt.FileNotFound(t.message);case Se.FileNotADirectory:throw Dt.FileNotADirectory(t.message);case Se.FileIsADirectory:throw Dt.FileIsADirectory(t.message);case Se.NoPermissions:throw Dt.NoPermissions(t.message);case Se.Unavailable:throw Dt.Unavailable(t.message);default:throw new Dt(t.message,t.name)}if(!(t instanceof Error))throw new Dt(String(t));if(t.name==="ENOPRO"||t.message.includes("ENOPRO"))throw Dt.Unavailable(t.message);switch(t.name){case Se.FileExists:throw Dt.FileExists(t.message);case Se.FileNotFound:throw Dt.FileNotFound(t.message);case Se.FileNotADirectory:throw Dt.FileNotADirectory(t.message);case Se.FileIsADirectory:throw Dt.FileIsADirectory(t.message);case Se.NoPermissions:throw Dt.NoPermissions(t.message);case Se.Unavailable:throw Dt.Unavailable(t.message);default:throw new Dt(t.message,t.name)}}addFileSystemProvider(t,i,r){return this.b.set(t,{impl:i,extUri:r?.isCaseSensitive?He:AD,isReadonly:!!r?.isReadonly}),oe(()=>this.b.delete(t))}getFileSystemProviderExtUri(t){return this.b.get(t)?.extUri??He}};v0=Mr=__decorate([__param(0,Fe),__param(1,Ro)],v0);var Yf=B("IExtHostConsumerFileSystem"),w0=B("IExtensionStoragePaths"),b0=class{constructor(t,i,r){this.d=i,this.f=r,this.a=t.workspace??void 0,this.b=t.environment,this.whenReady=this.h().then(s=>this.c=s)}async g(t){return y.joinPath(this.b.workspaceStorageHome,t)}async h(){if(!this.a)return Promise.resolve(void 0);const t=this.a.id,i=await this.g(t);try{return await this.f.value.stat(i),this.d.trace("[ExtHostStorage] storage dir already exists",i),i}catch{}try{return this.d.trace("[ExtHostStorage] creating dir and metadata-file",i),await this.f.value.createDirectory(i),await this.f.value.writeFile(y.joinPath(i,"meta.json"),new TextEncoder().encode(JSON.stringify({id:this.a.id,configuration:y.revive(this.a.configuration)?.toString(),name:this.a.name},void 0,2))),i}catch(r){this.d.error("[ExtHostStorage]",r);return}}workspaceValue(t){if(this.c)return y.joinPath(this.c,t.identifier.value)}globalValue(t){return y.joinPath(this.b.globalStorageHome,t.identifier.value.toLowerCase())}onWillDeactivateAll(){}};b0=__decorate([__param(0,It),__param(1,We),__param(2,Yf)],b0);var mV=B("tunnelService"),vV=B("sharedTunnelsService"),Xx;(function(e){e.Http="http",e.Https="https"})(Xx||(Xx={}));var io;(function(e){e.ConstantPrivate="constantPrivate",e.Private="private",e.Public="public"})(io||(io={}));var Kx;(function(e){e[e.Notify=1]="Notify",e[e.OpenBrowser=2]="OpenBrowser",e[e.OpenPreview=3]="OpenPreview",e[e.Silent=4]="Silent",e[e.Ignore=5]="Ignore",e[e.OpenBrowserOnce=6]="OpenBrowserOnce"})(Kx||(Kx={}));function aN(e){if(e.scheme!=="http"&&e.scheme!=="https")return;const t=/^(localhost|127\.0\.0\.1|0\.0\.0\.0):(\d+)$/.exec(e.authority);if(t)return{address:t[1],port:+t[2]}}var y0=["localhost","127.0.0.1","0:0:0:0:0:0:0:1","::1"];function eE(e){return y0.indexOf(e)>=0}var x0=["0.0.0.0","0:0:0:0:0:0:0:0","::"];function tE(e){return x0.indexOf(e)>=0}var cN=class{constructor(e,t,i){this.remoteAddress=e,this.localAddress=t,this.b=i,this.a=new P,this.onDidDispose=this.a.event}dispose(){return this.a.fire(),this.b()}},iE=class extends ne{constructor(t,i){super(),this.r=t,this.s=i,this.a=new P,this.onTunnelOpened=this.a.event,this.b=new P,this.onTunnelClosed=this.b.event,this.c=new P,this.onAddedTunnelProvider=this.c.event,this.f=new Map,this.h=!1,this.j=!0,this.m=[],this.n=new Set}get hasTunnelProvider(){return!!this.g}get t(){const t=this.s.getValue("remote.localPortHost");return!t||t==="localhost"?"127.0.0.1":"0.0.0.0"}setTunnelProvider(t){return this.g=t,t?(this.c.fire(),{dispose:()=>{this.g=void 0,this.h=!1,this.m=[]}}):(this.h=!1,this.m=[],this.c.fire(),{dispose:()=>{}})}setTunnelFeatures(t){this.h=t.elevation,this.m=t.privacyOptions,this.j=t.protocol}get canChangeProtocol(){return this.j}get canElevate(){return this.h}get canChangePrivacy(){return this.m.length>0}get privacyOptions(){return this.m}get tunnels(){return this.u()}async u(){const t=[],i=Array.from(this.f.values());for(const r of i){const s=Array.from(r.values());for(const n of s){const o=await n.value;o&&typeof o!="string"&&t.push(o)}}return t}async dispose(){super.dispose();for(const t of this.f.values()){for(const{value:i}of t.values())await i.then(r=>typeof r!="string"?r?.dispose():void 0);t.clear()}this.f.clear()}setEnvironmentTunnel(t,i,r,s,n){this.z(t,i,Promise.resolve({tunnelRemoteHost:t,tunnelRemotePort:i,localAddress:r,privacy:s,protocol:n,dispose:()=>Promise.resolve()}))}async getExistingTunnel(t,i){(tE(t)||eE(t))&&(t=y0[0]);const r=this.D(t,i);if(r)return++r.refcount,r.value}openTunnel(t,i,r,s,n,o=!1,a,c){this.r.trace(`ForwardedPorts: (TunnelService) openTunnel request for ${i}:${r} on local port ${n}.`);const l=this.g??t;if(!l)return;if(i||(i="localhost"),s||(s=this.t),this.g&&this.n.has(r)){this.r.debug("ForwardedPorts: (TunnelService) Another call to create a tunnel with the same address has occurred before the last one completed. This call will be ignored.");return}const u=this.F(l,i,r,s,n,o,a,c);return u?u.then(h=>{if(h){if(typeof h=="string")return this.r.trace("ForwardedPorts: (TunnelService) The tunnel provider returned an error when creating the tunnel."),this.C(i,r),h}else{this.r.trace("ForwardedPorts: (TunnelService) New tunnel is undefined."),this.C(i,r);return}this.r.trace("ForwardedPorts: (TunnelService) New tunnel established.");const f=this.w(h);return(h.tunnelRemoteHost!==i||h.tunnelRemotePort!==r)&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Host or port mismatch."),a&&h.privacy!==a&&this.r.warn("ForwardedPorts: (TunnelService) Created tunnel does not match requirements of requested tunnel. Privacy mismatch."),this.a.fire(f),f}):(this.r.trace("ForwardedPorts: (TunnelService) Tunnel was not created."),u)}w(t){return{tunnelRemotePort:t.tunnelRemotePort,tunnelRemoteHost:t.tunnelRemoteHost,tunnelLocalPort:t.tunnelLocalPort,localAddress:t.localAddress,privacy:t.privacy,protocol:t.protocol,dispose:async()=>{this.r.trace(`ForwardedPorts: (TunnelService) dispose request for ${t.tunnelRemoteHost}:${t.tunnelRemotePort} `);const i=this.f.get(t.tunnelRemoteHost);if(i){const r=i.get(t.tunnelRemotePort);r&&(r.refcount--,await this.y(t.tunnelRemoteHost,t.tunnelRemotePort,r))}}}}async y(t,i,r){if(r.refcount<=0){this.r.trace(`ForwardedPorts: (TunnelService) Tunnel is being disposed ${t}:${i}.`);const s=r.value.then(async n=>{n&&typeof n!="string"&&(await n.dispose(!0),this.b.fire({host:n.tunnelRemoteHost,port:n.tunnelRemotePort}))});return this.f.has(t)&&this.f.get(t).delete(i),s}}async closeTunnel(t,i){this.r.trace(`ForwardedPorts: (TunnelService) close request for ${t}:${i} `);const r=this.f.get(t);if(r&&r.has(i)){const s=r.get(i);s.refcount=0,await this.y(t,i,s)}}z(t,i,r){this.f.has(t)||this.f.set(t,new Map),this.f.get(t).set(i,{refcount:1,value:r})}async C(t,i){const r=this.f.get(t);if(r){const s=r.get(i),n=s?await s.value:void 0;(!n||typeof n=="string")&&r.delete(i),r.size===0&&this.f.delete(t)}}D(t,i){const r=[t];eE(t)?(r.push(...y0),r.push(...x0)):tE(t)&&r.push(...x0);const s=r.map(n=>this.f.get(n));for(const n of s){const o=n?.get(i);if(o)return o}}canTunnel(t){return!!aN(t)}G(t,i,r,s,n,o,a){this.r.trace(`ForwardedPorts: (TunnelService) Creating tunnel with provider ${i}:${r} on local port ${s}.`);const c=r;this.n.add(c);const l=s===void 0?r:s,u={elevationRequired:n?this.isPortPrivileged(l):!1},h={remoteAddress:{host:i,port:r},localAddressPort:s,privacy:o,public:o?o!==io.Private:void 0,protocol:a},f=t.forwardPort(h,u);return f?(this.z(i,r,f),f.finally(()=>{this.r.trace("ForwardedPorts: (TunnelService) Tunnel created by provider."),this.n.delete(c)})):this.n.delete(c),f}};iE=__decorate([__param(0,We),__param(1,Ph)],iE);var lN=class extends cN{},E0;(function(e){function t(r){return{remoteAddress:r.remoteAddress,localAddress:r.localAddress,public:!!r.public,privacy:r.privacy??(r.public?io.Public:io.Private),protocol:r.protocol}}e.fromApiTunnel=t;function i(r){return{remoteAddress:{host:r.tunnelRemoteHost,port:r.tunnelRemotePort},localAddress:r.localAddress,public:r.privacy!==io.ConstantPrivate&&r.privacy!==io.ConstantPrivate,privacy:r.privacy,protocol:r.protocol}}e.fromServiceTunnel=i})(E0||(E0={}));var S0=B("IExtHostTunnelService"),k0=class extends ne{constructor(t,i,r){super(),this.s=r,this.f=()=>Promise.resolve(!0),this.g=new Map,this.h=new P,this.onDidChangeTunnels=this.h.event,this.n=0,this.r=new Map,this.a=t.getProxy(J.MainThreadTunnelService)}async openTunnel(t,i){this.s.trace(`ForwardedPorts: (ExtHostTunnelService) ${t.identifier.value} called openTunnel API for ${i.remoteAddress.host}:${i.remoteAddress.port}.`);const r=await this.a.$openTunnel(i,t.displayName);if(r){const s=new lN(r.remoteAddress,r.localAddress,()=>this.a.$closeTunnel(r.remoteAddress));return this.B(s),s}}async getTunnels(){return this.a.$getTunnels()}u(){return this.n++}registerPortsAttributesProvider(t,i){t.portRange===void 0&&t.commandPattern===void 0&&this.s.error("PortAttributesProvider must specify either a portRange or a commandPattern");const r=this.u();return this.r.set(r,{selector:t,provider:i}),this.a.$registerPortsAttributesProvider(t,r),new Pe(()=>{this.r.delete(r),this.a.$unregisterPortsAttributesProvider(r)})}async $providePortAttributes(t,i,r,s,n){const o=[];for(const c of t){const l=this.r.get(c);if(!l)return[];o.push(...await Promise.all(i.map(async u=>{let h;try{h=await l.provider.providePortAttributes({port:u,pid:r,commandLine:s},n)}catch{h=await l.provider.providePortAttributes(u,r,s,n)}return{providedAttributes:h,port:u}})))}const a=o.filter(c=>!!c.providedAttributes);return a.length>0?a.map(c=>({autoForwardAction:c.providedAttributes.autoForwardAction,port:c.port})):[]}async $registerCandidateFinder(t){}registerTunnelProvider(t,i){if(this.b)throw new Error("A tunnel provider has already been registered. Only the first tunnel provider to be registered will be used.");this.b=async(s,n)=>await t.provideTunnel(s,n,et.None)??void 0;const r=i.tunnelFeatures?{elevation:!!i.tunnelFeatures?.elevation,privacyOptions:i.tunnelFeatures?.privacyOptions,protocol:i.tunnelFeatures.protocol===void 0?!0:i.tunnelFeatures.protocol}:void 0;return this.a.$setTunnelProvider(r,!0),Promise.resolve(oe(()=>{this.b=void 0,this.a.$setTunnelProvider(void 0,!1)}))}async setTunnelFactory(t,i){if(t){t.candidatePortSource!==void 0&&this.a.$setCandidatePortSource(t.candidatePortSource),t.showCandidatePort&&(this.f=t.showCandidatePort,this.a.$setCandidateFilter());const r=t.tunnelFactory??(i?this.w(i):void 0);if(r){this.b=r;let s=t.tunnelFeatures?.privacyOptions??[];t.tunnelFeatures?.public&&s.length===0&&(s=[{id:"private",label:d(2911,null),themeIcon:"lock"},{id:"public",label:d(2912,null),themeIcon:"eye"}]);const n=t.tunnelFeatures?{elevation:!!t.tunnelFeatures?.elevation,public:!!t.tunnelFeatures?.public,privacyOptions:s,protocol:!0}:void 0;this.a.$setTunnelProvider(n,!!t.tunnelFactory)}}else this.b=void 0;return oe(()=>{this.b=void 0})}w(t){}async $closeTunnel(t,i){if(this.g.has(t.host)){const r=this.g.get(t.host);r.has(t.port)&&(i&&r.get(t.port).disposeListener.dispose(),await r.get(t.port).tunnel.dispose(),r.delete(t.port))}}async $onDidTunnelsChange(){this.h.fire()}async $forwardPort(t,i){if(this.b)try{this.s.trace("ForwardedPorts: (ExtHostTunnelService) Getting tunnel from provider.");const r=this.b(t,i);if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Got tunnel promise from provider."),r!==void 0){const s=await r;if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Successfully awaited tunnel from provider."),s===void 0){this.s.error("ForwardedPorts: (ExtHostTunnelService) Resolved tunnel is undefined");return}this.g.has(t.remoteAddress.host)||this.g.set(t.remoteAddress.host,new Map);const n=this.B(s.onDidDispose(()=>(this.s.trace("ForwardedPorts: (ExtHostTunnelService) Extension fired tunnel's onDidDispose."),this.a.$closeTunnel(s.remoteAddress))));return this.g.get(t.remoteAddress.host).set(t.remoteAddress.port,{tunnel:s,disposeListener:n}),E0.fromApiTunnel(s)}else this.s.trace("ForwardedPorts: (ExtHostTunnelService) Tunnel is undefined")}catch(r){if(this.s.trace("ForwardedPorts: (ExtHostTunnelService) tunnel provider error"),r instanceof Error)return r.message}}async $applyCandidateFilter(t){const i=await Promise.all(t.map(s=>this.f(s.host,s.port,s.detail??""))),r=t.filter((s,n)=>i[n]);return this.s.trace(`ForwardedPorts: (ExtHostTunnelService) filtered from ${t.map(s=>s.port).join(", ")} to ${r.map(s=>s.port).join(", ")}`),r}};k0=__decorate([__param(0,Fe),__param(1,It),__param(2,We)],k0);function uN(e){return[...e.entries()]}function hN(e){return e?[...e.entries()]:[]}var dN=class{constructor(e){this.b=e,this.a=new Map}dispose(){for(const e of this.a.values())e.dispose()}startBuffering(e,t,i=5){const r=t(s=>{const n=typeof s=="string"?s:s.data;let o=this.a.get(e);if(o){o.data.push(n);return}const a=setTimeout(()=>this.flushBuffer(e),i);o={data:[n],timeoutId:a,dispose:()=>{clearTimeout(a),this.flushBuffer(e),r.dispose()}},this.a.set(e,o)});return r}stopBuffering(e){this.a.get(e)?.dispose()}flushBuffer(e){const t=this.a.get(e);t&&(this.a.delete(e),this.b(e,t.data.join("")))}},ro=(e,t,i,r)=>{let s=t;return{enumerable:!0,configurable:!1,get(){return s},set(n){if(!i(s,n)){const o=s;s=n,e.listener?.(r(n,o))}}}},La=(e,t)=>e===t,Zs={range:(e,t)=>e===t?!0:!e||!t?!1:e.isEqual(t),label:La,description:La,sortText:La,busy:La,error:La,canResolveChildren:La,tags:(e,t)=>!(e.length!==t.length||e.some(i=>!t.find(r=>i.id===r.id)))},Na=e=>t=>({op:4,update:e(t)}),fN=(e,t)=>({range:(()=>{let i;const r=Na(s=>({range:Oe.lift(F.from(s))}));return{enumerable:!0,configurable:!1,get(){return i},set(s){e.listener?.({op:6}),Zs.range(i,s)||(i=s,e.listener?.(r(s)))}}})(),label:ro(e,t,Zs.label,Na(i=>({label:i}))),description:ro(e,void 0,Zs.description,Na(i=>({description:i}))),sortText:ro(e,void 0,Zs.sortText,Na(i=>({sortText:i}))),canResolveChildren:ro(e,!1,Zs.canResolveChildren,i=>({op:2,state:i})),busy:ro(e,!1,Zs.busy,Na(i=>({busy:i}))),error:ro(e,void 0,Zs.error,Na(i=>({error:we.fromStrict(i)||null}))),tags:ro(e,[],Zs.tags,(i,r)=>({op:1,new:i.map(dr.from),old:r.map(dr.from)}))}),pN=e=>{const t=Le.fromString(e.extId),i=new zl(t.controllerId,t.localId,e.label,y.revive(e.uri)||void 0);return i.range=F.to(e.range||void 0),i.description=e.description||void 0,i.sortText=e.sortText||void 0,i.tags=e.tags.map(r=>dr.to({id:j9(r).tagId})),i},rE=e=>{let t;for(const i of e.tests){const r=pN(i.item);rd(r).parent=t,t=r}return t},zl=class yC{constructor(t,i,r,s){if(i.includes("\0"))throw new Error(`Test IDs may not include the ${JSON.stringify(i)} symbol`);const n=CR(this,t);Object.defineProperties(this,{id:{value:i,enumerable:!0,writable:!1},uri:{value:s,enumerable:!0,writable:!1},parent:{enumerable:!1,get(){return n.parent instanceof $0?void 0:n.parent}},children:{value:$R(n,rd,yC),enumerable:!0,writable:!1},...fN(n,r)})}},$0=class extends zl{constructor(e,t){super(e,e,t,void 0),this._isRoot=!0}},gN=class extends ER{constructor(e,t,i){super({controllerId:e,getDocumentVersion:r=>r&&i.getDocument(r)?.version,getApiFor:rd,getChildren:r=>r.children,root:new $0(e,t),toITestItem:qs.from})}},C0=class extends ne{constructor(t,i,r){super(),this.n=i,this.a=this.B(new P),this.onDidChangeTelemetryEnabled=this.a.event,this.b=this.B(new P),this.onDidChangeTelemetryConfiguration=this.b.event,this.c={usage:!0,error:!0},this.f=0,this.h=!1,this.m=new Map,this.h=this.n.environment.isExtensionTelemetryLoggingOnly;const s=i.remote.isRemote?"remoteExtHostTelemetry":t?"workerExtHostTelemetry":"extHostTelemetry";this.j=this.B(r.createLogger(s,{name:d(2908,null,this.h?" (Not Sent)":""),hidden:!0,group:uR}))}getTelemetryConfiguration(){return this.f===3}getTelemetryDetails(){return{isCrashEnabled:this.f>=1,isErrorsEnabled:this.c.error?this.f>=2:!1,isUsageEnabled:this.c.usage?this.f>=3:!1}}instantiateLogger(t,i,r){const s=this.getTelemetryDetails(),n=new sE(i,r,t,this.j,this.h,this.getBuiltInCommonProperties(t),{isUsageEnabled:s.isUsageEnabled,isErrorsEnabled:s.isErrorsEnabled}),o=this.m.get(t.identifier.value)??[];return this.m.set(t.identifier.value,[...o,n]),n.apiTelemetryLogger}$initializeTelemetryLevel(t,i,r){this.f=t,this.c=r??{usage:!0,error:!0}}getBuiltInCommonProperties(t){const i=Object.create(null);switch(i["common.extname"]=`${t.publisher}.${t.name}`,i["common.extversion"]=t.version,i["common.vscodemachineid"]=this.n.telemetryInfo.machineId,i["common.vscodesessionid"]=this.n.telemetryInfo.sessionId,i["common.vscodecommithash"]=this.n.commit,i["common.sqmid"]=this.n.telemetryInfo.sqmId,i["common.devDeviceId"]=this.n.telemetryInfo.devDeviceId,i["common.vscodeversion"]=this.n.version,i["common.isnewappinstall"]=nE(this.n.telemetryInfo.firstSessionDate),i["common.product"]=this.n.environment.appHost,this.n.uiKind){case ic.Web:i["common.uikind"]="web";break;case ic.Desktop:i["common.uikind"]="desktop";break;default:i["common.uikind"]="unknown"}return i["common.remotename"]=Wg(dR(this.n.remote.authority)),i}$onDidChangeTelemetryLevel(t){this.g=this.getTelemetryConfiguration(),this.f=t;const i=this.getTelemetryDetails();this.m.forEach((r,s)=>{const n=r.filter(o=>!o.isDisposed);n.length===0?this.m.delete(s):this.m.set(s,n)}),this.m.forEach(r=>{for(const s of r)s.updateTelemetryEnablements(i.isUsageEnabled,i.isErrorsEnabled)}),this.g!==this.getTelemetryConfiguration()&&this.a.fire(this.getTelemetryConfiguration()),this.b.fire(this.getTelemetryDetails())}onExtensionError(t,i){const s=this.m.get(t.value)?.filter(o=>!o.isDisposed);if(!s)return this.m.delete(t.value),!1;let n=!1;for(const o of s)o.ignoreUnhandledExtHostErrors||(o.logError(i),n=!0);return n}};C0=__decorate([__param(1,It),__param(2,bn)],C0);var sE=class{static validateSender(e){if(typeof e!="object")throw new TypeError("TelemetrySender argument is invalid");if(typeof e.sendEventData!="function")throw new TypeError("TelemetrySender.sendEventData must be a function");if(typeof e.sendErrorData!="function")throw new TypeError("TelemetrySender.sendErrorData must be a function");if(typeof e.flush<"u"&&typeof e.flush!="function")throw new TypeError("TelemetrySender.flush must be a function or undefined")}constructor(e,t,i,r,s,n,o){this.g=i,this.h=r,this.i=s,this.j=n,this.a=new P,this.ignoreUnhandledExtHostErrors=t?.ignoreUnhandledErrors??!1,this.b=t?.ignoreBuiltInCommonProperties??!1,this.c=t?.additionalCommonProperties,this.f=e,this.d={isUsageEnabled:o.isUsageEnabled,isErrorsEnabled:o.isErrorsEnabled}}updateTelemetryEnablements(e,t){this.e&&(this.d={isUsageEnabled:e,isErrorsEnabled:t},this.a.fire(this.e))}mixInCommonPropsAndCleanData(e){let t="properties"in e?e.properties??{}:e;return t=u8(t,[]),this.c&&(t=xn(t,this.c)),this.b||(t=xn(t,this.j)),"properties"in e?e.properties=t:e=t,e}k(e,t){this.f&&(this.g.publisher==="vscode"?e=this.g.name+"/"+e:e=this.g.identifier.value+"/"+e,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f?.sendEventData(e,t),this.h.trace(e,t))}logUsage(e,t){this.d.isUsageEnabled&&this.k(e,t)}logError(e,t){if(!(!this.d.isErrorsEnabled||!this.f))if(typeof e=="string")this.k(e,t);else{const i={name:e.name,message:e.message,stack:e.stack,cause:e.cause},r=u8(i,[]),s=new Error(r.message,{cause:r.cause});s.stack=r.stack,s.name=r.name,t=this.mixInCommonPropsAndCleanData(t||{}),this.i||this.f.sendErrorData(s,t),this.h.trace("exception",t)}}get apiTelemetryLogger(){if(!this.e){const e=this,t={logUsage:e.logUsage.bind(e),get isUsageEnabled(){return e.d.isUsageEnabled},get isErrorsEnabled(){return e.d.isErrorsEnabled},logError:e.logError.bind(e),dispose:e.dispose.bind(e),onDidChangeEnableStates:e.a.event.bind(e)};this.e=Object.freeze(t)}return this.e}get isDisposed(){return!this.f}dispose(){if(this.f?.flush){let e=this.f;this.f=void 0,Promise.resolve(e.flush()).then(e=void 0),this.e=void 0}else this.f=void 0}};function nE(e){const t=Date.now()-new Date(e).getTime();return isNaN(t)?!1:t<1e3*60*60*24}var Qf=B("IExtHostTelemetry"),I0=class{#e;#t;#i;constructor(t,i,r){this.b=new Map,this.c=new Map,this.#e=t.getProxy(J.MainThreadCommands),this.d=i,this.#i=r,this.#t=t.getProxy(J.MainThreadTelemetry),this.converter=new mN(this,s=>{const n=this.c.get(s);return n?.result===fe.Void?n:void 0},i),this.f=[{processArgument(s){return St(s)}},{processArgument(s){return To(s,function(n){if(Oe.isIRange(n))return F.to(n);if(ji.isIPosition(n))return ze.to(n);if(Oe.isIRange(n.range)&&y.isUri(n.uri))return gi.to(n);if(n instanceof ae)return n.buffer.buffer;if(!Array.isArray(n))return n})}}]}registerArgumentProcessor(t){this.f.push(t)}registerApiCommand(t){const i=this.registerCommand(!1,t.id,async(...r)=>{const s=t.args.map((o,a)=>{if(!o.validate(r[a]))throw new Error(`Invalid argument '${o.name}' when running '${t.id}', received: ${typeof r[a]=="object"?JSON.stringify(r[a],null,"	"):r[a]} `);return o.convert(r[a])}),n=await this.executeCommand(t.internalId,...s);return t.result.convert(n,r,this.converter)},void 0,{description:t.description,args:t.args,returns:t.result.description});return this.c.set(t.id,t),new Pe(()=>{i.dispose(),this.c.delete(t.id)})}registerCommand(t,i,r,s,n,o){if(this.d.trace("ExtHostCommands#registerCommand",i),!i.trim().length)throw new Error("invalid id");if(this.b.has(i))throw new Error(`command '${i}' already exists`);return this.b.set(i,{callback:r,thisArg:s,metadata:n,extension:o}),t&&this.#e.$registerCommand(i),new Pe(()=>{this.b.delete(i)&&t&&this.#e.$unregisterCommand(i)})}executeCommand(t,...i){return this.d.trace("ExtHostCommands#executeCommand",t),this.g(t,i,!0)}async g(t,i,r){if(this.b.has(t))return this.#e.$fireCommandActivationEvent(t),this.h(t,i,!1);{let s=!1;const n=To(i,function(o){if(o instanceof Ae)return ze.from(o);if(o instanceof ke)return F.from(o);if(o instanceof Bi)return gi.from(o);if(lr.isNotebookRange(o))return Nr.from(o);if(o instanceof ArrayBuffer)return s=!0,ae.wrap(new Uint8Array(o));if(o instanceof Uint8Array)return s=!0,ae.wrap(o);if(o instanceof ae)return s=!0,o;if(!Array.isArray(o))return o});try{const o=await this.#e.$executeCommand(t,s?new ni(n):n,r);return St(o)}catch(o){if(o instanceof Error&&o.message==="$executeCommand:retry")return this.g(t,i,!1);throw o}}}async h(t,i,r){const s=this.b.get(t);if(!s)throw new Error("Unknown command");const{callback:n,thisArg:o,metadata:a}=s;if(a?.args)for(let l=0;l<a.args.length;l++)try{fy(i[l],a.args[l].constraint)}catch{throw new Error(`Running the contributed command: '${t}' failed. Illegal argument '${a.args[l].name}' - ${a.args[l].description}`)}const c=un.create();try{return await n.apply(o,i)}catch(l){if(t===this.converter.delegatingCommandId){const u=this.converter.getActualCommand(...i);u&&(t=u.command)}if(yr(l)||this.d.error(l,t,s.extension?.identifier),!r)throw l;if(s.extension?.identifier){const u=this.#i.onExtensionError(s.extension.identifier,l);this.d.trace("forwarded error to extension?",u,s.extension?.identifier)}throw new class extends Error{constructor(){super(Po(l)),this.id=t,this.source=s.extension?.displayName??s.extension?.name}}}finally{this.j(s,t,c.elapsed())}}j(t,i,r){t.extension&&this.#t.$publicLog2("Extension:ActionExecuted",{extensionId:t.extension.identifier.value,id:new t1(i),duration:r})}$executeContributedCommand(t,...i){this.d.trace("ExtHostCommands#$executeContributedCommand",t);const r=this.b.get(t);return r?(i=i.map(s=>this.f.reduce((n,o)=>o.processArgument(n,r.extension),s)),this.h(t,i,!0)):Promise.reject(new Error(`Contributed command '${t}' does not exist.`))}getCommands(t=!1){return this.d.trace("ExtHostCommands#getCommands",t),this.#e.$getCommands().then(i=>(t&&(i=i.filter(r=>r[0]!=="_")),i))}$getContributedCommandMetadata(){const t=Object.create(null);for(const[i,r]of this.b){const{metadata:s}=r;s&&(t[i]=s)}return Promise.resolve(t)}};I0=__decorate([__param(0,Fe),__param(1,We),__param(2,Qf)],I0);var so=B("IExtHostCommands"),mN=class{constructor(e,t,i){this.d=e,this.f=t,this.g=i,this.delegatingCommandId=`__vsc${Ut()}`,this.b=new Map,this.c=0,this.d.registerCommand(!0,this.delegatingCommandId,this.h,this)}toInternal(e,t){if(!e)return;const i={$ident:void 0,id:e.command,title:e.title,tooltip:e.tooltip};if(!e.command)return i;const r=this.f(e.command);if(r)i.id=r.internalId,i.arguments=r.args.map((s,n)=>s.convert(e.arguments&&e.arguments[n]));else if(Xa(e.arguments)){const s=`${e.command} /${++this.c}`;this.b.set(s,e),t.add(oe(()=>{this.b.delete(s),this.g.trace("CommandsConverter#DISPOSE",s)})),i.$ident=s,i.id=this.delegatingCommandId,i.arguments=[s],this.g.trace("CommandsConverter#CREATE",e.command,s)}return i}fromInternal(e){return typeof e.$ident=="string"?this.b.get(e.$ident):{command:e.id,title:e.title,arguments:e.arguments}}getActualCommand(...e){return this.b.get(e[0])}h(...e){const t=this.getActualCommand(...e);return this.g.trace("CommandsConverter#EXECUTE",e[0],t?t.command:"MISSING"),t?this.d.executeCommand(t.command,...t.arguments||[]):Promise.reject(`Actual command not found, wanted to execute ${e[0]}`)}},O=class Ai{static{this.Uri=new Ai("uri","Uri of a text document",t=>y.isUri(t),t=>t)}static{this.Position=new Ai("position","A position in a text document",t=>Ae.isPosition(t),ze.from)}static{this.Range=new Ai("range","A range in a text document",t=>ke.isRange(t),F.from)}static{this.Selection=new Ai("selection","A selection in a text document",t=>Xr.isSelection(t),hr.from)}static{this.Number=new Ai("number","",t=>typeof t=="number",t=>t)}static{this.String=new Ai("string","",t=>typeof t=="string",t=>t)}static Arr(t){return new Ai(`${t.name}_array`,`Array of ${t.name}, ${t.description}`,i=>Array.isArray(i)&&i.every(r=>t.validate(r)),i=>i.map(r=>t.convert(r)))}static{this.CallHierarchyItem=new Ai("item","A call hierarchy item",t=>t instanceof d1,Yn.from)}static{this.TypeHierarchyItem=new Ai("item","A type hierarchy item",t=>t instanceof J1,Xn.from)}static{this.TestItem=new Ai("testItem","A VS Code TestItem",t=>t instanceof zl,qs.from)}static{this.TestProfile=new Ai("testProfile","A VS Code test profile",t=>t instanceof L8,Mv.from)}constructor(t,i,r,s){this.name=t,this.description=i,this.validate=r,this.convert=s}optional(){return new Ai(this.name,`(optional) ${this.description}`,t=>t==null||this.validate(t),t=>t===void 0?void 0:t===null?null:this.convert(t))}with(t,i){return new Ai(t??this.name,i??this.description,this.validate,this.convert)}},fe=class xC{static{this.Void=new xC("no result",t=>t)}constructor(t,i){this.description=t,this.convert=i}},ge=class{constructor(e,t,i,r,s){this.id=e,this.internalId=t,this.description=i,this.args=r,this.result=s}},Ma=B("IExtHostTerminalService"),oE=class extends ne{constructor(e,t,i,r){super(),this.u=e,this._id=t,this.w=i,this.y=r,this.a=!1,this.m={isInteractedWith:!1,shell:void 0},this.isOpen=!1,this.s=this.B(new P),this.onWillDispose=this.s.event,this.w=Object.freeze(this.w),this.b=new Promise(n=>this.g=n);const s=this;this.value={get name(){return s.y||""},get processId(){return s.b},get creationOptions(){return s.w},get exitStatus(){return s.j},get state(){return s.m},get selection(){return s.n},get shellIntegration(){return s.shellIntegration},sendText(n,o=!0){s.C(),s.u.$sendText(s._id,n,o)},show(n){s.C(),s.u.$show(s._id,n)},hide(){s.C(),s.u.$hide(s._id)},dispose(){s.a||(s.a=!0,s.u.$dispose(s._id))},get dimensions(){if(!(s.f===void 0||s.h===void 0))return{columns:s.f,rows:s.h}}}}dispose(){this.s.fire(),super.dispose()}async create(e,t){if(typeof this._id!="string")throw new Error("Terminal has already been created");await this.u.$createTerminal(this._id,{name:e.name,shellPath:e.shellPath??void 0,shellArgs:e.shellArgs??void 0,cwd:e.cwd??t?.cwd??void 0,env:e.env??void 0,icon:cE(e.iconPath)??void 0,color:Lo.isThemeColor(e.color)?e.color.id:void 0,initialText:e.message??void 0,strictEnv:e.strictEnv??void 0,hideFromUser:e.hideFromUser??void 0,forceShellIntegration:t?.forceShellIntegration??void 0,isFeatureTerminal:t?.isFeatureTerminal??void 0,isExtensionOwnedTerminal:!0,useShellEnvironment:t?.useShellEnvironment??void 0,location:t?.location||this.z(e.location,t?.resolvedExtHostIdentifier),isTransient:e.isTransient??void 0})}async createExtensionTerminal(e,t,i,r,s){if(typeof this._id!="string")throw new Error("Terminal has already been created");if(await this.u.$createTerminal(this._id,{name:this.y,isExtensionCustomPtyTerminal:!0,icon:r,color:Lo.isThemeColor(s)?s.id:void 0,location:t?.location||this.z(e,i),isTransient:!0}),typeof this._id=="string")throw new Error("Terminal creation failed");return this._id}z(e,t){return typeof e=="object"?"parentTerminal"in e&&e.parentTerminal&&t?{parentTerminal:t}:"viewColumn"in e?{viewColumn:Pt.from(e.viewColumn),preserveFocus:e.preserveFocus}:void 0:e}C(){if(this.a)throw new Error("Terminal has already been disposed")}set name(e){this.y=e}setExitStatus(e,t){this.j=Object.freeze({code:e,reason:t})}setDimensions(e,t){return e===this.f&&t===this.h||e===0||t===0?!1:(this.f=e,this.h=t,!0)}setInteractedWith(){return this.m.isInteractedWith?!1:(this.m={...this.m,isInteractedWith:!0},!0)}setShellType(e){return this.m.shell!==e?(this.m={...this.m,shell:e},!0):!1}setSelection(e){this.n=e}_setProcessId(e){this.g?(this.g(e),this.g=void 0):this.b.then(t=>{t!==e&&(this.b=Promise.resolve(e))})}},D0=class{get onProcessReady(){return this.b.event}constructor(e){this.g=e,this.id=0,this.shouldPersist=!1,this.a=new P,this.onProcessData=this.a.event,this.b=new P,this.d=new P,this.onDidChangeProperty=this.d.event,this.f=new P,this.onProcessExit=this.f.event}refreshProperty(e){throw new Error(`refreshProperty is not suppported in extension owned terminals. property: ${e}`)}updateProperty(e,t){throw new Error(`updateProperty is not suppported in extension owned terminals. property: ${e}, value: ${t}`)}async start(){}shutdown(){this.g.close()}input(e){this.g.handleInput?.(e)}resize(e,t){this.g.setDimensions?.({columns:e,rows:t})}clearBuffer(){}async processBinary(e){}acknowledgeDataEvent(e){}async setUnicodeVersion(e){}getInitialCwd(){return Promise.resolve("")}getCwd(){return Promise.resolve("")}startSendingEvents(e){this.g.onDidWrite(t=>this.a.fire(t)),this.g.onDidClose?.((t=void 0)=>{this.f.fire(t===void 0?void 0:t)}),this.g.onDidOverrideDimensions?.(t=>{t&&this.d.fire({type:"overrideDimensions",value:{cols:t.columns,rows:t.rows}})}),this.g.onDidChangeName?.(t=>{this.d.fire({type:"title",value:t})}),this.g.open(e||void 0),e&&this.g.setDimensions?.(e),this.b.fire({pid:-1,cwd:"",windowsPty:void 0})}},vN=1,P0=class extends ne{get activeTerminal(){return this.b?.value}get terminals(){return this.f.map(t=>t.value)}constructor(t,i,r){super(),this.R=i,this.f=[],this.g=new Map,this.h={},this.j={},this.m={},this.n=new Map,this.w=this.B(new bs),this.z=new Set,this.C=new Map,this.D=new Map,this.F=new Map,this.G=new Map,this.H=new Map,this.I=new P,this.onDidCloseTerminal=this.I.event,this.J=new P,this.onDidOpenTerminal=this.J.event,this.L=new P,this.onDidChangeActiveTerminal=this.L.event,this.M=new P,this.onDidChangeTerminalDimensions=this.M.event,this.N=new P,this.onDidChangeTerminalState=this.N.event,this.O=new P,this.onDidChangeShell=this.O.event,this.P=new P({onWillAddFirstListener:()=>this.a.$startSendingDataEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingDataEvents()}),this.onDidWriteTerminalData=this.P.event,this.Q=new P({onWillAddFirstListener:()=>this.a.$startSendingCommandEvents(),onDidRemoveLastListener:()=>this.a.$stopSendingCommandEvents()}),this.onDidExecuteTerminalCommand=this.Q.event,this.a=r.getProxy(J.MainThreadTerminalService),this.y=new dN(this.a.$sendProcessData),this.a.$registerProcessSupport(t),this.R.registerArgumentProcessor({processArgument:s=>{const n=o=>{const a=o;return this.getTerminalById(a.instanceId)?.value};switch(s?.$mid){case 15:return n(s);default:{if(Array.isArray(s))for(let o=0;o<s.length&&s[o].$mid===15;o++)s[o]=n(s[o]);return s}}}}),this.B({dispose:()=>{for(const[s,n]of this.g)n.shutdown(!0)}})}getDefaultShell(t){return(t?this.u:this.s)?.path||""}getDefaultShellArgs(t){return(t?this.u:this.s)?.args||[]}createExtensionTerminal(t,i){const r=new oE(this.a,Ut(),t,t.name),s=new D0(t.pty);return r.createExtensionTerminal(t.location,i,this.S(t,i).resolvedExtHostIdentifier,cE(t.iconPath),bN(t.color)).then(n=>{const o=this.U(n,s);this.h[n]=o}),this.f.push(r),r.value}S(t,i){if(i=i||{},t.location&&typeof t.location=="object"&&"parentTerminal"in t.location){const r=t.location.parentTerminal;if(r){const s=this.f.find(n=>n.value===r);s&&(i.resolvedExtHostIdentifier=s._id)}}else t.location&&typeof t.location!="object"?i.location=t.location:i.location&&typeof i.location=="object"&&"splitActiveTerminal"in i.location&&(i.location={splitActiveTerminal:!0});return i}attachPtyToTerminal(t,i){if(!this.getTerminalById(t))throw new Error(`Cannot resolve terminal with id ${t} for virtual process`);const s=new D0(i),n=this.U(t,s);this.h[t]=n}async $acceptActiveTerminalChanged(t){const i=this.b;if(t===null){this.b=void 0,i!==this.b&&this.L.fire(this.b);return}const r=this.getTerminalById(t);r&&(this.b=r,i!==this.b&&this.L.fire(this.b.value))}async $acceptTerminalProcessData(t,i){const r=this.getTerminalById(t);r&&this.P.fire({terminal:r.value,data:i})}async $acceptTerminalDimensions(t,i,r){const s=this.getTerminalById(t);s&&s.setDimensions(i,r)&&this.M.fire({terminal:s.value,dimensions:s.value.dimensions})}async $acceptDidExecuteCommand(t,i){const r=this.getTerminalById(t);r&&this.Q.fire({terminal:r.value,...i})}async $acceptTerminalMaximumDimensions(t,i,r){this.g.get(t)?.resize(i,r)}async $acceptTerminalTitleChange(t,i){const r=this.getTerminalById(t);r&&(r.name=i)}async $acceptTerminalClosed(t,i,r){const s=this.Y(this.f,t);if(s!==null){const n=this.f.splice(s,1)[0];n.setExitStatus(i,r),this.I.fire(n.value)}}$acceptTerminalOpened(t,i,r,s){if(i){const a=this.Y(this.f,i);if(a!==null){this.f[a]._id=t,this.J.fire(this.terminals[a]),this.f[a].isOpen=!0;return}}const n={name:s.name,shellPath:s.executable,shellArgs:s.args,cwd:typeof s.cwd=="string"?s.cwd:y.revive(s.cwd),env:s.env,hideFromUser:s.hideFromUser},o=new oE(this.a,t,n,r);this.f.push(o),this.J.fire(o.value),o.isOpen=!0}async $acceptTerminalProcessId(t,i){this.getTerminalById(t)?._setProcessId(i)}async $startExtensionTerminal(t,i){const r=this.getTerminalById(t);if(!r)return{message:d(2909,null,t)};r.isOpen||await new Promise(n=>{const o=this.onDidOpenTerminal(async a=>{a===r.value&&(o.dispose(),n())})});const s=this.g.get(t);s?s.startSendingEvents(i):this.j[t]={initialDimensions:i}}U(t,i){const r=new ue;r.add(i.onProcessReady(n=>this.a.$sendProcessReady(t,n.pid,n.cwd,n.windowsPty))),r.add(i.onDidChangeProperty(n=>this.a.$sendProcessProperty(t,n))),this.y.startBuffering(t,i.onProcessData),r.add(i.onProcessExit(n=>this.W(t,n))),this.g.set(t,i);const s=this.j[t];return s&&i instanceof D0&&(i.startSendingEvents(s.initialDimensions),delete this.j[t]),r}$acceptProcessAckDataEvent(t,i){this.g.get(t)?.acknowledgeDataEvent(i)}$acceptProcessInput(t,i){this.g.get(t)?.input(i)}$acceptTerminalInteraction(t){const i=this.getTerminalById(t);i?.setInteractedWith()&&this.N.fire(i.value)}$acceptTerminalSelection(t,i){this.getTerminalById(t)?.setSelection(i)}$acceptProcessResize(t,i,r){try{this.g.get(t)?.resize(i,r)}catch(s){if(s.code!=="EPIPE"&&s.code!=="ERR_IPC_CHANNEL_CLOSED")throw s}}$acceptProcessShutdown(t,i){this.g.get(t)?.shutdown(i)}$acceptProcessRequestInitialCwd(t){this.g.get(t)?.getInitialCwd().then(i=>this.a.$sendProcessProperty(t,{type:"initialCwd",value:i}))}$acceptProcessRequestCwd(t){this.g.get(t)?.getCwd().then(i=>this.a.$sendProcessProperty(t,{type:"cwd",value:i}))}$acceptProcessRequestLatency(t){return Promise.resolve(t)}registerProfileProvider(t,i,r){if(this.D.has(i))throw new Error(`Terminal profile provider "${i}" already registered`);return this.D.set(i,r),this.a.$registerProfileProvider(i,t.identifier.value),new Pe(()=>{this.D.delete(i),this.a.$unregisterProfileProvider(i)})}registerTerminalCompletionProvider(t,i,...r){if(this.C.has(i.id))throw new Error(`Terminal completion provider "${i.id}" already registered`);return this.C.set(i.id,i),this.a.$registerCompletionProvider(i.id,t.identifier.value,...r),new Pe(()=>{this.C.delete(i.id),this.a.$unregisterCompletionProvider(i.id)})}async $provideTerminalCompletions(t,i){const r=new at().token;if(r.isCancellationRequested||!this.activeTerminal)return;const s=this.C.get(t);if(!s)return;const n=await s.provideTerminalCompletions(this.activeTerminal,i,r);if(n!=null)return Wv.from(n)}$acceptTerminalShellType(t,i){const r=this.getTerminalById(t);r?.setShellType(i)&&this.N.fire(r.value)}registerTerminalQuickFixProvider(t,i,r){if(this.F.has(t))throw new Error(`Terminal quick fix provider "${t}" is already registered`);return this.F.set(t,r),this.a.$registerQuickFixProvider(t,i),new Pe(()=>{this.F.delete(t),this.a.$unregisterQuickFixProvider(t)})}async $provideTerminalQuickFixes(t,i){const r=new at().token;if(r.isCancellationRequested)return;const s=this.F.get(t);if(!s)return;const n=await s.provideTerminalQuickFixes(i,r);if(n===null||Array.isArray(n)&&n.length===0)return;const o=new ue;if(this.w.value=o,!Array.isArray(n))return n?Ff.from(n,this.R.converter,o):void 0;const a=[];for(const c of n){const l=Ff.from(c,this.R.converter,o);l&&a.push(l)}return a}async $createContributedProfileTerminal(t,i){const r=new at().token;let s=await this.D.get(t)?.provideTerminalProfile(r);if(!r.isCancellationRequested){if(s&&!("options"in s)&&(s={options:s}),!s||!("options"in s))throw new Error(`No terminal profile options provided for id "${t}"`);if("pty"in s.options){this.createExtensionTerminal(s.options,i);return}this.createTerminalFromOptions(s.options,i)}}registerLinkProvider(t){return this.z.add(t),this.z.size===1&&this.a.$startLinkProvider(),new Pe(()=>{this.z.delete(t),this.z.size===0&&this.a.$stopLinkProvider()})}async $provideLinks(t,i){const r=this.getTerminalById(t);if(!r)return[];this.G.delete(t),this.H.get(t)?.dispose(!0);const n=new at;this.H.set(t,n);const o=[],a={terminal:r.value,line:i},c=[];for(const h of this.z)c.push(Do.withAsyncBody(async f=>{n.token.onCancellationRequested(()=>f({provider:h,links:[]}));const p=await h.provideTerminalLinks(a,n.token)||[];n.token.isCancellationRequested||f({provider:h,links:p})}));const l=await Promise.all(c);if(n.token.isCancellationRequested)return[];const u=new Map;for(const h of l)h&&h.links.length>0&&o.push(...h.links.map(f=>{const p={id:vN++,startIndex:f.startIndex,length:f.length,label:f.tooltip};return u.set(p.id,{provider:h.provider,link:f}),p}));return this.G.set(t,u),o}$activateLink(t,i){const r=this.G.get(t)?.get(i);r&&r.provider.handleTerminalLink(r.link)}W(t,i){this.y.stopBuffering(t),this.g.delete(t),delete this.j[t];const r=this.h[t];r&&(r.dispose(),delete this.h[t]),this.a.$sendProcessExit(t,i)}getTerminalById(t){return this.X(this.f,t)}getTerminalIdByApiObject(t){const i=this.f.findIndex(r=>r.value===t);return i>=0?i:null}X(t,i){const r=this.Y(t,i);return r!==null?t[r]:null}Y(t,i){const r=t.findIndex(s=>s._id===i);return r>=0?r:null}getEnvironmentVariableCollection(t){let i=this.n.get(t.identifier.value);return i||(i=this.B(new aE),this.$(t.identifier.value,i)),i.getScopedEnvironmentVariableCollection(void 0)}Z(t,i){const r=uN(i.map),s=hN(i.descriptionMap);this.a.$setEnvironmentVariableCollection(t,i.persistent,r.length===0?void 0:r,s)}$initEnvironmentVariableCollections(t){t.forEach(i=>{const r=i[0],s=this.B(new aE(i[1]));this.$(r,s)})}$acceptDefaultProfile(t,i){const r=this.s;this.s=t,this.u=i,r?.path!==t.path&&this.O.fire(t.path)}$(t,i){this.n.set(t,i),this.B(i.onDidChangeCollection(()=>{this.Z(t,i)}))}};P0=__decorate([__param(1,so),__param(2,Fe)],P0);var aE=class extends ne{get persistent(){return this.b}set persistent(e){this.b=e,this.f.fire()}get onDidChangeCollection(){return this.f&&this.f.event}constructor(e){super(),this.map=new Map,this.a=new Map,this.descriptionMap=new Map,this.b=!0,this.f=new P,this.map=new Map(e)}getScopedEnvironmentVariableCollection(e){const t=this.j(e);let i=this.a.get(t);return i||(i=new wN(this,e),this.a.set(t,i),this.B(i.onDidChangeCollection(()=>this.f.fire()))),i}replace(e,t,i,r){this.g(e,{value:t,type:Go.Replace,options:i??{applyAtProcessCreation:!0},scope:r})}append(e,t,i,r){this.g(e,{value:t,type:Go.Append,options:i??{applyAtProcessCreation:!0},scope:r})}prepend(e,t,i,r){this.g(e,{value:t,type:Go.Prepend,options:i??{applyAtProcessCreation:!0},scope:r})}g(e,t){if(t.options&&t.options.applyAtProcessCreation===!1&&!t.options.applyAtShellIntegration)throw new Error("EnvironmentVariableMutatorOptions must apply at either process creation or shell integration");const i=this.h(e,t.scope),r=this.map.get(i),s=t.options?{applyAtProcessCreation:t.options.applyAtProcessCreation??!1,applyAtShellIntegration:t.options.applyAtShellIntegration??!1}:{applyAtProcessCreation:!0};if(!r||r.value!==t.value||r.type!==t.type||r.options?.applyAtProcessCreation!==s.applyAtProcessCreation||r.options?.applyAtShellIntegration!==s.applyAtShellIntegration||r.scope?.workspaceFolder?.index!==t.scope?.workspaceFolder?.index){const n=this.h(e,t.scope),o={variable:e,...t,options:s};this.map.set(n,o),this.f.fire()}}get(e,t){const i=this.h(e,t),r=this.map.get(i);return r?lE(r):void 0}h(e,t){const i=this.j(t);return i.length?`${e}:::${i}`:e}j(e){return this.m(e?.workspaceFolder)??""}m(e){return e?e.uri.toString():void 0}getVariableMap(e){const t=new Map;for(const[i,r]of this.map)this.j(r.scope)===this.j(e)&&t.set(r.variable,lE(r));return t}delete(e,t){const i=this.h(e,t);this.map.delete(i),this.f.fire()}clear(e){if(e?.workspaceFolder){for(const[t,i]of this.map)i.scope?.workspaceFolder?.index===e.workspaceFolder.index&&this.map.delete(t);this.n(e)}else this.map.clear(),this.descriptionMap.clear();this.f.fire()}setDescription(e,t){const i=this.j(t),r=this.descriptionMap.get(i);if(!r||r.description!==e){let s;typeof e=="string"?s=e:s=e?.value.split(`

`)[0];const n={description:s,scope:t};this.descriptionMap.set(i,n),this.f.fire()}}getDescription(e){const t=this.j(e);return this.descriptionMap.get(t)?.description}n(e){const t=this.j(e);this.descriptionMap.delete(t)}},wN=class{get persistent(){return this.b.persistent}set persistent(e){this.b.persistent=e}get onDidChangeCollection(){return this.a&&this.a.event}constructor(e,t){this.b=e,this.d=t,this.a=new P}getScoped(e){return this.b.getScopedEnvironmentVariableCollection(e)}replace(e,t,i){this.b.replace(e,t,i,this.d)}append(e,t,i){this.b.append(e,t,i,this.d)}prepend(e,t,i){this.b.prepend(e,t,i,this.d)}get(e){return this.b.get(e,this.d)}forEach(e,t){this.b.getVariableMap(this.d).forEach((i,r)=>e.call(t,r,i,this),this.d)}[Symbol.iterator](){return this.b.getVariableMap(this.d).entries()}delete(e){this.b.delete(e,this.d),this.a.fire(void 0)}clear(){this.b.clear(this.d)}set description(e){this.b.setDescription(e,this.d)}get description(){return this.b.getDescription(this.d)}},A0=class extends P0{constructor(t,i){super(!1,t,i)}createTerminal(t,i,r){throw new cg}createTerminalFromOptions(t,i){throw new cg}};A0=__decorate([__param(0,so),__param(1,Fe)],A0);function cE(e){if(!(!e||typeof e=="string"))return"id"in e?{id:e.id,color:e.color}:e}function bN(e){return Lo.isThemeColor(e)?e:void 0}function lE(e){const t={...e};return delete t.scope,t.options=t.options??void 0,delete t.variable,t}var yN=B("progressService"),uE;(function(e){e[e.Explorer=1]="Explorer",e[e.Scm=3]="Scm",e[e.Extensions=5]="Extensions",e[e.Window=10]="Window",e[e.Notification=15]="Notification",e[e.Dialog=20]="Dialog"})(uE||(uE={}));var $V=Object.freeze({total(){},worked(){},done(){}}),T0=class{static{this.None=Object.freeze({report(){}})}get value(){return this.a}constructor(e){this.b=e}report(e){this.a=e,this.b(this.a)}},hE=class extends ne{constructor(t,i){super(),this.a=new Is,i.withProgress(t,r=>(this.b=r,this.c&&r.report(this.c),this.a.p)),this.B(oe(()=>this.a.complete()))}report(t){this.b?this.b.report(t):this.c=t}};hE=__decorate([__param(1,yN)],hE);var IV=B("editorProgressService"),dE="__",DV=B("IAuthenticationService"),PV=B("IAuthenticationExtensionsService"),fE="/.well-known",AV=`${fE}/oauth-protected-resource`,xN=`${fE}/oauth-authorization-server`;function EN(e){return typeof e!="object"||e===null?!1:e.resource!==void 0}function SN(e){return typeof e!="object"||e===null?!1:e.issuer!==void 0}function kN(e){return typeof e!="object"||e===null?!1:e.client_id!==void 0}function pE(e){if(typeof e!="object"||e===null)return!1;const t=e;return t.access_token!==void 0&&t.token_type!==void 0}function $N(e){return{issuer:e.toString(),authorization_endpoint:new URL("/authorize",e).toString(),token_endpoint:new URL("/token",e).toString(),registration_endpoint:new URL("/register",e).toString(),response_types_supported:["code","id_token","id_token token"]}}function CN(e){const t=new URL(e.issuer);return{...e,authorization_endpoint:e.authorization_endpoint??new URL("/authorize",t).toString(),token_endpoint:e.token_endpoint??new URL("/token",t).toString(),registration_endpoint:e.registration_endpoint??new URL("/register",t).toString()}}var gE=33418;async function IN(e,t){const i=await fetch(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({client_name:t,client_uri:"https://code.visualstudio.com",grant_types:["authorization_code","refresh_token","urn:ietf:params:oauth:grant-type:device_code"],response_types:["code"],redirect_uris:["https://insiders.vscode.dev/redirect","https://vscode.dev/redirect","http://localhost/","http://127.0.0.1/",`http://localhost:${gE}/`,`http://127.0.0.1:${gE}/`],token_endpoint_auth_method:"none"})});if(!i.ok)throw new Error(`Registration failed: ${i.statusText}`);const r=await i.json();if(kN(r))return r;throw new Error(`Invalid authorization dynamic client registration response: ${JSON.stringify(r)}`)}function DN(e){const t=e.split(" "),i=t[0],r={};return t.length>1&&t.slice(1).join(" ").split(",").forEach(n=>{const[o,a]=n.split("=").map(c=>c.trim().replace(/"/g,""));r[o]=a}),{scheme:i,params:r}}function mE(e){const t=e.split(".");if(t.length!==3)throw new Error("Invalid JWT token format: token must have three parts separated by dots");const[i,r,s]=t;try{if(typeof JSON.parse(xo(i).toString())!="object")throw new Error("Invalid JWT token format: header is not a JSON object");const o=JSON.parse(xo(r).toString());if(typeof o!="object")throw new Error("Invalid JWT token format: payload is not a JSON object");return o}catch(n){throw n instanceof Error?new Error(`Failed to parse JWT token: ${n.message}`):new Error("Failed to parse JWT token")}}var R0,L0=class{static{R0=this}static{this.a={focused:!0,active:!0}}getState(){const t=this.f;return{get focused(){return t.focused},get active(){return t.active}}}constructor(t,i){this.c=new P,this.onDidChangeWindowState=this.c.event,this.f=R0.a,t.handle&&(this.d=xo(t.handle).buffer),this.b=i.getProxy(J.MainThreadWindow),this.b.$getInitialState().then(({isFocused:r,isActive:s})=>{this.onDidChangeWindowProperty("focused",r),this.onDidChangeWindowProperty("active",s)})}get nativeHandle(){return this.d}$onDidChangeActiveNativeWindowHandle(t){this.d=t?xo(t).buffer:void 0}$onDidChangeWindowFocus(t){this.onDidChangeWindowProperty("focused",t)}$onDidChangeWindowActive(t){this.onDidChangeWindowProperty("active",t)}onDidChangeWindowProperty(t,i){i!==this.f[t]&&(this.f={...this.f,[t]:i},this.c.fire(this.f))}openUri(t,i){let r;if(typeof t=="string"){r=t;try{t=y.parse(t)}catch{return Promise.reject(`Invalid uri - '${t}'`)}}return Qu(t.scheme)?Promise.reject("Invalid scheme - cannot be empty"):t.scheme===V.command?Promise.reject(`Invalid scheme '${t.scheme}'`):this.b.$openUri(t,r,i)}async asExternalUri(t,i){if(Qu(t.scheme))return Promise.reject("Invalid scheme - cannot be empty");const r=await this.b.$asExternalUri(t,i);return y.from(r)}};L0=R0=__decorate([__param(0,It),__param(1,Fe)],L0);var Xf=B("IExtHostWindow"),N0,M0=class{static{N0=this}static{this.a=0}constructor(t){this.c=new vn,this.d=new Map,this.b=t.getProxy(J.MainThreadUrls)}registerUriHandler(t,i){const r=t.identifier;if(this.c.has(r))throw new Error(`Protocol handler already registered for extension ${r}`);const s=N0.a++;return this.c.add(r),this.d.set(s,i),this.b.$registerUriHandler(s,r,t.displayName||t.name),oe(()=>{this.c.delete(r),this.d.delete(s),this.b.$unregisterUriHandler(s)})}$handleExternalUri(t,i){const r=this.d.get(t);if(!r)return Promise.resolve(void 0);try{r.handleUri(y.revive(i))}catch(s){Gt(s)}return Promise.resolve(void 0)}async createAppUri(t){return y.revive(await this.b.$createAppUri(t))}};M0=N0=__decorate([__param(0,Fe)],M0);var Kf=B("IExtHostUrlsService");function vE(e){return(t,i,r)=>{let s=null,n=null;if(typeof r.value=="function"?(s="value",n=r.value):typeof r.get=="function"&&(s="get",n=r.get),!n||typeof i=="symbol")throw new Error("not supported");r[s]=e(n,i)}}function F0(e,t,i){return vE((r,s)=>{const n=`$debounce$${s}`,o=`$debounce$result$${s}`;return function(...a){this[o]||(this[o]=i?i():void 0),clearTimeout(this[n]),t&&(this[o]=t(this[o],...a),a=[this[o]]),this[n]=setTimeout(()=>{r.apply(this,a),this[o]=i?i():void 0},e)}})}function PN(e,t,i){return vE((r,s)=>{const n=`$throttle$timer$${s}`,o=`$throttle$result$${s}`,a=`$throttle$lastRun$${s}`,c=`$throttle$pending$${s}`;return function(...l){if(this[o]||(this[o]=i?i():void 0),(this[a]===null||this[a]===void 0)&&(this[a]=-Number.MAX_VALUE),t&&(this[o]=t(this[o],...l)),this[c])return;const u=this[a]+e;u<=Date.now()?(this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0):(this[c]=!0,this[n]=setTimeout(()=>{this[c]=!1,this[a]=Date.now(),r.apply(this,[this[o]]),this[o]=i?i():void 0},u-Date.now()))}})}var ep=B("IExtHostProgress"),O0=class{constructor(t){this.b=0,this.c=new Map,this.a=t.getProxy(J.MainThreadProgress)}async withProgress(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i,c={label:t.displayName||t.name,id:t.identifier.value};return this.a.$startProgress(s,{location:vf.from(o),title:n,source:c,cancellable:a},t.isUnderDevelopment?void 0:t.identifier.value).catch(og),this.d(s,r,!!a)}async withProgressFromSource(t,i,r){const s=this.b++,{title:n,location:o,cancellable:a}=i;return this.a.$startProgress(s,{location:vf.from(o),title:n,source:t,cancellable:a},void 0).catch(og),this.d(s,r,!!a)}d(t,i,r){let s;r&&(s=new at,this.c.set(t,s));const n=a=>{this.a.$progressEnd(a),this.c.delete(a),s?.dispose()};let o;try{o=i(new wE(this.a,t),r&&s?s.token:et.None)}catch(a){throw n(t),a}return o.then(a=>n(t),a=>n(t)),o}$acceptProgressCanceled(t){const i=this.c.get(t);i&&(i.cancel(),this.c.delete(t))}};O0=__decorate([__param(0,Fe)],O0);function AN(e,t){return e.message=t.message,typeof t.increment=="number"&&(typeof e.increment=="number"?e.increment+=t.increment:e.increment=t.increment),e}var wE=class extends T0{constructor(e,t){super(i=>this.throttledReport(i)),this.c=e,this.d=t}throttledReport(e){this.c.$progressReport(this.d,e)}};__decorate([PN(100,(e,t)=>AN(e,t),()=>Object.create(null))],wE.prototype,"throttledReport",null);var U0=B("IExtHostAuthentication"),j0=class{constructor(t,i,r,s,n,o){this.k=i,this.l=r,this.m=s,this.n=n,this.o=o,this.c=B0,this.f=new Map,this.g=new P,this.h=new TN,this.j=new P,this.d=t.getProxy(J.MainThreadAuthentication)}getExtensionScopedSessionsEvent(t){const i=t.toLowerCase();return lt.chain(this.g.event,r=>r.filter(s=>!s.extensionIdFilter||s.extensionIdFilter.includes(i)).map(s=>({provider:s.provider})))}async getSession(t,i,r,s={}){const n=je.toKey(t.identifier),o=[...r].sort().join(" "),c=Object.keys(s).sort().map(l=>`${l}:${!!s[l]}`).join(", ");return await this.h.getOrCreate(`${n} ${i} ${o} ${c}`,async()=>{await this.d.$ensureProvider(i);const l=t.displayName||t.name;return this.d.$getSession(i,r,n,l,s)})}async getAccounts(t){return await this.d.$ensureProvider(t),await this.d.$getAccounts(t)}async removeSession(t,i){const r=this.f.get(t);return r?r.provider.removeSession(i):this.d.$removeSession(t,i)}registerAuthenticationProvider(t,i,r,s){if(this.f.get(t))throw new Error(`An authentication provider with id '${t}' is already registered.`);this.f.set(t,{label:i,provider:r,options:s??{supportsMultipleAccounts:!1}});const n=r.onDidChangeSessions(o=>this.d.$sendDidChangeSessions(t,o));return this.d.$registerAuthenticationProvider(t,i,s?.supportsMultipleAccounts??!1,s?.supportedAuthorizationServers),new Pe(()=>{n.dispose(),this.f.delete(t),this.d.$unregisterAuthenticationProvider(t)})}async $createSession(t,i,r){const s=this.f.get(t);if(s)return r.authorizationServer=y.revive(r.authorizationServer),await s.provider.createSession(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $removeSession(t,i){const r=this.f.get(t);if(r)return await r.provider.removeSession(i);throw new Error(`Unable to find authentication provider with handle: ${t}`)}async $getSessions(t,i,r){const s=this.f.get(t);if(s)return r.authorizationServer=y.revive(r.authorizationServer),await s.provider.getSessions(i,r);throw new Error(`Unable to find authentication provider with handle: ${t}`)}$onDidChangeAuthenticationSessions(t,i,r){return t.startsWith(dE)||this.g.fire({provider:{id:t,label:i},extensionIdFilter:r}),Promise.resolve()}$onDidUnregisterAuthenticationProvider(t){const i=this.f.get(t);return i?.disposable&&(i.disposable.dispose(),this.f.delete(t)),Promise.resolve()}async $registerDynamicAuthProvider(t,i,r,s,n){if(!s){if(!i.registration_endpoint)throw new Error("Server does not support dynamic registration");try{s=(await IN(i.registration_endpoint,this.k.environment.appName)).client_id}catch(c){throw new Error(`Dynamic registration failed: ${c.message}`)}}const o=new this.c(this.l,this.m,this.k,this.n,this.o,this.d,y.revive(t),i,r,s,this.j,n||[]),a=o.onDidChangeSessions(c=>this.d.$sendDidChangeSessions(o.id,c));return this.f.set(o.id,{label:o.label,provider:o,disposable:Pe.from(o,a),options:{supportsMultipleAccounts:!1}}),await this.d.$registerDynamicAuthenticationProvider(o.id,o.label,o.authorizationServer,o.clientId),o.id}async $onDidChangeDynamicAuthProviderTokens(t,i,r){this.j.fire({authProviderId:t,clientId:i,tokens:r})}};j0=__decorate([__param(0,Fe),__param(1,It),__param(2,Xf),__param(3,Kf),__param(4,ep),__param(5,bn)],j0);var TN=class{constructor(){this.c=new Map}getOrCreate(e,t){const i=this.c.get(e);if(i)return i;const r=t().finally(()=>this.c.delete(e));return this.c.set(e,r),r}},B0=class{constructor(t,i,r,s,n,o,a,c,l,u,h,f){this.j=t,this.k=i,this.l=r,this.m=s,this.n=o,this.authorizationServer=a,this.o=c,this.q=l,this.clientId=u,this.c=new P,this.onDidChangeSessions=this.c.event;const p=a.toString(!0);this.id=l?.resource?p+" "+l?.resource:p,this.label=l?.resource_name??this.authorizationServer.authority,this.g=n.createLogger(p,{name:this.label}),this.h=new ue,this.h.add(this.c);const m=lt.chain(h.event,w=>w.filter(x=>x.authProviderId===this.id&&x.clientId===u).map(x=>x.tokens));this.d=this.h.add(new RN({onDidChange:m,set:w=>o.$setSessionsForDynamicAuthProvider(p,this.clientId,w)},f,this.g)),this.h.add(this.d.onDidChangeSessions(w=>this.c.fire(w))),this.f=[{label:d(2890,null),handler:(w,x,E)=>this.r(w,x,E)}]}async getSessions(t,i){if(this.g.info(`Getting sessions for scopes: ${t?.join(" ")??"all"}`),!t)return this.d.sessions;const r=[...t].sort(),s=t.join(" ");let n=this.d.sessions.filter(o=>Li([...o.scopes].sort(),r));if(this.g.info(`Found ${n.length} sessions for scopes: ${s}`),n.length){const o=[],a=[],c=new Map(this.d.tokens.map(l=>[l.access_token,l]));for(const l of n){const u=c.get(l.accessToken);if(u&&u.expires_in){const h=Date.now(),f=u.expires_in*1e3;if(h>u.created_at+f-5*60*1e3){if(this.g.info(`Token for session ${l.id} is about to expire, refreshing...`),a.push(u),!u.refresh_token){this.g.warn(`No refresh token available for scopes ${l.scopes.join(" ")}. Throwing away token.`);continue}try{const p=await this.x(u.refresh_token);p.scope!==s&&(this.g.warn(`Token scopes '${p.scope}' do not match requested scopes '${s}'. Overwriting token with what was requested...`),p.scope=s),this.g.info(`Successfully created a new token for scopes ${l.scopes.join(" ")}.`),o.push(p)}catch(p){this.g.error(`Failed to refresh token: ${p}`)}}}}return(o.length||a.length)&&(this.d.update({added:o,removed:a}),n=this.d.sessions.filter(l=>Li([...l.scopes].sort(),r))),this.g.info(`Found ${n.length} sessions for scopes: ${s}`),n}return[]}async createSession(t,i){this.g.info(`Creating session for scopes: ${t.join(" ")}`);let r;for(let n=0;n<this.f.length;n++){const{handler:o}=this.f[n];try{if(r=await this.m.withProgressFromSource({label:this.label,id:this.id},{location:js.Notification,title:d(2891,null,this.label),cancellable:!0},(a,c)=>o(t,a,c)),r)break}catch(a){const c=this.f[n+1]?.label;if(!c)break;const l=yr(a)?d(2892,null,this.label,c):d(2893,null,this.label,c);if(!await this.n.$showContinueNotification(l))throw new Ri;this.g.error(`Failed to create token via flow '${c}': ${a}`)}}if(!r)throw new Error("Failed to create authentication token");r.scope!==t.join(" ")&&(this.g.warn(`Token scopes '${r.scope}' do not match requested scopes '${t.join(" ")}'. Overwriting token with what was requested...`),r.scope=t.join(" ")),this.d.update({added:[{...r,created_at:Date.now()}],removed:[]});const s=this.d.sessions.find(n=>n.accessToken===r.access_token);return this.g.info(`Created session for scopes: ${r.scope}`),s}async removeSession(t){this.g.info(`Removing session with id: ${t}`);const i=this.d.sessions.find(s=>s.id===t);if(!i){this.g.error(`Session with id ${t} not found`);return}const r=this.d.tokens.find(s=>s.access_token===i.accessToken);if(!r){this.g.error(`Failed to retrieve token for removed session: ${i.id}`);return}this.d.update({added:[],removed:[r]}),this.g.info(`Removed token for session: ${i.id} with scopes: ${i.scopes.join(" ")}`)}dispose(){this.h.dispose()}async r(t,i,r){const s=this.s(64),n=await this.u(s),o=this.s(32),a=y.parse(`${this.l.environment.appUriScheme}://dynamicauthprovider/${this.authorizationServer.authority}/authorize?nonce=${o}`);let c;try{c=await this.k.createAppUri(a)}catch(x){throw new Error(`Failed to create external URI: ${x}`)}const l=new URL(this.o.authorization_endpoint);l.searchParams.append("client_id",this.clientId),l.searchParams.append("response_type","code"),l.searchParams.append("state",c.toString()),l.searchParams.append("code_challenge",n),l.searchParams.append("code_challenge_method","S256");const u=t.join(" ");u&&l.searchParams.append("scope",u),this.q?.resource&&l.searchParams.append("resource",this.q.resource);const h="https://vscode.dev/redirect";l.searchParams.append("redirect_uri",h);const f=this.v(a);if(this.g.info(`Opening authorization URL for scopes: ${u}`),this.g.trace(`Authorization URL: ${l.toString()}`),!await this.j.openUri(l.toString(),{}))throw new Ri;i.report({message:d(2894,null)});let m;try{m=(await Bg(f,r)).code}catch(x){throw yr(x)?(this.g.info("Authorization code request was cancelled by the user."),x):(this.g.error(`Failed to receive authorization code: ${x}`),new Error(`Failed to receive authorization code: ${x}`))}return this.g.info(`Authorization code received for scopes: ${u}`),await this.w(m,s,h)}s(t){const i=new Uint8Array(t);return crypto.getRandomValues(i),Array.from(i).map(r=>r.toString(16).padStart(2,"0")).join("").substring(0,t)}async u(t){const r=new TextEncoder().encode(t),s=await crypto.subtle.digest("SHA-256",r);return Fu(ae.wrap(new Uint8Array(s)),!1,!1).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async v(t){const i=await this.n.$waitForUriHandler(t),r=/[?&]code=([^&]+)/.exec(i.query||"");if(!r||r.length<2)throw new Error("Authentication failed: No authorization code received");return{code:r[1]}}async w(t,i,r){if(!this.o.token_endpoint)throw new Error("Token endpoint not available in server metadata");const s=new URLSearchParams;s.append("client_id",this.clientId),s.append("grant_type","authorization_code"),s.append("code",t),s.append("redirect_uri",r),s.append("code_verifier",i);const n=await fetch(this.o.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:s.toString()});if(!n.ok){const a=await n.text();throw new Error(`Token exchange failed: ${n.status} ${n.statusText} - ${a}`)}const o=await n.json();if(pE(o))return o;throw new Error(`Invalid authorization token response: ${JSON.stringify(o)}`)}async x(t){if(!this.o.token_endpoint)throw new Error("Token endpoint not available in server metadata");const i=new URLSearchParams;i.append("client_id",this.clientId),i.append("grant_type","refresh_token"),i.append("refresh_token",t);const r=await fetch(this.o.token_endpoint,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json"},body:i.toString()});if(!r.ok){const n=await r.text();throw new Error(`Token exchange failed: ${r.status} ${r.statusText} - ${n}`)}const s=await r.json();if(pE(s))return{...s,created_at:Date.now()};throw new Error(`Invalid authorization token response: ${JSON.stringify(s)}`)}};B0=__decorate([__param(0,Xf),__param(1,Kf),__param(2,It),__param(3,ep),__param(4,bn)],B0);var RN=class{constructor(e,t,i){this.h=e,this.j=i,this.f=new P,this.onDidChangeSessions=this.f.event,this.g=new ue,this.c=Sh("tokens",t),this.d=d7({equalsFn:(r,s)=>Li(r,s,(n,o)=>n.accessToken===o.accessToken)},r=>this.c.read(r).map(s=>this.l(s))),this.g.add(this.k()),this.g.add(this.h.onDidChange(r=>this.c.set(r,void 0)))}get tokens(){return this.c.get()}get sessions(){return this.d.get()}dispose(){this.g.dispose()}update({added:e,removed:t}){this.j.trace(`Updating tokens: added ${e.length}, removed ${t.length}`);const i=[...this.c.get()];for(const r of t){const s=i.findIndex(n=>n.access_token===r.access_token);s!==-1&&i.splice(s,1)}for(const r of e){const s=i.findIndex(n=>n.access_token===r.access_token);s===-1?i.push(r):i[s]=r}(e.length||t.length)&&(this.c.set(i,void 0),this.h.set(i)),this.j.trace(`Tokens updated: ${i.length} tokens stored.`)}k(){let e=[];return u7(t=>{this.j.trace("Checking for session changes...");const i=this.d.read(t);if(e===i){this.j.trace("No session changes detected.");return}if(!i||i.length===0){this.j.trace("All sessions removed."),e.length>0&&(this.f.fire({added:[],removed:e,changed:[]}),e=[]);return}const r=[],s=[];for(const n of i)e.some(a=>a.accessToken===n.accessToken)||r.push(n);for(const n of e)i.some(a=>a.accessToken===n.accessToken)||s.push(n);(r.length>0||s.length>0)&&(this.j.trace(`Sessions changed: added ${r.length}, removed ${s.length}`),this.f.fire({added:r,removed:s,changed:[]})),e=i})}l(e){let t;if(e.id_token)try{t=mE(e.id_token)}catch{}if(!t)try{t=mE(e.access_token)}catch{}const i=e.scope?e.scope.split(" "):t?.scope?t.scope.split(" "):[];return{id:Gg(e.access_token,0).toString(),accessToken:e.access_token,account:{id:t?.sub||"unknown",label:t?.preferred_username||t?.name||t?.email||"MCP"},scopes:i,idToken:e.id_token}}},LN={label:d(5711,null),order:Number.MAX_SAFE_INTEGER},tp,H0=B("IExtHostLanguageModels"),bE=class{constructor(e,t){this.option=e,this.stream=new Hg,this.stream=t??new Hg}},NN=class{constructor(){this.a=new Map,this.b=new Hg,this.c=!1;const e=this;this.apiObject={get stream(){return e.b.asyncIterable},get text(){return hc.map(e.b.asyncIterable,t=>{if(t instanceof ut)return t.value}).coalesce()}}}*d(){if(this.a.size>0)for(const[,e]of this.a)yield e.stream;else yield this.b}handleFragment(e){if(this.c)return;const t=new Map;for(const i of Ot.wrap(e)){let r;i.part.type==="text"?r=new ut(i.part.value):i.part.type==="data"?r=new ut(""):r=new Jn(i.part.toolCallId,i.part.name,i.part.parameters);const s=t.get(i.index);s?s.push(r):t.set(i.index,[r])}for(const[i,r]of t){let s=this.a.get(i);s||(this.a.size===0?s=new bE(i,this.b):s=new bE(i),this.a.set(i,s)),s.stream.emitMany(r)}}reject(e){this.c=!0;for(const t of this.d())t.reject(e)}resolve(){this.c=!0;for(const e of this.d())e.resolve()}},z0=class{static{tp=this}static{this.a=1}constructor(t,i,r){this.k=i,this.l=r,this.c=new P,this.d=new P,this.onDidChangeProviders=this.d.event,this.f=new Map,this.g=new Map,this.h=new qr,this.i=new Map,this.j=new Map,this.s=new Set,this.b=t.getProxy(J.MainThreadLanguageModels)}dispose(){this.c.dispose(),this.d.dispose()}registerLanguageModel(t,i,r,s){const n=tp.a++;this.f.set(n,{extension:t.identifier,provider:r,languageModelId:i});let o;s.auth&&(o={providerLabel:t.displayName||t.name,accountLabel:typeof s.auth=="object"?s.auth.label:void 0}),this.b.$registerLanguageModelProvider(n,`${je.toKey(t.identifier)}/${i}`,{extension:t.identifier,id:i,vendor:s.vendor??je.toKey(t.identifier),name:s.name??"",family:s.family??"",cost:s.cost,description:s.description,version:s.version,maxInputTokens:s.maxInputTokens,maxOutputTokens:s.maxOutputTokens,auth:o,targetExtensions:s.extensions,isDefault:s.isDefault,isUserSelectable:s.isUserSelectable,modelPickerCategory:s.category??LN,capabilities:s.capabilities});const a=r.onDidReceiveLanguageModelResponse2?.(({extensionId:c,participant:l,tokenCount:u})=>{this.b.$whenLanguageModelChatRequestMade(i,new je(c),l,u)});return oe(()=>{this.f.delete(n),this.b.$unregisterProvider(n),a?.dispose()})}async $startChatRequest(t,i,r,s,n,o){const a=this.f.get(t);if(!a)throw new Error("Provider not found");const c=[],l=()=>{c.length>0&&(this.b.$reportResponsePart(i,c),c.length=0)},u=new mn(l,30),h=m=>{c.push(m)>30?(l(),u.cancel()):u.schedule()},f=new T0(async m=>{if(o.isCancellationRequested){this.k.warn(`[CHAT](${a.extension.value}) CANNOT send progress because the REQUEST IS CANCELLED`);return}let w;if(m.part instanceof Jn?w={type:"tool_use",name:m.part.name,parameters:m.part.input,toolCallId:m.part.callId}:m.part instanceof ut?w={type:"text",value:m.part.value}:m.part instanceof es&&(w={type:"data",value:{mimeType:m.part.mimeType,data:ae.wrap(m.part.data)}}),!w){this.k.warn(`[CHAT](${a.extension.value}) UNKNOWN part ${JSON.stringify(m)}`);return}h({index:m.index,part:w})});let p;try{p=a.provider.provideLanguageModelResponse(s.value.map(Pl.to),n,je.toKey(r),f,o)}catch(m){throw m}Promise.resolve(p).then(()=>{l(),this.b.$reportResponseDone(i,void 0)},m=>{l(),this.b.$reportResponseDone(i,mo(m))})}$provideTokenLength(t,i,r){const s=this.f.get(t);return s?Promise.resolve(s.provider.provideTokenCount(i,r)):Promise.resolve(0)}$acceptChatModelMetadata(t){if(t.added)for(const{identifier:i,metadata:r}of t.added)this.g.set(i,{metadata:r,apiObjects:new qr});if(t.removed)for(const i of t.removed){this.g.delete(i);for(const[r,s]of this.i)s.languageModelId===i&&(s.res.reject(new Ri),this.i.delete(r))}t.added?.forEach(i=>this.q(i.metadata)),this.d.fire(void 0)}async getDefaultLanguageModel(t){const i=Ot.find(this.g.entries(),([,r])=>!!r.metadata.isDefault)?.[0];if(i)return this.getLanguageModelByIdentifier(t,i)}async getLanguageModelByIdentifier(t,i){const r=this.g.get(i);if(!r)return;this.p(t.identifier,r.metadata)&&await this.q(r.metadata);let s=r.apiObjects.get(t.identifier);if(!s){const n=this;s={id:r.metadata.id,vendor:r.metadata.vendor,family:r.metadata.family,version:r.metadata.version,name:r.metadata.name,capabilities:{supportsImageToText:r.metadata.capabilities?.vision??!1,supportsToolCalling:r.metadata.capabilities?.toolCalling??!1},maxInputTokens:r.metadata.maxInputTokens,countTokens(o,a){if(!n.g.has(i))throw is.NotFound(i);return n.r(i,o,a??et.None)},sendRequest(o,a,c){if(!n.g.has(i))throw is.NotFound(i);return n.m(t,i,o,a??{},c??et.None)}},Object.freeze(s),r.apiObjects.set(t.identifier,s)}return s}async selectLanguageModels(t,i){const r=await this.b.$selectChatModels({...i,extension:t.identifier}),s=[];for(const n of r){const o=await this.getLanguageModelByIdentifier(t,n);o&&s.push(o)}return s}async m(t,i,r,s,n){const o=this.n(t,r),a=t.identifier,c=this.g.get(i)?.metadata;if(!c||!this.g.has(i))throw is.NotFound(`Language model '${i}' is unknown.`);if(this.p(a,c)&&(!await this.o(t,{identifier:c.extension,displayName:c.auth.providerLabel},s.justification,!1)||!this.h.get(a)?.has(c.extension)))throw is.NoPermissions(`Language model '${i}' cannot be used by '${a.value}'.`);const l=Math.random()*1e6|0,u=new NN;this.i.set(l,{languageModelId:i,res:u});try{await this.b.$tryStartChatRequest(a,i,l,new ni(o),s,n)}catch(h){throw this.i.delete(l),is.tryDeserialize(h)??h}return u.apiObject}n(t,i){const r=[];for(const s of i)s.role===Ii.System&&L(t,"languageModelSystem"),r.push(Pl.from(s));return r}async $acceptResponsePart(t,i){const r=this.i.get(t);r&&r.res.handleFragment(i)}async $acceptResponseDone(t,i){const r=this.i.get(t);r&&(this.i.delete(t),i?r.res.reject(is.tryDeserialize(i)??Yb(i)):r.res.resolve())}async o(t,i,r,s){const n=dE+i.identifier.value;if(await this.l.getSession(t,n,[],{silent:!0}))return this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0;if(s)return!1;try{const a=r?d(2900,null,i.displayName,r):void 0;return await this.l.getSession(t,n,[],{forceNewSession:{detail:a}}),this.$updateModelAccesslist([{from:t.identifier,to:i.identifier,enabled:!0}]),!0}catch{return!1}}p(t,i){return!!i.auth&&!je.equals(i.extension,t)}async q(t){if(t.auth)for(const i of this.s)try{await this.o(i,{identifier:t.extension,displayName:""},void 0,!0)}catch(r){this.k.error("Fake Auth request failed"),this.k.error(r)}}async r(t,i,r){if(!this.g.get(t))throw is.NotFound(`Language model '${t}' is unknown.`);const n=Ot.find(this.f.values(),o=>o.languageModelId===t);return n?n.provider.provideTokenCount(i,r):this.b.$countTokens(t,typeof i=="string"?i:Pl.from(i),r)}$updateModelAccesslist(t){const i=new Array;for(const{from:r,to:s,enabled:n}of t){const o=this.h.get(r)??new vn;if(o.has(s)!==n){n?o.add(s):o.delete(s),this.h.set(r,o);const c={from:r,to:s};i.push(c),this.c.fire(c)}}}createLanguageModelAccessInformation(t){this.s.add(t);const i=this,r=lt.signal(lt.filter(this.c.event,n=>je.equals(n.from,t.identifier))),s=lt.signal(this.d.event);return{get onDidChange(){return lt.any(r,s)},canSendRequest(n){let o;e:for(const[c,l]of i.g)for(const u of l.apiObjects.values())if(u===n){o=l.metadata;break e}if(!o)return;if(!i.p(t.identifier,o))return!0;const a=i.h.get(t.identifier);if(a)return a.has(o.extension)}}}fileIsIgnored(t,i,r=et.None){return L(t,"chatParticipantAdditions"),this.b.$fileIsIgnored(i,r)}async $isFileIgnored(t,i,r){const s=this.j.get(t);if(!s)throw new Error("Unknown LanguageModelIgnoredFileProvider");return await s.provideFileIgnored(y.revive(i),r)??!1}registerIgnoredFileProvider(t,i){L(t,"chatParticipantPrivate");const r=tp.a++;return this.b.$registerFileIgnoreProvider(r),this.j.set(r,i),oe(()=>{this.b.$unregisterFileIgnoreProvider(r),this.j.delete(r)})}};z0=tp=__decorate([__param(0,Fe),__param(1,We),__param(2,U0)],z0);function _l(e,t=ei){return yD(e,t)?e.charAt(0).toUpperCase()+e.slice(1):e}function MN(e,t){return e.replace(/^~($|\/|\\)/,`${t}$1`)}var yE;(function(e){e[e.TEXT=0]="TEXT",e[e.VARIABLE=1]="VARIABLE",e[e.SEPARATOR=2]="SEPARATOR"})(yE||(yE={}));var FN=60,ON=FN*60,_0=ON*24,OV=_0*7,UV=_0*30,jV=_0*365;function UN(e){return e.getFullYear()+"-"+String(e.getMonth()+1).padStart(2,"0")+"-"+String(e.getDate()).padStart(2,"0")+"T"+String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")+"."+(e.getMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"}var ip={DateTimeFormat(e,t){return new _t(()=>{try{return new Intl.DateTimeFormat(e,t)}catch{return new Intl.DateTimeFormat(void 0,t)}})},Collator(e,t){return new _t(()=>{try{return new Intl.Collator(e,t)}catch{return new Intl.Collator(void 0,t)}})},Segmenter(e,t){return new _t(()=>{try{return new Intl.Segmenter(e,t)}catch{return new Intl.Segmenter(void 0,t)}})},Locale(e,t){return new _t(()=>{try{return new Intl.Locale(e,t)}catch{return new Intl.Locale(xs,t)}})},NumberFormat(e,t){return new _t(()=>{try{return new Intl.NumberFormat(e,t)}catch{return new Intl.NumberFormat(void 0,t)}})}},xE;(function(e){e[e.MAX_SAFE_SMALL_INTEGER=1073741824]="MAX_SAFE_SMALL_INTEGER",e[e.MIN_SAFE_SMALL_INTEGER=-1073741824]="MIN_SAFE_SMALL_INTEGER",e[e.MAX_UINT_8=255]="MAX_UINT_8",e[e.MAX_UINT_16=65535]="MAX_UINT_16",e[e.MAX_UINT_32=4294967295]="MAX_UINT_32",e[e.UNICODE_SUPPLEMENTARY_PLANE_BEGIN=65536]="UNICODE_SUPPLEMENTARY_PLANE_BEGIN"})(xE||(xE={}));function EE(e){return e<0?0:e>255?255:e|0}function Fa(e){return e<0?0:e>4294967295?4294967295:e|0}var SE=class EC{constructor(t){const i=EE(t);this.c=i,this.a=EC.d(i),this.b=new Map}static d(t){const i=new Uint8Array(256);return i.fill(t),i}set(t,i){const r=EE(i);t>=0&&t<256?this.a[t]=r:this.b.set(t,r)}get(t){return t>=0&&t<256?this.a[t]:this.b.get(t)||this.c}clear(){this.a.fill(this.c),this.b.clear()}},kE;(function(e){e[e.False=0]="False",e[e.True=1]="True"})(kE||(kE={}));var $E;(function(e){e[e.Regular=0]="Regular",e[e.Whitespace=1]="Whitespace",e[e.WordSeparator=2]="WordSeparator"})($E||($E={}));var jN=class extends SE{constructor(e,t){super(0),this.e=null,this.f=null,this.g=[],this.intlSegmenterLocales=t,this.intlSegmenterLocales.length>0?this.e=ip.Segmenter(this.intlSegmenterLocales,{granularity:"word"}):this.e=null;for(let i=0,r=e.length;i<r;i++)this.set(e.charCodeAt(i),2);this.set(32,1),this.set(9,1)}findPrevIntlWordBeforeOrAtOffset(e,t){let i=null;for(const r of this.h(e)){if(r.index>t)break;i=r}return i}findNextIntlWordAtOrAfterOffset(e,t){for(const i of this.h(e))if(!(i.index<t))return i;return null}h(e){return this.e?this.f===e?this.g:(this.f=e,this.g=this.j(this.e.value.segment(e)),this.g):[]}j(e){const t=[];for(const i of e)this.k(i)&&t.push(i);return t}k(e){return!!e.isWordLike}},CE=new dg(10);function BN(e,t){const i=`${e}/${t.join(",")}`;let r=CE.get(i);return r||(r=new jN(e,t),CE.set(i,r)),r}var W0;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=4]="Right",e[e.Full=7]="Full"})(W0||(W0={}));var IE;(function(e){e[e.Left=1]="Left",e[e.Center=2]="Center",e[e.Right=3]="Right"})(IE||(IE={}));var DE;(function(e){e[e.Inline=1]="Inline",e[e.Gutter=2]="Gutter"})(DE||(DE={}));var PE;(function(e){e[e.Normal=1]="Normal",e[e.Underlined=2]="Underlined"})(PE||(PE={}));var AE;(function(e){e[e.Both=0]="Both",e[e.Right=1]="Right",e[e.Left=2]="Left",e[e.None=3]="None"})(AE||(AE={}));var TE;(function(e){e[e.TextDefined=0]="TextDefined",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(TE||(TE={}));var RE;(function(e){e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(RE||(RE={}));var LE;(function(e){e[e.LF=0]="LF",e[e.CRLF=1]="CRLF"})(LE||(LE={}));var V0=class{constructor(e,t){this._findMatchBrand=void 0,this.range=e,this.matches=t}},NE;(function(e){e[e.AlwaysGrowsWhenTypingAtEdges=0]="AlwaysGrowsWhenTypingAtEdges",e[e.NeverGrowsWhenTypingAtEdges=1]="NeverGrowsWhenTypingAtEdges",e[e.GrowsOnlyWhenTypingBefore=2]="GrowsOnlyWhenTypingBefore",e[e.GrowsOnlyWhenTypingAfter=3]="GrowsOnlyWhenTypingAfter"})(NE||(NE={}));var ME;(function(e){e[e.Left=0]="Left",e[e.Right=1]="Right",e[e.None=2]="None",e[e.LeftOfInjectedText=3]="LeftOfInjectedText",e[e.RightOfInjectedText=4]="RightOfInjectedText"})(ME||(ME={}));var FE;(function(e){e[e.FIRST_LINE_DETECTION_LENGTH_LIMIT=1e3]="FIRST_LINE_DETECTION_LENGTH_LIMIT"})(FE||(FE={}));var HN=class{constructor(e,t,i){this.regex=e,this.wordSeparators=t,this.simpleSearch=i}},zN=class{constructor(e,t,i){this.reverseEdits=e,this.changes=t,this.trimAutoWhitespaceLineNumbers=i}},OE=class{constructor(e,t,i,r){this.searchString=e,this.isRegex=t,this.matchCase=i,this.wordSeparators=r}parseSearchRequest(){if(this.searchString==="")return null;let e;this.isRegex?e=UE(this.searchString):e=this.searchString.indexOf(`
`)>=0;let t=null;try{t=X3(this.searchString,this.isRegex,{matchCase:this.matchCase,wholeWord:!1,multiline:e,global:!0,unicode:!0})}catch{return null}if(!t)return null;let i=!this.isRegex&&!e;return i&&this.searchString.toLowerCase()!==this.searchString.toUpperCase()&&(i=this.matchCase),new HN(t,this.wordSeparators?BN(this.wordSeparators,[]):null,i?this.searchString:null)}};function UE(e){if(!e||e.length===0)return!1;for(let t=0,i=e.length;t<i;t++){const r=e.charCodeAt(t);if(r===10)return!0;if(r===92){if(t++,t>=i)break;const s=e.charCodeAt(t);if(s===110||s===114||s===87)return!0}}return!1}function jE(e,t,i){if(!i)return new V0(e,null);const r=[];for(let s=0,n=t.length;s<n;s++)r[s]=t[s];return new V0(e,r)}function _N(e,t,i,r,s){if(r===0)return!0;const n=t.charCodeAt(r-1);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r);if(e.get(o)!==0)return!0}return!1}function WN(e,t,i,r,s){if(r+s===i)return!0;const n=t.charCodeAt(r+s);if(e.get(n)!==0||n===13||n===10)return!0;if(s>0){const o=t.charCodeAt(r+s-1);if(e.get(o)!==0)return!0}return!1}function BE(e,t,i,r,s){return _N(e,t,i,r,s)&&WN(e,t,i,r,s)}var VN=class{constructor(e,t){this._wordSeparators=e,this.a=t,this.b=-1,this.c=0}reset(e){this.a.lastIndex=e,this.b=-1,this.c=0}next(e){const t=e.length;let i;do{if(this.b+this.c===t||(i=this.a.exec(e),!i))return null;const r=i.index,s=i[0].length;if(r===this.b&&s===this.c){if(s===0){g4(e,t,this.a.lastIndex)>65535?this.a.lastIndex+=2:this.a.lastIndex+=1;continue}return null}if(this.b=r,this.c=s,!this._wordSeparators||BE(this._wordSeparators,e,t,r,s))return i}while(i);return null}};function HE(e){return e.scheme!==V.file&&e.scheme!==V.vscodeRemote}function qN(e){if(e.folders.length)return e.folders.every(t=>HE(t.uri))?e.folders[0].uri:void 0;if(e.configuration&&HE(e.configuration))return e.configuration}function GN(e){return qN(e)?.scheme}var JN=qm,zE=B("remoteAgentService"),BV=new class{constructor(){this.maxSampleCount=5,this.sampleDelay=2e3,this.initial=[],this.maxInitialCount=3,this.average=[],this.maxAverageCount=100,this.highLatencyMultiple=2,this.highLatencyMinThreshold=500,this.highLatencyMaxThreshold=1500,this.lastMeasurement=void 0}get latency(){return this.lastMeasurement}async measure(e){let t=1/0;for(let r=0;r<this.maxSampleCount;r++){const s=await e.getRoundTripTime();if(s===void 0)return;t=Math.min(t,s/2),await Vi(this.sampleDelay)}this.average.push(t),this.average.length>this.maxAverageCount&&this.average.shift();let i;return this.initial.length<this.maxInitialCount?this.initial.push(t):i=this.initial.reduce((r,s)=>r+s,0)/this.initial.length,this.lastMeasurement={initial:i,current:t,average:this.average.reduce((r,s)=>r+s,0)/this.average.length,high:typeof i>"u"?!1:t>this.highLatencyMaxThreshold||t>this.highLatencyMinThreshold&&t>i*this.highLatencyMultiple},this.lastMeasurement}},q0,ZN=B("pathService"),_E=q0=class{constructor(t,i,r,s){this.d=t,this.e=i,this.f=r,this.g=s,this.a=(async()=>(await this.e.getEnvironment())?.os||oc)(),this.b=(async()=>{const n=await this.e.getEnvironment();return this.c=n?.userHome??t})()}hasValidBasename(t,i,r){return typeof i=="string"||typeof i>"u"?this.a.then(s=>this.h(t,s,i)):this.h(t,i,r)}h(t,i,r){return t.scheme===V.file||t.scheme===V.vscodeRemote?bD(r??tr(t),i===1):!0}get defaultUriScheme(){return q0.findDefaultUriScheme(this.f,this.g)}static findDefaultUriScheme(t,i){if(t.remoteAuthority)return V.vscodeRemote;const r=GN(i.getWorkspace());if(r)return r;const s=i.getWorkspace().folders[0];if(s)return s.uri.scheme;const n=i.getWorkspace().configuration;return n?n.scheme:V.file}userHome(t){return t?.preferLocal?this.d:this.b}get resolvedUserHome(){return this.c}get path(){return this.a.then(t=>t===1?xt:Me)}async fileURI(t){let i="";if(await this.a===1&&(t=t.replace(/\\/g,"/")),t[0]==="/"&&t[1]==="/"){const s=t.indexOf("/",2);s===-1?(i=t.substring(2),t="/"):(i=t.substring(2,s),t=t.substring(s)||"/")}return y.from({scheme:V.file,authority:i,path:t,query:"",fragment:""})}};_E=q0=__decorate([__param(1,zE),__param(2,JN),__param(3,am)],_E);function YN(e){return typeof e=="object"&&"uri"in e&&"pattern"in e}var WE=class{constructor(t,i,r,s,n,o){this.a=t,this.b=i,this.c=r,this.d=s,this.f=n,this.g=o}aiText(t,i,r={}){return{...this.j(i?.map(cm),r),type:3,contentPattern:t}}text(t,i,r={}){t=this.h(t,r);const s=this.a.getValue(),n=i&&i.some(a=>!this.a.getValue({resource:a}).search.useRipgrep);return{...this.j(i?.map(cm),r),type:2,contentPattern:t,previewOptions:r.previewOptions,maxFileSize:r.maxFileSize,usePCRE2:s.search.usePCRE2||n||!1,surroundingContext:r.surroundingContext,userDisabledExcludesAndIgnoreFiles:r.disregardExcludeSettings&&r.disregardIgnoreFiles}}h(t,i){const r=this.a.getValue();t.isRegExp&&(t.pattern=t.pattern.replace(/\r?\n/g,"\\n"));const s={...t,wordSeparators:r.editor.wordSeparators};return this.l(t,i)&&(s.isCaseSensitive=!0),this.m(t)&&(s.isMultiline=!0),i.notebookSearchConfig?.includeMarkupInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownInput=i.notebookSearchConfig.includeMarkupInput),i.notebookSearchConfig?.includeMarkupPreview&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookMarkdownPreview=i.notebookSearchConfig.includeMarkupPreview),i.notebookSearchConfig?.includeCodeInput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellInput=i.notebookSearchConfig.includeCodeInput),i.notebookSearchConfig?.includeOutput&&(s.notebookInfo||(s.notebookInfo={}),s.notebookInfo.isInNotebookCellOutput=i.notebookSearchConfig.includeOutput),s}file(t,i={}){return{...this.j(t,i),type:1,filePattern:i.filePattern?i.filePattern.trim():i.filePattern,exists:i.exists,sortByScore:i.sortByScore,cacheKey:i.cacheKey,shouldGlobMatchFilePattern:i.shouldGlobSearch}}i(t,i){if(!t)return{};if(Array.isArray(t)){if(t=t.filter(r=>r.length>0).map(rp),!t.length)return{}}else t=rp(t);return i?this.parseSearchPaths(t):{pattern:G0(...Array.isArray(t)?t:[t])}}j(t=[],i={}){let r=Array.isArray(i.excludePattern)?i.excludePattern.map(u=>u.pattern).flat():i.excludePattern;r=r?.length===1?r[0]:r;const s=this.i(i.includePattern,i.expandPatterns),n=this.i(r,i.expandPatterns),o=t.length>1,a=(s.searchPaths&&s.searchPaths.length?s.searchPaths.map(u=>this.t(u,i,n)):t.map(u=>this.u(u,i,n,o))).filter(u=>!!u),c={_reason:i._reason,folderQueries:a,usingSearchPaths:!!(s.searchPaths&&s.searchPaths.length),extraFileResources:i.extraFileResources,excludePattern:n.pattern,includePattern:s.pattern,onlyOpenEditors:i.onlyOpenEditors,maxResults:i.maxResults,onlyFileScheme:i.onlyFileScheme};if(i.onlyOpenEditors){const u=vt(this.c.groups.flatMap(p=>p.editors.map(m=>m.resource)));this.d.trace("QueryBuilder#commonQuery - openEditor URIs",JSON.stringify(u));const h=u.filter(p=>Dx(c,p.fsPath)),f=this.k(h);return this.d.trace("QueryBuilder#commonQuery - openEditor Query",JSON.stringify(f)),{...c,...f}}const l=i.extraFileResources&&i.extraFileResources.filter(u=>Dx(c,u.fsPath));return c.extraFileResources=l&&l.length?l:void 0,c}k(t){const i=[],r=new Ft,s={};let n=!1;return t.forEach(o=>{if(o.scheme===V.walkThrough)return;if(RD(o)){const c=this.b.getWorkspaceFolder(o)?.uri??this.g.extUri.dirname(o);let l=r.get(c);l||(n=!0,l={folder:c,includePattern:{}},i.push(l),r.set(c,l));const u=cc(c.fsPath,o.fsPath);wo(l.includePattern)[u.replace(/\\/g,"/")]=!0}else o.fsPath&&(n=!0,s[o.fsPath]=!0)}),{folderQueries:i,includePattern:s,usingSearchPaths:!0,excludePattern:n?void 0:{"**/*":!0}}}l(t,i){if(i.isSmartCase){if(t.isRegExp){if(b4(t.pattern,!0))return!0}else if(b4(t.pattern))return!0}return!!t.isCaseSensitive}m(t){return t.isMultiline||t.isRegExp&&UE(t.pattern)||t.pattern.indexOf(`
`)>=0?!0:!!t.isMultiline}parseSearchPaths(t){const i=h=>Wu(h)||/^\.\.?([\/\\]|$)/.test(h),s=(Array.isArray(t)?t:XN(t)).map(h=>{const f=this.f.resolvedUserHome;return f?MN(h,f.scheme===V.file?f.fsPath:f.path):h}),n=iy(s,h=>i(h)?"searchPaths":"exprSegments"),o=(n.exprSegments||[]).map(h=>Tg(h,"/")).map(h=>Tg(h,"\\")).map(h=>(h[0]==="."&&(h="*"+h),KN(h))),a={},c=this.o(n.searchPaths||[]);c&&c.length&&(a.searchPaths=c);const l=o.flat(),u=G0(...l);return u&&(a.pattern=u),a}n(t,i){return i.disregardExcludeSettings?void 0:wL(t,!i.disregardSearchExcludeSettings)}o(t){if(!t||!t.length)return[];const i=t.flatMap(s=>{let{pathPortion:n,globPortion:o}=QN(s);return o&&(o=J0(o)),this.q(n).flatMap(c=>this.r(c,o))}),r=new Map;return i.forEach(s=>{const n=s.searchPath.toString(),o=r.get(n);o?s.pattern&&(o.pattern=o.pattern||{},o.pattern[s.pattern]=!0):r.set(n,{searchPath:s.searchPath,pattern:s.pattern?G0(s.pattern):void 0})}),Array.from(r.values())}q(t){if(Wu(t)){const i=this.b.getWorkspace().folders;return i[0]&&i[0].uri.scheme!==V.file?[{searchPath:i[0].uri.with({path:t})}]:[{searchPath:y.file(ko(t))}]}if(this.b.getWorkbenchState()===2){const i=this.b.getWorkspace().folders[0].uri;if(t=rp(t),t.startsWith("../")||t===".."){const s=Me.resolve(i.path,t);return[{searchPath:i.with({path:s})}]}const r=J0(t);return[{searchPath:i,pattern:r}]}else{if(t==="./"||t===".\\")return[];{const i=t.replace(/^\.[\/\\]/,""),s=this.b.getWorkspace().folders.map(n=>{const o=i.match(new RegExp(`^${pn(n.name)}(?:/(.*)|$)`));return o?{match:o,folder:n}:null}).filter(Mi);if(s.length)return s.map(n=>{const o=n.match[1];return{searchPath:n.folder.uri,pattern:o&&J0(o)}});{const n=t.match(/\.[\/\\](.+)[\/\\]?/),o=n?n[1]:t,a=d(14353,null,o);throw new Error(a)}}}}r(t,i){const r=t.pattern&&i?`${t.pattern}/${i}`:t.pattern||i,s=[{searchPath:t.searchPath,pattern:r}];return r&&!r.endsWith("**")&&s.push({searchPath:t.searchPath,pattern:r+"/**"}),s}t(t,i,r){const s=this.u(cm(t.searchPath),i,r,!1);return s?{...s,includePattern:t.pattern}:null}u(t,i,r,s){let n;const o=y.isUri(t)?t:t.uri;let a=i.excludePattern?.map(p=>{const m=i.excludePattern&&YN(p)?p.uri:void 0;return!m||!(y.isUri(t)&&this.g.extUri.isEqual(t,m))?m:void 0});if(a?.length||(a=[void 0]),r.searchPaths){const p=r.searchPaths.filter(m=>Io(m.searchPath,o))[0];if(p&&!p.pattern)return null;p&&(n=p.pattern)}const c=this.a.getValue({resource:o}),u={...this.n(c,i)||{},...n||{}},h=y.isUri(t)?tr(t):t.name,f=a.map(p=>Object.keys(u).length>0?{folder:p,pattern:u}:void 0).filter(p=>p);return{folder:o,folderName:s?h:void 0,excludePattern:f,fileEncoding:c.files&&c.files.encoding,disregardIgnoreFiles:typeof i.disregardIgnoreFiles=="boolean"?i.disregardIgnoreFiles:!c.search.useIgnoreFiles,disregardGlobalIgnoreFiles:typeof i.disregardGlobalIgnoreFiles=="boolean"?i.disregardGlobalIgnoreFiles:!c.search.useGlobalIgnoreFiles,disregardParentIgnoreFiles:typeof i.disregardParentIgnoreFiles=="boolean"?i.disregardParentIgnoreFiles:!c.search.useParentIgnoreFiles,ignoreSymlinks:typeof i.ignoreSymlinks=="boolean"?i.ignoreSymlinks:!c.search.followSymlinks}}};WE=__decorate([__param(0,Ph),__param(1,am),__param(2,sR),__param(3,We),__param(4,ZN),__param(5,Y7)],WE);function QN(e){const t=e.match(/[\*\{\}\(\)\[\]\?]/);if(t){const i=t.index,r=e.substr(0,i).match(/[/|\\][^/\\]*$/);if(r){let s=e.substr(0,r.index);return s.match(/[/\\]/)||(s+="/"),{pathPortion:s,globPortion:e.substr((r.index||0)+1)}}}return{pathPortion:e}}function G0(...e){return e.length?e.reduce((t,i)=>(t[i]=!0,t),Object.create(null)):void 0}function XN(e){return Um(e,",").map(t=>t.trim()).filter(t=>!!t.length)}function KN(e){return[`**/${e}/**`,`**/${e}`].map(i=>i.replace(/\*\*\/\*\*/g,"**"))}function rp(e){return e.replace(/\\/g,"/")}function J0(e){return rp(e).replace(/^\.\//,"").replace(/\/+$/g,"")}var eM=7e3;function tM(e,t){const i=t.activationEvents;if(!i)return Promise.resolve(void 0);const r=[],s=[];for(const u of i)if(/^workspaceContains:/.test(u)){const h=u.substr(18);h.indexOf("*")>=0||h.indexOf("?")>=0||e.forceUsingSearch?s.push(h):r.push(h)}if(r.length===0&&s.length===0)return Promise.resolve(void 0);const{promise:n,resolve:o}=FD(),a=u=>o({activationEvent:u}),c=Promise.all(r.map(u=>iM(e,u,a))).then(()=>{}),l=rM(e,t.identifier,s,a);return Promise.all([c,l]).then(()=>{o(void 0)}),n}async function iM(e,t,i){for(const r of e.folders)if(await e.exists(Zt(y.revive(r),t))){i(`workspaceContains:${t}`);return}}async function rM(e,t,i,r){if(i.length===0)return Promise.resolve(void 0);const s=new at,n=e.checkExists(e.folders,i,s.token),o=setTimeout(async()=>{s.cancel(),e.logService.info(`Not activating extension '${t.value}': Timed out while searching for 'workspaceContains' pattern ${i.join(",")}`)},eM);let a=!1;try{a=await n}catch(c){yr(c)||Gt(c)}s.dispose(),clearTimeout(o),a&&r(`workspaceContains:${i.join(",")}`)}var VE=class{constructor(e){this.b=new P,this.onDidChangePassword=this.b.event,this.a=e.getProxy(J.MainThreadSecretState)}async $onDidChangePassword(e){this.b.fire(e)}get(e,t){return this.a.$getPassword(e,t)}store(e,t,i){return this.a.$setPassword(e,t,i)}delete(e,t){return this.a.$deletePassword(e,t)}},Z0=B("IExtHostSecretState"),sM=class{#e;constructor(e,t){this.disposables=new ue,this.a=je.toKey(e.identifier),this.#e=t,this.onDidChange=lt.map(lt.filter(this.#e.onDidChangePassword,i=>i.extensionId===this.a),i=>({key:i.key}),this.disposables)}dispose(){this.disposables.dispose()}get(e){return this.#e.get(this.a,e)}store(e,t){return this.#e.store(this.a,e,t)}delete(e){return this.#e.delete(this.a,e)}},Y0=class{constructor(t,i,r){this.f=r,this.d=new Map,this.a=i.getProxy(J.MainThreadLocalization),this.b=t.environment.appLanguage,this.c=this.b===xs}getMessage(t,i){const{message:r,args:s,comment:n}=i;if(this.c)return h4(r,s??{});let o=r;n&&n.length>0&&(o+=`/${Array.isArray(n)?n.join(""):n}`);const a=this.d.get(t)?.contents[o];return a||this.f.warn(`Using default string since no string found in i18n bundle that has the key: ${o}`),h4(a??r,s??{})}getBundle(t){return this.d.get(t)?.contents}getBundleUri(t){return this.d.get(t)?.uri}async initializeLocalizedMessages(t){if(this.c||!t.l10n&&!t.isBuiltin||this.d.has(t.identifier.value))return;let i;const r=await this.g(t);if(!r){this.f.error(`No bundle location found for extension ${t.identifier.value}`);return}try{const s=await this.a.$fetchBundleContents(r),n=JSON.parse(s);i=t.isBuiltin?n.contents?.bundle:n}catch(s){this.f.error(`Failed to load translations for ${t.identifier.value} from ${r}: ${s.message}`);return}i&&this.d.set(t.identifier.value,{contents:i,uri:r})}async g(t){if(t.isBuiltin){const i=await this.a.$fetchBuiltInBundleUri(t.identifier.value,this.b);return y.revive(i)}return t.l10n?y.joinPath(t.extensionLocation,t.l10n,`bundle.l10n.${this.b}.json`):void 0}};Y0=__decorate([__param(0,It),__param(1,Fe),__param(2,We)],Y0);var Q0=B("IExtHostLocalizationService"),X0=B("IExtHostManagedSockets"),K0=class{constructor(t){this.b=0,this.c=null,this.d=new Map,this.a=t.getProxy(J.MainThreadManagedSockets)}setFactory(t,i){for(const r of this.d.values())r.dispose();this.c&&this.a.$unregisterSocketFactory(this.c.socketFactoryId),this.c=new nM(t,i),this.a.$registerSocketFactory(this.c.socketFactoryId)}async $openRemoteSocket(t){if(!this.c||this.c.socketFactoryId!==t)throw new Error(`No socket factory with id ${t}`);const i=++this.b,r=await this.c.makeConnection(),s=new ue;return this.d.set(i,new oM(i,r,s)),s.add(oe(()=>this.d.delete(i))),s.add(r.onDidEnd(()=>{this.a.$onDidManagedSocketEnd(i),s.dispose()})),s.add(r.onDidClose(n=>{this.a.$onDidManagedSocketClose(i,n?.stack??n?.message),s.dispose()})),s.add(r.onDidReceiveMessage(n=>this.a.$onDidManagedSocketHaveData(i,ae.wrap(n)))),i}$remoteSocketWrite(t,i){this.d.get(t)?.actual.send(i.buffer)}$remoteSocketEnd(t){const i=this.d.get(t);i&&(i.actual.end(),i.dispose())}async $remoteSocketDrain(t){await this.d.get(t)?.actual.drain?.()}};K0=__decorate([__param(0,Fe)],K0);var nM=class{constructor(e,t){this.socketFactoryId=e,this.makeConnection=t}},oM=class extends ne{constructor(e,t,i){super(),this.socketId=e,this.actual=t,this.B(i)}},ew,qE=B("IHostUtils"),tw=ew=class extends ne{constructor(t,i,r,s,n,o,a,c,l,u,h,f,p){super(),this.Y=f,this.Z=p,this.a=this.B(new P),this.onDidChangeRemoteConnectionData=this.a.event,this.R=new Map,this.W=!1,this.c=i,this.g=r,this.f=a,this.j=s,this.m=n,this.s=o,this.t=l,this.u=u,this.w=h,this.y=this.g.getProxy(J.MainThreadWorkspace),this.z=this.g.getProxy(J.MainThreadTelemetry),this.C=this.g.getProxy(J.MainThreadExtensionService),this.D=new Er,this.F=new Er,this.G=new Er,this.H=new Er,this.I=new cM(this.f.extensions.activationEvents),this.L=new Hl(this.I,this.f.extensions.allExtensions);const m=new vn(this.f.extensions.myExtensions);this.J=new Hl(this.I,ZE(this.L,m)),hn&&(this.s.info(`Creating extension host with the following global extensions: ${Oa(this.L)}`),this.s.info(`Creating extension host with the following local extensions: ${Oa(this.J)}`)),this.M=new Yx(this.g,this.s),this.N=new VE(this.g),this.O=c,this.h=this.q.add(t.createChild(new sm([m0,this.M],[Z0,this.N]))),this.P=this.B(new p0(this.J,this.L,{onExtensionActivationError:(w,x,E)=>{this.C.$onExtensionActivationError(w,mo(x),E)},actualActivateExtension:async(w,x)=>{if(Hl.isHostExtension(w,this.J,this.L))return await this.C.$activateExtension(w,x),new nN;const E=this.J.getExtensionDescription(w);return this.fb(E,x)}},this.s)),this.Q=null,this.S=Object.create(null),this.U=!1,this.X=this.f.remote.connectionData}getRemoteConnectionData(){return this.X}async initialize(){try{await this.wb(),this.D.open(),await this.j.waitForInitializeCall(),hi("code/extHost/ready"),this.F.open(),this.f.autoStart&&this.tb()}catch(t){Gt(t)}}async $(){this.O.onWillDeactivateAll();let t=[];try{t=this.J.getAllExtensionDescriptions().map(n=>n.identifier).filter(n=>this.isActivated(n)).map(n=>this.eb(n))}catch{}await Promise.all(t)}terminate(t,i=0){if(this.W)return;this.W=!0,this.s.info(`Extension host terminating: ${t}`),this.s.flush(),this.u.dispose(),this.P.dispose(),ng(s=>{this.s.error(s)}),this.g.dispose();const r=this.$();Promise.race([Vi(5e3),r]).finally(()=>{this.c.pid?this.s.info(`Extension host with pid ${this.c.pid} exiting with code ${i}`):this.s.info(`Extension host exiting with code ${i}`),this.s.flush(),this.s.dispose(),this.c.exit(i)})}isActivated(t){return this.G.isOpen()?this.P.isActivated(t):!1}async getExtension(t){const i=await this.C.$getExtension(t);return i&&{...i,identifier:new je(i.identifier.value),extensionLocation:y.revive(i.extensionLocation)}}ab(t,i){return this.P.activateByEvent(t,i)}bb(t,i){return this.P.activateById(t,i)}activateByIdWithErrors(t,i){return this.bb(t,i).then(()=>{const r=this.P.getActivatedExtension(t);if(r.activationFailed)return Promise.reject(r.activationFailedError)})}getExtensionRegistry(){return this.G.wait().then(t=>this.J)}getExtensionExports(t){if(this.G.isOpen())return this.P.getActivatedExtension(t).exports;try{return this.P.getActivatedExtension(t).exports}catch{return null}}async cb(t){if(t.scheme===V.file&&this.c.fsRealpath){const i=t.fsPath;this.R.has(i)||this.R.set(i,this.c.fsRealpath(i));const r=await this.R.get(i);return y.file(r)}return t}async getExtensionPathIndex(){return this.Q||(this.Q=this.db(this.J.getAllExtensionDescriptions()).then(t=>new aM(t))),this.Q}async db(t){const i=Ds.forUris(r=>PD.ignorePathCasing(r));return await Promise.all(t.map(async r=>{if(this.xb(r)){const s=await this.cb(r.extensionLocation);i.set(s,r)}})),i}eb(t){let i=Promise.resolve(void 0);if(!this.G.isOpen()||!this.P.isActivated(t))return i;const r=this.P.getActivatedExtension(t);if(!r)return i;try{typeof r.module.deactivate=="function"&&(i=Promise.resolve(r.module.deactivate()).then(void 0,s=>(this.s.error(s),Promise.resolve(void 0))))}catch(s){this.s.error(`An error occurred when deactivating the extension '${t.value}':`),this.s.error(s)}try{r.disposable.dispose()}catch(s){this.s.error(`An error occurred when disposing the subscriptions for extension '${t.value}':`),this.s.error(s)}return i}async fb(t,i){return this.f.remote.isRemote?this.C.$onWillActivateExtension(t.identifier):await this.C.$onWillActivateExtension(t.identifier),this.hb(t,i).then(r=>{const s=r.activationTimes;return this.C.$onDidActivateExtension(t.identifier,s.codeLoadingTime,s.activateCallTime,s.activateResolvedTime,i),this.gb(t,i,"success",s),r},r=>{throw this.gb(t,i,"failure"),r})}gb(t,i,r,s){const n=JE(t,i);this.z.$publicLog2("extensionActivationTimes",{...n,...s||{},outcome:r})}hb(t,i){const r=JE(t,i);this.z.$publicLog2("activatePlugin",r);const s=this.xb(t);if(!s)return Promise.resolve(new sN(Gf.NONE));this.s.info(`ExtensionService#_doActivateExtension ${t.identifier.value}, startup: ${i.startup}, activationEvent: '${i.activationEvent}'${t.identifier.value!==i.extensionId.value?`, root cause: ${i.extensionId.value}`:""}`),this.s.flush();const n=this.vb(t),o=new ue,a=new f0(i.startup);return Promise.all([n?this.zb(t,Zt(t.extensionLocation,s),a):this.yb(t,Zt(t.extensionLocation,s),a),this.ib(t,o)]).then(c=>(hi(`code/extHost/willActivateExtension/${t.identifier.value}`),ew.jb(this.s,t.identifier,c[0],c[1],o,a))).then(c=>(hi(`code/extHost/didActivateExtension/${t.identifier.value}`),c))}ib(t,i){const r=this.Z.createLanguageModelAccessInformation(t),s=i.add(new oN(t,this.M)),n=i.add(new Qx(t.identifier.value,!1,this.M)),o=i.add(new sM(t,this.N)),a=t.isUnderDevelopment?this.f.environment.extensionTestsLocationURI?ha.Test:ha.Development:ha.Production,c=this.f.remote.isRemote?Wn.Workspace:Wn.UI;return this.s.trace(`ExtensionService#loadExtensionContext ${t.identifier.value}`),Promise.all([s.whenReady,n.whenReady,this.O.whenReady]).then(()=>{const l=this;let u,h;const f=Ge(t,"ipc")?this.f.messagePorts?.get(je.toKey(t.identifier)):void 0;return Object.freeze({globalState:s,workspaceState:n,secrets:o,subscriptions:[],get languageModelAccessInformation(){return r},get extensionUri(){return t.extensionLocation},get extensionPath(){return t.extensionLocation.fsPath},asAbsolutePath(p){return Dg(t.extensionLocation.fsPath,p)},get storagePath(){return l.O.workspaceValue(t)?.fsPath},get globalStoragePath(){return l.O.globalValue(t).fsPath},get logPath(){return Dg(l.f.logsLocation.fsPath,t.identifier.value)},get logUri(){return y.joinPath(l.f.logsLocation,t.identifier.value)},get storageUri(){return l.O.workspaceValue(t)},get globalStorageUri(){return l.O.globalValue(t)},get extensionMode(){return a},get extension(){return u===void 0&&(u=new Wl(l,t.identifier,t,c,!1)),u},get extensionRuntime(){return L(t,"extensionRuntime"),l.extensionRuntime},get environmentVariableCollection(){return l.u.getEnvironmentVariableCollection(t)},get messagePassingProtocol(){if(!h){if(!f)return;const p=lt.buffer(lt.fromDOMEventEmitter(f,"message",m=>m.data));f.start(),h={onDidReceiveMessage:p,postMessage:f.postMessage.bind(f)}}return h}})})}static jb(t,i,r,s,n,o){return r=r||{activate:void 0,deactivate:void 0},this.kb(t,i,r,s,o).then(a=>new Jf(!1,null,o.build(),r,a,oe(()=>{n.dispose(),Hr(s.subscriptions)})))}static kb(t,i,r,s,n){if(typeof r.activate=="function")try{n.activateCallStart(),t.trace(`ExtensionService#_callActivateOptional ${i.value}`);const o=typeof global=="object"?global:self,a=r.activate.apply(o,[s]);return n.activateCallStop(),n.activateResolveStart(),Promise.resolve(a).then(c=>(n.activateResolveStop(),c))}catch(o){return Promise.reject(o)}else return Promise.resolve(r)}lb(t,i){this.bb(t.identifier,{startup:!1,extensionId:t.identifier,activationEvent:i}).then(void 0,r=>{this.s.error(r)})}mb(t,i=0){const s=Date.now();jy(()=>{for(let n=i;n<t.length;n+=1){const o=t[n];for(const a of o.activationEvents??[])if(a==="onStartupFinished")if(Date.now()-s>50){this.mb(t,n);break}else this.lb(o,a)}})}nb(){this.C.$setPerformanceMarks(p3()),this.m.getConfigProvider().then(t=>{const i=t.getConfiguration("extensions.experimental").get("deferredStartupFinishedActivation"),r=this.J.getAllExtensionDescriptions();if(i)this.mb(r);else for(const s of r)if(s.activationEvents)for(const n of s.activationEvents)n==="onStartupFinished"&&this.lb(s,n)})}ob(){const t=this.ab("*",!0).then(void 0,o=>{this.s.error(o)});this.B(this.j.onDidChangeWorkspace(o=>this.pb(o.added)));const i=this.j.workspace?this.j.workspace.folders:[],r=this.pb(i),s=this.rb(),n=Promise.all([s,t,r]).then(()=>{});return Promise.race([n,Vi(1e4)]).then(()=>{this.nb()}),n}pb(t){return t.length===0?Promise.resolve(void 0):Promise.all(this.J.getAllExtensionDescriptions().map(i=>this.qb(t,i))).then(()=>{})}async qb(t,i){if(this.isActivated(i.identifier))return;const r=!this.f.remote.isRemote&&!!this.f.remote.authority,s={logService:this.s,folders:t.map(o=>o.uri),forceUsingSearch:r||!this.c.fsExists,exists:o=>this.c.fsExists(o.fsPath),checkExists:(o,a,c)=>this.y.$checkExists(o,a,c)},n=await tM(s,i);if(n)return this.bb(i.identifier,{startup:!0,extensionId:i.identifier,activationEvent:n.activationEvent}).then(void 0,o=>this.s.error(o))}async rb(){if(this.f.remote.authority)return this.ab(`onResolveRemoteAuthority:${this.f.remote.authority}`,!1)}async $extensionTestsExecute(){await this.H.wait();try{return await this.sb()}catch(t){throw console.error(t),t}}async sb(){const{extensionDevelopmentLocationURI:t,extensionTestsLocationURI:i}=this.f.environment;if(!t||!i)throw new Error(d(2896,null));const r=(await this.getExtensionPathIndex()).findSubstr(i),n=await(this.vb(r,i.path)?this.zb(null,i,new f0(!1)):this.yb(null,i,new f0(!1)));if(!n||typeof n.run!="function")throw new Error(d(2897,null,i.toString()));return new Promise((o,a)=>{const c=(h,f)=>{h?(hn&&this.s.error("Test runner called back with error",h),a(h)):(hn&&(f?this.s.info(`Test runner called back with ${f} failures.`):this.s.info("Test runner called back with successful outcome.")),o(typeof f=="number"&&f>0?1:0))},l=er(i),u=n.run(l,c);u&&u.then&&u.then(()=>{hn&&this.s.info("Test runner finished successfully."),o(0)}).catch(h=>{hn&&this.s.error("Test runner finished with error",h),a(h instanceof Error&&h.stack?h.stack:String(h))})})}tb(){if(this.U)throw new Error("Extension host is already started!");return this.U=!0,this.F.wait().then(()=>this.G.open()).then(()=>Promise.race([this.P.waitForActivatingExtensions(),Vi(1e3)])).then(()=>this.ob()).then(()=>{this.H.open(),this.s.info("Eager extensions activated")})}registerRemoteAuthorityResolver(t,i){return this.S[t]=i,oe(()=>{delete this.S[t]})}async getRemoteExecServer(t){const{resolver:i}=await this.ub(t);return i?.resolveExecServer?.(t,{resolveAttempt:0})}async ub(t){const i=t.indexOf("+");if(i===-1)throw new qo("Not an authority that can be resolved!",Yr.InvalidAuthority);const r=t.substr(0,i);return await this.D.wait(),await this.ab(`onResolveRemoteAuthority:${r}`,!1),{authorityPrefix:r,resolver:this.S[r]}}async $resolveAuthority(t,i){const r=un.create(!1),s=()=>`[resolveAuthority(${v8(t)},${i})][${r.elapsed()}ms] `,n=$=>this.s.info(`${s()}${$}`),o=$=>this.s.warn(`${s()}${$}`),a=($,A=void 0)=>this.s.error(`${s()}${$}`,A),c=$=>{if($ instanceof qo)return{type:"error",error:{code:$._code,message:$._message,detail:$._detail}};throw $},l=async $=>{n(`activating resolver for ${$}...`);const{resolver:A,authorityPrefix:Q}=await this.ub($);if(!A)throw a(`no resolver for ${Q}`),new qo(`No remote extension installed to resolve ${Q}.`,Yr.NoResolverFound);return{resolver:A,authorityPrefix:Q,remoteAuthority:$}},u=t.split(/@|%40/g).reverse();n(`activating remote resolvers ${u.join(" -> ")}`);let h;try{h=await Promise.all(u.map(l)).catch(async $=>{if(!($ instanceof qo)||$._code!==Yr.InvalidAuthority)throw $;return o(`resolving nested authorities failed: ${$.message}`),[await l(t)]})}catch($){return c($)}const f=new GD;f.cancelAndSet(()=>n("waiting..."),1e3);let p,m;for(const[$,{authorityPrefix:A,resolver:Q,remoteAuthority:W}]of h.entries())try{if($===h.length-1)n("invoking final resolve()..."),hi(`code/extHost/willResolveAuthority/${A}`),p=await Q.resolve(W,{resolveAttempt:i,execServer:m}),hi(`code/extHost/didResolveAuthorityOK/${A}`),n("setting tunnel factory..."),this.B(await this.t.setTunnelFactory(Q,nd.isManagedResolvedAuthority(p)?p:void 0));else{if(n(`invoking resolveExecServer() for ${W}`),hi(`code/extHost/willResolveExecServer/${A}`),m=await Q.resolveExecServer?.(W,{resolveAttempt:i,execServer:m}),!m)throw new qo(`Exec server was not available for ${W}`,Yr.NoResolverFound);hi(`code/extHost/didResolveExecServerOK/${A}`)}}catch(ce){return hi(`code/extHost/didResolveAuthorityError/${A}`),a("returned an error",ce),f.dispose(),c(ce)}f.dispose();const w={environmentTunnels:p.environmentTunnels,features:p.tunnelFeatures?{elevation:p.tunnelFeatures.elevation,privacyOptions:p.tunnelFeatures.privacyOptions,protocol:p.tunnelFeatures.protocol===void 0?!0:p.tunnelFeatures.protocol}:void 0},x={extensionHostEnv:p.extensionHostEnv,isTrusted:p.isTrusted,authenticationSession:p.authenticationSessionForInitializingExtensions?{id:p.authenticationSessionForInitializingExtensions.id,providerId:p.authenticationSessionForInitializingExtensions.providerId}:void 0};n(`returned ${nd.isManagedResolvedAuthority(p)?"managed authority":`${p.host}:${p.port}`}`);let E;if(nd.isManagedResolvedAuthority(p)){const $=i;this.Y.setFactory($,p.makeConnection),E={authority:t,connectTo:new IR($),connectionToken:p.connectionToken}}else E={authority:t,connectTo:new DR(p.host,p.port),connectionToken:p.connectionToken};return{type:"ok",value:{authority:E,options:x,tunnelInformation:w}}}async $getCanonicalURI(t,i){this.s.info(`$getCanonicalURI invoked for authority (${v8(t)})`);const{resolver:r}=await this.ub(t);if(!r)return null;const s=y.revive(i);if(typeof r.getCanonicalURI>"u")return s;const n=await Yt(()=>r.getCanonicalURI(s));return n||s}async $startExtensionHost(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=GE(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),hn&&(this.s.info(`$startExtensionHost: global extensions: ${Oa(this.L)}`),this.s.info(`$startExtensionHost: local extensions: ${Oa(this.J)}`)),this.tb()}$activateByEvent(t,i){return i===1?this.D.wait().then(r=>this.ab(t,!1)):this.G.wait().then(r=>this.ab(t,!1))}async $activate(t,i){return await this.G.wait(),this.J.getExtensionDescription(t)?(await this.bb(t,i),!0):!1}async $deltaExtensions(t){t.toAdd.forEach(o=>o.extensionLocation=y.revive(o.extensionLocation));const{globalRegistry:i,myExtensions:r}=GE(this.I,this.L,this.J,t),s=await this.db(r);return(await this.getExtensionPathIndex()).setSearchTree(s),this.L.set(i.getAllExtensionDescriptions()),this.J.set(r),hn&&(this.s.info(`$deltaExtensions: global extensions: ${Oa(this.L)}`),this.s.info(`$deltaExtensions: local extensions: ${Oa(this.J)}`)),Promise.resolve(void 0)}async $test_latency(t){return t}async $test_up(t){return t.byteLength}async $test_down(t){const i=ae.alloc(t),r=Math.random()%256;for(let s=0;s<t;s++)i.writeUInt8(r,s);return i}async $updateRemoteConnectionData(t){this.X=t,this.a.fire()}vb(t,i){return i??=t?this.xb(t):i,i?.endsWith(".mjs")||t?.type==="module"&&!i?.endsWith(".cjs")}};tw=ew=__decorate([__param(0,fc),__param(1,qE),__param(2,Fe),__param(3,ns),__param(4,os),__param(5,We),__param(6,It),__param(7,w0),__param(8,S0),__param(9,Ma),__param(10,Q0),__param(11,X0),__param(12,H0)],tw);function GE(e,t,i,r){e.addActivationEvents(r.addActivationEvents);const s=new Hl(e,t.getAllExtensionDescriptions());s.deltaExtensions(r.toAdd,r.toRemove);const n=new vn(i.getAllExtensionDescriptions().map(a=>a.identifier));for(const a of r.myToRemove)n.delete(a);for(const a of r.myToAdd)n.add(a);const o=ZE(s,n);return{globalRegistry:s,myExtensions:o}}function JE(e,t){return{id:e.identifier.value,name:e.name,extensionVersion:e.version,publisherDisplayName:e.publisher,activationEvents:e.activationEvents?e.activationEvents.join(","):null,isBuiltin:e.isBuiltin,reason:t.activationEvent,reasonId:t.extensionId.value}}function Oa(e){return e.getAllExtensionDescriptions().map(t=>t.identifier.value).join(",")}var Ys=B("IExtHostExtensionService"),Wl=class{#e;#t;#i;constructor(e,t,i,r,s){this.#e=e,this.#t=t,this.#i=i.identifier,this.id=i.identifier.value,this.extensionUri=i.extensionLocation,this.extensionPath=ko(er(i.extensionLocation)),this.packageJSON=i,this.extensionKind=r,this.isFromDifferentExtensionHost=s}get isActive(){return this.#e.isActivated(this.#i)}get exports(){if(!(this.packageJSON.api==="none"||this.isFromDifferentExtensionHost))return this.#e.getExtensionExports(this.#i)}async activate(){if(this.isFromDifferentExtensionHost)throw new Error("Cannot activate foreign extension");return await this.#e.activateByIdWithErrors(this.#i,{startup:!1,extensionId:this.#t,activationEvent:"api"}),this.exports}};function ZE(e,t){return e.getAllExtensionDescriptions().filter(i=>t.has(i.identifier))}var aM=class{constructor(e){this.a=e}setSearchTree(e){this.a=e}findSubstr(e){return this.a.findSubstr(e)}forEach(e){return this.a.forEach(e)}},cM=class{constructor(e){this.a=new qr,this.addActivationEvents(e)}readActivationEvents(e){return this.a.get(e.identifier)??[]}addActivationEvents(e){for(const t of Object.keys(e))this.a.set(t,e[t])}},Vl=B("IExtHostApiDeprecationService"),iw=class{constructor(t,i){this.c=i,this.a=new Set,this.b=t.getProxy(J.MainThreadTelemetry)}report(t,i,r){const s=this.d(t,i);this.a.has(s)||(this.a.add(s),i.isUnderDevelopment&&this.c.warn(`[Deprecation Warning] '${t}' is deprecated. ${r}`),this.b.$publicLog2("extHostDeprecatedApiUsage",{extensionId:i.identifier.value,apiId:t}))}d(t,i){return`${t}-${i.identifier.value}`}};iw=__decorate([__param(0,Fe),__param(1,We)],iw);var GV=Object.freeze(new class{report(e,t,i){}}),YE=class{static async installEarlyHandler(e){Error.stackTraceLimit=100;const t=e.get(We),r=e.get(Fe).getProxy(J.MainThreadErrors);ng(s=>{t.error(s);const n=mo(s);r.$onUnexpectedError(n)})}static async installFullHandler(e){const t=e.get(We),i=e.get(Fe),r=e.get(Ys),s=e.get(Qf),n=e.get(Vl),o=i.getProxy(J.MainThreadExtensionService),a=i.getProxy(J.MainThreadErrors),c=await r.getExtensionRegistry(),l=await r.getExtensionPathIndex(),u=new WeakMap;function h(m,w){if(u.has(m))return u.get(m).stack;let x="",E,$;for(const Q of w)x+=`
	at ${Q.toString()}`,$=Q.getFileName(),!E&&$&&(E=l.findSubstr(y.file($)));const A=`${m.name||"Error"}: ${m.message||""}${x}`;return u.set(m,{extensionIdentifier:E?.identifier,stack:A}),A}const f=Symbol("prepareStackTrace wrapped");let p=h;Object.defineProperty(Error,"prepareStackTrace",{configurable:!1,get(){return p},set(m){if(m===h||!m||m[f]){p=m||h;return}p=function(w,x){return h(w,x),m.call(Error,w,x)},Object.assign(p,{[f]:!0})}}),ng(m=>{Qb.is(m)||t.error(m);const w=mo(m);let x;if(m instanceof Q4?x=m.extension:x=u.get(m)?.extensionIdentifier,!!x)if(Qb.is(m)){const E=c.getExtensionDescription(x);E&&n.report(m.name,E,`${m.message}
 FROM: ${m.stack}`)}else{o.$onExtensionRuntimeError(x,w);const E=s.onExtensionError(x,m);t.trace("forwarded error to extension?",E,x)}}),Qa.addListener(m=>{a.$onUnexpectedError(m)})}},lM=class SC{constructor(t,i,r,s,n){this.a=r,this.b=new i2(t,null,s),i=SC.e(i,this.b);const o=new sm(...D2());o.set(It,{_serviceBrand:void 0,...i,messagePorts:n}),o.set(Fe,new R2(this.b)),o.set(nh,new L2(s)),o.set(qE,r);const a=new T2(o,!0);a.invokeFunction(YE.installEarlyHandler),this.d=a.invokeFunction(c=>c.get(We)),hi("code/extHost/didCreateServices"),this.a.pid?this.d.info(`Extension host with pid ${this.a.pid} started`):this.d.info("Extension host started"),this.d.trace("initData",i),this.c=a.invokeFunction(c=>c.get(Ys)),this.c.initialize(),a.invokeFunction(YE.installFullHandler)}async asBrowserUri(t){const i=this.b.getProxy(J.MainThreadExtensionService);return y.revive(await i.$asBrowserUri(t))}terminate(t){this.c.terminate(t)}static e(t,i){t.extensions.allExtensions.forEach(s=>{s.extensionLocation=y.revive(i.transformIncomingURIs(s.extensionLocation))}),t.environment.appRoot=y.revive(i.transformIncomingURIs(t.environment.appRoot));const r=t.environment.extensionDevelopmentLocationURI;return r&&(t.environment.extensionDevelopmentLocationURI=r.map(s=>y.revive(i.transformIncomingURIs(s)))),t.environment.extensionTestsLocationURI=y.revive(i.transformIncomingURIs(t.environment.extensionTestsLocationURI)),t.environment.globalStorageHome=y.revive(i.transformIncomingURIs(t.environment.globalStorageHome)),t.environment.workspaceStorageHome=y.revive(i.transformIncomingURIs(t.environment.workspaceStorageHome)),t.nlsBaseUrl=y.revive(i.transformIncomingURIs(t.nlsBaseUrl)),t.logsLocation=y.revive(i.transformIncomingURIs(t.logsLocation)),t.workspace=i.transformIncomingURIs(t.workspace),t}},uM=function(t){const i=r=>{globalThis.removeEventListener("message",i);const s=r.data;Object.defineProperties(globalThis,{postMessage:{value(n,o){s.postMessage(n,o)}},onmessage:{get(){return s.onmessage},set(n){s.onmessage=n}}}),s.addEventListener("message",n=>{globalThis.dispatchEvent(new MessageEvent("message",{data:n.data,ports:n.ports?[...n.ports]:void 0}))}),s.start(),globalThis.Worker=class{constructor(){throw new TypeError("Nested workers from within nested worker are NOT supported.")}},importScripts(t)};globalThis.addEventListener("message",i)}.toString(),hM=class extends EventTarget{constructor(e,t,i){super(),this.onmessage=null,this.onmessageerror=null,this.onerror=null;const r=`((${uM})('${t}'))`,s=new Blob([r],{type:"application/javascript"}),n=URL.createObjectURL(s),o=new MessageChannel,a=n,c={type:"_newWorker",id:a,port:o.port2,url:n,options:i};e(c,[o.port2]),this.postMessage=o.port1.postMessage.bind(o.port1),this.terminate=()=>{e({type:"_terminateWorker",id:a}),URL.revokeObjectURL(n),o.port1.close(),o.port2.close()},Object.defineProperties(this,{onmessage:{get(){return o.port1.onmessage},set(l){o.port1.onmessage=l}},onmessageerror:{get(){return o.port1.onmessageerror},set(l){o.port1.onmessageerror=l}}}),o.port1.addEventListener("messageerror",l=>{const u=new MessageEvent("messageerror",{data:l.data});this.dispatchEvent(u)}),o.port1.addEventListener("message",l=>{const u=new MessageEvent("message",{data:l.data});this.dispatchEvent(u)}),o.port1.start()}},JV=new C("inOutput",!1),ZV=new C("activeLogOutput",!1),YV=new C("activeLogOutput.isLog",!1),QV=new C("activeLogOutput.levelSettable",!1),XV=new C("activeLogOutput.level",""),KV=new C("activeLogOutput.levelIsDefault",!1),eq=new C("outputView.scrollLock",!1),tq=new C("activeOutputChannel",""),iq=new C("output.filter.trace",!0),rq=new C("output.filter.debug",!0),sq=new C("output.filter.info",!0),nq=new C("output.filter.warning",!0),oq=new C("output.filter.error",!0),aq=new C("outputFilterFocus",!1),cq=new C("output.filter.categories",""),lq=B("outputService"),ql;(function(e){e[e.Append=1]="Append",e[e.Replace=2]="Replace",e[e.Clear=3]="Clear"})(ql||(ql={}));var dM={OutputChannels:"workbench.contributions.outputChannels"};function fM(e){return Array.isArray(e.source)}var pM=class extends ne{constructor(){super(...arguments),this.a=new Map,this.b=this.B(new P),this.onDidRegisterChannel=this.b.event,this.c=this.B(new P),this.onDidRemoveChannel=this.c.event,this.f=this.B(new P),this.onDidUpdateChannelSources=this.f.event}registerChannel(e){this.a.has(e.id)||(this.a.set(e.id,e),this.b.fire(e.id))}getChannels(){const e=[];return this.a.forEach(t=>e.push(t)),e}getChannel(e){return this.a.get(e)}updateChannelSources(e,t){const i=this.a.get(e);i&&fM(i)&&(i.source=t,this.f.fire(i))}removeChannel(e){const t=this.a.get(e);t&&(this.a.delete(e),this.c.fire(t))}};jt.add(dM.OutputChannels,new pM);var QE=class extends d5{constructor(e,t,i,r,s){super(),this.id=e,this.name=t,this.r=i,this.s=r,this.extension=s,this.n=0,this.visible=!1,this.setLevel(i.getLevel()),this.B(i.onDidChangeLogLevel(n=>this.setLevel(n))),this.B(oe(()=>this.s.$dispose(this.id)))}get logLevel(){return this.getLevel()}appendLine(e){this.append(e+`
`)}append(e){this.info(e)}clear(){const e=this.n;this.r.flush(),this.s.$update(this.id,ql.Clear,e)}replace(e){const t=this.n;this.info(e),this.s.$update(this.id,ql.Replace,t),this.visible&&this.r.flush()}show(e,t){this.r.flush(),this.s.$reveal(this.id,!!(typeof e=="boolean"?e:t))}hide(){this.s.$close(this.id)}m(e,t){this.n+=ae.fromString(t).byteLength,S2(this.r,e,t),this.visible&&(this.r.flush(),this.s.$update(this.id,ql.Append))}},gM=class extends QE{appendLine(e){this.append(e)}},rw=class{constructor(t,i,r,s,n,o){this.i=i,this.j=r,this.k=s,this.l=n,this.m=o,this.d=new Map,this.f=1,this.g=new Map,this.h=null,this.a=t.getProxy(J.MainThreadOutputService),this.b=this.k.extUri.joinPath(i.logsLocation,`output_logging_${UN(new Date).replace(/-|:|\.\d+Z$/g,"")}`)}$setVisibleChannel(t){this.h=t;for(const[i,r]of this.g)r.visible=i===this.h}createOutputChannel(t,i,r){if(t=t.trim(),!t)throw new Error("illegal argument `name`. must not be falsy");const s=typeof i=="object"&&i.log,n=Ue(i)?i:void 0;if(Ue(n)&&!n.trim())throw new Error("illegal argument `languageId`. must not be empty");let o;const a=this.i.environment.extensionLogLevel?.find(([u])=>je.equals(r.identifier,u))?.[1];a&&(o=I2(a));const c=new ue,l=s?this.o(t,o,r,c):this.n(t,n,r,c);return l.then(u=>{this.g.set(u.id,u),u.visible=u.id===this.h,c.add(oe(()=>this.g.delete(u.id)))}),s?this.r(t,o??this.m.getLevel(),l,c):this.q(t,l,c)}async n(t,i,r,s){this.c||(this.c=this.j.value.createDirectory(this.b).then(()=>this.b));const n=await this.c,o=this.k.extUri.joinPath(n,`${this.f++}-${t.replace(/[\\/:\*\?"<>\|]/g,"")}.log`),a=s.add(this.l.createLogger(o,{logLevel:"always",donotRotate:!0,donotUseFormatters:!0,hidden:!0})),c=await this.a.$register(t,o,i,r.identifier.value);return s.add(oe(()=>this.l.deregisterLogger(o))),new QE(c,t,a,this.a,r)}async o(t,i,r,s){const n=await this.p(r),o=t.replace(/[\\/:\*\?"<>\|]/g,""),a=this.k.extUri.joinPath(n,`${o}.log`),c=`${r.identifier.value}.${o}`,l=s.add(this.l.createLogger(a,{id:c,name:t,logLevel:i,extensionId:r.identifier.value}));return s.add(oe(()=>this.l.deregisterLogger(a))),new gM(c,t,l,this.a,r)}p(t){let i=this.d.get(t.identifier.value);if(!i){const r=this.k.extUri.joinPath(this.i.logsLocation,t.identifier.value);this.d.set(t.identifier.value,i=(async()=>{try{await this.j.value.createDirectory(r)}catch(s){if(bh(s)!==Se.FileExists)throw s}return r})())}return i}q(t,i,r){const s=()=>{if(r.isDisposed)throw new Error("Channel has been closed")};return i.then(n=>r.add(n)),{get name(){return t},append(n){s(),i.then(o=>o.append(n))},appendLine(n){s(),i.then(o=>o.appendLine(n))},clear(){s(),i.then(n=>n.clear())},replace(n){s(),i.then(o=>o.replace(n))},show(n,o){s(),i.then(a=>a.show(n,o))},hide(){s(),i.then(n=>n.hide())},dispose(){r.dispose()}}}r(t,i,r,s){const n=()=>{if(s.isDisposed)throw new Error("Channel has been closed")},o=s.add(new P);function a(c){i=c,o.fire(c)}return r.then(c=>{c.logLevel!==i&&a(c.logLevel),s.add(c.onDidChangeLogLevel(l=>a(l)))}),{...this.q(t,r,s),get logLevel(){return i},onDidChangeLogLevel:o.event,trace(c,...l){n(),r.then(u=>u.trace(c,...l))},debug(c,...l){n(),r.then(u=>u.debug(c,...l))},info(c,...l){n(),r.then(u=>u.info(c,...l))},warn(c,...l){n(),r.then(u=>u.warn(c,...l))},error(c,...l){n(),r.then(u=>u.error(c,...l))}}}};rw=__decorate([__param(0,Fe),__param(1,It),__param(2,Yf),__param(3,Ro),__param(4,bn),__param(5,We)],rw);var XE=B("IExtHostOutputService"),Gl,sw=class{static{Gl=this}static{this.c=0}static{this.d=250}constructor(t,i){this.h=i,this.f=new Map,this.g=t.getProxy(J.MainThreadDecorations)}registerFileDecorationProvider(t,i){const r=Gl.c++;this.f.set(r,{provider:t,extensionDescription:i}),this.g.$registerDecorationProvider(r,i.identifier.value);const s=t.onDidChangeFileDecorations&&t.onDidChangeFileDecorations(n=>{if(!n){this.g.$onDidChange(r,null);return}const o=Ni(n);if(o.length<=Gl.d){this.g.$onDidChange(r,o);return}this.h.warn("[Decorations] CAPPING events from decorations provider",i.identifier.value,o.length);const a=o.map(u=>({uri:u,rank:Y3(u.path,"/")})),c=wI(a,(u,h)=>u.rank-h.rank||gn(u.uri.path,h.uri.path)),l=[];e:for(const u of c){let h;for(const f of u){const p=$o(f.uri.path);if(h!==p&&(h=p,l.push(f.uri)>=Gl.d))break e}}this.g.$onDidChange(r,l)});return new Pe(()=>{s?.dispose(),this.g.$unregisterDecorationProvider(r),this.f.delete(r)})}async $provideDecorations(t,i,r){if(!this.f.has(t))return Object.create(null);const s=Object.create(null),{provider:n,extensionDescription:o}=this.f.get(t);return await Promise.all(i.map(async a=>{try{const{uri:c,id:l}=a,u=await Promise.resolve(n.provideFileDecoration(y.revive(c),r));if(!u)return;try{B1.validate(u),u.badge&&typeof u.badge!="string"&&L(o,"codiconDecoration"),s[l]=[u.propagate,u.tooltip,u.badge,u.color]}catch(h){this.h.warn(`INVALID decoration from extension '${o.identifier.value}': ${h}`)}}catch(c){this.h.error(c)}})),s}};sw=Gl=__decorate([__param(0,Fe),__param(1,We)],sw);var KE=B("IExtHostDecorations"),mM=class{constructor(e){this.a=e,this.b=new Uint32Array(e.length),this.c=new Int32Array(1),this.c[0]=-1}getCount(){return this.a.length}insertValues(e,t){e=Fa(e);const i=this.a,r=this.b,s=t.length;return s===0?!1:(this.a=new Uint32Array(i.length+s),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e),e+s),this.a.set(t,e),e-1<this.c[0]&&(this.c[0]=e-1),this.b=new Uint32Array(this.a.length),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}setValue(e,t){return e=Fa(e),t=Fa(t),this.a[e]===t?!1:(this.a[e]=t,e-1<this.c[0]&&(this.c[0]=e-1),!0)}removeValues(e,t){e=Fa(e),t=Fa(t);const i=this.a,r=this.b;if(e>=i.length)return!1;const s=i.length-e;return t>=s&&(t=s),t===0?!1:(this.a=new Uint32Array(i.length-t),this.a.set(i.subarray(0,e),0),this.a.set(i.subarray(e+t),e),this.b=new Uint32Array(this.a.length),e-1<this.c[0]&&(this.c[0]=e-1),this.c[0]>=0&&this.b.set(r.subarray(0,this.c[0]+1)),!0)}getTotalSum(){return this.a.length===0?0:this.d(this.a.length-1)}getPrefixSum(e){return e<0?0:(e=Fa(e),this.d(e))}d(e){if(e<=this.c[0])return this.b[e];let t=this.c[0]+1;t===0&&(this.b[0]=this.a[0],t++),e>=this.a.length&&(e=this.a.length-1);for(let i=t;i<=e;i++)this.b[i]=this.b[i-1]+this.a[i];return this.c[0]=Math.max(this.c[0],e),this.b[e]}getIndexOf(e){e=Math.floor(e),this.getTotalSum();let t=0,i=this.a.length-1,r=0,s=0,n=0;for(;t<=i;)if(r=t+(i-t)/2|0,s=this.b[r],n=s-this.a[r],e<n)i=r-1;else if(e>=s)t=r+1;else break;return new vM(r,e-n)}},vM=class{constructor(e,t){this.index=e,this.remainder=t,this._prefixSumIndexOfResultBrand=void 0,this.index=e,this.remainder=t}},wM=class{constructor(e,t,i,r){this.a=e,this.b=t,this.c=i,this.d=r,this.f=null,this.g=null}dispose(){this.b.length=0}get version(){return this.d}getText(){return this.g===null&&(this.g=this.b.join(this.c)),this.g}onEvents(e){e.eol&&e.eol!==this.c&&(this.c=e.eol,this.f=null);const t=e.changes;for(const i of t)this.k(i.range),this.l(new ji(i.range.startLineNumber,i.range.startColumn),i.text);this.d=e.versionId,this.g=null}h(){if(!this.f){const e=this.c.length,t=this.b.length,i=new Uint32Array(t);for(let r=0;r<t;r++)i[r]=this.b[r].length+e;this.f=new mM(i)}}j(e,t){this.b[e]=t,this.f&&this.f.setValue(e,this.b[e].length+this.c.length)}k(e){if(e.startLineNumber===e.endLineNumber){if(e.startColumn===e.endColumn)return;this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.startLineNumber-1].substring(e.endColumn-1));return}this.j(e.startLineNumber-1,this.b[e.startLineNumber-1].substring(0,e.startColumn-1)+this.b[e.endLineNumber-1].substring(e.endColumn-1)),this.b.splice(e.startLineNumber,e.endLineNumber-e.startLineNumber),this.f&&this.f.removeValues(e.startLineNumber,e.endLineNumber-e.startLineNumber)}l(e,t){if(t.length===0)return;const i=f4(t);if(i.length===1){this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]+this.b[e.lineNumber-1].substring(e.column-1));return}i[i.length-1]+=this.b[e.lineNumber-1].substring(e.column-1),this.j(e.lineNumber-1,this.b[e.lineNumber-1].substring(0,e.column-1)+i[0]);const r=new Uint32Array(i.length-1);for(let s=1;s<i.length;s++)this.b.splice(e.lineNumber+s-1,0,i[s]),r[s-1]=i[s].length+this.c.length;this.f&&this.f.insertValues(e.lineNumber,r)}},eS="`~!@#$%^&*()-=+[{]}\\|;:'\",.<>/?";function bM(e=""){let t="(-?\\d*\\.\\d\\w*)|([^";for(const i of eS)e.indexOf(i)>=0||(t+="\\"+i);return t+="\\s]+)",new RegExp(t,"g")}var yM=bM();function tS(e){let t=yM;if(e&&e instanceof RegExp)if(e.global)t=e;else{let i="g";e.ignoreCase&&(i+="i"),e.multiline&&(i+="m"),e.unicode&&(i+="u"),t=new RegExp(e.source,i)}return t.lastIndex=0,t}var iS=new ys;iS.unshift({maxLen:1e3,windowSize:15,timeBudget:150});function rS(e,t,i,r,s){if(t=tS(t),s||(s=Ot.first(iS)),i.length>s.maxLen){let l=e-s.maxLen/2;return l<0?l=0:r+=l,i=i.substring(l,e+s.maxLen/2),rS(e,t,i,r,s)}const n=Date.now(),o=e-1-r;let a=-1,c=null;for(let l=1;!(Date.now()-n>=s.timeBudget);l++){const u=o-s.windowSize*l;t.lastIndex=Math.max(0,u);const h=xM(t,i,o,a);if(!h&&c||(c=h,u<=0))break;a=u}if(c){const l={word:c[0],startColumn:r+1+c.index,endColumn:r+1+c.index+c[0].length};return t.lastIndex=0,l}return null}function xM(e,t,i,r){let s;for(;s=e.exec(t);){const n=s.index||0;if(n<=i&&e.lastIndex>=i)return s;if(r>0&&n>r)return null}return null}var nw=new Map;function EM(e,t){t?nw.set(e,t):nw.delete(e)}function SM(e){return nw.get(e)}var kM=class extends wM{constructor(e,t,i,r,s,n,o,a){super(t,i,r,s),this.o=e,this.p=n,this.q=o,this.r=a,this.n=!1}dispose(){si(!this.n),this.n=!0,this.q=!1}equalLines(e){return Li(this.b,e)}get document(){if(!this.m){const e=this;this.m={get uri(){return e.a},get fileName(){return e.a.fsPath},get isUntitled(){return e.a.scheme===V.untitled},get languageId(){return e.p},get version(){return e.d},get isClosed(){return e.n},get isDirty(){return e.q},get encoding(){return e.r},save(){return e.s()},getText(t){return t?e.t(t):e.getText()},get eol(){return e.c===`
`?ar.LF:ar.CRLF},get lineCount(){return e.b.length},lineAt(t){return e.u(t)},offsetAt(t){return e.v(t)},positionAt(t){return e.w(t)},validateRange(t){return e.x(t)},validatePosition(t){return e.y(t)},getWordRangeAtPosition(t,i){return e.z(t,i)},[Symbol.for("debug.description")](){return`TextDocument(${e.a.toString()})`}}}return Object.freeze(this.m)}_acceptLanguageId(e){si(!this.n),this.p=e}_acceptIsDirty(e){si(!this.n),this.q=e}_acceptEncoding(e){si(!this.n),this.r=e}s(){return this.n?Promise.reject(new Error("Document has been closed")):this.o.$trySaveDocument(this.a)}t(e){const t=this.x(e);if(t.isEmpty)return"";if(t.isSingleLine)return this.b[t.start.line].substring(t.start.character,t.end.character);const i=this.c,r=t.start.line,s=t.end.line,n=[];n.push(this.b[r].substring(t.start.character));for(let o=r+1;o<s;o++)n.push(this.b[o]);return n.push(this.b[s].substring(0,t.end.character)),n.join(i)}u(e){let t;if(e instanceof Ae?t=e.line:typeof e=="number"&&(t=e),typeof t!="number"||t<0||t>=this.b.length||Math.floor(t)!==t)throw new Error("Illegal value for `line`");return new $M(t,this.b[t],t===this.b.length-1)}v(e){return e=this.y(e),this.h(),this.f.getPrefixSum(e.line-1)+e.character}w(e){e=Math.floor(e),e=Math.max(0,e),this.h();const t=this.f.getIndexOf(e),i=this.b[t.index].length;return new Ae(t.index,Math.min(t.remainder,i))}x(e){if(!(e instanceof ke))throw new Error("Invalid argument");const t=this.y(e.start),i=this.y(e.end);return t===e.start&&i===e.end?e:new ke(t.line,t.character,i.line,i.character)}y(e){if(!(e instanceof Ae))throw new Error("Invalid argument");if(this.b.length===0)return e.with(0,0);let{line:t,character:i}=e,r=!1;if(t<0)t=0,i=0,r=!0;else if(t>=this.b.length)t=this.b.length-1,i=this.b[t].length,r=!0;else{const s=this.b[t].length;i<0?(i=0,r=!0):i>s&&(i=s,r=!0)}return r?new Ae(t,i):e}z(e,t){const i=this.y(e);if(!t)t=SM(this.p);else if(d4(t))throw new Error(`[getWordRangeAtPosition]: ignoring custom regexp '${t.source}' because it matches the empty string.`);const r=rS(i.character+1,tS(t),this.b[i.line],0);if(r)return new ke(i.line,r.startColumn-1,i.line,r.endColumn-1)}},$M=class{constructor(e,t,i){this.a=e,this.b=t,this.c=i}get lineNumber(){return this.a}get text(){return this.b}get range(){return new ke(this.a,0,this.a,this.b.length)}get rangeIncludingLineBreak(){return this.c?this.range:new ke(this.a,0,this.a+1,0)}get firstNonWhitespaceCharacterIndex(){return/^(\s*)/.exec(this.b)[1].length}get isEmptyOrWhitespace(){return this.firstNonWhitespaceCharacterIndex===this.b.length}},sp=class{constructor(e){this.a=e,this.b=0}nextId(){return this.a+ ++this.b}},dq=new sp("id#"),CM=class kC{static{this.c=new sp("TextEditorDecorationType")}constructor(t,i,r){const s=kC.c.nextId();t.$registerTextEditorDecorationType(i.identifier,s,bv.from(r)),this.value=Object.freeze({key:s,dispose(){t.$removeTextEditorDecorationType(s)}})}},IM=class{constructor(e,t){this.g=[],this.h=void 0,this.j=!1,this.c=e,this.d=e.version,this.e=t.undoStopBefore,this.f=t.undoStopAfter}finalize(){return this.j=!0,{documentVersionId:this.d,edits:this.g,setEndOfLine:this.h,undoStopBefore:this.e,undoStopAfter:this.f}}k(){if(this.j)throw new Error("Edit is only valid while callback runs")}replace(e,t){this.k();let i=null;if(e instanceof Ae)i=new ke(e,e);else if(e instanceof ke)i=e;else throw new Error("Unrecognized location");this.l(i,t,!1)}insert(e,t){this.k(),this.l(new ke(e,e),t,!0)}delete(e){this.k();let t=null;if(e instanceof ke)t=e;else throw new Error("Unrecognized location");this.l(t,null,!0)}l(e,t,i){const r=this.c.validateRange(e);this.g.push({range:r,text:t,forceMoveMarkers:i})}setEndOfLine(e){if(this.k(),e!==ar.LF&&e!==ar.CRLF)throw Ce("endOfLine");this.h=e}},DM=class{constructor(e,t,i,r){this.c=e,this.d=t,this._accept(i),this.e=r;const s=this;this.value={get tabSize(){return s.f},set tabSize(n){s.n(n)},get indentSize(){return s.g},set indentSize(n){s.p(n)},get insertSpaces(){return s.j},set insertSpaces(n){s.s(n)},get cursorStyle(){return s.k},set cursorStyle(n){s.t(n)},get lineNumbers(){return s.l},set lineNumbers(n){s.u(n)}}}_accept(e){this.f=e.tabSize,this.g=e.indentSize,this.h=e.originalIndentSize,this.j=e.insertSpaces,this.k=e.cursorStyle,this.l=ba.to(e.lineNumbers)}m(e){if(e==="auto")return"auto";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}n(e){const t=this.m(e);if(t!==null){if(typeof t=="number"){if(this.f===t)return;this.f=t}this.v("setTabSize",this.c.$trySetOptions(this.d,{tabSize:t}))}}o(e){if(e==="tabSize")return"tabSize";if(typeof e=="number"){const t=Math.floor(e);return t>0?t:null}if(typeof e=="string"){const t=parseInt(e,10);return isNaN(t)?null:t>0?t:null}return null}p(e){const t=this.o(e);if(t!==null){if(typeof t=="number"){if(this.h===t)return;this.g=t,this.h=t}this.v("setIndentSize",this.c.$trySetOptions(this.d,{indentSize:t}))}}q(e){return e==="auto"?"auto":e==="false"?!1:!!e}s(e){const t=this.q(e);if(typeof t=="boolean"){if(this.j===t)return;this.j=t}this.v("setInsertSpaces",this.c.$trySetOptions(this.d,{insertSpaces:t}))}t(e){this.k!==e&&(this.k=e,this.v("setCursorStyle",this.c.$trySetOptions(this.d,{cursorStyle:e})))}u(e){this.l!==e&&(this.l=e,this.v("setLineNumbers",this.c.$trySetOptions(this.d,{lineNumbers:ba.from(e)})))}assign(e){const t={};let i=!1;if(typeof e.tabSize<"u"){const r=this.m(e.tabSize);r==="auto"?(i=!0,t.tabSize=r):typeof r=="number"&&this.f!==r&&(this.f=r,i=!0,t.tabSize=r)}if(typeof e.indentSize<"u"){const r=this.o(e.indentSize);r==="tabSize"?(i=!0,t.indentSize=r):typeof r=="number"&&this.h!==r&&(this.g=r,this.h=r,i=!0,t.indentSize=r)}if(typeof e.insertSpaces<"u"){const r=this.q(e.insertSpaces);r==="auto"?(i=!0,t.insertSpaces=r):this.j!==r&&(this.j=r,i=!0,t.insertSpaces=r)}typeof e.cursorStyle<"u"&&this.k!==e.cursorStyle&&(this.k=e.cursorStyle,i=!0,t.cursorStyle=e.cursorStyle),typeof e.lineNumbers<"u"&&this.l!==e.lineNumbers&&(this.l=e.lineNumbers,i=!0,t.lineNumbers=ba.from(e.lineNumbers)),i&&this.v("setOptions",this.c.$trySetOptions(this.d,t))}v(e,t){t.catch(i=>{this.e.warn(`ExtHostTextEditorOptions '${e}' failed:'`),this.e.warn(i)})}},PM=class{constructor(e,t,i,r,s,n,o,a){this.id=e,this.k=t,this.l=i,this.g=!1,this.h=new Set,this.c=s,this.d=new DM(this.k,this.id,n,i),this.e=o,this.f=a;const c=this;this.value=Object.freeze({get document(){return r.value},set document(l){throw new on("document")},get selection(){return c.c&&c.c[0]},set selection(l){if(!(l instanceof Xr))throw Ce("selection");c.c=[l],c.m()},get selections(){return c.c},set selections(l){if(!Array.isArray(l)||l.some(u=>!(u instanceof Xr)))throw Ce("selections");c.c=l,c.m()},get visibleRanges(){return c.e},set visibleRanges(l){throw new on("visibleRanges")},get diffInformation(){return c.j},get options(){return c.d.value},set options(l){c.g||c.d.assign(l)},get viewColumn(){return c.f},set viewColumn(l){throw new on("viewColumn")},edit(l,u={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#edit not possible on closed editors"));const h=new IM(r.value,u);return l(h),c.n(h)},insertSnippet(l,u,h={undoStopBefore:!0,undoStopAfter:!0}){if(c.g)return Promise.reject(new Error("TextEditor#insertSnippet not possible on closed editors"));let f;if(!u||Array.isArray(u)&&u.length===0)f=c.c.map(p=>F.from(p));else if(u instanceof Ae){const{lineNumber:p,column:m}=ze.from(u);f=[{startLineNumber:p,startColumn:m,endLineNumber:p,endColumn:m}]}else if(u instanceof ke)f=[F.from(u)];else{f=[];for(const p of u)if(p instanceof ke)f.push(F.from(p));else{const{lineNumber:m,column:w}=ze.from(p);f.push({startLineNumber:m,startColumn:w,endLineNumber:m,endColumn:w})}}return h.keepWhitespace===void 0&&(h.keepWhitespace=!1),t.$tryInsertSnippet(e,r.value.version,l.value,f,h)},setDecorations(l,u){const h=u.length===0;h&&!c.h.has(l.key)||(h?c.h.delete(l.key):c.h.add(l.key),c.o(()=>{if(fx(u))return t.$trySetDecorations(e,l.key,dL(u));{const f=new Array(4*u.length);for(let p=0,m=u.length;p<m;p++){const w=u[p];f[4*p]=w.start.line+1,f[4*p+1]=w.start.character+1,f[4*p+2]=w.end.line+1,f[4*p+3]=w.end.character+1}return t.$trySetDecorationsFast(e,l.key,f)}}))},revealRange(l,u){c.o(()=>t.$tryRevealRange(e,F.from(l),u||md.Default))},show(l){t.$tryShowEditor(e,Pt.from(l))},hide(){t.$tryHideEditor(e)},[Symbol.for("debug.description")](){return`TextEditor(${this.document.uri.toString()})`}})}dispose(){si(!this.g),this.g=!0}_acceptOptions(e){si(!this.g),this.d._accept(e)}_acceptVisibleRanges(e){si(!this.g),this.e=e}_acceptViewColumn(e){si(!this.g),this.f=e}_acceptSelections(e){si(!this.g),this.c=e}_acceptDiffInformation(e){si(!this.g),this.j=e}async m(){const e=this.c.map(hr.from);return await this.o(()=>this.k.$trySetSelections(this.id,e)),this.value}n(e){const t=e.finalize();if(t.edits.length===0&&!t.setEndOfLine)return Promise.resolve(!0);const i=t.edits.map(s=>s.range);i.sort((s,n)=>s.end.line===n.end.line?s.end.character===n.end.character?s.start.line===n.start.line?s.start.character-n.start.character:s.start.line-n.start.line:s.end.character-n.end.character:s.end.line-n.end.line);for(let s=0,n=i.length-1;s<n;s++){const o=i[s].end;if(i[s+1].start.isBefore(o))return Promise.reject(new Error("Overlapping ranges are not allowed!"))}const r=t.edits.map(s=>({range:F.from(s.range),text:s.text,forceMoveMarkers:s.forceMoveMarkers}));return this.k.$tryApplyEdits(this.id,t.documentVersionId,r,{setEndOfLine:typeof t.setEndOfLine=="number"?ya.from(t.setEndOfLine):void 0,undoStopBefore:t.undoStopBefore,undoStopAfter:t.undoStopAfter})}o(e){return this.g?(this.l.warn("TextEditor is closed/disposed"),Promise.resolve(void 0)):e().then(()=>this,t=>(t instanceof Error&&t.name==="DISPOSED"||this.l.warn(t),null))}},AM=class{constructor(e){this.value=e,this.a=0}ref(){this.a++}unref(){return--this.a===0}},ow=class{constructor(t,i){this.h=t,this.i=i,this.a=null,this.b=new Map,this.c=new Ft,this.d=new P,this.e=new P,this.f=new P,this.g=new P,this.onDidAddDocuments=this.d.event,this.onDidRemoveDocuments=this.e.event,this.onDidChangeVisibleTextEditors=this.f.event,this.onDidChangeActiveTextEditor=this.g.event}$acceptDocumentsAndEditorsDelta(t){this.acceptDocumentsAndEditorsDelta(t)}acceptDocumentsAndEditorsDelta(t){const i=[],r=[],s=[];if(t.removedDocuments)for(const n of t.removedDocuments){const o=y.revive(n),a=this.c.get(o);a?.unref()&&(this.c.delete(o),i.push(a.value))}if(t.addedDocuments)for(const n of t.addedDocuments){const o=y.revive(n.uri);let a=this.c.get(o);if(a&&o.scheme!==V.vscodeNotebookCell&&o.scheme!==V.vscodeInteractiveInput)throw new Error(`document '${o} already exists!'`);a||(a=new AM(new kM(this.h.getProxy(J.MainThreadDocuments),o,n.lines,n.EOL,n.versionId,n.languageId,n.isDirty,n.encoding)),this.c.set(o,a),r.push(a.value)),a.ref()}if(t.removedEditors)for(const n of t.removedEditors){const o=this.b.get(n);this.b.delete(n),o&&s.push(o)}if(t.addedEditors)for(const n of t.addedEditors){const o=y.revive(n.documentUri);si(this.c.has(o),`document '${o}' does not exist`),si(!this.b.has(n.id),`editor '${n.id}' already exists!`);const a=this.c.get(o).value,c=new PM(n.id,this.h.getProxy(J.MainThreadTextEditors),this.i,new _t(()=>a.document),n.selections.map(hr.to),n.options,n.visibleRanges.map(l=>F.to(l)),typeof n.editorPosition=="number"?Pt.to(n.editorPosition):void 0);this.b.set(n.id,c)}t.newActiveEditor!==void 0&&(si(t.newActiveEditor===null||this.b.has(t.newActiveEditor),`active editor '${t.newActiveEditor}' does not exist`),this.a=t.newActiveEditor),Hr(i),Hr(s),t.removedDocuments&&this.e.fire(i),t.addedDocuments&&this.d.fire(r),(t.removedEditors||t.addedEditors)&&this.f.fire(this.allEditors().map(n=>n.value)),t.newActiveEditor!==void 0&&this.g.fire(this.activeEditor())}getDocument(t){return this.c.get(t)?.value}allDocuments(){return Ot.map(this.c.values(),t=>t.value)}getEditor(t){return this.b.get(t)}activeEditor(t){if(!this.a)return;const i=this.b.get(this.a);return t?i:i?.value}allEditors(){return[...this.b.values()]}};ow=__decorate([__param(0,Fe),__param(1,We)],ow);var Ua=B("IExtHostDocumentsAndEditors"),TM={activeComment:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.activeComment.d.ts"},aiRelatedInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiRelatedInformation.d.ts"},aiSettingsSearch:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiSettingsSearch.d.ts"},aiTextSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.aiTextSearchProvider.d.ts",version:2},authIssuers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authIssuers.d.ts"},authLearnMore:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authLearnMore.d.ts"},authSession:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.authSession.d.ts"},canonicalUriProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.canonicalUriProvider.d.ts"},chatEditing:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatEditing.d.ts"},chatParticipantAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantAdditions.d.ts"},chatParticipantPrivate:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatParticipantPrivate.d.ts",version:9},chatProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatProvider.d.ts"},chatReferenceBinaryData:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceBinaryData.d.ts"},chatReferenceDiagnostic:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatReferenceDiagnostic.d.ts"},chatStatusItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatStatusItem.d.ts"},chatTab:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.chatTab.d.ts"},codeActionAI:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionAI.d.ts"},codeActionRanges:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codeActionRanges.d.ts"},codiconDecoration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.codiconDecoration.d.ts"},commentReactor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReactor.d.ts"},commentReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentReveal.d.ts"},commentThreadApplicability:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentThreadApplicability.d.ts"},commentingRangeHint:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentingRangeHint.d.ts"},commentsDraftState:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.commentsDraftState.d.ts"},contribAccessibilityHelpContent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribAccessibilityHelpContent.d.ts"},contribCommentEditorActionsMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentEditorActionsMenu.d.ts"},contribCommentPeekContext:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentPeekContext.d.ts"},contribCommentThreadAdditionalMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentThreadAdditionalMenu.d.ts"},contribCommentsViewThreadMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribCommentsViewThreadMenus.d.ts"},contribDebugCreateConfiguration:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDebugCreateConfiguration.d.ts"},contribDiffEditorGutterToolBarMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribDiffEditorGutterToolBarMenus.d.ts"},contribEditSessions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditSessions.d.ts"},contribEditorContentMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribEditorContentMenu.d.ts"},contribLabelFormatterWorkspaceTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLabelFormatterWorkspaceTooltip.d.ts"},contribLanguageModelToolSets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribLanguageModelToolSets.d.ts"},contribMenuBarHome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMenuBarHome.d.ts"},contribMergeEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMergeEditorMenus.d.ts"},contribMultiDiffEditorMenus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribMultiDiffEditorMenus.d.ts"},contribNotebookStaticPreloads:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribNotebookStaticPreloads.d.ts"},contribRemoteHelp:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribRemoteHelp.d.ts"},contribShareMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribShareMenu.d.ts"},contribSourceControlHistoryItemMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryItemMenu.d.ts"},contribSourceControlHistoryTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlHistoryTitleMenu.d.ts"},contribSourceControlInputBoxMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlInputBoxMenu.d.ts"},contribSourceControlTitleMenu:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribSourceControlTitleMenu.d.ts"},contribStatusBarItems:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribStatusBarItems.d.ts"},contribViewContainerTitle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewContainerTitle.d.ts"},contribViewsRemote:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsRemote.d.ts"},contribViewsWelcome:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.contribViewsWelcome.d.ts"},customEditorMove:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.customEditorMove.d.ts"},debugVisualization:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.debugVisualization.d.ts"},defaultChatParticipant:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.defaultChatParticipant.d.ts",version:4},diffCommand:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffCommand.d.ts"},diffContentOptions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.diffContentOptions.d.ts"},documentFiltersExclusive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.documentFiltersExclusive.d.ts"},editSessionIdentityProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editSessionIdentityProvider.d.ts"},editorHoverVerbosityLevel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorHoverVerbosityLevel.d.ts"},editorInsets:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.editorInsets.d.ts"},embeddings:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.embeddings.d.ts"},extensionRuntime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionRuntime.d.ts"},extensionsAny:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.extensionsAny.d.ts"},externalUriOpener:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.externalUriOpener.d.ts"},fileSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider.d.ts"},fileSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fileSearchProvider2.d.ts"},findFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findFiles2.d.ts",version:2},findTextInFiles:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles.d.ts"},findTextInFiles2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.findTextInFiles2.d.ts"},fsChunks:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.fsChunks.d.ts"},idToken:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.idToken.d.ts"},inlineCompletionsAdditions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineCompletionsAdditions.d.ts"},inlineEdit:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.inlineEdit.d.ts"},interactive:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactive.d.ts"},interactiveWindow:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.interactiveWindow.d.ts"},ipc:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.ipc.d.ts"},languageModelCapabilities:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelCapabilities.d.ts"},languageModelDataPart:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelDataPart.d.ts",version:3},languageModelSystem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageModelSystem.d.ts"},languageStatusText:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.languageStatusText.d.ts"},mappedEditsProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.mappedEditsProvider.d.ts"},multiDocumentHighlightProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.multiDocumentHighlightProvider.d.ts"},nativeWindowHandle:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.nativeWindowHandle.d.ts"},newSymbolNamesProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.newSymbolNamesProvider.d.ts"},notebookCellExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookCellExecution.d.ts"},notebookControllerAffinityHidden:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookControllerAffinityHidden.d.ts"},notebookDeprecated:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookDeprecated.d.ts"},notebookExecution:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookExecution.d.ts"},notebookKernelSource:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookKernelSource.d.ts"},notebookLiveShare:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookLiveShare.d.ts"},notebookMessaging:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMessaging.d.ts"},notebookMime:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookMime.d.ts"},notebookReplDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookReplDocument.d.ts"},notebookVariableProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.notebookVariableProvider.d.ts"},portsAttributes:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.portsAttributes.d.ts"},profileContentHandlers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.profileContentHandlers.d.ts"},quickDiffProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickDiffProvider.d.ts"},quickInputButtonLocation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickInputButtonLocation.d.ts"},quickPickItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickItemTooltip.d.ts"},quickPickSortByLabel:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.quickPickSortByLabel.d.ts"},resolvers:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.resolvers.d.ts"},scmActionButton:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmActionButton.d.ts"},scmHistoryProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmHistoryProvider.d.ts"},scmMultiDiffEditor:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmMultiDiffEditor.d.ts"},scmSelectedProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmSelectedProvider.d.ts"},scmTextDocument:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmTextDocument.d.ts"},scmValidation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.scmValidation.d.ts"},shareProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.shareProvider.d.ts"},speech:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.speech.d.ts"},statusBarItemTooltip:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.statusBarItemTooltip.d.ts"},tabInputMultiDiff:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputMultiDiff.d.ts"},tabInputTextMerge:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tabInputTextMerge.d.ts"},taskPresentationGroup:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskPresentationGroup.d.ts"},taskProblemMatcherStatus:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.taskProblemMatcherStatus.d.ts"},telemetry:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.telemetry.d.ts"},terminalCompletionProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalCompletionProvider.d.ts"},terminalDataWriteEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDataWriteEvent.d.ts"},terminalDimensions:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalDimensions.d.ts"},terminalExecuteCommandEvent:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalExecuteCommandEvent.d.ts"},terminalQuickFixProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalQuickFixProvider.d.ts"},terminalSelection:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalSelection.d.ts"},terminalShellEnv:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.terminalShellEnv.d.ts"},testObserver:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testObserver.d.ts"},testRelatedCode:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.testRelatedCode.d.ts"},textEditorDiffInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textEditorDiffInformation.d.ts"},textSearchComplete2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchComplete2.d.ts"},textSearchProvider:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider.d.ts"},textSearchProvider2:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.textSearchProvider2.d.ts"},timeline:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.timeline.d.ts"},tokenInformation:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tokenInformation.d.ts"},toolProgress:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.toolProgress.d.ts"},treeViewActiveItem:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewActiveItem.d.ts"},treeViewMarkdownMessage:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewMarkdownMessage.d.ts"},treeViewReveal:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.treeViewReveal.d.ts"},tunnelFactory:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnelFactory.d.ts"},tunnels:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.tunnels.d.ts"},valueSelectionInQuickPick:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.valueSelectionInQuickPick.d.ts"},workspaceTrust:{proposal:"https://raw.githubusercontent.com/microsoft/vscode/main/src/vscode-dts/vscode.proposed.workspaceTrust.d.ts"}},np=Object.freeze(TM),aw=jt.as(Th.JSONContribution),RM=class Xp{static a(t){const i=new vn;for(let r=0,s=t.length;r<s;r++)i.add(t[r].description.identifier);return i}static compute(t,i){if(!t||!t.length)return new Xp(i,[]);if(!i||!i.length)return new Xp([],t);const r=this.a(t),s=this.a(i),n=i.filter(a=>!r.has(a.description.identifier)),o=t.filter(a=>!s.has(a.description.identifier));return new Xp(n,o)}constructor(t,i){this.added=t,this.removed=i}},LM=class{constructor(e,t,i){this.name=e,this.defaultExtensionKind=t,this.canHandleResolver=i,this.a=null,this.b=null,this.c=null}setHandler(e){if(this.a!==null)throw new Error("Handler already set!");return this.a=e,this.d(),{dispose:()=>{this.a=null}}}acceptUsers(e){this.c=RM.compute(this.b,e),this.b=e,this.d()}d(){if(!(this.a===null||this.b===null||this.c===null))try{this.a(this.b,this.c)}catch(e){Gt(e)}}},NM={type:"string",enum:["ui","workspace"],enumDescriptions:[d(14048,null),d(14049,null)]},sS="vscode://schemas/vscode-extensions",cw={properties:{engines:{type:"object",description:d(14050,null),properties:{vscode:{type:"string",description:d(14051,null),default:"^1.22.0"}}},publisher:{description:d(14052,null),type:"string"},displayName:{description:d(14053,null),type:"string"},categories:{description:d(14054,null),type:"array",uniqueItems:!0,items:{oneOf:[{type:"string",enum:J4},{type:"string",const:"Languages",deprecationMessage:d(14055,null)}]}},galleryBanner:{type:"object",description:d(14056,null),properties:{color:{description:d(14057,null),type:"string"},theme:{description:d(14058,null),type:"string",enum:["dark","light"]}}},contributes:{description:d(14059,null),type:"object",properties:{},default:{}},preview:{type:"boolean",description:d(14060,null)},enableProposedApi:{type:"boolean",deprecationMessage:d(14061,null)},enabledApiProposals:{markdownDescription:d(14062,null),type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(np).map(e=>e),markdownEnumDescriptions:Object.values(np).map(e=>e.proposal)}},api:{markdownDescription:d(14063,null),type:"string",enum:["none"],enumDescriptions:[d(14064,null)]},activationEvents:{description:d(14065,null),type:"array",items:{type:"string",defaultSnippets:[{label:"onWebviewPanel",description:d(14066,null),body:"onWebviewPanel:viewType"},{label:"onLanguage",description:d(14067,null),body:"onLanguage:${1:languageId}"},{label:"onCommand",description:d(14068,null),body:"onCommand:${2:commandId}"},{label:"onDebug",description:d(14069,null),body:"onDebug"},{label:"onDebugInitialConfigurations",description:d(14070,null),body:"onDebugInitialConfigurations"},{label:"onDebugDynamicConfigurations",description:d(14071,null),body:"onDebugDynamicConfigurations"},{label:"onDebugResolve",description:d(14072,null),body:"onDebugResolve:${6:type}"},{label:"onDebugAdapterProtocolTracker",description:d(14073,null),body:"onDebugAdapterProtocolTracker:${6:type}"},{label:"workspaceContains",description:d(14074,null),body:"workspaceContains:${4:filePattern}"},{label:"onStartupFinished",description:d(14075,null),body:"onStartupFinished"},{label:"onTaskType",description:d(14076,null),body:"onTaskType:${1:taskType}"},{label:"onFileSystem",description:d(14077,null),body:"onFileSystem:${1:scheme}"},{label:"onEditSession",description:d(14078,null),body:"onEditSession:${1:scheme}"},{label:"onSearch",description:d(14079,null),body:"onSearch:${7:scheme}"},{label:"onView",body:"onView:${5:viewId}",description:d(14080,null)},{label:"onUri",body:"onUri",description:d(14081,null)},{label:"onOpenExternalUri",body:"onOpenExternalUri",description:d(14082,null)},{label:"onCustomEditor",body:"onCustomEditor:${9:viewType}",description:d(14083,null)},{label:"onNotebook",body:"onNotebook:${1:type}",description:d(14084,null)},{label:"onAuthenticationRequest",body:"onAuthenticationRequest:${11:authenticationProviderId}",description:d(14085,null)},{label:"onRenderer",description:d(14086,null),body:"onRenderer:${11:rendererId}"},{label:"onTerminalProfile",body:"onTerminalProfile:${1:terminalId}",description:d(14087,null)},{label:"onTerminalQuickFixRequest",body:"onTerminalQuickFixRequest:${1:quickFixId}",description:d(14088,null)},{label:"onWalkthrough",body:"onWalkthrough:${1:walkthroughID}",description:d(14089,null)},{label:"onIssueReporterOpened",body:"onIssueReporterOpened",description:d(14090,null)},{label:"onChatParticipant",body:"onChatParticipant:${1:participantId}",description:d(14091,null)},{label:"onLanguageModelTool",body:"onLanguageModelTool:${1:toolId}",description:d(14092,null)},{label:"onTerminalCompletionsRequested",body:"onTerminalCompletionsRequested",description:d(14093,null)},{label:"onMcpCollection",description:d(14094,null),body:"onMcpCollection:${2:collectionId}"},{label:"*",description:d(14095,null),body:"*"}]}},badges:{type:"array",description:d(14096,null),items:{type:"object",required:["url","href","description"],properties:{url:{type:"string",description:d(14097,null)},href:{type:"string",description:d(14098,null)},description:{type:"string",description:d(14099,null)}}}},markdown:{type:"string",description:d(14100,null),enum:["github","standard"],default:"github"},qna:{default:"marketplace",description:d(14101,null),anyOf:[{type:["string","boolean"],enum:["marketplace",!1]},{type:"string"}]},extensionDependencies:{description:d(14102,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:e1}},extensionPack:{description:d(14103,null),type:"array",uniqueItems:!0,items:{type:"string",pattern:e1}},extensionKind:{description:d(14104,null),type:"array",items:NM,default:["workspace"],defaultSnippets:[{body:["ui"],description:d(14105,null)},{body:["workspace"],description:d(14106,null)},{body:["ui","workspace"],description:d(14107,null)},{body:["workspace","ui"],description:d(14108,null)},{body:[],description:d(14109,null)}]},capabilities:{description:d(14110,null),type:"object",properties:{virtualWorkspaces:{description:d(14111,null),type:["boolean","object"],defaultSnippets:[{label:"limited",body:{supported:"${1:limited}",description:"${2}"}},{label:"false",body:{supported:!1,description:"${2}"}}],default:(!0).valueOf,properties:{supported:{markdownDescription:d(14112,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(14113,null),d(14114,null),d(14115,null)]},description:{type:"string",markdownDescription:d(14116,null)}}},untrustedWorkspaces:{description:d(14117,null),type:"object",required:["supported"],defaultSnippets:[{body:{supported:"${1:limited}",description:"${2}"}}],properties:{supported:{markdownDescription:d(14118,null),type:["string","boolean"],enum:["limited",!0,!1],enumDescriptions:[d(14119,null),d(14120,null),d(14121,null)]},restrictedConfigurations:{description:d(14122,null),type:"array",items:{type:"string"}},description:{type:"string",markdownDescription:d(14123,null)}}}}},sponsor:{description:d(14124,null),type:"object",defaultSnippets:[{body:{url:"${1:https:}"}}],properties:{url:{description:d(14125,null),type:"string"}}},scripts:{type:"object",properties:{"vscode:prepublish":{description:d(14126,null),type:"string"},"vscode:uninstall":{description:d(14127,null),type:"string"}}},icon:{type:"string",description:d(14128,null)},l10n:{type:"string",description:d(14129,null)},pricing:{type:"string",markdownDescription:d(14130,null),enum:["Free","Trial"],default:"Free"}}},MM=class{constructor(){this.a=new Map}registerExtensionPoint(e){if(this.a.has(e.extensionPoint))throw new Error("Duplicate extension point: "+e.extensionPoint);const t=new LM(e.extensionPoint,e.defaultExtensionKind,e.canHandleResolver);return this.a.set(e.extensionPoint,t),e.activationEventsGenerator&&vR.register(e.extensionPoint,e.activationEventsGenerator),cw.properties.contributes.properties[e.extensionPoint]=e.jsonSchema,aw.registerSchema(sS,cw),t}getExtensionPoints(){return Array.from(this.a.values())}},nS={ExtensionsRegistry:"ExtensionsRegistry"};jt.add(nS.ExtensionsRegistry,new MM);var FM=jt.as(nS.ExtensionsRegistry);aw.registerSchema(sS,cw),aw.registerSchema(dT,{properties:{extensionEnabledApiProposals:{description:d(14131,null),type:"object",properties:{},additionalProperties:{anyOf:[{type:"array",uniqueItems:!0,items:{type:"string",enum:Object.keys(np),markdownEnumDescriptions:Object.values(np).map(e=>e.proposal)}}]}}}});var OM={type:"object",additionalProperties:!1,properties:{type:{type:"string",description:d(11449,null)},required:{type:"array",items:{type:"string"}},properties:{type:"object",description:d(11450,null),additionalProperties:{$ref:"http://json-schema.org/draft-07/schema#"}},when:{type:"string",markdownDescription:d(11451,null),default:""}}},lw;(function(e){function t(i,r,s){if(!i)return;const n=Ue(i.type)?i.type:void 0;if(!n||n.length===0){s.error(d(11452,null));return}const o=[];if(Array.isArray(i.required))for(const a of i.required)Ue(a)&&o.push(a);return{extensionId:r.value,taskType:n,required:o,properties:i.properties?tt(i.properties):{},when:i.when?gt.deserialize(i.when):void 0}}e.from=t})(lw||(lw={}));var UM=FM.registerExtensionPoint({extensionPoint:"taskDefinitions",activationEventsGenerator:(e,t)=>{for(const i of e)i.type&&t.push(`onTaskType:${i.type}`)},jsonSchema:{description:d(11453,null),type:"array",items:OM}}),jM=class{constructor(){this.d=new P,this.onDefinitionsChanged=this.d.event,this.a=Object.create(null),this.b=new Promise((e,t)=>{UM.setHandler((i,r)=>{this.c=void 0;try{for(const s of r.removed){const n=s.value;for(const o of n)this.a&&o.type&&this.a[o.type]&&delete this.a[o.type]}for(const s of r.added){const n=s.value;for(const o of n){const a=lw.from(o,s.description.identifier,s.collector);a&&(this.a[a.taskType]=a)}}(r.removed.length>0||r.added.length>0)&&this.d.fire()}catch{}e(void 0)})})}onReady(){return this.b}get(e){return this.a[e]}all(){return Object.keys(this.a).map(e=>this.a[e])}getJsonSchema(){if(this.c===void 0){const e=[];for(const t of this.all()){const i={type:"object",additionalProperties:!1};t.required.length>0&&(i.required=t.required.slice(0)),t.properties!==void 0?i.properties=tt(t.properties):i.properties=Object.create(null),i.properties.type={type:"string",enum:[t.taskType]},e.push(i)}this.c={oneOf:e}}return this.c}},BM=new jM,HM="settings",pq=new C("taskRunning",!1,d(11454,null)),gq=new C("taskTerminalActive",!1,d(11455,null)),mq=Bu(11457,"Tasks"),op;(function(e){e[e.Escape=1]="Escape",e[e.Strong=2]="Strong",e[e.Weak=3]="Weak"})(op||(op={})),function(e){function t(i){if(!i)return e.Strong;switch(i.toLowerCase()){case"escape":return e.Escape;case"strong":return e.Strong;case"weak":return e.Weak;default:return e.Strong}}e.from=t}(op||(op={}));var oS;(function(e){e.defaults={cwd:"${workspaceFolder}"}})(oS||(oS={}));var Jl;(function(e){e[e.Always=1]="Always",e[e.Silent=2]="Silent",e[e.Never=3]="Never"})(Jl||(Jl={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"silent":return e.Silent;case"never":return e.Never;default:return e.Always}}e.fromString=t}(Jl||(Jl={}));var Zl;(function(e){e[e.Never=1]="Never",e[e.OnProblem=2]="OnProblem",e[e.Always=3]="Always"})(Zl||(Zl={})),function(e){function t(i){switch(i.toLowerCase()){case"always":return e.Always;case"never":return e.Never;case"onproblem":return e.OnProblem;default:return e.OnProblem}}e.fromString=t}(Zl||(Zl={}));var Yl;(function(e){e[e.Shared=1]="Shared",e[e.Dedicated=2]="Dedicated",e[e.New=3]="New"})(Yl||(Yl={})),function(e){function t(i){switch(i.toLowerCase()){case"shared":return e.Shared;case"dedicated":return e.Dedicated;case"new":return e.New;default:return e.Shared}}e.fromString=t}(Yl||(Yl={}));var aS;(function(e){e.defaults={echo:!0,reveal:Jl.Always,revealProblems:Zl.Never,focus:!1,panel:Yl.Shared,showReuseMessage:!0,clear:!1}})(aS||(aS={}));var ap;(function(e){e[e.Shell=1]="Shell",e[e.Process=2]="Process",e[e.CustomExecution=3]="CustomExecution"})(ap||(ap={})),function(e){function t(r){switch(r.toLowerCase()){case"shell":return e.Shell;case"process":return e.Process;case"customExecution":return e.CustomExecution;default:return e.Process}}e.fromString=t;function i(r){switch(r){case e.Shell:return"shell";case e.Process:return"process";case e.CustomExecution:return"customExecution";default:return"process"}}e.toString=i}(ap||(ap={}));var cS;(function(e){function t(i){return Ue(i)?i:i.value}e.value=t})(cS||(cS={}));var lS;(function(e){e.Clean={_id:"clean",isDefault:!1},e.Build={_id:"build",isDefault:!1},e.Rebuild={_id:"rebuild",isDefault:!1},e.Test={_id:"test",isDefault:!1};function t(r){return r===e.Clean._id||r===e.Build._id||r===e.Rebuild._id||r===e.Test._id}e.is=t;function i(r){if(r!==void 0)return Ue(r)?t(r)?{_id:r,isDefault:!1}:void 0:r}e.from=i})(lS||(lS={}));var uS;(function(e){e[e.Global=1]="Global",e[e.Workspace=2]="Workspace",e[e.Folder=3]="Folder"})(uS||(uS={}));var hS;(function(e){e.Workspace="workspace",e.Extension="extension",e.InMemory="inMemory",e.WorkspaceFile="workspaceFile",e.User="user";function t(i){switch(i){case e.User:return 2;case e.WorkspaceFile:return 5;default:return 6}}e.toConfigurationTarget=t})(hS||(hS={}));var dS;(function(e){e.parallel="parallel",e.sequence="sequence"})(dS||(dS={}));var uw;(function(e){e[e.default=1]="default",e[e.folderOpen=2]="folderOpen"})(uw||(uw={}));var fS;(function(e){e.terminateNewest="terminateNewest",e.terminateOldest="terminateOldest",e.prompt="prompt",e.warn="warn",e.silent="silent"})(fS||(fS={}));var pS;(function(e){e.defaults={reevaluateOnRerun:!0,runOn:uw.default,instanceLimit:1,instancePolicy:"prompt"}})(pS||(pS={}));var cp;(function(e){e[e.Process=1]="Process",e[e.Terminal=2]="Terminal"})(cp||(cp={})),function(e){e._default=e.Terminal}(cp||(cp={}));var gS;(function(e){e[e.V0_1_0=1]="V0_1_0",e[e.V2_0_0=2]="V2_0_0"})(gS||(gS={}));var mS;(function(e){e.SingleRun="singleRun",e.Background="background"})(mS||(mS={}));var no;(function(e){e.Changed="changed",e.ProcessStarted="processStarted",e.ProcessEnded="processEnded",e.Terminated="terminated",e.Start="start",e.AcquiredInput="acquiredInput",e.DependsOnStarted="dependsOnStarted",e.Active="active",e.Inactive="inactive",e.End="end",e.ProblemMatcherStarted="problemMatcherStarted",e.ProblemMatcherEnded="problemMatcherEnded",e.ProblemMatcherFoundErrors="problemMatcherFoundErrors"})(no||(no={}));var vS;(function(e){e[e.System=0]="System",e[e.User=1]="User",e[e.FolderOpen=2]="FolderOpen",e[e.ConfigurationChange=3]="ConfigurationChange",e[e.Reconnect=4]="Reconnect"})(vS||(vS={}));var wS;(function(e){function t(c){return{taskId:c._id,taskName:c.configurationProperties.name,runType:c.configurationProperties.isBackground?"background":"singleRun",group:c.configurationProperties.group,__task:c}}function i(c,l,u){return{...t(c),kind:no.Start,terminalId:l,resolvedVariables:u}}e.start=i;function r(c,l,u){return{...t(c),kind:no.ProcessStarted,terminalId:l,processId:u}}e.processStarted=r;function s(c,l,u){return{...t(c),kind:no.ProcessEnded,terminalId:l,exitCode:u}}e.processEnded=s;function n(c,l,u){return{...t(c),kind:no.Terminated,exitReason:u,terminalId:l}}e.terminated=n;function o(c,l,u){return{...t(l),kind:c,terminalId:u}}e.general=o;function a(){return{kind:no.Changed}}e.changed=a})(wS||(wS={}));var lp;(function(e){function t(r){const s=Object.keys(r).sort();let n="";for(const o of s){let a=r[o];a instanceof Object?a=t(a):typeof a=="string"&&(a=a.replace(/,/g,",,")),n+=o+","+a+","}return n}function i(r){const n={_key:t(r),type:r.taskType};return Object.assign(n,r),n}e.create=i})(lp||(lp={}));var bS;(function(e){e.AutoDetect="task.autoDetect",e.SaveBeforeRun="task.saveBeforeRun",e.ShowDecorations="task.showDecorations",e.ProblemMatchersNeverPrompt="task.problemMatchers.neverPrompt",e.SlowProviderWarning="task.slowProviderWarning",e.QuickOpenHistory="task.quickOpen.history",e.QuickOpenDetail="task.quickOpen.detail",e.QuickOpenSkip="task.quickOpen.skip",e.QuickOpenShowAll="task.quickOpen.showAll",e.AllowAutomaticTasks="task.allowAutomaticTasks",e.Reconnection="task.reconnection",e.VerboseLogging="task.verboseLogging"})(bS||(bS={}));var yS;(function(e){e.Tasks="tasks",e.SuppressTaskName="tasks.suppressTaskName",e.Windows="tasks.windows",e.Osx="tasks.osx",e.Linux="tasks.linux",e.ShowOutput="tasks.showOutput",e.IsShellCommand="tasks.isShellCommand",e.ServiceTestSetting="tasks.service.testSetting"})(yS||(yS={}));var xS;(function(e){function t(i,r){const s=BM.get(i.type);if(s===void 0){const c=tt(i);return delete c._key,lp.create(c)}const n=Object.create(null);n.type=s.taskType;const o=new Set;s.required.forEach(c=>o.add(c));const a=s.properties;for(const c of Object.keys(a)){const l=i[c];if(l!=null)n[c]=l;else if(o.has(c)){const u=a[c];if(u.default!==void 0)n[c]=tt(u.default);else switch(u.type){case"boolean":n[c]=!1;break;case"number":case"integer":n[c]=0;break;case"string":n[c]="";break;default:r.error(d(11456,null,JSON.stringify(i,void 0,0),c));return}}}return lp.create(n)}e.createTaskIdentifier=t})(xS||(xS={}));var up;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(up||(up={}));var hp;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(hp||(hp={}));var hw;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(hw||(hw={}));var Ql;(function(e){function t(s){if(s){const n=s;return n&&!!n.process}else return!1}e.is=t;function i(s){if(s==null)return;const n={process:s.process,args:s.args};return s.options&&(n.options=hw.from(s.options)),n}e.from=i;function r(s){if(s!=null)return new ra(s.process,s.args,s.options)}e.to=r})(Ql||(Ql={}));var dw;(function(e){function t(r){if(r!=null)return r}e.from=t;function i(r){if(r!=null)return r}e.to=i})(dw||(dw={}));var Xl;(function(e){function t(s){if(s){const n=s;return n&&(!!n.commandLine||!!n.command)}else return!1}e.is=t;function i(s){if(s==null)return;const n={};return s.commandLine!==void 0?n.commandLine=s.commandLine:(n.command=s.command,n.args=s.args),s.options&&(n.options=dw.from(s.options)),n}e.from=i;function r(s){if(!(s==null||s.command===void 0&&s.commandLine===void 0))return s.commandLine?new Bn(s.commandLine,s.options):new Bn(s.command,s.args?s.args:[],s.options)}e.to=r})(Xl||(Xl={}));var as;(function(e){function t(s){if(s){const n=s;return n&&n.customExecution==="customExecution"}else return!1}e.is=t;function i(s){return{customExecution:"customExecution"}}e.from=i;function r(s,n){return n.get(s)}e.to=r})(as||(as={}));var ES;(function(e){function t(i,r){let s;return i.scope!==void 0&&typeof i.scope!="number"?s=i.scope.uri:i.scope!==void 0&&typeof i.scope=="number"&&(i.scope===Us.Workspace&&r&&r.workspaceFile?s=r.workspaceFile:s=HM),{id:i._id,workspaceFolder:s}}e.from=t})(ES||(ES={}));var fw;(function(e){function t(i){if(i!=null)return{_id:i.id,isDefault:i.isDefault}}e.from=t})(fw||(fw={}));var Qs;(function(e){function t(s,n){if(s==null)return[];const o=[];for(const a of s){const c=i(a,n);c&&o.push(c)}return o}e.fromMany=t;function i(s,n){if(s==null)return;let o;s.execution instanceof ra?o=Ql.from(s.execution):s.execution instanceof Bn?o=Xl.from(s.execution):s.execution&&s.execution instanceof P1&&(o=as.from(s.execution));const a=up.from(s.definition);let c;return s.scope?typeof s.scope=="number"?c=s.scope:c=s.scope.uri:c=Us.Workspace,!a||!c?void 0:{_id:s._id,definition:a,name:s.name,source:{extensionId:n.identifier.value,label:s.source,scope:c},execution:o,isBackground:s.isBackground,group:fw.from(s.group),presentationOptions:hp.from(s.presentationOptions),problemMatchers:Ni(s.problemMatchers),hasDefinedMatchers:s.hasDefinedMatchers,runOptions:s.runOptions?s.runOptions:{reevaluateOnRerun:!0},detail:s.detail}}e.from=i;async function r(s,n,o){if(s==null)return;let a;Ql.is(s.execution)?a=Ql.to(s.execution):Xl.is(s.execution)?a=Xl.to(s.execution):as.is(s.execution)&&(a=as.to(s._id,o));const c=up.to(s.definition);let l;if(s.source&&(s.source.scope!==void 0?typeof s.source.scope=="number"?l=s.source.scope:l=await n.resolveWorkspaceFolder(y.revive(s.source.scope)):l=Us.Workspace),!c||!l)return;const u=new yd(c,l,s.name,s.source.label,a,s.problemMatchers);return s.isBackground!==void 0&&(u.isBackground=s.isBackground),s.group!==void 0&&(u.group=Xc.from(s.group._id),u.group&&s.group.isDefault&&(u.group=new Xc(u.group.id,u.group.label),s.group.isDefault===!0&&(u.group.isDefault=s.group.isDefault))),s.presentationOptions&&(u.presentationOptions=hp.to(s.presentationOptions)),s._id&&(u._id=s._id),s.detail&&(u.detail=s.detail),u}e.to=r})(Qs||(Qs={}));var pw;(function(e){function t(r){return r}e.from=t;function i(r){if(r)return Object.assign(Object.create(null),r)}e.to=i})(pw||(pw={}));var gw=class{#e;constructor(e,t,i){this._id=t,this.a=i,this.#e=e}get task(){return this.a}terminate(){this.#e.terminateTask(this)}fireDidStartProcess(e){}fireDidEndProcess(e){}},mw=class{constructor(t,i,r,s,n,o,a,c){this.q=new P,this.r=new P,this.s=new P,this.u=new P,this.v=new P,this.w=new P,this.a=t.getProxy(J.MainThreadTask),this.b=r,this.c=s,this.d=n,this.e=o,this.h=0,this.j=new Map,this.k=new Map,this.l=new Map,this.m=new Map,this.n=new Set,this.o=new Map,this.f=a,this.g=c,this.a.$registerSupportedExecutions(!0)}registerTaskProvider(t,i,r){if(!r)return new Pe(()=>{});const s=this.z();return this.j.set(s,{type:i,provider:r,extension:t}),this.a.$registerTaskProvider(s,i),new Pe(()=>{this.j.delete(s),this.a.$unregisterTaskProvider(s)})}registerTaskSystem(t,i){this.a.$registerTaskSystem(t,i)}fetchTasks(t){return this.a.$fetchTasks(pw.from(t)).then(async i=>{const r=[];for(const s of i){const n=await Qs.to(s,this.b,this.m);n&&r.push(n)}return r})}get taskExecutions(){const t=[];return this.k.forEach(i=>t.push(i)),t}terminateTask(t){if(!(t instanceof gw))throw new Error("No valid task execution provided");return this.a.$terminateTask(t._id)}get onDidStartTask(){return this.q.event}async $onDidStartTask(t,i,r){const s=this.m.get(t.id);s&&(this.o.set(t.id,s),this.e.attachPtyToTerminal(i,await s.callback(r))),this.p=t.id,this.q.fire({execution:await this.B(t)})}get onDidEndTask(){return this.r.event}async $OnDidEndTask(t){if(!this.l.has(t.id))return;const i=await this.B(t);this.l.delete(t.id),this.k.delete(t.id),this.D(t),this.r.fire({execution:i})}get onDidStartTaskProcess(){return this.s.event}async $onDidStartTaskProcess(t){const i=await this.B(t.id);this.s.fire({execution:i,processId:t.processId})}get onDidEndTaskProcess(){return this.u.event}async $onDidEndTaskProcess(t){const i=await this.B(t.id);this.u.fire({execution:i,exitCode:t.exitCode})}get onDidStartTaskProblemMatchers(){return this.v.event}async $onDidStartTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.v.fire({execution:i})}get onDidEndTaskProblemMatchers(){return this.w.event}async $onDidEndTaskProblemMatchers(t){let i;try{i=await this.B(t.execution.id)}catch{return}this.w.fire({execution:i,hasErrors:t.hasErrors})}$provideTasks(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));const s=[],n=Yt(()=>r.provider.provideTasks(et.None)).then(o=>this.x(i,s,r,o));return new Promise(o=>{n.then(a=>{Promise.all(s).then(()=>{o(a)})})})}async $resolveTask(t,i){const r=this.j.get(t);if(!r)return Promise.reject(new Error("no handler found"));if(i.definition.type!==r.type)throw new Error(`Unexpected: Task of type [${i.definition.type}] cannot be resolved by provider of type [${r.type}].`);const s=await Qs.to(i,this.b,this.m);if(!s)throw new Error("Unexpected: Task cannot be resolved.");const n=await r.provider.resolveTask(s,et.None);if(!n)return;this.C(n,r);const o=Qs.from(n,r.extension);if(!o)throw new Error("Unexpected: Task cannot be resolved.");if(n.definition!==s.definition)throw new Error("Unexpected: The resolved task definition must be the same object as the original task definition. The task definition cannot be changed.");return as.is(o.execution)&&await this.A(o,n,!0),await this.y(o)}z(){return this.h++}async A(t,i,r){const s=await this.a.$createTaskId(t);!r&&!this.m.has(s)&&(this.n.add(s),this.o.set(s,i.execution)),this.m.set(s,i.execution)}async B(t,i){if(typeof t=="string"){const n=this.l.get(t);if(!n)throw new an("Unexpected: The specified task is missing an execution");return n}const r=this.l.get(t.id);if(r)return r;let s;return i?s=Promise.resolve(new gw(this,t.id,i)):s=Qs.to(t.task,this.b,this.m).then(n=>{if(!n)throw new an("Unexpected: Task does not exist.");return new gw(this,t.id,n)}),this.l.set(t.id,s),s.then(n=>(this.k.set(t.id,n),n))}C(t,i){t._deprecated&&this.g.report("Task.constructor",i.extension,"Use the Task constructor that takes a `scope` instead.")}D(t){this.o.get(t.id)&&this.o.delete(t.id),this.n.has(t.id)&&this.p!==t.id&&(this.m.delete(t.id),this.n.delete(t.id));const r=this.n.values();let s=r.next();for(;!s.done;)!this.o.has(s.value)&&this.p!==s.value&&(this.m.delete(s.value),this.n.delete(s.value)),s=r.next()}};mw=__decorate([__param(0,Fe),__param(1,It),__param(2,ns),__param(3,Ua),__param(4,os),__param(5,Ma),__param(6,We),__param(7,Vl)],mw);var vw=class extends mw{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c),this.registerTaskSystem(V.vscodeRemote,{scheme:V.vscodeRemote,authority:"",platform:x3(0)})}async executeTask(t,i){if(!i.execution)throw new Error("Tasks to execute must include an execution");const r=Qs.from(i,t);if(r===void 0)throw new Error("Task is not valid");if(as.is(r.execution))await this.A(r,i,!1);else throw new cg;const s=await this.B(await this.a.$getTaskExecution(r),i);return this.a.$executeTask(r).catch(n=>{throw new Error(n)}),s}x(t,i,r,s){const n=[];if(s)for(const o of s){if(this.C(o,r),!o.definition||!t[o.definition.type]){const c=o.source?o.source:"No task source";this.f.warn(`The task [${c}, ${o.name}] uses an undefined task type. The task will be ignored in the future.`)}const a=Qs.from(o,r.extension);a&&as.is(a.execution)?(n.push(a),i.push(this.A(a,o,!0))):this.f.warn("Only custom execution tasks supported.")}return{tasks:n,extension:r.extension}}async y(t){if(as.is(t.execution))return t;this.f.warn("Only custom execution tasks supported.")}async $resolveVariables(t,i){return{process:void 0,variables:Object.create(null)}}async $jsonTasksSupported(){return!1}async $findExecutable(t,i,r){}};vw=__decorate([__param(0,Fe),__param(1,It),__param(2,ns),__param(3,Ua),__param(4,os),__param(5,Ma),__param(6,We),__param(7,Vl)],vw);var SS=B("IExtHostTask"),zM=class{constructor(){this.f=new Map,this.m=[],this.n=new P,this.o=new P,this.d=1}get onError(){return this.n.event}get onExit(){return this.o.event}onMessage(e){this.k&&this.n.fire(new Error("attempt to set more than one 'Message' callback")),this.k=e}onEvent(e){this.j&&this.n.fire(new Error("attempt to set more than one 'Event' callback")),this.j=e}onRequest(e){this.g&&this.n.fire(new Error("attempt to set more than one 'Request' callback")),this.g=e}sendResponse(e){e.seq>0?this.n.fire(new Error(`attempt to send more than one response for command ${e.command}`)):this.u("response",e)}sendRequest(e,t,i,r){const s={command:e};if(t&&Object.keys(t).length>0&&(s.arguments=t),this.u("request",s),typeof r=="number"){const n=setTimeout(()=>{clearTimeout(n);const o=this.f.get(s.seq);if(o){this.f.delete(s.seq);const a={type:"response",seq:0,request_seq:s.seq,success:!1,command:e,message:d(6774,null,r,e)};o(a)}},r)}return i&&this.f.set(s.seq,i),s.seq}acceptMessage(e){this.k?this.k(e):(this.m.push(e),this.m.length===1&&this.s())}q(e,t){return e.type!=="event"||t.type!=="event"}async s(){let e;for(;this.m.length;){if((!e||this.q(this.m[0],e))&&await Vi(0),e=this.m.shift(),!e)return;switch(e.type){case"event":this.j?.(e);break;case"request":this.g?.(e);break;case"response":{const t=e,i=this.f.get(t.request_seq);i&&(this.f.delete(t.request_seq),i(t));break}}}}u(e,t){t.type=e,t.seq=this.d++,this.sendMessage(t)}async w(){if(this.f.size===0)return Promise.resolve();const e=new Map;this.f.forEach((t,i)=>e.set(i,t)),await Vi(500),e.forEach((t,i)=>{t({type:"response",seq:0,request_seq:i,success:!1,command:"canceled",message:"canceled"}),this.f.delete(i)})}getPendingRequestIds(){return Array.from(this.f.keys())}dispose(){this.m=[]}};function _M(e){return e.type&&(e.label||e.program||e.runtime)}var WM=/^[a-zA-Z][a-zA-Z0-9\+\-\.]+:/;function VM(e){return!!(e&&e.match(WM))}function kS(e){if(typeof e.path=="string"&&!(typeof e.sourceReference=="number"&&e.sourceReference>0)){if(VM(e.path))return y.parse(e.path);if(Wu(e.path))return y.file(e.path)}return e.path}function $S(e){if(typeof e.path=="object"){const t=y.revive(e.path);if(t)return t.scheme===V.file?t.fsPath:t.toString()}return e.path}function qM(e,t){const i=t?kS:$S,r=tt(e);return CS(r,(s,n)=>{s&&n&&(n.path=i(n))}),r}function GM(e,t){const i=t?kS:$S,r=tt(e);return CS(r,(s,n)=>{!s&&n&&(n.path=i(n))}),r}function CS(e,t){switch(e.type){case"event":{const i=e;switch(i.event){case"output":t(!1,i.body.source);break;case"loadedSource":t(!1,i.body.source);break;case"breakpoint":t(!1,i.body.breakpoint.source);break;default:break}break}case"request":{const i=e;switch(i.command){case"setBreakpoints":t(!0,i.arguments.source);break;case"breakpointLocations":t(!0,i.arguments.source);break;case"source":t(!0,i.arguments.source);break;case"gotoTargets":t(!0,i.arguments.source);break;case"launchVSCode":i.arguments.args.forEach(r=>t(!1,r));break;default:break}break}case"response":{const i=e;if(i.success&&i.body)switch(i.command){case"stackTrace":i.body.stackFrames.forEach(r=>t(!1,r.source));break;case"loadedSources":i.body.sources.forEach(r=>t(!1,r));break;case"scopes":i.body.scopes.forEach(r=>t(!1,r.source));break;case"setFunctionBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"setBreakpoints":i.body.breakpoints.forEach(r=>t(!1,r.source));break;case"disassemble":i.body?.instructions.forEach(s=>t(!1,s.location));break;case"locations":t(!1,i.body?.source);break;default:break}break}}}var Kl=B("IExtHostEditorTabs"),IS=class{constructor(e,t,i){this.e=i,this.d=t,this.acceptDtoUpdate(e)}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.id===e.e()},get label(){return e.b.label},get input(){return e.c},get isDirty(){return e.b.isDirty},get isPinned(){return e.b.isPinned},get isPreview(){return e.b.isPreview},get group(){return e.d.apiObject}};this.a=Object.freeze(t)}return this.a}get tabId(){return this.b.id}acceptDtoUpdate(e){this.b=e,this.c=this.f()}f(){switch(this.b.input.kind){case 1:return new Z1(y.revive(this.b.input.uri));case 2:return new Vd(y.revive(this.b.input.original),y.revive(this.b.input.modified));case 3:return new O8(y.revive(this.b.input.base),y.revive(this.b.input.input1),y.revive(this.b.input.input2),y.revive(this.b.input.result));case 6:return new Y1(y.revive(this.b.input.uri),this.b.input.viewType);case 7:return new U8(this.b.input.viewType);case 4:return new Q1(y.revive(this.b.input.uri),this.b.input.notebookType);case 5:return new X1(y.revive(this.b.input.original),y.revive(this.b.input.modified),this.b.input.notebookType);case 8:return new j8;case 9:return new B8(y.revive(this.b.input.uri),y.revive(this.b.input.inputBoxUri));case 10:return new H8;case 11:return new z8(this.b.input.diffEditors.map(e=>new Vd(y.revive(e.original),y.revive(e.modified))));default:return}}},JM=class{constructor(e,t){this.c=[],this.d="",this.b=e,this.e=t;for(const i of e.tabs)i.isActive&&(this.d=i.id),this.c.push(new IS(i,this,()=>this.activeTabId()))}get apiObject(){if(!this.a){const e=this,t={get isActive(){return e.b.groupId===e.e()},get viewColumn(){return Pt.to(e.b.viewColumn)},get activeTab(){return e.c.find(i=>i.tabId===e.d)?.apiObject},get tabs(){return Object.freeze(e.c.map(i=>i.apiObject))}};this.a=Object.freeze(t)}return this.a}get groupId(){return this.b.groupId}get tabs(){return this.c}acceptGroupDtoUpdate(e){this.b=e}acceptTabOperation(e){if(e.kind===0){const i=new IS(e.tabDto,this,()=>this.activeTabId());return this.c.splice(e.index,0,i),e.tabDto.isActive&&(this.d=i.tabId),i}else if(e.kind===1){const i=this.c.splice(e.index,1)[0];if(!i)throw new Error(`Tab close updated received for index ${e.index} which does not exist`);return i.tabId===this.d&&(this.d=""),i}else if(e.kind===3){if(e.oldIndex===void 0)throw new Error("Invalid old index on move IPC");const i=this.c.splice(e.oldIndex,1)[0];if(!i)throw new Error(`Tab move updated received for index ${e.oldIndex} which does not exist`);return this.c.splice(e.index,0,i),i}const t=this.c.find(i=>i.tabId===e.tabDto.id);if(!t)throw new Error("INVALID tab");return e.tabDto.isActive?this.d=e.tabDto.id:this.d===e.tabDto.id&&!e.tabDto.isActive&&(this.d=""),t.acceptDtoUpdate(e.tabDto),t}activeTabId(){return this.d}},ww=class{constructor(t){this.b=new P,this.c=new P,this.e=[],this.a=t.getProxy(J.MainThreadEditorTabs)}get tabGroups(){if(!this.f){const t=this,i={onDidChangeTabGroups:t.c.event,onDidChangeTabs:t.b.event,get all(){return Object.freeze(t.e.map(r=>r.apiObject))},get activeTabGroup(){const r=t.d;return wo(t.e.find(n=>n.groupId===r)?.apiObject)},close:async(r,s)=>{const n=Array.isArray(r)?r:[r];return n.length?ZM(n[0])?this.j(n,s):this.i(n,s):!0}};this.f=Object.freeze(i)}return this.f}$acceptEditorTabModel(t){const i=new Set(this.e.map(l=>l.groupId)),r=new Set(t.map(l=>l.groupId)),s=SI(i,r),n=this.e.filter(l=>s.removed.includes(l.groupId)).map(l=>l.apiObject),o=[],a=[];this.e=t.map(l=>{const u=new JM(l,()=>this.d);return s.added.includes(u.groupId)?o.push(u.apiObject):a.push(u.apiObject),u});const c=wo(t.find(l=>l.isActive===!0)?.groupId);c!==void 0&&this.d!==c&&(this.d=c),this.c.fire(Object.freeze({opened:o,closed:n,changed:a}))}$acceptTabGroupUpdate(t){const i=this.e.find(r=>r.groupId===t.groupId);if(!i)throw new Error("Update Group IPC call received before group creation.");i.acceptGroupDtoUpdate(t),t.isActive&&(this.d=t.groupId),this.c.fire(Object.freeze({changed:[i.apiObject],opened:[],closed:[]}))}$acceptTabOperation(t){const i=this.e.find(s=>s.groupId===t.groupId);if(!i)throw new Error("Update Tabs IPC call received before group creation.");const r=i.acceptTabOperation(t);switch(t.kind){case 0:this.b.fire(Object.freeze({opened:[r.apiObject],closed:[],changed:[]}));return;case 1:this.b.fire(Object.freeze({opened:[],closed:[r.apiObject],changed:[]}));return;case 3:case 2:this.b.fire(Object.freeze({opened:[],closed:[],changed:[r.apiObject]}));return}}g(t){for(const i of this.e)for(const r of i.tabs)if(r.apiObject===t)return r}h(t){return this.e.find(i=>i.apiObject===t)}async i(t,i){const r=[];for(const s of t){const n=this.g(s);if(!n)throw new Error("Tab close: Invalid tab not found!");r.push(n.tabId)}return this.a.$closeTab(r,i)}async j(t,i){const r=[];for(const s of t){const n=this.h(s);if(!n)throw new Error("Group close: Invalid group not found!");r.push(n.groupId)}return this.a.$closeGroup(r,i)}};ww=__decorate([__param(0,Fe)],ww);function ZM(e){return e.tabs!==void 0}var YM=0,DS=new WeakMap,dp=B("IExtHostTesting"),bw=class extends ne{constructor(t,i,r,s){super(),this.C=i,this.D=r,this.F=s,this.f=this.B(new P),this.g=new Map,this.w=this.B(new P),this.y=new Set,this.z=new Map,this.onResultsChanged=this.f.event,this.results=[],this.h=t.getProxy(J.MainThreadTesting),this.m=new iF(this.h),this.j=new KM(this.h,i),r.registerArgumentProcessor({processArgument:n=>{switch(n?.$mid){case 16:{const o=n,a=o.tests[o.tests.length-1].item.extId;return this.g.get(Le.root(a))?.collection.tree.get(a)?.actual??rE(n)}case 18:{const{test:o,message:a}=n,c=o.item.extId;return{test:this.g.get(Le.root(c))?.collection.tree.get(c)?.actual??rE({$mid:16,tests:[o]}),message:ka.to(a)}}default:return n}}}),r.registerCommand(!1,"testing.getExplorerSelection",async()=>{const n=await r.executeCommand("_testing.getExplorerSelection"),o=a=>{const c=this.g.get(Le.root(a));if(c)return Le.isRoot(a)?c.controller:c.collection.tree.get(a)?.actual};return{include:n?.include.map(o).filter(Mi)||[],exclude:n?.exclude.map(o).filter(Mi)||[]}})}createTestController(t,i,r,s){if(this.g.has(i))throw new Error(`Attempt to insert a duplicate controller with ID "${i}"`);const n=new ue,o=n.add(new gN(i,r,this.F));o.root.label=r;const a=new Map,c=new Set,l=this.h,u=()=>{let p=0;s&&(p|=2);const m=f.relatedCodeProvider;return m&&(m?.provideRelatedTests&&(p|=8),m?.provideRelatedCode&&(p|=4)),p},h={items:o.root.children,get label(){return r},set label(p){r=p,o.root.label=p,l.$updateController(i,{label:r})},get refreshHandler(){return s},set refreshHandler(p){s=p,l.$updateController(i,{capabilities:u()})},get id(){return i},get relatedCodeProvider(){return f.relatedCodeProvider},set relatedCodeProvider(p){L(t,"testRelatedCode"),f.relatedCodeProvider=p,l.$updateController(i,{capabilities:u()})},createRunProfile:(p,m,w,x,E,$)=>{let A=pc(p);for(;a.has(A);)A++;return new RS(this.h,a,c,this.w.event,i,A,p,m,w,x,E,$)},createTestItem(p,m,w){return new zl(i,p,m,w)},createTestRun:(p,m,w=!0)=>this.j.createTestRun(t,i,o,p,m,w),invalidateTestResults:p=>{if(p===void 0)this.h.$markTestRetired(void 0);else{const m=p instanceof Array?p:[p];this.h.$markTestRetired(m.map(w=>Le.fromExtHostTestItem(w,i).toString()))}},set resolveHandler(p){o.resolveHandler=p},get resolveHandler(){return o.resolveHandler},dispose:()=>{n.dispose()}},f={controller:h,collection:o,profiles:a,extension:t,activeProfiles:c};return l.$registerTestController(i,r,u()),n.add(oe(()=>l.$unregisterTestController(i))),this.g.set(i,f),n.add(oe(()=>this.g.delete(i))),n.add(o.onDidGenerateDiff(p=>l.$publishDiff(i,p.map(td.serialize)))),h}createTestObserver(){return this.m.checkout()}async runTests(t,i=et.None){const r=AS(t);if(!r)throw new Error("The request passed to `vscode.test.runTests` must include a profile");const s=this.g.get(r.controllerId);if(!s)throw new Error("Controller not found");await this.h.$runTests({preserveFocus:t.preserveFocus??!0,group:$a.from(r.kind),targets:[{testIds:t.include?.map(n=>Le.fromExtHostTestItem(n,s.collection.root.id).toString())??[s.collection.root.id],profileId:r.profileId,controllerId:r.controllerId}],exclude:t.exclude?.map(n=>n.id)},i)}registerTestFollowupProvider(t){return this.y.add(t),{dispose:()=>{this.y.delete(t)}}}async $getTestsRelatedToCode(t,i,r){const s=this.F.getDocument(y.revive(t));if(!s)return[];const n=ze.to(i),o=[];return await Promise.all([...this.g.values()].map(async a=>{let c;try{c=await a.relatedCodeProvider?.provideRelatedTests?.(s.document,n,r)}catch(l){r.isCancellationRequested||this.C.warn(`Error thrown while providing related tests for ${a.controller.label}`,l)}if(c){for(const l of c)o.push(Le.fromExtHostTestItem(l,a.controller.id).toString());a.collection.flushDiff()}})),o}async $getCodeRelatedToTest(t,i){const r=this.g.get(Le.root(t));if(!r)return[];const s=r.collection.tree.get(t);return s?(await r.relatedCodeProvider?.provideRelatedCode?.(s.actual,i))?.map(gi.from)??[]:[]}$syncTests(){for(const{collection:t}of this.g.values())t.flushDiff();return Promise.resolve()}async $getCoverageDetails(t,i,r){return(await this.j.getCoverageDetails(t,i,r))?.map(Dl.fromDetails)}async $disposeRun(t){this.j.disposeTestRun(t)}$configureRunProfile(t,i){this.g.get(t)?.profiles.get(i)?.configureHandler?.()}$setDefaultRunProfiles(t){const i=new Map;for(const[r,s]of Object.entries(t)){const n=this.g.get(r);if(!n)continue;const o=new Map,a=s.filter(l=>!n.activeProfiles.has(l)),c=[...n.activeProfiles].filter(l=>!s.includes(l));for(const l of a)o.set(l,!0),n.activeProfiles.add(l);for(const l of c)o.set(l,!1),n.activeProfiles.delete(l);o.size&&i.set(r,o)}this.w.fire(i)}async $refreshTests(t,i){await this.g.get(t)?.controller.refreshHandler?.(i)}$publishTestResults(t){this.results=Object.freeze(t.map(i=>{const r=Fv.to(i),s=i.tasks.findIndex(n=>n.hasCoverage);return s!==-1&&(r.getDetailedCoverage=(n,o=et.None)=>this.h.$getCoverageDetails(i.id,s,n,o).then(a=>a.map(Dl.to))),DS.set(r,i.id),r}).concat(this.results).sort((i,r)=>r.completedAt-i.completedAt).slice(0,32)),this.f.fire()}async $expandTest(t,i){const r=this.g.get(Le.fromString(t).controllerId)?.collection;r&&(await r.expand(t,i<0?1/0:i),r.flushDiff())}$acceptDiff(t){this.m.applyDiff(t.map(i=>td.deserialize({asCanonicalUri:r=>r},i)))}async $runControllerTests(t,i){return Promise.all(t.map(r=>this.G(r,!1,i)))}async $startContinuousRun(t,i){const r=new at(i),s=await Promise.all(t.map(n=>this.G(n,!0,r.token)));return!i.isCancellationRequested&&!s.some(n=>n.error)&&await new Promise(n=>i.onCancellationRequested(n)),r.dispose(!0),s}async $provideTestFollowups(t,i){const r=this.results.find(o=>DS.get(o)===t.resultId),s=r&&rF(Le.fromString(t.extId),r?.results);if(!s)return[];let n=[];return await Promise.all([...this.y].map(async o=>{try{const a=await o.provideFollowup(r,s,t.taskIndex,t.messageIndex,i);a&&(n=n.concat(a))}catch(a){this.C.error("Error thrown while providing followup for test message",a)}})),i.isCancellationRequested?[]:n.map(o=>{const a=YM++;return this.z.set(a,o),{title:o.title,id:a}})}$disposeTestFollowups(t){for(const i of t)this.z.delete(i)}$executeTestFollowup(t){const i=this.z.get(t);return i?this.D.executeCommand(i.command,...i.arguments||[]):Promise.resolve()}$cancelExtensionTestRun(t,i){t===void 0?this.j.cancelAllRuns():this.j.cancelRunById(t,i)}getMetadataForRun(t){for(const i of this.j.trackers){const r=i.getTaskIdForRun(t);if(r)return{taskId:r,runId:i.id}}}async G(t,i,r){const s=this.g.get(t.controllerId);if(!s)return{};const{collection:n,profiles:o,extension:a}=s,c=o.get(t.profileId);if(!c)return{};const l=t.testIds.map(p=>n.tree.get(p)).filter(Mi),u=t.excludeExtIds.map(p=>s.collection.tree.get(p)).filter(Mi).filter(p=>l.some(m=>m.fullId.compare(p.fullId)===2));if(!l.length)return{};const h=new Bd(l.some(p=>p.actual instanceof $0)?void 0:l.map(p=>p.actual),u.map(p=>p.actual),c,i),f=iR(t)&&this.j.prepareForMainThreadTestRun(a,h,TS.fromInternal(t,s.collection),c,r);try{return await c.runHandler(h,r),{}}catch(p){return{error:String(p)}}finally{f&&f.hasRunningTasks&&!r.isCancellationRequested&&await lt.toPromise(f.onEnd)}}};bw=__decorate([__param(0,Fe),__param(1,We),__param(2,so),__param(3,Ua)],bw);var QM=1e4,PS;(function(e){e[e.Running=0]="Running",e[e.Cancelling=1]="Cancelling",e[e.Ended=2]="Ended"})(PS||(PS={}));var XM=class extends ne{get hasRunningTasks(){return this.g>0}get id(){return this.C.id}constructor(e,t,i,r,s,n){super(),this.C=e,this.D=t,this.F=i,this.G=r,this.H=s,this.f=0,this.g=0,this.h=new Map,this.j=new Set,this.w=this.B(new P),this.z=new Map,this.onEnd=this.w.event,this.m=this.B(new at(n));const o=this.B(new mn(()=>this.I(),QM));this.B(this.m.token.onCancellationRequested(()=>o.schedule()));const a=new P;this.y=a.event,this.B(oe(()=>{a.fire(),a.dispose()}))}getTaskIdForRun(e){for(const[t,{run:i}]of this.h)if(i===e)return t}cancel(e){e?this.h.get(e)?.cts.cancel():this.f===0?(this.m.cancel(),this.f=1):this.f===1&&this.I()}async getCoverageDetails(e,t,i){const[,r]=Le.fromString(e).path,s=this.z.get(e);if(!s)return[];const{report:n,extIds:o}=s,a=this.h.get(r);if(!a)throw new Error("unreachable: run task was not found");let c;if(t&&n instanceof Wd){const u=o.indexOf(t);if(u===-1)return[];c=n.includesTests[u]}return await(c?this.G?.loadDetailedCoverageForTest?.(a.run,n,c,i):this.G?.loadDetailedCoverage?.(a.run,n,i))??[]}createRun(e){const t=this.C.id,i=this.C.controllerId,r=Ut(),s=l=>(u,...h)=>{if(o){this.F.warn(`Setting the state of test "${u.id}" is a no-op after the run ends.`);return}this.L(u),l(u,...h)},n=(l,u)=>{const h=u instanceof Array?u.map(ka.from):[ka.from(u)];if(l.uri&&l.range){const f={range:F.from(l.range),uri:l.uri};for(const p of h)p.location=p.location||f}this.D.$appendTestMessagesInRun(t,r,Le.fromExtHostTestItem(l,i).toString(),h)};let o=!1;const a=this.B(new at(this.m.token)),c={isPersisted:this.C.isPersisted,token:a.token,name:e,onDidDispose:this.y,addCoverage:l=>{if(o)return;const u=l instanceof Wd?l.includesTests:[];if(u.length)for(const p of u)this.L(p);const h=l.uri.toString(),f=new Le([t,r,h]).toString();this.z.set(f,{report:l,extIds:u.map(p=>Le.fromExtHostTestItem(p,i).toString())}),this.D.$appendCoverage(t,r,Dl.fromFile(i,f,l))},enqueued:s(l=>{this.D.$updateTestStateInRun(t,r,Le.fromExtHostTestItem(l,i).toString(),1)}),skipped:s(l=>{this.D.$updateTestStateInRun(t,r,Le.fromExtHostTestItem(l,i).toString(),5)}),started:s(l=>{this.D.$updateTestStateInRun(t,r,Le.fromExtHostTestItem(l,i).toString(),2)}),errored:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Le.fromExtHostTestItem(l,i).toString(),6,h)}),failed:s((l,u,h)=>{n(l,u),this.D.$updateTestStateInRun(t,r,Le.fromExtHostTestItem(l,i).toString(),4,h)}),passed:s((l,u)=>{this.D.$updateTestStateInRun(t,r,Le.fromExtHostTestItem(l,this.C.controllerId).toString(),3,u)}),appendOutput:(l,u,h)=>{o||(h&&this.L(h),this.D.$appendOutputToRun(t,r,ae.fromString(l),u&&gi.from(u),h&&Le.fromExtHostTestItem(h,i).toString()))},end:()=>{o||(o=!0,this.D.$finishedTestRunTask(t,r),--this.g||this.J())}};return this.g++,this.h.set(r,{run:c,cts:a}),this.D.$startedTestRunTask(t,{id:r,ctrlId:this.C.controllerId,name:e||this.H.displayName||this.H.identifier.value,running:!0}),c}I(){for(const{run:e}of this.h.values())e.end()}J(){this.f!==2&&(this.f=2,this.w.fire())}L(e){if(!(e instanceof zl))throw new id(e.id);if(this.j.has(Le.fromExtHostTestItem(e,this.C.controllerId).toString()))return;const t=[],i=this.C.colllection.root;for(;;){const r=qs.from(e);if(t.unshift(r),this.j.has(r.extId)||(this.j.add(r.extId),e===i))break;e=e.parent||i}this.D.$addTestsToRun(this.C.controllerId,this.C.id,t)}dispose(){this.J(),super.dispose()}},KM=class{get trackers(){return this.f.values()}constructor(e,t){this.h=e,this.j=t,this.f=new Map,this.g=new Map}getCoverageDetails(e,t,i){const r=Le.root(e);return this.g.get(r)?.getCoverageDetails(e,t,i)||[]}disposeTestRun(e){this.g.get(e)?.dispose(),this.g.delete(e);for(const[t,{id:i}]of this.f)i===e&&this.f.delete(t)}prepareForMainThreadTestRun(e,t,i,r,s){return this.k(t,i,r,e,s)}cancelRunById(e,t){this.g.get(e)?.cancel(t)}cancelAllRuns(){for(const e of this.f.values())e.cancel()}createTestRun(e,t,i,r,s,n){const o=this.f.get(r);if(o)return o.createRun(s);const a=TS.fromPublic(t,i,r,n),c=AS(r);this.h.$startedExtensionTestRun({controllerId:t,continuous:!!r.continuous,profile:c&&{group:$a.from(c.kind),id:c.profileId},exclude:r.exclude?.map(u=>Le.fromExtHostTestItem(u,i.root.id).toString())??[],id:a.id,include:r.include?.map(u=>Le.fromExtHostTestItem(u,i.root.id).toString())??[i.root.id],preserveFocus:r.preserveFocus??!0,persist:n});const l=this.k(r,a,r.profile,e);return lt.once(l.onEnd)(()=>{this.h.$finishedExtensionTestRun(a.id)}),l.createRun(s)}k(e,t,i,r,s){const n=new XM(t,this.h,this.j,i,r,s);return this.f.set(e,n),this.g.set(n.id,n),n}},AS=e=>{if(e.profile){if(!(e.profile instanceof RS))throw new Error("TestRunRequest.profile is not an instance created from TestController.createRunProfile");return e.profile}},TS=class Bb{static fromPublic(t,i,r,s){return new Bb(t,Ut(),s,i)}static fromInternal(t,i){return new Bb(t.controllerId,t.runId,!0,i)}constructor(t,i,r,s){this.controllerId=t,this.id=i,this.isPersisted=r,this.colllection=s}},eF=class{get isEmpty(){return this.f.size===0&&this.h.size===0&&this.g.size===0}constructor(e){this.k=e,this.f=new Set,this.g=new Set,this.h=new Set,this.j=new Set}add(e){this.f.add(e)}update(e){Object.assign(e.revived,qs.toPlain(e.item)),this.f.has(e)||this.g.add(e)}remove(e){if(this.f.has(e)){this.f.delete(e);return}this.g.delete(e);const t=Le.parentId(e.item.extId);if(t&&this.j.has(t.toString())){this.j.add(e.item.extId);return}this.h.add(e)}getChangeEvent(){const{f:e,g:t,h:i}=this;return{get added(){return[...e].map(r=>r.revived)},get updated(){return[...t].map(r=>r.revived)},get removed(){return[...i].map(r=>r.revived)}}}complete(){this.isEmpty||this.k.fire(this.getChangeEvent())}},tF=class extends rR{constructor(){super(...arguments),this.z=new P,this.onDidChangeTests=this.z.event}get rootTests(){return this.h}getMirroredTestDataById(e){return this.g.get(e)}getMirroredTestDataByReference(e){return this.g.get(e.id)}y(e,t){return{...e,revived:qs.toPlain(e.item),depth:t?t.depth+1:0,children:new Set}}x(){return new eF(this.z)}},iF=class{constructor(e){this.g=e}checkout(){this.f||(this.f=this.h());const e=this.f;return e.observers++,{onDidChangeTest:e.tests.onDidChangeTests,get tests(){return[...e.tests.rootTests].map(t=>t.revived)},dispose:fg(()=>{--e.observers===0&&(this.g.$unsubscribeFromDiffs(),this.f=void 0)})}}getMirroredTestDataByReference(e){return this.f?.tests.getMirroredTestDataByReference(e)}applyDiff(e){this.f?.tests.apply(e)}h(){const e=new tF({asCanonicalUri:t=>t});return this.g.$subscribeToDiffs(),{observers:0,tests:e}}},eu=(e,t,i,r)=>{i?Object.assign(i,r):t.$updateTestRunConfig(e.controllerId,e.profileId,r)},RS=class extends L8{#e;#t;#i;#r;#n;get label(){return this.g}set label(e){e!==this.g&&(this.g=e,eu(this,this.#e,this.#r,{label:e}))}get supportsContinuousRun(){return this.j}set supportsContinuousRun(e){e!==this.j&&(this.j=e,eu(this,this.#e,this.#r,{supportsContinuousRun:e}))}get isDefault(){return this.#t.has(this.profileId)}set isDefault(e){e!==this.isDefault&&(e?this.#t.add(this.profileId):this.#t.delete(this.profileId),eu(this,this.#e,this.#r,{isDefault:e}))}get tag(){return this._tag}set tag(e){e?.id!==this._tag?.id&&(this._tag=e,eu(this,this.#e,this.#r,{tag:e?dr.namespace(this.controllerId,e.id):null}))}get configureHandler(){return this.f}set configureHandler(e){e!==this.f&&(this.f=e,eu(this,this.#e,this.#r,{hasConfigurationHandler:!!e}))}get onDidChangeDefault(){return lt.chain(this.#i,e=>e.map(t=>t.get(this.controllerId)?.get(this.profileId)).filter(Mi))}constructor(e,t,i,r,s,n,o,a,c,l=!1,u=void 0,h=!1){super(s,n,a),this.g=o,this.runHandler=c,this._tag=u,this.j=h,this.#e=e,this.#n=t,this.#t=i,this.#i=r,t.set(n,this);const f=$a.from(a);l&&i.add(n),this.#r={profileId:n,controllerId:s,tag:u?dr.namespace(this.controllerId,u.id):null,label:o,group:f,isDefault:l,hasConfigurationHandler:!1,supportsContinuousRun:h},queueMicrotask(()=>{this.#r&&(this.#e.$publishTestRunProfile(this.#r),this.#r=void 0)})}dispose(){this.#n?.delete(this.profileId)&&(this.#n=void 0,this.#e.$removeTestProfile(this.controllerId,this.profileId)),this.#r=void 0}};function rF(e,t){for(let i=0;i<e.path.length;i++){const r=t.find(s=>s.id===e.path[i]);if(!r)return;if(i===e.path.length-1)return r;t=r.children}}var xq=B("configurationResolverService"),Ye;(function(e){e.Unknown="unknown",e.Env="env",e.Config="config",e.Command="command",e.Input="input",e.ExtensionInstallFolder="extensionInstallFolder",e.WorkspaceFolder="workspaceFolder",e.Cwd="cwd",e.WorkspaceFolderBasename="workspaceFolderBasename",e.UserHome="userHome",e.LineNumber="lineNumber",e.ColumnNumber="columnNumber",e.SelectedText="selectedText",e.File="file",e.FileWorkspaceFolder="fileWorkspaceFolder",e.FileWorkspaceFolderBasename="fileWorkspaceFolderBasename",e.RelativeFile="relativeFile",e.RelativeFileDirname="relativeFileDirname",e.FileDirname="fileDirname",e.FileExtname="fileExtname",e.FileBasename="fileBasename",e.FileBasenameNoExtension="fileBasenameNoExtension",e.FileDirnameBasename="fileDirnameBasename",e.ExecPath="execPath",e.ExecInstallFolder="execInstallFolder",e.PathSeparator="pathSeparator",e.PathSeparatorAlias="/"})(Ye||(Ye={}));var sF=Object.values(Ye).filter(e=>typeof e=="string"),mi=class extends an{constructor(e,t){super(t),this.variable=e}},LS=class Hb{static{this.VARIABLE_LHS="${"}constructor(t){this.a=new Map,this.d=new Set,typeof t=="string"?(this.c=!0,this.b={value:t}):(this.c=!1,this.b=structuredClone(t))}static parse(t){if(t instanceof Hb)return t;const i=new Hb(t);return i.e(),i.g(i.b),i}e(){const t=this.b,i=ei?"windows":Oi?"osx":Es?"linux":void 0;i&&t&&typeof t=="object"&&t.hasOwnProperty(i)&&Object.keys(t[i]).forEach(r=>t[r]=t[i][r]),delete t.windows,delete t.osx,delete t.linux}f(t,i){if(t[i]!=="$"||t[i+1]!=="{")return;let r=i+2,s=1;for(;r<t.length;){if(t[r]==="{")s++;else if(t[r]==="}"&&(s--,s===0))break;r++}if(s!==0)return;const n=t.slice(i,r+1),o=t.substring(i+2,r),a=o.indexOf(":");return a===-1?{replacement:{id:n,name:o,inner:o},end:r}:{replacement:{id:n,inner:o,name:o.slice(0,a),arg:o.slice(a+1)},end:r}}g(t){if(!(typeof t!="object"||t===null)){if(Array.isArray(t)){for(let i=0;i<t.length;i++){const r=t[i];typeof r=="string"?this.h(t,i,r):this.g(r)}return}for(const[i,r]of Object.entries(t))this.h(t,i,i,!0),typeof r=="string"?this.h(t,i,r):this.g(r)}}h(t,i,r,s,n){let o=0;for(;o<r.length;){const a=r.indexOf("${",o);if(a===-1)break;const c=this.f(r,a);if(c){if(o=c.end+1,n?.includes(c.replacement.id))continue;const l=this.a.get(c.replacement.id)||{locations:[],replacement:c.replacement},u={object:t,propertyName:i,replaceKeyName:s};l.locations.push(u),this.a.set(c.replacement.id,l),l.resolved?this.j(c.replacement,u,l.resolved,n):this.d.forEach(h=>h(c.replacement))}else o=a+2}}*unresolved(){const t=new Map,i=r=>{t.set(r.id,r)};for(const r of this.a.values())r.resolved===void 0&&t.set(r.replacement.id,r.replacement);for(this.d.add(i);;){const r=Ot.first(t);if(!r)break;const[s,n]=r;yield n,t.delete(s)}this.d.delete(i)}resolved(){return Ot.map(Ot.filter(this.a.values(),t=>!!t.resolved),t=>[t.replacement,t.resolved])}resolve(t,i){typeof i!="object"&&(i={value:String(i)});const r=this.a.get(t.id);if(r&&(r.resolved=i,i.value!==void 0))for(const s of r.locations||Ot.empty())this.j(t,s,i)}j(t,{replaceKeyName:i,propertyName:r,object:s},n,o=[]){if(n.value!==void 0){if(o.push(t.id),i&&typeof r=="string"){const a=s[r],c=r.replaceAll(t.id,n.value);delete s[r],s[c]=a,this.m(s,r,c),this.h(s,c,n.value,!0,o)}else s[r]=s[r].replaceAll(t.id,n.value),this.h(s,r,n.value,!1,o);o.pop()}}m(t,i,r){for(const s of this.a.values())for(const n of s.locations)n.object===t&&n.propertyName===i&&(n.propertyName=r)}toObject(){return this.c?this.b.value:this.b}},nF=class{constructor(e,t,i,r){this.h=new Map,this.resolvableVariables=new Set(sF),this.a=e,this.b=t,this.g=i,r&&(this.c=r.then(s=>this.i(s)))}i(e){if(ei){const t=Object.create(null);return Object.keys(e).forEach(i=>{t[i.toLowerCase()]=e[i]}),t}return e}async resolveWithEnvironment(e,t,i){const r=LS.parse(i);for(const s of r.unresolved()){const n=await this.l(s,t?.uri,e);n!==void 0&&r.resolve(s,String(n))}return r.toObject()}async resolveAsync(e,t){const i=LS.parse(t);for(const r of i.unresolved()){const s=await this.l(r,e?.uri);s!==void 0&&i.resolve(r,String(s))}return i.toObject()}resolveWithInteractionReplace(e,t){throw new Error("resolveWithInteractionReplace not implemented.")}resolveWithInteraction(e,t){throw new Error("resolveWithInteraction not implemented.")}contributeVariable(e,t){if(this.h.has(e))throw new Error("Variable "+e+" is contributed twice.");this.resolvableVariables.add(e),this.h.set(e,t)}j(e){return this.b?this.b.getUriLabel(e,{noPrefix:!0}):e.fsPath}async l(e,t,i,r){const s={env:i!==void 0?this.i(i):await this.c,userHome:i!==void 0?void 0:await this.g},{name:n,arg:o}=e,a=u=>{const h=this.a.getFilePath();if(h)return _l(h);throw new mi(u,d(13844,null,e.id))},c=u=>{const h=a(u);if(this.a.getWorkspaceFolderPathForFile){const f=this.a.getWorkspaceFolderPathForFile();if(f)return _l(f)}throw new mi(u,d(13845,null,e.id,Si(h)))},l=u=>{if(o){const h=this.a.getFolderUri(o);if(h)return h;throw new mi(u,d(13846,null,u,o))}if(t)return t;throw this.a.getWorkspaceFolderCount()>1?new mi(u,d(13847,null,u)):new mi(u,d(13848,null,u))};switch(n){case"env":if(o){if(s.env){const u=s.env[ei?o.toLowerCase():o];if(Ue(u))return u}return""}throw new mi(Ye.Env,d(13849,null,e.id));case"config":if(o){const u=this.a.getConfigurationValue(t,o);if(bt(u))throw new mi(Ye.Config,d(13850,null,e.id,o));if(wt(u))throw new mi(Ye.Config,d(13851,null,e.id,o));return u}throw new mi(Ye.Config,d(13852,null,e.id));case"command":return this.m(Ye.Command,e.id,o,r,"command");case"input":return this.m(Ye.Input,e.id,o,r,"input");case"extensionInstallFolder":if(o){const u=await this.a.getExtension(o);if(!u)throw new mi(Ye.ExtensionInstallFolder,d(13853,null,e.id,o));return this.j(u.extensionLocation)}throw new mi(Ye.ExtensionInstallFolder,d(13854,null,e.id));default:switch(n){case"workspaceRoot":case"workspaceFolder":{const u=l(Ye.WorkspaceFolder);return u?_l(this.j(u)):void 0}case"cwd":{if(!t&&!o)return So();const u=l(Ye.Cwd);return u?_l(this.j(u)):void 0}case"workspaceRootFolderName":case"workspaceFolderBasename":{const u=l(Ye.WorkspaceFolderBasename);return u?_l(Si(this.j(u))):void 0}case"userHome":if(s.userHome)return s.userHome;throw new mi(Ye.UserHome,d(13855,null,e.id));case"lineNumber":{const u=this.a.getLineNumber();if(u)return u;throw new mi(Ye.LineNumber,d(13856,null,e.id))}case"columnNumber":{const u=this.a.getColumnNumber();if(u)return u;throw new Error(d(13857,null,e.id))}case"selectedText":{const u=this.a.getSelectedText();if(u)return u;throw new mi(Ye.SelectedText,d(13858,null,e.id))}case"file":return a(Ye.File);case"fileWorkspaceFolder":return c(Ye.FileWorkspaceFolder);case"fileWorkspaceFolderBasename":return Si(c(Ye.FileWorkspaceFolderBasename));case"relativeFile":return t||o?cc(this.j(l(Ye.RelativeFile)),a(Ye.RelativeFile)):a(Ye.RelativeFile);case"relativeFileDirname":{const u=$o(a(Ye.RelativeFileDirname));if(t||o){const h=cc(this.j(l(Ye.RelativeFileDirname)),u);return h.length===0?".":h}return u}case"fileDirname":return $o(a(Ye.FileDirname));case"fileExtname":return Vu(a(Ye.FileExtname));case"fileBasename":return Si(a(Ye.FileBasename));case"fileBasenameNoExtension":{const u=Si(a(Ye.FileBasenameNoExtension));return u.slice(0,u.length-Vu(u).length)}case"fileDirnameBasename":return Si($o(a(Ye.FileDirnameBasename)));case"execPath":{const u=this.a.getExecPath();return u||e.id}case"execInstallFolder":{const u=this.a.getAppRoot();return u||e.id}case"pathSeparator":case"/":return Xi;default:try{return this.m(Ye.Unknown,e.id,o,r,void 0)}catch{return e.id}}}}m(e,t,i,r,s){if(i&&r){const n=s===void 0?r[i]:r[s+":"+i];if(typeof n=="string")return n;throw new mi(e,d(13859,null,t))}return t}},yw=B("IExtHostVariableResolverProvider"),oF=class extends nF{constructor(e,t,i,r,s,n,o){function a(){if(i){const c=i.activeEditor();if(c)return c.document.uri;const l=r.tabGroups.all.find(u=>u.isActive)?.activeTab;if(l!==void 0){if(l.input instanceof Vd||l.input instanceof X1)return l.input.modified;if(l.input instanceof Z1||l.input instanceof Q1||l.input instanceof Y1)return l.input.uri}}}super({getFolderUri:c=>{const l=n.folders.filter(u=>u.name===c);if(l&&l.length>0)return l[0].uri},getWorkspaceFolderCount:()=>n.folders.length,getConfigurationValue:(c,l)=>s.getConfiguration(void 0,c).get(l),getAppRoot:()=>So(),getExecPath:()=>ac.VSCODE_EXEC_PATH,getFilePath:()=>{const c=a();if(c)return ko(c.fsPath)},getWorkspaceFolderPathForFile:()=>{if(t){const c=a();if(c){const l=t.getWorkspaceFolder(c);if(l)return ko(l.uri.fsPath)}}},getSelectedText:()=>{if(i){const c=i.activeEditor();if(c&&!c.selection.isEmpty)return c.document.getText(c.selection)}},getLineNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.line+1)}},getColumnNumber:()=>{if(i){const c=i.activeEditor();if(c)return String(c.selection.end.character+1)}},getExtension:c=>e.getExtension(c)},void 0,o?Promise.resolve(o):void 0,Promise.resolve(ac))}},xw=class extends ne{constructor(t,i,r,s,n){super(),this.b=t,this.c=i,this.g=r,this.h=s,this.j=n,this.a=new _t(async()=>{const o=await this.h.getConfigProvider(),c={folders:await this.c.getWorkspaceFolders2()||[]};return this.B(this.c.onDidChangeWorkspace(async l=>{c.folders=await this.c.getWorkspaceFolders2()||[]})),new oF(this.b,this.c,this.g,this.j,o,c,this.m())})}getResolver(){return this.a.value}m(){}};xw=__decorate([__param(0,Ys),__param(1,ns),__param(2,Ua),__param(3,os),__param(4,Kl)],xw);var NS=B("IExtHostDebugService"),Ew=class extends ne{get onDidStartDebugSession(){return this.y.event}get onDidTerminateDebugSession(){return this.z.event}get onDidChangeActiveDebugSession(){return this.C.event}get activeDebugSession(){return this.D?.api}get onDidReceiveDebugSessionCustomEvent(){return this.F.event}get activeDebugConsole(){return this.G.value}constructor(t,i,r,s,n,o,a,c){super(),this.Z=i,this.$=r,this.ab=s,this.bb=n,this.cb=o,this.db=a,this.eb=c,this.w=new Map,this.O=0,this.P=new Map,this.Q=new Map,this.R=new WeakMap,this.S=new Map,this.W=new Map,this.X=0,this.f=0,this.g=[],this.h=0,this.j=[],this.m=0,this.n=[],this.M=new Map,this.N=new Map,this.y=this.B(new P),this.z=this.B(new P),this.C=this.B(new P),this.F=this.B(new P),this.u=t.getProxy(J.MainThreadDebugService),this.I=this.B(new P),this.L=this.B(new P),this.G=new cF(this.u),this.H=new Map,this.$.getExtensionRegistry().then(l=>{this.B(l.onDidChange(u=>{this.gb(l)})),this.gb(l)}),this.Y=t.getProxy(J.MainThreadTelemetry)}async $getVisualizerTreeItem(t,i){const r=this.hb(i);if(!r)return;const s=await this.Q.get(t)?.getTreeItem?.(r);return s?this.fb(t,s):void 0}registerDebugVisualizationTree(t,i,r){const s=je.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.Q.set(n,r),this.u.$registerDebugVisualizerTree(n,!!r.editItem),oe(()=>{this.u.$unregisterDebugVisualizerTree(n),this.Q.delete(i)})}async $getVisualizerTreeItemChildren(t,i){const r=this.S.get(i)?.item;return r?(await this.Q.get(t)?.getChildren?.(r))?.map(n=>this.fb(t,n))||[]:[]}async $editVisualizerTreeItem(t,i){const r=this.S.get(t);if(!r)return;const s=await this.Q.get(r.provider)?.editItem?.(r.item,i);return this.fb(r.provider,s||r.item)}$disposeVisualizedTree(t){const i=this.S.get(t);if(!i)return;const r=[i.children];for(const s of r)if(s)for(const n of s)r.push(this.S.get(n)?.children),this.S.delete(n)}fb(t,i){let r=this.R.get(i);return r||(r=this.O++,this.R.set(i,r),this.S.set(r,{provider:t,item:i})),Zv.from(i,r)}asDebugSourceUri(t,i){const r=t;if(typeof r.sourceReference=="number"&&r.sourceReference>0){let s=`debug:${encodeURIComponent(r.path||"")}`,n="?";return i&&(s+=`${n}session=${encodeURIComponent(i.id)}`,n="&"),s+=`${n}ref=${r.sourceReference}`,y.parse(s)}else{if(r.path)return y.file(r.path);throw new Error("cannot create uri from DAP 'source' object; properties 'path' and 'sourceReference' are both missing.")}}gb(t){const i=[];for(const r of t.getAllExtensionDescriptions())if(r.contributes){const s=r.contributes.debuggers;if(s&&s.length>0)for(const n of s)_M(n)&&i.push(n.type)}this.u.$registerDebugTypes(i)}get activeStackItem(){return this.J}get onDidChangeActiveStackItem(){return this.L.event}get onDidChangeBreakpoints(){return this.I.event}get breakpoints(){const t=[];return this.H.forEach(i=>t.push(i)),t}async $resolveDebugVisualizer(t,i){const r=this.W.get(t);if(!r)throw new Error(`No debug visualizer found with id '${t}'`);let{v:s,provider:n,extensionId:o}=r;if(s.visualization||(s=await n.resolveDebugVisualization?.(s,i)||s,r.v=s),!s.visualization)throw new Error(`No visualization returned from resolveDebugVisualization in '${n}'`);return this.Ab(o,s.visualization)}async $executeDebugVisualizerCommand(t){const i=this.W.get(t);if(!i)throw new Error(`No debug visualizer found with id '${t}'`);const r=i.v.visualization;r&&"command"in r&&this.db.executeCommand(r.command,...r.arguments||[])}hb(t){const i=this.w.get(t.sessionId);return i&&{session:i.api,variable:t.variable,containerId:t.containerId,frameId:t.frameId,threadId:t.threadId}}async $provideDebugVisualizers(t,i,r,s){const n=this.hb(r),o=this.zb(t,i),a=this.P.get(o);if(!n||!a)return[];const c=await a.provideDebugVisualization(n,s);return c?c.map(l=>{const u=++this.X;this.W.set(u,{v:l,provider:a,extensionId:t});const h=l.iconPath?this.Bb(l.iconPath):void 0;return{id:u,name:l.name,iconClass:h?.iconClass,iconPath:h?.iconPath,visualization:this.Ab(t,l.visualization)}}):[]}$disposeDebugVisualizers(t){for(const i of t)this.W.delete(i)}registerDebugVisualizationProvider(t,i,r){if(!t.contributes?.debugVisualizers?.some(o=>o.id===i))throw new Error(`Extensions may only call registerDebugVisualizationProvider() for renderers they contribute (got ${i})`);const s=je.toKey(t.identifier),n=this.zb(s,i);if(this.P.has(n))throw new Error(`A debug visualization provider with id '${i}' is already registered`);return this.P.set(n,r),this.u.$registerDebugVisualizer(s,i),oe(()=>{this.u.$unregisterDebugVisualizer(s,i),this.P.delete(i)})}addBreakpoints(t){const i=t.filter(n=>{const o=n.id;return this.H.has(o)?!1:(this.H.set(o,n),!0)});this.wb(i,[],[]);const r=[],s=new Map;for(const n of i)if(n instanceof zn){let o=s.get(n.location.uri.toString());o||(o={type:"sourceMulti",uri:n.location.uri,lines:[]},s.set(n.location.uri.toString(),o),r.push(o)),o.lines.push({id:n.id,enabled:n.enabled,condition:n.condition,hitCondition:n.hitCondition,logMessage:n.logMessage,line:n.location.range.start.line,character:n.location.range.start.character,mode:n.mode})}else n instanceof _n&&r.push({type:"function",id:n.id,enabled:n.enabled,hitCondition:n.hitCondition,logMessage:n.logMessage,condition:n.condition,functionName:n.functionName,mode:n.mode});return this.u.$registerBreakpoints(r)}removeBreakpoints(t){const i=t.filter(o=>this.H.delete(o.id));this.wb([],i,[]);const r=i.filter(o=>o instanceof zn).map(o=>o.id),s=i.filter(o=>o instanceof _n).map(o=>o.id),n=i.filter(o=>o instanceof kd).map(o=>o.id);return this.u.$unregisterBreakpoints(r,s,n)}startDebugging(t,i,r){const s=r.testRun&&this.eb.getMetadataForRun(r.testRun);return this.u.$startDebugging(t?t.uri:void 0,i,{parentSessionID:r.parentSession?r.parentSession.id:void 0,lifecycleManagedByParent:r.lifecycleManagedByParent,repl:r.consoleMode===Rd.MergeWithParent?"mergeWithParent":"separate",noDebug:r.noDebug,compact:r.compact,suppressSaveBeforeStart:r.suppressSaveBeforeStart,testRun:s&&{runId:s.runId,taskId:s.taskId},suppressDebugStatusbar:r.suppressDebugStatusbar??r.debugUI?.simple,suppressDebugToolbar:r.suppressDebugToolbar??r.debugUI?.simple,suppressDebugView:r.suppressDebugView??r.debugUI?.simple})}stopDebugging(t){return this.u.$stopDebugging(t?t.id:void 0)}registerDebugConfigurationProvider(t,i,r){if(!i)return new Pe(()=>{});const s=this.f++;return this.g.push({type:t,handle:s,provider:i}),this.u.$registerDebugConfigurationProvider(t,r,!!i.provideDebugConfigurations,!!i.resolveDebugConfiguration,!!i.resolveDebugConfigurationWithSubstitutedVariables,s),new Pe(()=>{this.g=this.g.filter(n=>n.provider!==i),this.u.$unregisterDebugConfigurationProvider(s)})}registerDebugAdapterDescriptorFactory(t,i,r){if(!r)return new Pe(()=>{});if(!this.sb(t,i))throw new Error(`a DebugAdapterDescriptorFactory can only be registered from the extension that defines the '${i}' debugger.`);if(this.pb(i))throw new Error("a DebugAdapterDescriptorFactory can only be registered once per a type.");const s=this.h++;return this.j.push({type:i,handle:s,factory:r}),this.u.$registerDebugAdapterDescriptorFactory(i,s),new Pe(()=>{this.j=this.j.filter(n=>n.factory!==r),this.u.$unregisterDebugAdapterDescriptorFactory(s)})}registerDebugAdapterTrackerFactory(t,i){if(!i)return new Pe(()=>{});const r=this.m++;return this.n.push({type:t,handle:r,factory:i}),new Pe(()=>{this.n=this.n.filter(s=>s.factory!==i)})}async $runInTerminal(t,i){return Promise.resolve(void 0)}async $substituteVariables(t,i){let r;const s=await this.yb(t);return s&&(r={uri:s.uri,name:s.name,index:s.index,toResource:()=>{throw new Error("Not implemented")}}),(await this.cb.getResolver()).resolveAsync(r,i)}ib(t,i){if(t instanceof tl)return new uF(t.implementation)}jb(){}async $startDASession(t,i){const r=this,s=await this.xb(i);return this.ub(this.pb(s.type),s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}' (extension might have failed to activate)`);const o=this.ib(n,s);if(!o)throw new Error(`Couldn't create a debug adapter for type '${s.type}'.`);const a=o;return this.M.set(t,a),this.tb(s).then(c=>(c&&this.N.set(t,c),a.onMessage(async l=>{if(l.type==="request"&&l.command==="handshake"){const u=l,h={type:"response",seq:0,command:u.command,request_seq:u.seq,success:!0};this.U||(this.U=this.jb());try{if(this.U){const f=await this.U.sign(u.arguments.value);h.body={signature:f},a.sendResponse(h)}else throw new Error("no signer")}catch(f){h.success=!1,h.message=f.message,a.sendResponse(h)}}else{c&&c.onDidSendMessage&&c.onDidSendMessage(l);try{l=GM(l,!0)}catch(u){const h=l.type+"_"+(l.command??l.event??"");throw this.Y.$publicLog2("debugProtocolMessageError",{type:h,from:s.type}),u}r.u.$acceptDAMessage(t,l)}}),a.onError(l=>{c&&c.onError&&c.onError(l),this.u.$acceptDAError(t,l.name,l.message,l.stack)}),a.onExit(l=>{c&&c.onExit&&c.onExit(l??void 0,void 0),this.u.$acceptDAExit(t,l??void 0,void 0)}),c&&c.onWillStartSession&&c.onWillStartSession(),a.startSession()))})}$sendDAMessage(t,i){i=qM(i,!1);const r=this.N.get(t);r&&r.onWillReceiveMessage&&r.onWillReceiveMessage(i),this.M.get(t)?.sendMessage(i)}$stopDASession(t){const i=this.N.get(t);this.N.delete(t),i&&i.onWillStopSession&&i.onWillStopSession();const r=this.M.get(t);return this.M.delete(t),r?r.stopSession():Promise.resolve(void 0)}$acceptBreakpointsDelta(t){const i=[],r=[],s=[];if(t.added)for(const n of t.added){const o=n.id;if(o&&!this.H.has(o)){let a;if(n.type==="function")a=new _n(n.functionName,n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode);else if(n.type==="data")a=new kd(n.label,n.dataId,n.canPersist,n.enabled,n.hitCondition,n.condition,n.logMessage,n.mode);else{const c=y.revive(n.uri);a=new zn(new Bi(c,new Ae(n.line,n.character)),n.enabled,n.condition,n.hitCondition,n.logMessage,n.mode)}HR(a,o),this.H.set(o,a),i.push(a)}}if(t.removed)for(const n of t.removed){const o=this.H.get(n);o&&(this.H.delete(n),r.push(o))}if(t.changed){for(const n of t.changed)if(n.id){const o=this.H.get(n.id);if(o){if(o instanceof _n&&n.type==="function"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.functionName=n.functionName}else if(o instanceof zn&&n.type==="source"){const a=o;a.enabled=n.enabled,a.condition=n.condition,a.hitCondition=n.hitCondition,a.logMessage=n.logMessage,a.location=new Bi(y.revive(n.uri),new Ae(n.line,n.character))}s.push(o)}}}this.wb(i,r,s)}async $acceptStackFrameFocus(t){let i;if(t){const r=await this.xb(t.sessionId);t.kind==="thread"?i=new D8(r.api,t.threadId):i=new I8(r.api,t.threadId,t.frameId)}this.J=i,this.L.fire(this.J)}$provideDebugConfigurations(t,i,r){return Yt(async()=>{const s=this.rb(t);if(!s)throw new Error("no DebugConfigurationProvider found");if(!s.provideDebugConfigurations)throw new Error("DebugConfigurationProvider has no method provideDebugConfigurations");const n=await this.yb(i);return s.provideDebugConfigurations(n,r)}).then(s=>{if(!s)throw new Error("nothing returned from DebugConfigurationProvider.provideDebugConfigurations");return s})}$resolveDebugConfiguration(t,i,r,s){return Yt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfiguration)throw new Error("DebugConfigurationProvider has no method resolveDebugConfiguration");const o=await this.yb(i);return n.resolveDebugConfiguration(o,r,s)})}$resolveDebugConfigurationWithSubstitutedVariables(t,i,r,s){return Yt(async()=>{const n=this.rb(t);if(!n)throw new Error("no DebugConfigurationProvider found");if(!n.resolveDebugConfigurationWithSubstitutedVariables)throw new Error("DebugConfigurationProvider has no method resolveDebugConfigurationWithSubstitutedVariables");const o=await this.yb(i);return n.resolveDebugConfigurationWithSubstitutedVariables(o,r,s)})}async $provideDebugAdapter(t,i){const r=this.qb(t);if(!r)return Promise.reject(new Error("no adapter descriptor factory found for handle"));const s=await this.xb(i);return this.ub(r,s).then(n=>{if(!n)throw new Error(`Couldn't find a debug adapter descriptor for debug type '${s.type}'`);return this.kb(n)})}async $acceptDebugSessionStarted(t){const i=await this.xb(t);this.y.fire(i.api)}async $acceptDebugSessionTerminated(t){const i=await this.xb(t);i&&(this.z.fire(i.api),this.w.delete(i.id))}async $acceptDebugSessionActiveChanged(t){this.D=t?await this.xb(t):void 0,this.C.fire(this.D?.api)}async $acceptDebugSessionNameChanged(t,i){(await this.xb(t))?._acceptNameChanged(i)}async $acceptDebugSessionCustomEvent(t,i){const s={session:(await this.xb(t)).api,event:i.event,body:i.body};this.F.fire(s)}kb(t){if(t instanceof $d)return this.lb(t);if(t instanceof el)return this.mb(t);if(t instanceof Cd)return this.nb(t);if(t instanceof tl)return this.ob(t);throw new Error("convertToDto unexpected type")}lb(t){return{type:"executable",command:t.command,args:t.args,options:t.options}}mb(t){return{type:"server",port:t.port,host:t.host}}nb(t){return{type:"pipeServer",path:t.path}}ob(t){return{type:"implementation"}}pb(t){const i=this.j.filter(r=>r.type===t);if(i.length>0)return i[0].factory}qb(t){const i=this.j.filter(r=>r.handle===t);if(i.length>0)return i[0].factory}rb(t){const i=this.g.filter(r=>r.handle===t);if(i.length>0)return i[0].provider}sb(t,i){if(t.contributes){const r=t.contributes.debuggers;if(r&&r.length>0){for(const s of r)if(s.label&&s.type&&s.type===i)return!0}}return!1}tb(t){const r=t.configuration.type,s=this.n.filter(n=>n.type===r||n.type==="*").map(n=>Yt(()=>n.factory.createDebugAdapterTracker(t.api)).then(o=>o,o=>null));return Promise.race([Promise.all(s).then(n=>{const o=vt(n);if(o.length>0)return new lF(o)}),new Promise(n=>setTimeout(()=>n(void 0),1e3))]).catch(n=>{})}async ub(t,i){const r=i.configuration.debugServer;if(typeof r=="number")return Promise.resolve(new el(r));if(t){const n=await this.$.getExtensionRegistry();return Yt(()=>t.createDebugAdapterDescriptor(i.api,this.vb(i,n))).then(o=>{if(o)return o})}const s=await this.$.getExtensionRegistry();return Promise.resolve(this.vb(i,s))}vb(t,i){}wb(t,i,r){(t.length>0||i.length>0||r.length>0)&&this.I.fire(Object.freeze({added:t,removed:i,changed:r}))}async xb(t){if(t)if(typeof t=="string"){const i=this.w.get(t);if(i)return i}else{let i=this.w.get(t.id);if(!i){const r=await this.yb(t.folderUri),s=t.parent?this.w.get(t.parent):void 0;i=new aF(this.u,t.id,t.type,t.name,r,t.configuration,s?.api),this.w.set(i.id,i),this.u.$sessionCached(i.id)}return i}throw new Error("cannot find session")}yb(t){if(t){const i=y.revive(t);return this.Z.resolveWorkspaceFolder(i)}return Promise.resolve(void 0)}zb(t,i){return`${t}\0${i}`}Ab(t,i){if(i){if("title"in i&&"command"in i)return{type:0};if("treeId"in i)return{type:1,id:`${t}\0${i.treeId}`};throw new Error("Unsupported debug visualization type")}}Bb(t){const i=this.Cb(t);let r,s;return"id"in i?s=Et.asClassName(i):r=i,{iconPath:r,iconClass:s}}Cb(t){if(t instanceof ci)return{id:t.id};const i=typeof t=="object"&&"dark"in t?t.dark:t,r=typeof t=="object"&&"light"in t?t.light:t;return{dark:typeof i=="string"?y.file(i):i,light:typeof r=="string"?y.file(r):r}}};Ew=__decorate([__param(0,Fe),__param(1,ns),__param(2,Ys),__param(3,os),__param(4,Kl),__param(5,yw),__param(6,so),__param(7,dp)],Ew);var aF=class{constructor(e,t,i,r,s,n,o){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o}get api(){const e=this;return this.d??=Object.freeze({id:e.g,type:e.h,get name(){return e.j},set name(t){e.j=t,e.f.$setDebugSessionName(e.g,t)},parentSession:e.m,workspaceFolder:e.k,configuration:e.l,customRequest(t,i){return e.f.$customDebugAdapterRequest(e.g,t,i)},getDebugProtocolBreakpoint(t){return e.f.$getDebugProtocolBreakpoint(e.g,t.id)}})}get id(){return this.g}get type(){return this.h}_acceptNameChanged(e){this.j=e}get configuration(){return this.l}},cF=class{constructor(e){this.value=Object.freeze({append(t){e.$appendDebugConsole(t)},appendLine(t){this.append(t+`
`)}})}},lF=class{constructor(e){this.d=e}onWillStartSession(){this.d.forEach(e=>e.onWillStartSession?e.onWillStartSession():void 0)}onWillReceiveMessage(e){this.d.forEach(t=>t.onWillReceiveMessage?t.onWillReceiveMessage(e):void 0)}onDidSendMessage(e){this.d.forEach(t=>t.onDidSendMessage?t.onDidSendMessage(e):void 0)}onWillStopSession(){this.d.forEach(e=>e.onWillStopSession?e.onWillStopSession():void 0)}onError(e){this.d.forEach(t=>t.onError?t.onError(e):void 0)}onExit(e,t){this.d.forEach(i=>i.onExit?i.onExit(e,t):void 0)}},uF=class extends zM{constructor(e){super(),this.h=e,e.onDidSendMessage(t=>{this.acceptMessage(t)})}startSession(){return Promise.resolve(void 0)}sendMessage(e){this.h.handleMessage(e)}stopSession(){return this.h.dispose(),Promise.resolve(void 0)}},Sw=class extends Ew{constructor(t,i,r,s,n,o,a,c){super(t,i,r,s,n,o,a,c)}};Sw=__decorate([__param(0,Fe),__param(1,ns),__param(2,Ys),__param(3,os),__param(4,Kl),__param(5,yw),__param(6,so),__param(7,dp)],Sw);function hF(e){return"uri"in e&&"ranges"in e&&"preview"in e}function dF(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,session:e.session}))}var MS=class{constructor(e){this.a=e}provideFileSearchResults(e,t,i){return(async()=>{const s=dF(t);return Promise.all(s.map(n=>this.a.provideFileSearchResults({pattern:e},n,i)))})().then(s=>vt(s).flat())}};function fF(e){return e.folderOptions.map(t=>({folder:t.folder,excludes:t.excludes.map(i=>typeof i=="string"?i:i.pattern),includes:t.includes,useGlobalIgnoreFiles:t.useIgnoreFiles.global,useIgnoreFiles:t.useIgnoreFiles.local,useParentIgnoreFiles:t.useIgnoreFiles.parent,followSymlinks:t.followSymlinks,maxResults:e.maxResults,previewOptions:pF(e.previewOptions),maxFileSize:e.maxFileSize,encoding:t.encoding,afterContext:e.surroundingContext,beforeContext:e.surroundingContext}))}function pF(e){return{matchLines:e?.matchLines??e0.matchLines,charsPerLine:e?.charsPerLine??e0.charsPerLine}}function gF(e){if(hF(e)){const t=Ni(e.ranges).map((i,r)=>{const n=Ni(e.preview.matches)[r];return{sourceRange:i,previewRange:n}});return new Gs(e.uri,t,e.preview.text)}else return new Xv(e.uri,e.text,e.lineNumber)}var mF=class{constructor(e){this.a=e}provideTextSearchResults(e,t,i,r){const s=a=>{vF(a)&&i.report(gF(a))};return(async()=>vt(await Promise.all(fF(t).map(a=>this.a.provideTextSearchResults(e,a,{report:c=>s(c)},r)))).reduce((a,c)=>({limitHit:a.limitHit||c.limitHit}),{limitHit:!1}))().then(a=>({limitHit:a.limitHit,message:vt(Ni(a.message))}))}};function vF(e){if(wF(e)){if(Array.isArray(e.ranges)){if(!Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same type."),!1;if(e.preview.matches.length!==e.ranges.length)return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}else if(Array.isArray(e.preview.matches))return console.warn("INVALID - A text search provider match's`ranges` and`matches` properties must have the same length."),!1}return!0}function wF(e){return!!e.preview}var FS=class extends Ds{constructor(e,t,i=()=>!1){const r=new y5(i,()=>!1);super(r);const s=new Ft;e.forEach((n,o)=>{const a=n.folder.with({query:"",fragment:""});s.has(a)?s.get(a).push({fq:n,i:o}):s.set(a,[{fq:n,i:o}])}),s.forEach((n,o)=>{const a=new Map;for(const c of n){const l=t(c.fq,c.i);a.set(this.m(c.fq.folder),l)}super.set(o,a)})}findQueryFragmentAwareSubstr(e){const t=super.findSubstr(e.with({query:"",fragment:""}));if(!t)return;const i=this.m(e);return t.get(i)}forEachFolderQueryInfo(e){return this.forEach(t=>t.forEach(i=>e(i)))}m(e){let t="";return e.query&&(t+=e.query),e.fragment&&(t+="#"+e.fragment),t}},bF=class{constructor(e,t,i){this.l=e,this.o=t,this.p=i,this.f=!1,this.g=0,this.h=!1,this.a=e.filePattern,this.b=e.includePattern&&Bo(e.includePattern),this.c=e.maxResults||void 0,this.d=e.exists,this.j=new Set,this.k=e.excludePattern&&Bo(e.excludePattern)}cancel(){this.h=!0,this.j.forEach(e=>e.cancel()),this.j=new Set}search(e){const t=this.l.folderQueries||[];return new Promise((i,r)=>{const s=n=>{this.g++,e(n)};if(this.h)return i({limitHit:this.f});this.l.extraFileResources&&this.l.extraFileResources.forEach(n=>{const o=n.toString(),a=Si(o);this.k&&this.k(o,a)||this.w(s,{base:n,basename:a})}),this.q(t,s).then(n=>{i({limitHit:this.f,stats:n||void 0})},n=>{r(new Error(Po(n)))})})}async q(e,t){const i=new at,r=e.map(l=>this.r(l)),s=this.o instanceof MS?this.p?.tokenSource.token:this.p?.obj,n={folderOptions:r,maxResults:this.l.maxResults??vx,session:s},o=l=>{const u=new Ax(this.l,l),h=!u.hasSiblingExcludeClauses();return{queryTester:u,noSiblingsClauses:h,folder:l.folder,tree:this.s()}},a=new FS(e,o);let c;try{this.j.add(i),c=un.create();const l=await this.o.provideFileSearchResults(this.l.filePattern||"",n,i.token),u=c.elapsed(),h=un.create();return this.h&&!this.f||(l&&l.forEach(f=>{const p=a.findQueryFragmentAwareSubstr(f),m=Me.relative(p.folder.path,f.path);if(p.noSiblingsClauses){const w=Si(f.path);this.w(t,{base:p.folder,relativePath:m,basename:w});return}this.u(p.tree,p.folder,m,t)}),this.h&&!this.f)?null:(a.forEachFolderQueryInfo(f=>{this.v(f.tree,f.queryTester,t)}),{providerTime:u,postProcessTime:h.elapsed()})}finally{i.dispose(),this.j.delete(i)}}r(e){const t=Aa(this.l.includePattern,e.includePattern);let i=e.excludePattern?.map(s=>({folder:s.folder,patterns:Aa(this.l.excludePattern,s.pattern)}));i?.length||(i=[{folder:void 0,patterns:Aa(this.l.excludePattern,void 0)}]);const r=Rx(i);return{folder:e.folder,excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks}}s(){const e={rootEntries:[],pathToEntries:Object.create(null)};return e.pathToEntries["."]=e.rootEntries,e}u({pathToEntries:e},t,i,r){if(i===this.a){const n=Si(this.a);this.w(r,{base:t,relativePath:this.a,basename:n})}function s(n){const o=Si(n),a=$o(n);let c=e[a];c||(c=e[a]=[],s(a)),c.push({base:t,relativePath:n,basename:o})}s(i)}v({rootEntries:e,pathToEntries:t},i,r){const s=this,n=this.a;function o(a){const c=xL(()=>a.map(l=>l.basename));for(let l=0,u=a.length;l<u;l++){const h=a[l],{relativePath:f,basename:p}=h;if(i.matchesExcludesSync(f,p,n!==p?c:void 0))continue;const m=t[f];if(m)o(m);else{if(f===n)continue;s.w(r,h)}if(s.f)break}}o(e)}w(e,t){(!this.b||t.relativePath&&this.b(t.relativePath,t.basename))&&((this.d||this.c&&this.g>=this.c)&&(this.f=!0,this.cancel()),this.f||e(t))}},yF=class{constructor(){this.a=new Object,this.tokenSource=new at}get obj(){if(this.a)return this.a;throw new Error("Session object has been dereferenced.")}cancel(){this.tokenSource.cancel(),this.a=void 0}},xF=class $C{constructor(){this.b=new Map}static{this.a=512}fileSearch(t,i,r,s){const n=this.c(t.cacheKey),o=new bF(t,i,n);let a=0;const c=l=>{a+=l.length,r(l.map(u=>this.d(u)))};return this.f(o,$C.a,c,s).then(l=>({limitHit:l.limitHit,stats:l.stats?{fromCache:!1,type:"fileSearchProvider",resultCount:a,detailStats:l.stats}:void 0,messages:[]}))}clearCache(t){this.b.get(t)?.cancel(),this.b.delete(t)}c(t){if(t)return this.b.has(t)||this.b.set(t,new yF),this.b.get(t)}d(t){return t.relativePath?{resource:Zt(t.base,t.relativePath)}:{resource:t.base}}f(t,i,r,s){const n=s.onCancellationRequested(()=>{t.cancel()}),o=c=>{c&&(a.push(c),i>0&&a.length>=i&&(r(a),a=[]))};let a=[];return t.search(o).then(c=>(a.length&&r(a),n.dispose(),c),c=>(a.length&&r(a),n.dispose(),Promise.reject(c)))}},OS=class{constructor(e,t,i){this.f=e,this.g=t,this.h=i,this.b=null,this.c=!1,this.d=0}get j(){return this.f.query}search(e,t,i){const r=this.j.folderQueries||[],s=new at(t);return new Promise((n,o)=>{this.b=new SF(e);let a=!1;const c=(l,u)=>{if(!(l instanceof Kv)&&!a&&!this.c){const h=this.l(l);l instanceof Gs&&typeof this.j.maxResults=="number"&&this.d+h>this.j.maxResults&&(this.c=!0,a=!0,s.cancel(),l=this.m(l,this.j.maxResults-this.d));const f=this.l(l);this.d+=f;const p=l instanceof Gs;(f>0||!p)&&this.b.add(l,u)}};this.n(r,c,s.token,i).then(l=>{s.dispose(),this.b.flush(),n({limitHit:this.c||l?.limitHit,messages:this.k(l),stats:{type:this.h}})},l=>{s.dispose();const u=Po(l);o(new Error(u))})})}k(e){return e?.message?Array.isArray(e.message)?e.message:[e.message]:[]}l(e){return e instanceof Gs?Array.isArray(e.ranges)?e.ranges.length:1:0}m(e,t){return new Gs(e.uri,e.ranges.slice(0,t),e.previewText)}async n(e,t,i,r){const s=new FS(e,(u,h)=>({queryTester:new Ax(this.j,u),folder:u.folder,folderIdx:h}),()=>!0),n=[],o={report:u=>{if(u instanceof Kv)r?.(u);else{if(u.uri===void 0)throw Error("Text search result URI is undefined. Please check provider implementation.");const h=s.findQueryFragmentAwareSubstr(u.uri),f=h.folder.scheme===V.file?yL(()=>this.g.readdir(th(u.uri))):void 0,p=A4(h.folder,u.uri);if(p){const m=h.queryTester.includedInQuery(p,Si(p),f);Cs(m)?n.push(m.then(w=>{w&&t(u,h.folderIdx)})):m&&t(u,h.folderIdx)}}}},c={folderOptions:e.map(u=>this.o(u)),maxFileSize:this.j.maxFileSize,maxResults:this.j.maxResults??vx,previewOptions:this.j.previewOptions??e0,surroundingContext:this.j.surroundingContext??0};"usePCRE2"in this.j&&(c.usePCRE2=this.j.usePCRE2);let l;return this.f.query.type===3?l=await this.f.provider.provideAITextSearchResults(this.f.query.contentPattern,c,o,i):l=await this.f.provider.provideTextSearchResults(EF(this.f.query.contentPattern),c,o,i),n.length&&await Promise.all(n),l}o(e){const t=Aa(this.j.includePattern,e.includePattern);let i=e.excludePattern?.map(n=>({folder:n.folder,patterns:Aa(this.j.excludePattern,n.pattern)}));(!i||i.length===0)&&(i=[{folder:void 0,patterns:Aa(this.j.excludePattern,void 0)}]);const r=Rx(i);return{folder:y.from(e.folder),excludes:r,includes:t,useIgnoreFiles:{local:!e.disregardIgnoreFiles,parent:!e.disregardParentIgnoreFiles,global:!e.disregardGlobalIgnoreFiles},followSymlinks:!e.ignoreSymlinks,encoding:(e.fileEncoding&&this.g.toCanonicalName(e.fileEncoding))??""}}};function EF(e){return{isCaseSensitive:e.isCaseSensitive||!1,isRegExp:e.isRegExp||!1,isWordMatch:e.isWordMatch||!1,isMultiline:e.isMultiline||!1,pattern:e.pattern}}var SF=class{constructor(e){this.g=e,this.c=-1,this.f=null,this.b=new $F(512,t=>this.j(t))}add(e,t){this.f&&(this.c!==t||!Io(this.d,e.uri))&&(this.h(),this.f=null),this.f||(this.c=t,this.f={resource:e.uri,results:[]}),this.f.results.push(kF(e))}h(){const e=this.f&&this.f.results?this.f.results.length:0;this.b.addItem(this.f,e)}flush(){this.h(),this.b.flush()}j(e){this.g(e)}};function kF(e){return e instanceof Gs?{previewText:e.previewText,rangeLocations:e.ranges.map(t=>({preview:{startLineNumber:t.previewRange.start.line,startColumn:t.previewRange.start.character,endLineNumber:t.previewRange.end.line,endColumn:t.previewRange.end.character},source:{startLineNumber:t.sourceRange.start.line,startColumn:t.sourceRange.start.character,endLineNumber:t.sourceRange.end.line,endColumn:t.sourceRange.end.character}}))}:{text:e.text,lineNumber:e.lineNumber}}var $F=class zb{static{this.b=4e3}static{this.c=50}constructor(t,i){this.j=t,this.k=i,this.d=0,this.f=[],this.g=0}addItem(t,i){t&&this.l(t,i)}addItems(t,i){t&&this.m(t,i)}l(t,i){this.f.push(t),this.g+=i,this.n()}m(t,i){this.f=this.f.concat(t),this.g+=i,this.n()}n(){this.d<zb.c?this.flush():this.g>=this.j?this.flush():this.h||(this.h=setTimeout(()=>{this.flush()},zb.b))}flush(){this.g&&(this.d+=this.g,this.k(this.f),this.f=[],this.g=0,this.h&&(clearTimeout(this.h),this.h=void 0))}},US=B("IExtHostSearch"),kw=class{constructor(t,i,r){this.o=t,this.q=i,this.s=r,this.c=this.o.getProxy(J.MainThreadSearch),this.e=0,this.g=new Map,this.h=new Set,this.i=new Map,this.j=new Set,this.k=new Map,this.l=new Set,this.n=new xF}t(t){return this.q.transformOutgoingScheme(t)}registerTextSearchProviderOld(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,new mF(i)),this.c.$registerTextSearchProvider(r,this.t(t)),oe(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerTextSearchProvider(t,i){if(this.h.has(t))throw new Error(`a text search provider for the scheme '${t}' is already registered`);this.h.add(t);const r=this.e++;return this.g.set(r,i),this.c.$registerTextSearchProvider(r,this.t(t)),oe(()=>{this.h.delete(t),this.g.delete(r),this.c.$unregisterProvider(r)})}registerAITextSearchProvider(t,i){if(this.j.has(t))throw new Error(`an AI text search provider for the scheme '${t}'is already registered`);this.j.add(t);const r=this.e++;return this.i.set(r,i),this.c.$registerAITextSearchProvider(r,this.t(t)),oe(()=>{this.j.delete(t),this.i.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProviderOld(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,new MS(i)),this.c.$registerFileSearchProvider(r,this.t(t)),oe(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}registerFileSearchProvider(t,i){if(this.l.has(t))throw new Error(`a file search provider for the scheme '${t}' is already registered`);this.l.add(t);const r=this.e++;return this.k.set(r,i),this.c.$registerFileSearchProvider(r,this.t(t)),oe(()=>{this.l.delete(t),this.k.delete(r),this.c.$unregisterProvider(r)})}$provideFileSearchResults(t,i,r,s){const n=$w(r),o=this.k.get(t);if(o)return this.n.fileSearch(n,o,a=>{this.c.$handleFileMatch(t,i,a.map(c=>c.resource))},s);throw new Error("unknown provider: "+t)}async doInternalFileSearchWithCustomCallback(t,i,r){return{messages:[]}}$clearCache(t){return this.n.clearCache(t),Promise.resolve(void 0)}$provideTextSearchResults(t,i,r,s){const n=this.g.get(t);if(!n||!n.provideTextSearchResults)throw new Error(`Unknown Text Search Provider ${t}`);const o=$w(r);return this.v(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s)}$provideAITextSearchResults(t,i,r,s){const n=this.i.get(t);if(!n||!n.provideAITextSearchResults)throw new Error(`Unknown AI Text Search Provider ${t}`);const o=$w(r);return this.w(o,n).search(c=>this.c.$handleTextMatch(t,i,c),s,c=>this.c.$handleKeywordResult(t,i,c))}$enableExtensionHostSearch(){}async $getAIName(t){const i=this.i.get(t);if(!(!i||!i.provideAITextSearchResults))return i.name??"AI"}v(t,i){return new OS({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"textSearchProvider")}w(t,i){return new OS({query:t,provider:i},{readdir:r=>Promise.resolve([]),toCanonicalName:r=>r},"aiTextSearchProvider")}};kw=__decorate([__param(0,Fe),__param(1,nh),__param(2,We)],kw);function $w(e){return{...e,folderQueries:e.folderQueries&&e.folderQueries.map(CF),extraFileResources:e.extraFileResources&&e.extraFileResources.map(t=>y.revive(t))}}function CF(e){return St(e)}var Cw=class extends $2{constructor(t,i){super(i.logLevel,i.logsLocation,i.loggers.map(r=>St(r))),this.c=t.getProxy(J.MainThreadLogger)}$setLogLevel(t,i){i?this.setLogLevel(y.revive(i),t):this.setLogLevel(t)}setVisibility(t,i){super.setVisibility(t,i),this.c.$setVisibility(t,i)}t(t,i,r){return new IF(this.c,t,i,r)}};Cw=__decorate([__param(0,Fe),__param(1,It)],Cw);var IF=class extends d5{constructor(e,t,i,r){super(r?.logLevel==="always"),this.s=e,this.t=t,this.n=!1,this.r=[],this.setLevel(i),this.s.$createLogger(t,r).then(()=>{this.w(this.r),this.n=!0})}m(e,t){const i=[[e,t]];this.n?this.w(i):this.r.push(...i)}w(e){this.s.$log(this.t,e)}flush(){this.s.$flush(this.t)}},jS=B("IExtHostTerminalShellIntegration"),Iw=class extends ne{constructor(t,i){super(),this.h=i,this.b=new Map,this.c=new P,this.onDidChangeTerminalShellIntegration=this.c.event,this.f=new P,this.onDidStartTerminalShellExecution=this.f.event,this.g=new P,this.onDidEndTerminalShellExecution=this.g.event,this.a=t.getProxy(J.MainThreadTerminalShellIntegration),this.B(oe(()=>{for(const[r,s]of this.b)s.dispose();this.b.clear()}))}$shellIntegrationChange(t){const i=this.h.getTerminalById(t);if(!i)return;const r=i.value;let s=this.b.get(t);s||(s=new DF(i.value,this.f),this.b.set(t,s),s.store.add(i.onWillDispose(()=>this.b.get(t)?.dispose())),s.store.add(s.onDidRequestShellExecution(n=>this.a.$executeCommand(t,n))),s.store.add(s.onDidRequestEndExecution(n=>this.g.fire(n))),s.store.add(s.onDidRequestChangeShellIntegration(n=>this.c.fire(n))),i.shellIntegration=s.value),this.c.fire({terminal:r,shellIntegration:s.value})}$shellExecutionStart(t,i,r,s,n){this.b.has(t)||this.$shellIntegrationChange(t);const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.startShellExecution(o,y.revive(n))}$shellExecutionEnd(t,i,r,s,n){const o={value:i,confidence:r,isTrusted:s};this.b.get(t)?.endShellExecution(o,n)}$shellExecutionData(t,i){this.b.get(t)?.emitData(i)}$shellEnvChange(t,i,r,s){this.b.get(t)?.setEnv(i,r,s)}$cwdChange(t,i){this.b.get(t)?.setCwd(y.revive(i))}$closeTerminal(t){this.b.get(t)?.dispose(),this.b.delete(t)}};Iw=__decorate([__param(0,Fe),__param(1,Ma)],Iw);var DF=class extends ne{get currentExecution(){return this.f}constructor(e,t){super(),this.s=e,this.t=t,this.a=[],this.store=this.B(new ue),this.j=this.B(new P),this.onDidRequestChangeShellIntegration=this.j.event,this.m=this.B(new P),this.onDidRequestShellExecution=this.m.event,this.n=this.B(new P),this.onDidRequestEndExecution=this.n.event,this.r=this.B(new P),this.onDidRequestNewExecution=this.r.event;const i=this;this.value={get cwd(){return i.h},get env(){if(i.g)return Object.freeze({isTrusted:i.g.isTrusted,value:Object.freeze({...i.g.value})})},executeCommand(r,s){let n=r;if(s)for(const c of s)!c.match(/["'`]/)&&c.match(/\s/)?n+=` "${c}"`:n+=` ${c}`;i.m.fire(n);const o={value:n,confidence:Qc.High,isTrusted:!0};return i.requestNewShellExecution(o,i.h).value}}}requestNewShellExecution(e,t){const i=new BS(e,t??this.h);return fp(e.value).length>1&&(this.c={isMultiLine:!0,unresolvedCommandLines:fp(e.value)}),this.a.push(i),this.r.fire(e.value),i}startShellExecution(e,t){if(this.b&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.b.value,exitCode:void 0}),this.b=void 0),this.f){if(this.c?.isMultiLine&&this.c.unresolvedCommandLines){const r=HS(this.c.unresolvedCommandLines,e);if(r){this.c.unresolvedCommandLines=r.unresolvedCommandLines;return}}this.f.endExecution(void 0),this.f.flush(),this.n.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value,exitCode:void 0})}let i;if(e.confidence===Qc.High)for(const[r,s]of this.a.entries())if(s.value.commandLine.value===e.value){i=s,this.c={isMultiLine:!1,unresolvedCommandLines:void 0},i=s,this.a.splice(r,1);break}else{const n=HS(fp(s.value.commandLine.value),e);if(n){this.c={isMultiLine:!0,unresolvedCommandLines:n.unresolvedCommandLines},i=s,this.a.splice(r,1);break}}else i=this.a.shift();i||(i=new BS(e,t??this.h)),this.f=i,this.t.fire({terminal:this.s,shellIntegration:this.value,execution:this.f.value})}emitData(e){this.currentExecution?.emitData(e)}endShellExecution(e,t){if(!(this.c?.isMultiLine&&this.c.unresolvedCommandLines&&this.c.unresolvedCommandLines.length>0)&&this.f){const i=this.c?.isMultiLine?this.f.value.commandLine:e;this.f.endExecution(i);const r=this.f;this.b=r,this.f=void 0,r.flush().then(()=>{this.b===r&&(this.n.fire({terminal:this.s,shellIntegration:this.value,execution:r.value,exitCode:t}),this.b=void 0)})}}setEnv(e,t,i){const r={};for(let s=0;s<e.length;s++)r[e[s]]=t[s];this.g={value:r,isTrusted:i},this.u()}setCwd(e){let t=!1;y.isUri(this.h)?t=!y.isUri(e)||this.h.toString()!==e.toString():this.h!==e&&(t=!0),t&&(this.h=e,this.u())}u(){this.j.fire({terminal:this.s,shellIntegration:this.value})}},BS=class{constructor(e,t){this.c=e,this.cwd=t,this.b=!1;const i=this;this.value={get commandLine(){return i.c},get cwd(){return i.cwd},read(){return i.d()}}}d(){if(!this.a){if(this.b)return hc.EMPTY;this.a=new PF}return this.a.createIterable()}emitData(e){this.b||this.a?.emitData(e)}endExecution(e){e&&(this.c=e),this.a?.endExecution(),this.b=!0}async flush(){this.a&&(await this.a.flush(),this.a.dispose(),this.a=void 0)}},PF=class extends ne{constructor(){super(...arguments),this.b=[],this.c=[]}createIterable(){this.a||(this.a=new Er);const e=this.a,t=new hc(async i=>{this.c.push(i),await e.wait()});return this.b.push(t),t}emitData(e){for(const t of this.c)t.emitOne(e)}endExecution(){this.a?.open()}async flush(){await Promise.all(this.b.map(e=>e.toPromise()))}};function fp(e){return e.split(`
`).map(t=>t.trim()).filter(t=>t.length>0)}function HS(e,t){if(e.length===0)return!1;const i=[...e],r=fp(t.value);if(i&&i.length>0){for(;i.length>0&&i[0]===r[0];)i.shift(),r.shift();if(r.length===0)return{unresolvedCommandLines:i}}return!1}var zS;(function(e){e[e.CR=13]="CR",e[e.LF=10]="LF",e[e.COLON=58]="COLON",e[e.SPACE=32]="SPACE"})(zS||(zS={}));var Dw=class{constructor(e){this.a="",this.b="",this.f=[],this.g=!1,this.h=e,this.i=new TextDecoder("utf-8")}getLastEventId(){return this.d}getReconnectionTime(){return this.e}feed(e){if(e.length===0)return;let t=0;for(this.g&&e[0]===10&&t++,this.g=!1;t<e.length;){const i=e.indexOf(13,t),r=e.indexOf(10,t),s=i===-1?r:r===-1?i:Math.min(i,r);if(s===-1)break;let n="";for(const o of this.f)n+=this.i.decode(o,{stream:!0});n+=this.i.decode(e.subarray(t,s)),this.j(n),this.f.length=0,t=s+(e[s]===13&&e[s+1]===10?2:1)}t<e.length?this.f.push(e.subarray(t)):this.g=e[e.length-1]===13}j(e){if(!e.length){this.l();return}if(e.startsWith(":"))return;let t,i;const r=e.indexOf(":");r===-1?(t=e,i=""):(t=e.substring(0,r),i=e.substring(r+1),i.startsWith(" ")&&(i=i.substring(1))),this.k(t,i)}k(e,t){switch(e){case"event":this.b=t;break;case"data":this.a+=t,this.a+=`
`;break;case"id":t.includes("\0")?this.c=void 0:this.c=this.d=t;break;case"retry":/^\d+$/.test(t)&&(this.e=parseInt(t,10));break}}l(){if(this.a===""){this.a="",this.b="";return}this.a.endsWith(`
`)&&(this.a=this.a.substring(0,this.a.length-1));const e={type:this.b||"message",data:this.a};this.c!==void 0&&(e.id=this.c),this.e!==void 0&&(e.retry=this.e),this.h(e),this.reset()}reset(){this.a="",this.b="",this.c=void 0}},Pw=B("IExtHostMpcService"),Aw=class extends ne{constructor(t,i){super(),this.h=i,this.c=new Set,this.f=this.B(new Ru),this.g=new Map,this.b=t.getProxy(J.MainThreadMcp)}$startMcp(t,i){this.j(t,xl.fromSerialized(i))}j(t,i){if(i.type===2){this.f.set(t,new AF(t,i,this.b));return}throw new Error("not implemented")}$stopMcp(t){this.f.has(t)&&(this.f.deleteAndDispose(t),this.b.$onDidChangeState(t,{state:0}))}$sendMessage(t,i){this.f.get(t)?.send(i)}async $waitForInitialCollectionProviders(){await Promise.all(this.c)}async $resolveMcpLaunch(t,i){const r=this.g.get(t);if(!r)return;const s=r.servers.find(o=>o.label===i);if(!s)return;if(!r.provider.resolveMcpServerDefinition)return Ol.from(s);const n=await r.provider.resolveMcpServerDefinition(s,et.None);return n?Ol.from(n):void 0}registerMcpConfigurationProvider(t,i,r){const s=new ue,n=t.contributes?.mcpServerDefinitionProviders?.find(l=>l.id===i);if(!n)throw new Error(`MCP configuration providers must be registered in the contributes.mcpServerDefinitionProviders array within your package.json, but "${i}" was not`);const o={id:lL(t.identifier,i),isTrustedByDefault:!0,label:n?.label??t.displayName??t.name,scope:1,canResolveLaunch:typeof r.resolveMcpServerDefinition=="function",extensionId:t.identifier.value,configTarget:this.h.remote.isRemote?4:2},a=async()=>{const l=await r.provideMcpServerDefinitions(et.None);this.g.set(o.id,{servers:l??[],provider:r});const u=[];for(const h of l??[]){let f=je.toKey(t.identifier)+"/"+h.label;if(u.some(p=>p.id===f)){let p=2;for(;u.some(m=>m.id===f+p);)p++;f=f+p}u.push({id:f,label:h.label,cacheNonce:h.version,launch:Ol.from(h)})}this.b.$upsertMcpCollection(o,u)};s.add(oe(()=>{this.g.delete(o.id),this.b.$deleteMcpCollection(o.id)})),r.onDidChangeMcpServerDefinitions&&s.add(r.onDidChangeMcpServerDefinitions(a)),r.onDidChangeServerDefinitions&&s.add(r.onDidChangeServerDefinitions(a)),r.onDidChange&&s.add(r.onDidChange(a));const c=new Promise(l=>{setTimeout(()=>a().finally(()=>{this.c.delete(c),l()}),0)});return this.c.add(c),s}};Aw=__decorate([__param(0,Fe),__param(1,It)],Aw);var _S;(function(e){e[e.Unknown=0]="Unknown",e[e.Http=1]="Http",e[e.SSE=2]="SSE"})(_S||(_S={}));var AF=class extends ne{constructor(e,t,i){super(),this.j=e,this.n=t,this.r=i,this.a=new UD,this.b=new Is,this.c={value:0},this.f=new at,this.g=new AbortController,this.B(oe(()=>{this.g.abort(),this.f.dispose(!0)})),this.r.$onDidChangeState(this.j,{state:2})}async send(e){try{await this.a.queue(()=>this.c.value===2?this.G(this.c.endpoint,e):this.t(e,this.c.value===1?this.c.sessionId:void 0))}catch(t){const i=`Error sending message to ${this.n.uri}: ${String(t)}`;this.r.$onDidChangeState(this.j,{state:3,message:i})}}async t(e,t){const i=new TextEncoder().encode(e),r={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length),Accept:"text/event-stream, application/json"};t&&(r["Mcp-Session-Id"]=t),await this.I(r);const s=await this.M(this.n.uri.toString(!0),{method:"POST",signal:this.g.signal,headers:r,body:i},r),n=this.c.value===0,o=s.headers.get("Mcp-Session-Id");if(o&&(this.c={value:1,sessionId:o}),this.c.value===0&&s.status>=400&&s.status<500&&s.status!==401&&s.status!==403){this.J($e.Info,`${s.status} status sending message to ${this.n.uri}, will attempt to fall back to legacy SSE`),this.u(e);return}if(s.status>=300){const a=this.c.value===1&&!!this.c.sessionId&&(s.status===400||s.status===404);this.r.$onDidChangeState(this.j,{state:3,message:`${s.status} status sending message to ${this.n.uri}: ${await this.L(s)}`+a?"; will retry with new session ID":"",shouldRetry:a});return}this.c.value===0&&(this.c={value:1,sessionId:void 0}),n&&this.D(),this.C(s,e)}async u(e){const t=await this.F();t&&(this.c={value:2,endpoint:t},await this.G(t,e))}async w(e){let t;if(e.headers.has("WWW-Authenticate")){const c=e.headers.get("WWW-Authenticate"),{scheme:l,params:u}=DN(c);l==="Bearer"&&u.resource_metadata&&(t=u.resource_metadata)}let i,r,s;if(t){const c=await this.y(t);i=c.authorization_servers?.[0],r=c.scopes_supported,s=c}const n=new URL(e.url).origin;let o={};i||(i=n,o={...Object.fromEntries(this.n.headers)});try{const c=await this.z(i,o),l=CN(c);this.h={authorizationServer:y.parse(i),serverMetadata:l,resourceMetadata:s};return}catch(c){this.J($e.Warning,`Error populating auth metadata: ${String(c)}`)}const a=$N(new URL(n));a.scopes_supported=r??a.scopes_supported??[],this.h={authorizationServer:y.parse(i),serverMetadata:a,resourceMetadata:s}}async y(e){const t=new URL(e),i=new URL(this.n.uri.toString(!0));let r={};t.origin===i.origin&&(r={...Object.fromEntries(this.n.headers)});const s=await fetch(e,{method:"GET",signal:this.g.signal,headers:{...r,Accept:"application/json","MCP-Protocol-Version":yl.LATEST_PROTOCOL_VERSION}});if(s.status!==200)throw new Error(`Failed to fetch resource metadata: ${s.status} ${await this.L(s)}`);const n=await s.json();if(EN(n))return n;throw new Error(`Invalid resource metadata: ${JSON.stringify(n)}`)}async z(e,t){const i=new URL(e),r=i.pathname==="/"?"":i.pathname,s=new URL(xN,e).toString()+r;let n=await fetch(s,{method:"GET",signal:this.g.signal,headers:{...t,Accept:"application/json","MCP-Protocol-Version":yl.LATEST_PROTOCOL_VERSION}});if(n.status!==200&&(n=await fetch(y.joinPath(y.parse(e),".well-known","openid-configuration").toString(!0),{method:"GET",signal:this.g.signal,headers:{...t,Accept:"application/json","MCP-Protocol-Version":yl.LATEST_PROTOCOL_VERSION}}),n.status!==200))throw new Error(`Failed to fetch authorization server metadata: ${n.status} ${await this.L(n)}`);const o=await n.json();if(SN(o))return o;throw new Error(`Invalid authorization server metadata: ${JSON.stringify(o)}`)}async C(e,t){if(e.status!==202)switch(e.headers.get("Content-Type")?.toLowerCase()){case"text/event-stream":{const i=new Dw(r=>{if(r.type==="message")this.r.$onDidReceiveMessage(this.j,r.data);else if(r.type==="endpoint")throw this.J($e.Warning,`Received SSE endpoint from a POST to ${this.n.uri}, will fall back to legacy SSE`),this.u(t),new Ri});try{await this.H(i,e)}catch(r){this.J($e.Warning,`Error reading SSE stream: ${String(r)}`)}break}case"application/json":this.r.$onDidReceiveMessage(this.j,await e.text());break;default:{const i=await e.text();TF(i)?this.r.$onDidReceiveMessage(this.j,i):this.J($e.Warning,`Unexpected ${e.status} response for request: ${i}`)}}}async D(){let e;for(let t=0;!this.q.isDisposed;t++){await Vi(Math.min(t*1e3,3e4),this.f.token);let i;try{const s={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.I(s),this.c.value===1&&this.c.sessionId!==void 0&&(s["Mcp-Session-Id"]=this.c.sessionId),e&&(s["Last-Event-ID"]=e),i=await this.M(this.n.uri.toString(!0),{method:"GET",signal:this.g.signal,headers:s},s)}catch{this.J($e.Info,`Error connecting to ${this.n.uri} for async notifications, will retry`);continue}if(i.status>=400){this.J($e.Debug,`${i.status} status connecting to ${this.n.uri} for async notifications; they will be disabled: ${await this.L(i)}`);return}t=0;const r=new Dw(s=>{s.type==="message"&&this.r.$onDidReceiveMessage(this.j,s.data),s.id&&(e=s.id)});try{await this.H(r,i)}catch(s){this.J($e.Info,`Error reading from async stream, we will reconnect: ${s}`)}}}async F(){const e=new Is,t={...Object.fromEntries(this.n.headers),Accept:"text/event-stream"};await this.I(t);let i;try{if(i=await this.M(this.n.uri.toString(!0),{method:"GET",signal:this.g.signal,headers:t},t),i.status>=300){this.r.$onDidChangeState(this.j,{state:3,message:`${i.status} status connecting to ${this.n.uri} as SSE: ${await this.L(i)}`});return}}catch(s){this.r.$onDidChangeState(this.j,{state:3,message:`Error connecting to ${this.n.uri} as SSE: ${s}`});return}const r=new Dw(s=>{s.type==="message"?this.r.$onDidReceiveMessage(this.j,s.data):s.type==="endpoint"&&e.complete(new URL(s.data,this.n.uri.toString(!0)).toString())});return this.B(oe(()=>e.cancel())),this.H(r,i).catch(s=>{this.r.$onDidChangeState(this.j,{state:3,message:`Error reading SSE stream: ${String(s)}`})}),e.p}async G(e,t){const i=new TextEncoder().encode(t),r={...Object.fromEntries(this.n.headers),"Content-Type":"application/json","Content-Length":String(i.length)};await this.I(r);const s=await fetch(e,{method:"POST",signal:this.g.signal,headers:r,body:i});s.status>=300&&this.J($e.Warning,`${s.status} status sending message to ${this.b}: ${await this.L(s)}`)}async H(e,t){if(!t.body)return;const i=t.body.getReader();let r;do{try{r=await Bg(i.read(),this.f.token)}catch(s){if(i.cancel(),this.q.isDisposed)return;throw s}r.value&&e.feed(r.value)}while(!r.done)}async I(e){if(this.h)try{const t=await this.r.$getTokenFromServerMetadata(this.j,this.h.authorizationServer,this.h.serverMetadata,this.h.resourceMetadata);t&&(e.Authorization=`Bearer ${t}`)}catch(t){this.J($e.Warning,`Error getting token from server metadata: ${String(t)}`)}return e}J(e,t){this.q.isDisposed||this.r.$onDidPublishLog(this.j,e,t)}async L(e){try{return await e.text()}catch{return e.statusText}}async M(e,t,i){const r=()=>fetch(e,t);let s=await r();return s.status===401&&(this.h||(await this.w(s),await this.I(i),i.Authorization&&(t.headers=i,s=await r()))),s}};function TF(e){try{return JSON.parse(e),!0}catch{return!1}}Ve(Q0,Y0,1),Ve(bn,Cw,1),Ve(Vl,iw,1),Ve(so,I0,0),Ve(ep,O0,0),Ve(H0,z0,0),Ve(os,d0,0),Ve(Yf,v0,0),Ve(dp,bw,0),Ve(NS,Sw,0),Ve(KE,sw,0),Ve(Ua,ow,0),Ve(X0,K0,0),Ve(Ro,z2,0),Ve(XE,rw,1),Ve(US,kw,0),Ve(m0,Yx,0),Ve(SS,vw,0),Ve(Ma,A0,0),Ve(jS,Iw,0),Ve(S0,k0,0),Ve(Xf,L0,0),Ve(Kf,M0,0),Ve(ns,c0,0),Ve(Z0,VE,0),Ve(Kl,ww,0),Ve(yw,xw,0),Ve(Pw,Aw,0);var RF=class extends ne{constructor(e,t=[]){super(),this.a=new k2([e,...t]),this.B(e.onDidChangeLogLevel(i=>this.setLevel(i)))}get onDidChangeLogLevel(){return this.a.onDidChangeLogLevel}setLevel(e){this.a.setLevel(e)}getLevel(){return this.a.getLevel()}trace(e,...t){this.a.trace(e,...t)}debug(e,...t){this.a.debug(e,...t)}info(e,...t){this.a.info(e,...t)}warn(e,...t){this.a.warn(e,...t)}error(e,...t){this.a.error(e,...t)}flush(){this.a.flush()}},Tw=class extends RF{constructor(t,i,r){const s=r.remote.isRemote?"remoteexthost":t?"workerexthost":"exthost",n=r.remote.isRemote?d(2901,null):d(t?2902:2903,null);super(i.createLogger(s,{name:n}))}};Tw=__decorate([__param(1,bn),__param(2,It)],Tw);var WS={tabSize:4,indentSize:4,insertSpaces:!0,detectIndentation:!0,trimAutoWhitespace:!0,largeFileOptimizations:!0,bracketPairColorizationOptions:{enabled:!0,independentColorPoolPerBracketType:!1}},VS;(function(e){e[e.None=0]="None",e[e.Keep=1]="Keep",e[e.Brackets=2]="Brackets",e[e.Advanced=3]="Advanced",e[e.Full=4]="Full"})(VS||(VS={}));var LF=8,NF=class{constructor(){this.stableMinimapLayoutInput=null,this.stableFitMaxMinimapScale=0,this.stableFitRemainingWidth=0}},qe=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return gp(e,t)}compute(e,t,i){return i}},pp=class{constructor(e,t){this.newValue=e,this.didChange=t}};function gp(e,t){if(typeof e!="object"||typeof t!="object"||!e||!t)return new pp(t,e!==t);if(Array.isArray(e)||Array.isArray(t)){const r=Array.isArray(e)&&Array.isArray(t)&&Li(e,t);return new pp(t,!r)}let i=!1;for(const r in t)if(t.hasOwnProperty(r)){const s=gp(e[r],t[r]);s.didChange&&(e[r]=s.newValue,i=!0)}return new pp(e,i)}var oo=class{constructor(e){this.schema=void 0,this.id=e,this.name="_never_",this.defaultValue=void 0}applyUpdate(e,t){return gp(e,t)}validate(e){return this.defaultValue}},ja=class{constructor(e,t,i,r){this.id=e,this.name=t,this.defaultValue=i,this.schema=r}applyUpdate(e,t){return gp(e,t)}validate(e){return typeof e>"u"?this.defaultValue:e}compute(e,t,i){return i}};function Y(e,t){return typeof e>"u"?t:e==="false"?!1:!!e}var ye=class extends ja{constructor(e,t,i,r=void 0){typeof r<"u"&&(r.type="boolean",r.default=i),super(e,t,i,r)}validate(e){return Y(e,this.defaultValue)}};function MF(e,t,i,r){if(typeof e>"u")return t;let s=parseInt(e,10);return isNaN(s)?t:(s=Math.max(i,s),s=Math.min(r,s),s|0)}var Be=class CC extends ja{static clampedInt(t,i,r,s){return MF(t,i,r,s)}constructor(t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="integer",o.default=r,o.minimum=s,o.maximum=n),super(t,i,r,o),this.minimum=s,this.maximum=n}validate(t){return CC.clampedInt(t,this.defaultValue,this.minimum,this.maximum)}},Fr=class IC extends ja{static clamp(t,i,r){return t<i?i:t>r?r:t}static float(t,i){if(typeof t=="number")return t;if(typeof t>"u")return i;const r=parseFloat(t);return isNaN(r)?i:r}constructor(t,i,r,s,n){typeof n<"u"&&(n.type="number",n.default=r),super(t,i,r,n),this.validationFn=s}validate(t){return this.validationFn(IC.float(t,this.defaultValue))}},vi=class DC extends ja{static string(t,i){return typeof t!="string"?i:t}constructor(t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.default=r),super(t,i,r,s)}validate(t){return DC.string(t,this.defaultValue)}};function Qe(e,t,i,r){return typeof e!="string"?t:r&&e in r?r[e]:i.indexOf(e)===-1?t:e}var Je=class extends ja{constructor(e,t,i,r,s=void 0){typeof s<"u"&&(s.type="string",s.enum=r,s.default=i),super(e,t,i,s),this.c=r}validate(e){return Qe(e,this.defaultValue,this.c)}},tu=class extends qe{constructor(e,t,i,r,s,n,o=void 0){typeof o<"u"&&(o.type="string",o.enum=s,o.default=r),super(e,t,i,o),this.c=s,this.d=n}validate(e){return typeof e!="string"?this.defaultValue:this.c.indexOf(e)===-1?this.defaultValue:this.d(e)}};function FF(e,t){return Array.isArray(e)?e.map(i=>String(i)):t}function OF(e){switch(e){case"none":return 0;case"keep":return 1;case"brackets":return 2;case"advanced":return 3;case"full":return 4}}var UF=class extends qe{constructor(){super(2,"accessibilitySupport",0,{type:"string",enum:["auto","on","off"],enumDescriptions:[d(308,null),d(309,null),d(310,null)],default:"auto",tags:["accessibility"],description:d(311,null)})}validate(e){switch(e){case"auto":return 0;case"off":return 1;case"on":return 2}return this.defaultValue}compute(e,t,i){return i===0?e.accessibilitySupport:i}},jF=class extends qe{constructor(){const e={insertSpace:!0,ignoreEmptyLines:!0};super(24,"comments",e,{"editor.comments.insertSpace":{type:"boolean",default:e.insertSpace,description:d(312,null)},"editor.comments.ignoreEmptyLines":{type:"boolean",default:e.ignoreEmptyLines,description:d(313,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertSpace:Y(t.insertSpace,this.defaultValue.insertSpace),ignoreEmptyLines:Y(t.ignoreEmptyLines,this.defaultValue.ignoreEmptyLines)}}},qS;(function(e){e[e.Hidden=0]="Hidden",e[e.Blink=1]="Blink",e[e.Smooth=2]="Smooth",e[e.Phase=3]="Phase",e[e.Expand=4]="Expand",e[e.Solid=5]="Solid"})(qS||(qS={}));function BF(e){switch(e){case"blink":return 1;case"smooth":return 2;case"phase":return 3;case"expand":return 4;case"solid":return 5}}var fr;(function(e){e[e.Line=1]="Line",e[e.Block=2]="Block",e[e.Underline=3]="Underline",e[e.LineThin=4]="LineThin",e[e.BlockOutline=5]="BlockOutline",e[e.UnderlineThin=6]="UnderlineThin"})(fr||(fr={}));function GS(e){switch(e){case"line":return fr.Line;case"block":return fr.Block;case"underline":return fr.Underline;case"line-thin":return fr.LineThin;case"block-outline":return fr.BlockOutline;case"underline-thin":return fr.UnderlineThin}}var HF=class extends oo{constructor(){super(149)}compute(e,t,i){const r=["monaco-editor"];return t.get(42)&&r.push(t.get(42)),e.extraEditorClassName&&r.push(e.extraEditorClassName),t.get(76)==="default"?r.push("mouse-default"):t.get(76)==="copy"&&r.push("mouse-copy"),t.get(117)&&r.push("showUnused"),t.get(146)&&r.push("showDeprecated"),r.join(" ")}},zF=class extends ye{constructor(){super(39,"emptySelectionClipboard",!0,{description:d(314,null)})}compute(e,t,i){return i&&e.emptySelectionClipboard}},_F=class extends qe{constructor(){const e={cursorMoveOnType:!0,findOnType:!0,seedSearchStringFromSelection:"always",autoFindInSelection:"never",globalFindClipboard:!1,addExtraSpaceOnTop:!0,loop:!0,history:"workspace",replaceHistory:"workspace"};super(44,"find",e,{"editor.find.cursorMoveOnType":{type:"boolean",default:e.cursorMoveOnType,description:d(315,null)},"editor.find.seedSearchStringFromSelection":{type:"string",enum:["never","always","selection"],default:e.seedSearchStringFromSelection,enumDescriptions:[d(316,null),d(317,null),d(318,null)],description:d(319,null)},"editor.find.autoFindInSelection":{type:"string",enum:["never","always","multiline"],default:e.autoFindInSelection,enumDescriptions:[d(320,null),d(321,null),d(322,null)],description:d(323,null)},"editor.find.globalFindClipboard":{type:"boolean",default:e.globalFindClipboard,description:d(324,null),included:Oi},"editor.find.addExtraSpaceOnTop":{type:"boolean",default:e.addExtraSpaceOnTop,description:d(325,null)},"editor.find.loop":{type:"boolean",default:e.loop,description:d(326,null)},"editor.find.history":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(327,null),d(328,null)],description:d(329,null)},"editor.find.replaceHistory":{type:"string",enum:["never","workspace"],default:"workspace",enumDescriptions:[d(330,null),d(331,null)],description:d(332,null)},"editor.find.findOnType":{type:"boolean",default:e.findOnType,description:d(333,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{cursorMoveOnType:Y(t.cursorMoveOnType,this.defaultValue.cursorMoveOnType),findOnType:Y(t.findOnType,this.defaultValue.findOnType),seedSearchStringFromSelection:typeof e.seedSearchStringFromSelection=="boolean"?e.seedSearchStringFromSelection?"always":"never":Qe(t.seedSearchStringFromSelection,this.defaultValue.seedSearchStringFromSelection,["never","always","selection"]),autoFindInSelection:typeof e.autoFindInSelection=="boolean"?e.autoFindInSelection?"always":"never":Qe(t.autoFindInSelection,this.defaultValue.autoFindInSelection,["never","always","multiline"]),globalFindClipboard:Y(t.globalFindClipboard,this.defaultValue.globalFindClipboard),addExtraSpaceOnTop:Y(t.addExtraSpaceOnTop,this.defaultValue.addExtraSpaceOnTop),loop:Y(t.loop,this.defaultValue.loop),history:Qe(t.history,this.defaultValue.history,["never","workspace"]),replaceHistory:Qe(t.replaceHistory,this.defaultValue.replaceHistory,["never","workspace"])}}},WF=class Wa extends qe{static{this.OFF='"liga" off, "calt" off'}static{this.ON='"liga" on, "calt" on'}constructor(){super(54,"fontLigatures",Wa.OFF,{anyOf:[{type:"boolean",description:d(334,null)},{type:"string",description:d(335,null)}],description:d(336,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"||t.length===0?Wa.OFF:t==="true"?Wa.ON:t:t?Wa.ON:Wa.OFF}},VF=class Va extends qe{static{this.OFF="normal"}static{this.TRANSLATE="translate"}constructor(){super(57,"fontVariations",Va.OFF,{anyOf:[{type:"boolean",description:d(337,null)},{type:"string",description:d(338,null)}],description:d(339,null),default:!1})}validate(t){return typeof t>"u"?this.defaultValue:typeof t=="string"?t==="false"?Va.OFF:t==="true"?Va.TRANSLATE:t:t?Va.TRANSLATE:Va.OFF}compute(t,i,r){return t.fontInfo.fontVariationSettings}},qF=class extends oo{constructor(){super(53)}compute(e,t,i){return e.fontInfo}},GF=class extends oo{constructor(){super(148)}compute(e,t,i){return e.inputMode==="overtype"?t.get(85):t.get(29)}},JF=class extends oo{constructor(){super(157)}compute(e,t){return e.editContextSupported&&t.get(38)}},ZF=class extends ja{constructor(){super(55,"fontSize",ls.fontSize,{type:"number",minimum:6,maximum:100,default:ls.fontSize,description:d(340,null)})}validate(e){const t=Fr.float(e,this.defaultValue);return t===0?ls.fontSize:Fr.clamp(t,6,100)}compute(e,t,i){return e.fontInfo.fontSize}},YF=class qa extends qe{static{this.c=["normal","bold","100","200","300","400","500","600","700","800","900"]}static{this.d=1}static{this.e=1e3}constructor(){super(56,"fontWeight",ls.fontWeight,{anyOf:[{type:"number",minimum:qa.d,maximum:qa.e,errorMessage:d(341,null)},{type:"string",pattern:"^(normal|bold|1000|[1-9][0-9]{0,2})$"},{enum:qa.c}],default:ls.fontWeight,description:d(342,null)})}validate(t){return t==="normal"||t==="bold"?t:String(Be.clampedInt(t,ls.fontWeight,qa.d,qa.e))}},QF=class extends qe{constructor(){const e={multiple:"peek",multipleDefinitions:"peek",multipleTypeDefinitions:"peek",multipleDeclarations:"peek",multipleImplementations:"peek",multipleReferences:"peek",multipleTests:"peek",alternativeDefinitionCommand:"editor.action.goToReferences",alternativeTypeDefinitionCommand:"editor.action.goToReferences",alternativeDeclarationCommand:"editor.action.goToReferences",alternativeImplementationCommand:"",alternativeReferenceCommand:"",alternativeTestsCommand:""},t={type:"string",enum:["peek","gotoAndPeek","goto"],default:e.multiple,enumDescriptions:[d(343,null),d(344,null),d(345,null)]},i=["","editor.action.referenceSearch.trigger","editor.action.goToReferences","editor.action.peekImplementation","editor.action.goToImplementation","editor.action.peekTypeDefinition","editor.action.goToTypeDefinition","editor.action.peekDeclaration","editor.action.revealDeclaration","editor.action.peekDefinition","editor.action.revealDefinitionAside","editor.action.revealDefinition"];super(61,"gotoLocation",e,{"editor.gotoLocation.multiple":{deprecationMessage:d(346,null)},"editor.gotoLocation.multipleDefinitions":{description:d(347,null),...t},"editor.gotoLocation.multipleTypeDefinitions":{description:d(348,null),...t},"editor.gotoLocation.multipleDeclarations":{description:d(349,null),...t},"editor.gotoLocation.multipleImplementations":{description:d(350,null),...t},"editor.gotoLocation.multipleReferences":{description:d(351,null),...t},"editor.gotoLocation.alternativeDefinitionCommand":{type:"string",default:e.alternativeDefinitionCommand,enum:i,description:d(352,null)},"editor.gotoLocation.alternativeTypeDefinitionCommand":{type:"string",default:e.alternativeTypeDefinitionCommand,enum:i,description:d(353,null)},"editor.gotoLocation.alternativeDeclarationCommand":{type:"string",default:e.alternativeDeclarationCommand,enum:i,description:d(354,null)},"editor.gotoLocation.alternativeImplementationCommand":{type:"string",default:e.alternativeImplementationCommand,enum:i,description:d(355,null)},"editor.gotoLocation.alternativeReferenceCommand":{type:"string",default:e.alternativeReferenceCommand,enum:i,description:d(356,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{multiple:Qe(t.multiple,this.defaultValue.multiple,["peek","gotoAndPeek","goto"]),multipleDefinitions:t.multipleDefinitions??Qe(t.multipleDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleTypeDefinitions:t.multipleTypeDefinitions??Qe(t.multipleTypeDefinitions,"peek",["peek","gotoAndPeek","goto"]),multipleDeclarations:t.multipleDeclarations??Qe(t.multipleDeclarations,"peek",["peek","gotoAndPeek","goto"]),multipleImplementations:t.multipleImplementations??Qe(t.multipleImplementations,"peek",["peek","gotoAndPeek","goto"]),multipleReferences:t.multipleReferences??Qe(t.multipleReferences,"peek",["peek","gotoAndPeek","goto"]),multipleTests:t.multipleTests??Qe(t.multipleTests,"peek",["peek","gotoAndPeek","goto"]),alternativeDefinitionCommand:vi.string(t.alternativeDefinitionCommand,this.defaultValue.alternativeDefinitionCommand),alternativeTypeDefinitionCommand:vi.string(t.alternativeTypeDefinitionCommand,this.defaultValue.alternativeTypeDefinitionCommand),alternativeDeclarationCommand:vi.string(t.alternativeDeclarationCommand,this.defaultValue.alternativeDeclarationCommand),alternativeImplementationCommand:vi.string(t.alternativeImplementationCommand,this.defaultValue.alternativeImplementationCommand),alternativeReferenceCommand:vi.string(t.alternativeReferenceCommand,this.defaultValue.alternativeReferenceCommand),alternativeTestsCommand:vi.string(t.alternativeTestsCommand,this.defaultValue.alternativeTestsCommand)}}},XF=class extends qe{constructor(){const e={enabled:!0,delay:300,hidingDelay:300,sticky:!0,above:!0};super(63,"hover",e,{"editor.hover.enabled":{type:"boolean",default:e.enabled,description:d(357,null)},"editor.hover.delay":{type:"number",default:e.delay,minimum:0,maximum:1e4,description:d(358,null)},"editor.hover.sticky":{type:"boolean",default:e.sticky,description:d(359,null)},"editor.hover.hidingDelay":{type:"integer",minimum:0,default:e.hidingDelay,description:d(360,null)},"editor.hover.above":{type:"boolean",default:e.above,description:d(361,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Y(t.enabled,this.defaultValue.enabled),delay:Be.clampedInt(t.delay,this.defaultValue.delay,0,1e4),sticky:Y(t.sticky,this.defaultValue.sticky),hidingDelay:Be.clampedInt(t.hidingDelay,this.defaultValue.hidingDelay,0,6e5),above:Y(t.above,this.defaultValue.above)}}},JS;(function(e){e[e.None=0]="None",e[e.Text=1]="Text",e[e.Blocks=2]="Blocks"})(JS||(JS={}));var KF=class Kp extends oo{constructor(){super(152)}compute(t,i,r){return Kp.computeLayout(i,{memory:t.memory,outerWidth:t.outerWidth,outerHeight:t.outerHeight,isDominatedByLongLines:t.isDominatedByLongLines,lineHeight:t.fontInfo.lineHeight,viewLineCount:t.viewLineCount,lineNumbersDigitCount:t.lineNumbersDigitCount,typicalHalfwidthCharacterWidth:t.fontInfo.typicalHalfwidthCharacterWidth,maxDigitWidth:t.fontInfo.maxDigitWidth,pixelRatio:t.pixelRatio,glyphMarginDecorationLaneCount:t.glyphMarginDecorationLaneCount})}static computeContainedMinimapLineCount(t){const i=t.height/t.lineHeight,r=Math.floor(t.paddingTop/t.lineHeight);let s=Math.floor(t.paddingBottom/t.lineHeight);t.scrollBeyondLastLine&&(s=Math.max(s,i-1));const n=(r+t.viewLineCount+s)/(t.pixelRatio*t.height),o=Math.floor(t.viewLineCount/n);return{typicalViewportLineCount:i,extraLinesBeforeFirstLine:r,extraLinesBeyondLastLine:s,desiredRatio:n,minimapLineCount:o}}static c(t,i){const r=t.outerWidth,s=t.outerHeight,n=t.pixelRatio;if(!t.minimap.enabled)return{renderMinimap:0,minimapLeft:0,minimapWidth:0,minimapHeightIsEditorHeight:!1,minimapIsSampling:!1,minimapScale:1,minimapLineHeight:1,minimapCanvasInnerWidth:0,minimapCanvasInnerHeight:Math.floor(n*s),minimapCanvasOuterWidth:0,minimapCanvasOuterHeight:s};const o=i.stableMinimapLayoutInput,a=o&&t.outerHeight===o.outerHeight&&t.lineHeight===o.lineHeight&&t.typicalHalfwidthCharacterWidth===o.typicalHalfwidthCharacterWidth&&t.pixelRatio===o.pixelRatio&&t.scrollBeyondLastLine===o.scrollBeyondLastLine&&t.paddingTop===o.paddingTop&&t.paddingBottom===o.paddingBottom&&t.minimap.enabled===o.minimap.enabled&&t.minimap.side===o.minimap.side&&t.minimap.size===o.minimap.size&&t.minimap.showSlider===o.minimap.showSlider&&t.minimap.renderCharacters===o.minimap.renderCharacters&&t.minimap.maxColumn===o.minimap.maxColumn&&t.minimap.scale===o.minimap.scale&&t.verticalScrollbarWidth===o.verticalScrollbarWidth&&t.isViewportWrapping===o.isViewportWrapping,c=t.lineHeight,l=t.typicalHalfwidthCharacterWidth,u=t.scrollBeyondLastLine,h=t.minimap.renderCharacters;let f=n>=2?Math.round(t.minimap.scale*2):t.minimap.scale;const p=t.minimap.maxColumn,m=t.minimap.size,w=t.minimap.side,x=t.verticalScrollbarWidth,E=t.viewLineCount,$=t.remainingWidth,A=t.isViewportWrapping,Q=h?2:3;let W=Math.floor(n*s);const ce=W/n;let U=!1,z=!1,q=Q*f,he=f/n,me=1;if(m==="fill"||m==="fit"){const{typicalViewportLineCount:K,extraLinesBeforeFirstLine:se,extraLinesBeyondLastLine:De,desiredRatio:Xe,minimapLineCount:Ee}=Kp.computeContainedMinimapLineCount({viewLineCount:E,scrollBeyondLastLine:u,paddingTop:t.paddingTop,paddingBottom:t.paddingBottom,height:s,lineHeight:c,pixelRatio:n});if(E/Ee>1)U=!0,z=!0,f=1,q=1,he=f/n;else{let ht=!1,Lt=f+1;if(m==="fit"){const ii=Math.ceil((se+E+De)*q);A&&a&&$<=i.stableFitRemainingWidth?(ht=!0,Lt=i.stableFitMaxMinimapScale):ht=ii>W}if(m==="fill"||ht){U=!0;const ii=f;q=Math.min(c*n,Math.max(1,Math.floor(1/Xe))),A&&a&&$<=i.stableFitRemainingWidth&&(Lt=i.stableFitMaxMinimapScale),f=Math.min(Lt,Math.max(1,Math.floor(q/Q))),f>ii&&(me=Math.min(2,f/ii)),he=f/n/me,W=Math.ceil(Math.max(K,se+E+De)*q),A?(i.stableMinimapLayoutInput=t,i.stableFitRemainingWidth=$,i.stableFitMaxMinimapScale=f):(i.stableMinimapLayoutInput=null,i.stableFitRemainingWidth=0)}}}const Ie=Math.floor(p*he),kt=Math.min(Ie,Math.max(0,Math.floor(($-x-2)*he/(l+he)))+LF);let H=Math.floor(n*kt);const j=H/n;H=Math.floor(H*me);const G=h?1:2,Z=w==="left"?0:r-kt-x;return{renderMinimap:G,minimapLeft:Z,minimapWidth:kt,minimapHeightIsEditorHeight:U,minimapIsSampling:z,minimapScale:f,minimapLineHeight:q,minimapCanvasInnerWidth:H,minimapCanvasInnerHeight:W,minimapCanvasOuterWidth:j,minimapCanvasOuterHeight:ce}}static computeLayout(t,i){const r=i.outerWidth|0,s=i.outerHeight|0,n=i.lineHeight|0,o=i.lineNumbersDigitCount|0,a=i.typicalHalfwidthCharacterWidth,c=i.maxDigitWidth,l=i.pixelRatio,u=i.viewLineCount,h=t.get(143),f=h==="inherit"?t.get(142):h,p=f==="inherit"?t.get(138):f,m=t.get(141),w=i.isDominatedByLongLines,x=t.get(60),E=t.get(70).renderType!==0,$=t.get(71),A=t.get(111),Q=t.get(89),W=t.get(75),ce=t.get(109),U=ce.verticalScrollbarSize,z=ce.verticalHasArrows,q=ce.arrowSize,he=ce.horizontalScrollbarSize,me=t.get(46),Ie=t.get(116)!=="never";let kt=t.get(68);me&&Ie&&(kt+=16);let H=0;if(E){const $t=Math.max(o,$);H=Math.round($t*c)}let j=0;x&&(j=n*i.glyphMarginDecorationLaneCount);let G=0,Z=G+j,K=Z+H,se=K+kt;const De=r-j-H-kt;let Xe=!1,Ee=!1,Rt=-1;f==="inherit"&&w?(Xe=!0,Ee=!0):p==="on"||p==="bounded"?Ee=!0:p==="wordWrapColumn"&&(Rt=m);const ht=Kp.c({outerWidth:r,outerHeight:s,lineHeight:n,typicalHalfwidthCharacterWidth:a,pixelRatio:l,scrollBeyondLastLine:A,paddingTop:Q.top,paddingBottom:Q.bottom,minimap:W,verticalScrollbarWidth:U,viewLineCount:u,remainingWidth:De,isViewportWrapping:Ee},i.memory||new NF);ht.renderMinimap!==0&&ht.minimapLeft===0&&(G+=ht.minimapWidth,Z+=ht.minimapWidth,K+=ht.minimapWidth,se+=ht.minimapWidth);const Lt=De-ht.minimapWidth,ii=Math.max(1,Math.floor((Lt-U-2)/a)),li=z?q:0;return Ee&&(Rt=Math.max(1,ii),p==="bounded"&&(Rt=Math.min(Rt,m))),{width:r,height:s,glyphMarginLeft:G,glyphMarginWidth:j,glyphMarginDecorationLaneCount:i.glyphMarginDecorationLaneCount,lineNumbersLeft:Z,lineNumbersWidth:H,decorationsLeft:K,decorationsWidth:kt,contentLeft:se,contentWidth:Lt,minimap:ht,viewportColumn:ii,isWordWrapMinified:Xe,isViewportWrapping:Ee,wrappingColumn:Rt,verticalScrollbarWidth:U,horizontalScrollbarHeight:he,overviewRuler:{top:li,width:U,height:s-2*li,right:0}}}},eO=class extends qe{constructor(){super(145,"wrappingStrategy","simple",{"editor.wrappingStrategy":{enumDescriptions:[d(362,null),d(363,null)],type:"string",enum:["simple","advanced"],default:"simple",description:d(364,null)}})}validate(e){return Qe(e,"simple",["simple","advanced"])}compute(e,t,i){return t.get(2)===2?"advanced":i}},cs;(function(e){e.Off="off",e.OnCode="onCode",e.On="on"})(cs||(cs={}));var tO=class extends qe{constructor(){const e={enabled:cs.OnCode};super(67,"lightbulb",e,{"editor.lightbulb.enabled":{type:"string",enum:[cs.Off,cs.OnCode,cs.On],default:e.enabled,enumDescriptions:[d(365,null),d(366,null),d(367,null)],description:d(368,null)}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{enabled:Qe(e.enabled,this.defaultValue.enabled,[cs.Off,cs.OnCode,cs.On])}}},iO=class extends qe{constructor(){const e={enabled:!0,maxLineCount:5,defaultModel:"outlineModel",scrollWithEditor:!0};super(121,"stickyScroll",e,{"editor.stickyScroll.enabled":{type:"boolean",default:e.enabled,description:d(369,null)},"editor.stickyScroll.maxLineCount":{type:"number",default:e.maxLineCount,minimum:1,maximum:20,description:d(370,null)},"editor.stickyScroll.defaultModel":{type:"string",enum:["outlineModel","foldingProviderModel","indentationModel"],default:e.defaultModel,description:d(371,null)},"editor.stickyScroll.scrollWithEditor":{type:"boolean",default:e.scrollWithEditor,description:d(372,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Y(t.enabled,this.defaultValue.enabled),maxLineCount:Be.clampedInt(t.maxLineCount,this.defaultValue.maxLineCount,1,20),defaultModel:Qe(t.defaultModel,this.defaultValue.defaultModel,["outlineModel","foldingProviderModel","indentationModel"]),scrollWithEditor:Y(t.scrollWithEditor,this.defaultValue.scrollWithEditor)}}},rO=class extends qe{constructor(){const e={enabled:"on",fontSize:0,fontFamily:"",padding:!1,maximumLength:43};super(147,"inlayHints",e,{"editor.inlayHints.enabled":{type:"string",default:e.enabled,description:d(373,null),enum:["on","onUnlessPressed","offUnlessPressed","off"],markdownEnumDescriptions:[d(374,null),d(375,null,Oi?"Ctrl+Option":"Ctrl+Alt"),d(376,null,Oi?"Ctrl+Option":"Ctrl+Alt"),d(377,null)]},"editor.inlayHints.fontSize":{type:"number",default:e.fontSize,markdownDescription:d(378,null,"`#editor.fontSize#`","`5`")},"editor.inlayHints.fontFamily":{type:"string",default:e.fontFamily,markdownDescription:d(379,null,"`#editor.fontFamily#`")},"editor.inlayHints.padding":{type:"boolean",default:e.padding,description:d(380,null)},"editor.inlayHints.maximumLength":{type:"number",default:e.maximumLength,markdownDescription:d(381,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return typeof t.enabled=="boolean"&&(t.enabled=t.enabled?"on":"off"),{enabled:Qe(t.enabled,this.defaultValue.enabled,["on","off","offUnlessPressed","onUnlessPressed"]),fontSize:Be.clampedInt(t.fontSize,this.defaultValue.fontSize,0,100),fontFamily:vi.string(t.fontFamily,this.defaultValue.fontFamily),padding:Y(t.padding,this.defaultValue.padding),maximumLength:Be.clampedInt(t.maximumLength,this.defaultValue.maximumLength,0,Number.MAX_SAFE_INTEGER)}}},sO=class extends qe{constructor(){super(68,"lineDecorationsWidth",10)}validate(e){return typeof e=="string"&&/^\d+(\.\d+)?ch$/.test(e)?-parseFloat(e.substring(0,e.length-2)):Be.clampedInt(e,this.defaultValue,0,1e3)}compute(e,t,i){return i<0?Be.clampedInt(-i*e.fontInfo.typicalHalfwidthCharacterWidth,this.defaultValue,0,1e3):i}},nO=class extends Fr{constructor(){super(69,"lineHeight",ls.lineHeight,e=>Fr.clamp(e,0,150),{markdownDescription:d(382,null)})}compute(e,t,i){return e.fontInfo.lineHeight}},oO=class extends qe{constructor(){const e={enabled:!0,size:"proportional",side:"right",showSlider:"mouseover",autohide:!1,renderCharacters:!0,maxColumn:120,scale:1,showRegionSectionHeaders:!0,showMarkSectionHeaders:!0,markSectionHeaderRegex:"\\bMARK:\\s*(?<separator>-?)\\s*(?<label>.*)$",sectionHeaderFontSize:9,sectionHeaderLetterSpacing:1};super(75,"minimap",e,{"editor.minimap.enabled":{type:"boolean",default:e.enabled,description:d(383,null)},"editor.minimap.autohide":{type:"boolean",default:e.autohide,description:d(384,null)},"editor.minimap.size":{type:"string",enum:["proportional","fill","fit"],enumDescriptions:[d(385,null),d(386,null),d(387,null)],default:e.size,description:d(388,null)},"editor.minimap.side":{type:"string",enum:["left","right"],default:e.side,description:d(389,null)},"editor.minimap.showSlider":{type:"string",enum:["always","mouseover"],default:e.showSlider,description:d(390,null)},"editor.minimap.scale":{type:"number",default:e.scale,minimum:1,maximum:3,enum:[1,2,3],description:d(391,null)},"editor.minimap.renderCharacters":{type:"boolean",default:e.renderCharacters,description:d(392,null)},"editor.minimap.maxColumn":{type:"number",default:e.maxColumn,description:d(393,null)},"editor.minimap.showRegionSectionHeaders":{type:"boolean",default:e.showRegionSectionHeaders,description:d(394,null)},"editor.minimap.showMarkSectionHeaders":{type:"boolean",default:e.showMarkSectionHeaders,description:d(395,null)},"editor.minimap.markSectionHeaderRegex":{type:"string",default:e.markSectionHeaderRegex,description:d(396,null)},"editor.minimap.sectionHeaderFontSize":{type:"number",default:e.sectionHeaderFontSize,description:d(397,null)},"editor.minimap.sectionHeaderLetterSpacing":{type:"number",default:e.sectionHeaderLetterSpacing,description:d(398,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;let i=this.defaultValue.markSectionHeaderRegex;const r=e.markSectionHeaderRegex;if(typeof r=="string")try{new RegExp(r,"d"),i=r}catch{}return{enabled:Y(t.enabled,this.defaultValue.enabled),autohide:Y(t.autohide,this.defaultValue.autohide),size:Qe(t.size,this.defaultValue.size,["proportional","fill","fit"]),side:Qe(t.side,this.defaultValue.side,["right","left"]),showSlider:Qe(t.showSlider,this.defaultValue.showSlider,["always","mouseover"]),renderCharacters:Y(t.renderCharacters,this.defaultValue.renderCharacters),scale:Be.clampedInt(t.scale,1,1,3),maxColumn:Be.clampedInt(t.maxColumn,this.defaultValue.maxColumn,1,1e4),showRegionSectionHeaders:Y(t.showRegionSectionHeaders,this.defaultValue.showRegionSectionHeaders),showMarkSectionHeaders:Y(t.showMarkSectionHeaders,this.defaultValue.showMarkSectionHeaders),markSectionHeaderRegex:i,sectionHeaderFontSize:Fr.clamp(t.sectionHeaderFontSize??this.defaultValue.sectionHeaderFontSize,4,32),sectionHeaderLetterSpacing:Fr.clamp(t.sectionHeaderLetterSpacing??this.defaultValue.sectionHeaderLetterSpacing,0,5)}}};function aO(e){return e==="ctrlCmd"?Oi?"metaKey":"ctrlKey":"altKey"}var cO=class extends qe{constructor(){super(89,"padding",{top:0,bottom:0},{"editor.padding.top":{type:"number",default:0,minimum:0,maximum:1e3,description:d(399,null)},"editor.padding.bottom":{type:"number",default:0,minimum:0,maximum:1e3,description:d(400,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{top:Be.clampedInt(t.top,0,0,1e3),bottom:Be.clampedInt(t.bottom,0,0,1e3)}}},lO=class extends qe{constructor(){const e={enabled:!0,cycle:!0};super(91,"parameterHints",e,{"editor.parameterHints.enabled":{type:"boolean",default:e.enabled,description:d(401,null)},"editor.parameterHints.cycle":{type:"boolean",default:e.cycle,description:d(402,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Y(t.enabled,this.defaultValue.enabled),cycle:Y(t.cycle,this.defaultValue.cycle)}}},uO=class extends oo{constructor(){super(150)}compute(e,t,i){return e.pixelRatio}},hO=class extends qe{constructor(){super(93,"placeholder",void 0)}validate(e){return typeof e>"u"?this.defaultValue:typeof e=="string"?e:this.defaultValue}},dO=class extends qe{constructor(){const e={other:"on",comments:"off",strings:"off"},t=[{type:"boolean"},{type:"string",enum:["on","inline","off"],enumDescriptions:[d(403,null),d(404,null),d(405,null)]}];super(95,"quickSuggestions",e,{type:"object",additionalProperties:!1,properties:{strings:{anyOf:t,default:e.strings,description:d(406,null)},comments:{anyOf:t,default:e.comments,description:d(407,null)},other:{anyOf:t,default:e.other,description:d(408,null)}},default:e,markdownDescription:d(409,null,"`#editor.suggestOnTriggerCharacters#`")}),this.defaultValue=e}validate(e){if(typeof e=="boolean"){const c=e?"on":"off";return{comments:c,strings:c,other:c}}if(!e||typeof e!="object")return this.defaultValue;const{other:t,comments:i,strings:r}=e,s=["on","inline","off"];let n,o,a;return typeof t=="boolean"?n=t?"on":"off":n=Qe(t,this.defaultValue.other,s),typeof i=="boolean"?o=i?"on":"off":o=Qe(i,this.defaultValue.comments,s),typeof r=="boolean"?a=r?"on":"off":a=Qe(r,this.defaultValue.strings,s),{other:n,comments:o,strings:a}}},ZS;(function(e){e[e.Off=0]="Off",e[e.On=1]="On",e[e.Relative=2]="Relative",e[e.Interval=3]="Interval",e[e.Custom=4]="Custom"})(ZS||(ZS={}));var fO=class extends qe{constructor(){super(70,"lineNumbers",{renderType:1,renderFn:null},{type:"string",enum:["off","on","relative","interval"],enumDescriptions:[d(410,null),d(411,null),d(412,null),d(413,null)],default:"on",description:d(414,null)})}validate(e){let t=this.defaultValue.renderType,i=this.defaultValue.renderFn;return typeof e<"u"&&(typeof e=="function"?(t=4,i=e):e==="interval"?t=3:e==="relative"?t=2:e==="on"?t=1:t=0),{renderType:t,renderFn:i}}},pO=class extends qe{constructor(){const e=[],t={type:"number",description:d(415,null)};super(108,"rulers",e,{type:"array",items:{anyOf:[t,{type:["object"],properties:{column:t,color:{type:"string",description:d(416,null),format:"color-hex"}}}]},default:e,description:d(417,null)})}validate(e){if(Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="number")t.push({column:Be.clampedInt(i,0,0,1e4),color:null});else if(i&&typeof i=="object"){const r=i;t.push({column:Be.clampedInt(r.column,0,0,1e4),color:r.color})}return t.sort((i,r)=>i.column-r.column),t}return this.defaultValue}},gO=class extends qe{constructor(){super(98,"readOnlyMessage",void 0)}validate(e){return!e||typeof e!="object"?this.defaultValue:e}};function YS(e,t){if(typeof e!="string")return t;switch(e){case"hidden":return 2;case"visible":return 3;default:return 1}}var mO=class extends qe{constructor(){const e={vertical:1,horizontal:1,arrowSize:11,useShadows:!0,verticalHasArrows:!1,horizontalHasArrows:!1,horizontalScrollbarSize:12,horizontalSliderSize:12,verticalScrollbarSize:14,verticalSliderSize:14,handleMouseWheel:!0,alwaysConsumeMouseWheel:!0,scrollByPage:!1,ignoreHorizontalScrollbarInContentHeight:!1};super(109,"scrollbar",e,{"editor.scrollbar.vertical":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(418,null),d(419,null),d(420,null)],default:"auto",description:d(421,null)},"editor.scrollbar.horizontal":{type:"string",enum:["auto","visible","hidden"],enumDescriptions:[d(422,null),d(423,null),d(424,null)],default:"auto",description:d(425,null)},"editor.scrollbar.verticalScrollbarSize":{type:"number",default:e.verticalScrollbarSize,description:d(426,null)},"editor.scrollbar.horizontalScrollbarSize":{type:"number",default:e.horizontalScrollbarSize,description:d(427,null)},"editor.scrollbar.scrollByPage":{type:"boolean",default:e.scrollByPage,description:d(428,null)},"editor.scrollbar.ignoreHorizontalScrollbarInContentHeight":{type:"boolean",default:e.ignoreHorizontalScrollbarInContentHeight,description:d(429,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e,i=Be.clampedInt(t.horizontalScrollbarSize,this.defaultValue.horizontalScrollbarSize,0,1e3),r=Be.clampedInt(t.verticalScrollbarSize,this.defaultValue.verticalScrollbarSize,0,1e3);return{arrowSize:Be.clampedInt(t.arrowSize,this.defaultValue.arrowSize,0,1e3),vertical:YS(t.vertical,this.defaultValue.vertical),horizontal:YS(t.horizontal,this.defaultValue.horizontal),useShadows:Y(t.useShadows,this.defaultValue.useShadows),verticalHasArrows:Y(t.verticalHasArrows,this.defaultValue.verticalHasArrows),horizontalHasArrows:Y(t.horizontalHasArrows,this.defaultValue.horizontalHasArrows),handleMouseWheel:Y(t.handleMouseWheel,this.defaultValue.handleMouseWheel),alwaysConsumeMouseWheel:Y(t.alwaysConsumeMouseWheel,this.defaultValue.alwaysConsumeMouseWheel),horizontalScrollbarSize:i,horizontalSliderSize:Be.clampedInt(t.horizontalSliderSize,i,0,1e3),verticalScrollbarSize:r,verticalSliderSize:Be.clampedInt(t.verticalSliderSize,r,0,1e3),scrollByPage:Y(t.scrollByPage,this.defaultValue.scrollByPage),ignoreHorizontalScrollbarInContentHeight:Y(t.ignoreHorizontalScrollbarInContentHeight,this.defaultValue.ignoreHorizontalScrollbarInContentHeight)}}},pr="inUntrustedWorkspace",ao={allowedCharacters:"editor.unicodeHighlight.allowedCharacters",invisibleCharacters:"editor.unicodeHighlight.invisibleCharacters",nonBasicASCII:"editor.unicodeHighlight.nonBasicASCII",ambiguousCharacters:"editor.unicodeHighlight.ambiguousCharacters",includeComments:"editor.unicodeHighlight.includeComments",includeStrings:"editor.unicodeHighlight.includeStrings",allowedLocales:"editor.unicodeHighlight.allowedLocales"},vO=class extends qe{constructor(){const e={nonBasicASCII:pr,invisibleCharacters:!0,ambiguousCharacters:!0,includeComments:pr,includeStrings:!0,allowedCharacters:{},allowedLocales:{_os:!0,_vscode:!0}};super(131,"unicodeHighlight",e,{[ao.nonBasicASCII]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,pr],default:e.nonBasicASCII,description:d(430,null)},[ao.invisibleCharacters]:{restricted:!0,type:"boolean",default:e.invisibleCharacters,description:d(431,null)},[ao.ambiguousCharacters]:{restricted:!0,type:"boolean",default:e.ambiguousCharacters,description:d(432,null)},[ao.includeComments]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,pr],default:e.includeComments,description:d(433,null)},[ao.includeStrings]:{restricted:!0,type:["boolean","string"],enum:[!0,!1,pr],default:e.includeStrings,description:d(434,null)},[ao.allowedCharacters]:{restricted:!0,type:"object",default:e.allowedCharacters,description:d(435,null),additionalProperties:{type:"boolean"}},[ao.allowedLocales]:{restricted:!0,type:"object",additionalProperties:{type:"boolean"},default:e.allowedLocales,description:d(436,null)}})}applyUpdate(e,t){let i=!1;t.allowedCharacters&&e&&(oi(e.allowedCharacters,t.allowedCharacters)||(e={...e,allowedCharacters:t.allowedCharacters},i=!0)),t.allowedLocales&&e&&(oi(e.allowedLocales,t.allowedLocales)||(e={...e,allowedLocales:t.allowedLocales},i=!0));const r=super.applyUpdate(e,t);return i?new pp(r.newValue,!0):r}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{nonBasicASCII:Ba(t.nonBasicASCII,pr,[!0,!1,pr]),invisibleCharacters:Y(t.invisibleCharacters,this.defaultValue.invisibleCharacters),ambiguousCharacters:Y(t.ambiguousCharacters,this.defaultValue.ambiguousCharacters),includeComments:Ba(t.includeComments,pr,[!0,!1,pr]),includeStrings:Ba(t.includeStrings,pr,[!0,!1,pr]),allowedCharacters:this.c(e.allowedCharacters,this.defaultValue.allowedCharacters),allowedLocales:this.c(e.allowedLocales,this.defaultValue.allowedLocales)}}c(e,t){if(typeof e!="object"||!e)return t;const i={};for(const[r,s]of Object.entries(e))s===!0&&(i[r]=!0);return i}},wO=class extends qe{constructor(){const e={enabled:!0,mode:"subwordSmart",showToolbar:"onHover",suppressSuggestions:!1,keepOnBlur:!1,fontFamily:"default",syntaxHighlightingEnabled:!0,edits:{enabled:!0,showCollapsed:!1,renderSideBySide:"auto",allowCodeShifting:"always",useMultiLineGhostText:!0},experimental:{suppressInlineSuggestions:[]}};super(65,"inlineSuggest",e,{"editor.inlineSuggest.enabled":{type:"boolean",default:e.enabled,description:d(437,null)},"editor.inlineSuggest.showToolbar":{type:"string",default:e.showToolbar,enum:["always","onHover","never"],enumDescriptions:[d(438,null),d(439,null),d(440,null)],description:d(441,null)},"editor.inlineSuggest.syntaxHighlightingEnabled":{type:"boolean",default:e.syntaxHighlightingEnabled,description:d(442,null)},"editor.inlineSuggest.suppressSuggestions":{type:"boolean",default:e.suppressSuggestions,description:d(443,null)},"editor.inlineSuggest.experimental.suppressInlineSuggestions":{type:"array",tags:["experimental","onExp"],items:{type:"string"},description:d(444,null)},"editor.inlineSuggest.fontFamily":{type:"string",default:e.fontFamily,description:d(445,null)},"editor.inlineSuggest.edits.allowCodeShifting":{type:"string",default:e.edits.allowCodeShifting,description:d(446,null),enum:["always","horizontal","never"],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.renderSideBySide":{type:"string",default:e.edits.renderSideBySide,description:d(447,null),enum:["auto","never"],enumDescriptions:[d(448,null),d(449,null)],tags:["nextEditSuggestions"]},"editor.inlineSuggest.edits.showCollapsed":{type:"boolean",default:e.edits.showCollapsed,description:d(450,null),tags:["nextEditSuggestions"]}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Y(t.enabled,this.defaultValue.enabled),mode:Qe(t.mode,this.defaultValue.mode,["prefix","subword","subwordSmart"]),showToolbar:Qe(t.showToolbar,this.defaultValue.showToolbar,["always","onHover","never"]),suppressSuggestions:Y(t.suppressSuggestions,this.defaultValue.suppressSuggestions),keepOnBlur:Y(t.keepOnBlur,this.defaultValue.keepOnBlur),fontFamily:vi.string(t.fontFamily,this.defaultValue.fontFamily),syntaxHighlightingEnabled:Y(t.syntaxHighlightingEnabled,this.defaultValue.syntaxHighlightingEnabled),edits:{enabled:Y(t.edits?.enabled,this.defaultValue.edits.enabled),showCollapsed:Y(t.edits?.showCollapsed,this.defaultValue.edits.showCollapsed),allowCodeShifting:Qe(t.edits?.allowCodeShifting,this.defaultValue.edits.allowCodeShifting,["always","horizontal","never"]),renderSideBySide:Qe(t.edits?.renderSideBySide,this.defaultValue.edits.renderSideBySide,["never","auto"]),useMultiLineGhostText:Y(t.edits?.useMultiLineGhostText,this.defaultValue.edits.useMultiLineGhostText)},experimental:{suppressInlineSuggestions:FF(t.experimental?.suppressInlineSuggestions,this.defaultValue.experimental.suppressInlineSuggestions)}}}},bO=class extends qe{constructor(){const e={enabled:WS.bracketPairColorizationOptions.enabled,independentColorPoolPerBracketType:WS.bracketPairColorizationOptions.independentColorPoolPerBracketType};super(16,"bracketPairColorization",e,{"editor.bracketPairColorization.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(451,null,"`#workbench.colorCustomizations#`")},"editor.bracketPairColorization.independentColorPoolPerBracketType":{type:"boolean",default:e.independentColorPoolPerBracketType,description:d(452,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Y(t.enabled,this.defaultValue.enabled),independentColorPoolPerBracketType:Y(t.independentColorPoolPerBracketType,this.defaultValue.independentColorPoolPerBracketType)}}},yO=class extends qe{constructor(){const e={bracketPairs:!1,bracketPairsHorizontal:"active",highlightActiveBracketPair:!0,indentation:!0,highlightActiveIndentation:!0};super(17,"guides",e,{"editor.guides.bracketPairs":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(453,null),d(454,null),d(455,null)],default:e.bracketPairs,description:d(456,null)},"editor.guides.bracketPairsHorizontal":{type:["boolean","string"],enum:[!0,"active",!1],enumDescriptions:[d(457,null),d(458,null),d(459,null)],default:e.bracketPairsHorizontal,description:d(460,null)},"editor.guides.highlightActiveBracketPair":{type:"boolean",default:e.highlightActiveBracketPair,description:d(461,null)},"editor.guides.indentation":{type:"boolean",default:e.indentation,description:d(462,null)},"editor.guides.highlightActiveIndentation":{type:["boolean","string"],enum:[!0,"always",!1],enumDescriptions:[d(463,null),d(464,null),d(465,null)],default:e.highlightActiveIndentation,description:d(466,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{bracketPairs:Ba(t.bracketPairs,this.defaultValue.bracketPairs,[!0,!1,"active"]),bracketPairsHorizontal:Ba(t.bracketPairsHorizontal,this.defaultValue.bracketPairsHorizontal,[!0,!1,"active"]),highlightActiveBracketPair:Y(t.highlightActiveBracketPair,this.defaultValue.highlightActiveBracketPair),indentation:Y(t.indentation,this.defaultValue.indentation),highlightActiveIndentation:Ba(t.highlightActiveIndentation,this.defaultValue.highlightActiveIndentation,[!0,!1,"always"])}}};function Ba(e,t,i){const r=i.indexOf(e);return r===-1?t:i[r]}var xO=class extends qe{constructor(){const e={insertMode:"insert",filterGraceful:!0,snippetsPreventQuickSuggestions:!1,localityBonus:!1,shareSuggestSelections:!1,selectionMode:"always",showIcons:!0,showStatusBar:!1,preview:!1,previewMode:"subwordSmart",showInlineDetails:!0,showMethods:!0,showFunctions:!0,showConstructors:!0,showDeprecated:!0,matchOnWordStartOnly:!0,showFields:!0,showVariables:!0,showClasses:!0,showStructs:!0,showInterfaces:!0,showModules:!0,showProperties:!0,showEvents:!0,showOperators:!0,showUnits:!0,showValues:!0,showConstants:!0,showEnums:!0,showEnumMembers:!0,showKeywords:!0,showWords:!0,showColors:!0,showFiles:!0,showReferences:!0,showFolders:!0,showTypeParameters:!0,showSnippets:!0,showUsers:!0,showIssues:!0};super(124,"suggest",e,{"editor.suggest.insertMode":{type:"string",enum:["insert","replace"],enumDescriptions:[d(467,null),d(468,null)],default:e.insertMode,description:d(469,null)},"editor.suggest.filterGraceful":{type:"boolean",default:e.filterGraceful,description:d(470,null)},"editor.suggest.localityBonus":{type:"boolean",default:e.localityBonus,description:d(471,null)},"editor.suggest.shareSuggestSelections":{type:"boolean",default:e.shareSuggestSelections,markdownDescription:d(472,null)},"editor.suggest.selectionMode":{type:"string",enum:["always","never","whenTriggerCharacter","whenQuickSuggestion"],enumDescriptions:[d(473,null),d(474,null),d(475,null),d(476,null)],default:e.selectionMode,markdownDescription:d(477,null,"`#editor.quickSuggestions#`","`#editor.suggestOnTriggerCharacters#`")},"editor.suggest.snippetsPreventQuickSuggestions":{type:"boolean",default:e.snippetsPreventQuickSuggestions,description:d(478,null)},"editor.suggest.showIcons":{type:"boolean",default:e.showIcons,description:d(479,null)},"editor.suggest.showStatusBar":{type:"boolean",default:e.showStatusBar,description:d(480,null)},"editor.suggest.preview":{type:"boolean",default:e.preview,description:d(481,null)},"editor.suggest.showInlineDetails":{type:"boolean",default:e.showInlineDetails,description:d(482,null)},"editor.suggest.maxVisibleSuggestions":{type:"number",deprecationMessage:d(483,null)},"editor.suggest.filteredTypes":{type:"object",deprecationMessage:d(484,null)},"editor.suggest.showMethods":{type:"boolean",default:!0,markdownDescription:d(485,null)},"editor.suggest.showFunctions":{type:"boolean",default:!0,markdownDescription:d(486,null)},"editor.suggest.showConstructors":{type:"boolean",default:!0,markdownDescription:d(487,null)},"editor.suggest.showDeprecated":{type:"boolean",default:!0,markdownDescription:d(488,null)},"editor.suggest.matchOnWordStartOnly":{type:"boolean",default:!0,markdownDescription:d(489,null)},"editor.suggest.showFields":{type:"boolean",default:!0,markdownDescription:d(490,null)},"editor.suggest.showVariables":{type:"boolean",default:!0,markdownDescription:d(491,null)},"editor.suggest.showClasses":{type:"boolean",default:!0,markdownDescription:d(492,null)},"editor.suggest.showStructs":{type:"boolean",default:!0,markdownDescription:d(493,null)},"editor.suggest.showInterfaces":{type:"boolean",default:!0,markdownDescription:d(494,null)},"editor.suggest.showModules":{type:"boolean",default:!0,markdownDescription:d(495,null)},"editor.suggest.showProperties":{type:"boolean",default:!0,markdownDescription:d(496,null)},"editor.suggest.showEvents":{type:"boolean",default:!0,markdownDescription:d(497,null)},"editor.suggest.showOperators":{type:"boolean",default:!0,markdownDescription:d(498,null)},"editor.suggest.showUnits":{type:"boolean",default:!0,markdownDescription:d(499,null)},"editor.suggest.showValues":{type:"boolean",default:!0,markdownDescription:d(500,null)},"editor.suggest.showConstants":{type:"boolean",default:!0,markdownDescription:d(501,null)},"editor.suggest.showEnums":{type:"boolean",default:!0,markdownDescription:d(502,null)},"editor.suggest.showEnumMembers":{type:"boolean",default:!0,markdownDescription:d(503,null)},"editor.suggest.showKeywords":{type:"boolean",default:!0,markdownDescription:d(504,null)},"editor.suggest.showWords":{type:"boolean",default:!0,markdownDescription:d(505,null)},"editor.suggest.showColors":{type:"boolean",default:!0,markdownDescription:d(506,null)},"editor.suggest.showFiles":{type:"boolean",default:!0,markdownDescription:d(507,null)},"editor.suggest.showReferences":{type:"boolean",default:!0,markdownDescription:d(508,null)},"editor.suggest.showCustomcolors":{type:"boolean",default:!0,markdownDescription:d(509,null)},"editor.suggest.showFolders":{type:"boolean",default:!0,markdownDescription:d(510,null)},"editor.suggest.showTypeParameters":{type:"boolean",default:!0,markdownDescription:d(511,null)},"editor.suggest.showSnippets":{type:"boolean",default:!0,markdownDescription:d(512,null)},"editor.suggest.showUsers":{type:"boolean",default:!0,markdownDescription:d(513,null)},"editor.suggest.showIssues":{type:"boolean",default:!0,markdownDescription:d(514,null)}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{insertMode:Qe(t.insertMode,this.defaultValue.insertMode,["insert","replace"]),filterGraceful:Y(t.filterGraceful,this.defaultValue.filterGraceful),snippetsPreventQuickSuggestions:Y(t.snippetsPreventQuickSuggestions,this.defaultValue.filterGraceful),localityBonus:Y(t.localityBonus,this.defaultValue.localityBonus),shareSuggestSelections:Y(t.shareSuggestSelections,this.defaultValue.shareSuggestSelections),selectionMode:Qe(t.selectionMode,this.defaultValue.selectionMode,["always","never","whenQuickSuggestion","whenTriggerCharacter"]),showIcons:Y(t.showIcons,this.defaultValue.showIcons),showStatusBar:Y(t.showStatusBar,this.defaultValue.showStatusBar),preview:Y(t.preview,this.defaultValue.preview),previewMode:Qe(t.previewMode,this.defaultValue.previewMode,["prefix","subword","subwordSmart"]),showInlineDetails:Y(t.showInlineDetails,this.defaultValue.showInlineDetails),showMethods:Y(t.showMethods,this.defaultValue.showMethods),showFunctions:Y(t.showFunctions,this.defaultValue.showFunctions),showConstructors:Y(t.showConstructors,this.defaultValue.showConstructors),showDeprecated:Y(t.showDeprecated,this.defaultValue.showDeprecated),matchOnWordStartOnly:Y(t.matchOnWordStartOnly,this.defaultValue.matchOnWordStartOnly),showFields:Y(t.showFields,this.defaultValue.showFields),showVariables:Y(t.showVariables,this.defaultValue.showVariables),showClasses:Y(t.showClasses,this.defaultValue.showClasses),showStructs:Y(t.showStructs,this.defaultValue.showStructs),showInterfaces:Y(t.showInterfaces,this.defaultValue.showInterfaces),showModules:Y(t.showModules,this.defaultValue.showModules),showProperties:Y(t.showProperties,this.defaultValue.showProperties),showEvents:Y(t.showEvents,this.defaultValue.showEvents),showOperators:Y(t.showOperators,this.defaultValue.showOperators),showUnits:Y(t.showUnits,this.defaultValue.showUnits),showValues:Y(t.showValues,this.defaultValue.showValues),showConstants:Y(t.showConstants,this.defaultValue.showConstants),showEnums:Y(t.showEnums,this.defaultValue.showEnums),showEnumMembers:Y(t.showEnumMembers,this.defaultValue.showEnumMembers),showKeywords:Y(t.showKeywords,this.defaultValue.showKeywords),showWords:Y(t.showWords,this.defaultValue.showWords),showColors:Y(t.showColors,this.defaultValue.showColors),showFiles:Y(t.showFiles,this.defaultValue.showFiles),showReferences:Y(t.showReferences,this.defaultValue.showReferences),showFolders:Y(t.showFolders,this.defaultValue.showFolders),showTypeParameters:Y(t.showTypeParameters,this.defaultValue.showTypeParameters),showSnippets:Y(t.showSnippets,this.defaultValue.showSnippets),showUsers:Y(t.showUsers,this.defaultValue.showUsers),showIssues:Y(t.showIssues,this.defaultValue.showIssues)}}},EO=class extends qe{constructor(){super(119,"smartSelect",{selectLeadingAndTrailingWhitespace:!0,selectSubwords:!0},{"editor.smartSelect.selectLeadingAndTrailingWhitespace":{description:d(515,null),default:!0,type:"boolean"},"editor.smartSelect.selectSubwords":{description:d(516,null),default:!0,type:"boolean"}})}validate(e){return!e||typeof e!="object"?this.defaultValue:{selectLeadingAndTrailingWhitespace:Y(e.selectLeadingAndTrailingWhitespace,this.defaultValue.selectLeadingAndTrailingWhitespace),selectSubwords:Y(e.selectSubwords,this.defaultValue.selectSubwords)}}},SO=class extends qe{constructor(){const e=[];super(136,"wordSegmenterLocales",e,{anyOf:[{description:d(517,null),type:"string"},{description:d(518,null),type:"array",items:{type:"string"}}]})}validate(e){if(typeof e=="string"&&(e=[e]),Array.isArray(e)){const t=[];for(const i of e)if(typeof i=="string")try{Intl.Segmenter.supportedLocalesOf(i).length>0&&t.push(i)}catch{}return t}return this.defaultValue}},QS;(function(e){e[e.None=0]="None",e[e.Same=1]="Same",e[e.Indent=2]="Indent",e[e.DeepIndent=3]="DeepIndent"})(QS||(QS={}));var kO=class extends qe{constructor(){super(144,"wrappingIndent",1,{"editor.wrappingIndent":{type:"string",enum:["none","same","indent","deepIndent"],enumDescriptions:[d(519,null),d(520,null),d(521,null),d(522,null)],description:d(523,null),default:"same"}})}validate(e){switch(e){case"none":return 0;case"same":return 1;case"indent":return 2;case"deepIndent":return 3}return 1}compute(e,t,i){return t.get(2)===2?0:i}},$O=class extends oo{constructor(){super(153)}compute(e,t,i){const r=t.get(152);return{isDominatedByLongLines:e.isDominatedByLongLines,isWordWrapMinified:r.isWordWrapMinified,isViewportWrapping:r.isViewportWrapping,wrappingColumn:r.wrappingColumn}}},CO=class extends qe{constructor(){const e={enabled:!0,showDropSelector:"afterDrop"};super(37,"dropIntoEditor",e,{"editor.dropIntoEditor.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(524,null)},"editor.dropIntoEditor.showDropSelector":{type:"string",markdownDescription:d(525,null),enum:["afterDrop","never"],enumDescriptions:[d(526,null),d(527,null)],default:"afterDrop"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Y(t.enabled,this.defaultValue.enabled),showDropSelector:Qe(t.showDropSelector,this.defaultValue.showDropSelector,["afterDrop","never"])}}},IO=class extends qe{constructor(){const e={enabled:!0,showPasteSelector:"afterPaste"};super(90,"pasteAs",e,{"editor.pasteAs.enabled":{type:"boolean",default:e.enabled,markdownDescription:d(528,null)},"editor.pasteAs.showPasteSelector":{type:"string",markdownDescription:d(529,null),enum:["afterPaste","never"],enumDescriptions:[d(530,null),d(531,null)],default:"afterPaste"}})}validate(e){if(!e||typeof e!="object")return this.defaultValue;const t=e;return{enabled:Y(t.enabled,this.defaultValue.enabled),showPasteSelector:Qe(t.showPasteSelector,this.defaultValue.showPasteSelector,["afterPaste","never"])}}},DO="Consolas, 'Courier New', monospace",PO="Menlo, Monaco, 'Courier New', monospace",AO="'Droid Sans Mono', 'monospace', monospace",ls={fontFamily:Oi?PO:ei?DO:AO,fontWeight:"normal",fontSize:Oi?12:14,lineHeight:0,letterSpacing:0},TO=[];function T(e){return TO[e.id]=e,e}var XS;(function(e){e[e.acceptSuggestionOnCommitCharacter=0]="acceptSuggestionOnCommitCharacter",e[e.acceptSuggestionOnEnter=1]="acceptSuggestionOnEnter",e[e.accessibilitySupport=2]="accessibilitySupport",e[e.accessibilityPageSize=3]="accessibilityPageSize",e[e.allowVariableLineHeights=4]="allowVariableLineHeights",e[e.ariaLabel=5]="ariaLabel",e[e.ariaRequired=6]="ariaRequired",e[e.autoClosingBrackets=7]="autoClosingBrackets",e[e.autoClosingComments=8]="autoClosingComments",e[e.screenReaderAnnounceInlineSuggestion=9]="screenReaderAnnounceInlineSuggestion",e[e.autoClosingDelete=10]="autoClosingDelete",e[e.autoClosingOvertype=11]="autoClosingOvertype",e[e.autoClosingQuotes=12]="autoClosingQuotes",e[e.autoIndent=13]="autoIndent",e[e.automaticLayout=14]="automaticLayout",e[e.autoSurround=15]="autoSurround",e[e.bracketPairColorization=16]="bracketPairColorization",e[e.guides=17]="guides",e[e.codeLens=18]="codeLens",e[e.codeLensFontFamily=19]="codeLensFontFamily",e[e.codeLensFontSize=20]="codeLensFontSize",e[e.colorDecorators=21]="colorDecorators",e[e.colorDecoratorsLimit=22]="colorDecoratorsLimit",e[e.columnSelection=23]="columnSelection",e[e.comments=24]="comments",e[e.contextmenu=25]="contextmenu",e[e.copyWithSyntaxHighlighting=26]="copyWithSyntaxHighlighting",e[e.cursorBlinking=27]="cursorBlinking",e[e.cursorSmoothCaretAnimation=28]="cursorSmoothCaretAnimation",e[e.cursorStyle=29]="cursorStyle",e[e.cursorSurroundingLines=30]="cursorSurroundingLines",e[e.cursorSurroundingLinesStyle=31]="cursorSurroundingLinesStyle",e[e.cursorWidth=32]="cursorWidth",e[e.disableLayerHinting=33]="disableLayerHinting",e[e.disableMonospaceOptimizations=34]="disableMonospaceOptimizations",e[e.domReadOnly=35]="domReadOnly",e[e.dragAndDrop=36]="dragAndDrop",e[e.dropIntoEditor=37]="dropIntoEditor",e[e.experimentalEditContextEnabled=38]="experimentalEditContextEnabled",e[e.emptySelectionClipboard=39]="emptySelectionClipboard",e[e.experimentalGpuAcceleration=40]="experimentalGpuAcceleration",e[e.experimentalWhitespaceRendering=41]="experimentalWhitespaceRendering",e[e.extraEditorClassName=42]="extraEditorClassName",e[e.fastScrollSensitivity=43]="fastScrollSensitivity",e[e.find=44]="find",e[e.fixedOverflowWidgets=45]="fixedOverflowWidgets",e[e.folding=46]="folding",e[e.foldingStrategy=47]="foldingStrategy",e[e.foldingHighlight=48]="foldingHighlight",e[e.foldingImportsByDefault=49]="foldingImportsByDefault",e[e.foldingMaximumRegions=50]="foldingMaximumRegions",e[e.unfoldOnClickAfterEndOfLine=51]="unfoldOnClickAfterEndOfLine",e[e.fontFamily=52]="fontFamily",e[e.fontInfo=53]="fontInfo",e[e.fontLigatures=54]="fontLigatures",e[e.fontSize=55]="fontSize",e[e.fontWeight=56]="fontWeight",e[e.fontVariations=57]="fontVariations",e[e.formatOnPaste=58]="formatOnPaste",e[e.formatOnType=59]="formatOnType",e[e.glyphMargin=60]="glyphMargin",e[e.gotoLocation=61]="gotoLocation",e[e.hideCursorInOverviewRuler=62]="hideCursorInOverviewRuler",e[e.hover=63]="hover",e[e.inDiffEditor=64]="inDiffEditor",e[e.inlineSuggest=65]="inlineSuggest",e[e.letterSpacing=66]="letterSpacing",e[e.lightbulb=67]="lightbulb",e[e.lineDecorationsWidth=68]="lineDecorationsWidth",e[e.lineHeight=69]="lineHeight",e[e.lineNumbers=70]="lineNumbers",e[e.lineNumbersMinChars=71]="lineNumbersMinChars",e[e.linkedEditing=72]="linkedEditing",e[e.links=73]="links",e[e.matchBrackets=74]="matchBrackets",e[e.minimap=75]="minimap",e[e.mouseStyle=76]="mouseStyle",e[e.mouseWheelScrollSensitivity=77]="mouseWheelScrollSensitivity",e[e.mouseWheelZoom=78]="mouseWheelZoom",e[e.multiCursorMergeOverlapping=79]="multiCursorMergeOverlapping",e[e.multiCursorModifier=80]="multiCursorModifier",e[e.multiCursorPaste=81]="multiCursorPaste",e[e.multiCursorLimit=82]="multiCursorLimit",e[e.occurrencesHighlight=83]="occurrencesHighlight",e[e.occurrencesHighlightDelay=84]="occurrencesHighlightDelay",e[e.overtypeCursorStyle=85]="overtypeCursorStyle",e[e.overtypeOnPaste=86]="overtypeOnPaste",e[e.overviewRulerBorder=87]="overviewRulerBorder",e[e.overviewRulerLanes=88]="overviewRulerLanes",e[e.padding=89]="padding",e[e.pasteAs=90]="pasteAs",e[e.parameterHints=91]="parameterHints",e[e.peekWidgetDefaultFocus=92]="peekWidgetDefaultFocus",e[e.placeholder=93]="placeholder",e[e.definitionLinkOpensInPeek=94]="definitionLinkOpensInPeek",e[e.quickSuggestions=95]="quickSuggestions",e[e.quickSuggestionsDelay=96]="quickSuggestionsDelay",e[e.readOnly=97]="readOnly",e[e.readOnlyMessage=98]="readOnlyMessage",e[e.renameOnType=99]="renameOnType",e[e.renderControlCharacters=100]="renderControlCharacters",e[e.renderFinalNewline=101]="renderFinalNewline",e[e.renderLineHighlight=102]="renderLineHighlight",e[e.renderLineHighlightOnlyWhenFocus=103]="renderLineHighlightOnlyWhenFocus",e[e.renderValidationDecorations=104]="renderValidationDecorations",e[e.renderWhitespace=105]="renderWhitespace",e[e.revealHorizontalRightPadding=106]="revealHorizontalRightPadding",e[e.roundedSelection=107]="roundedSelection",e[e.rulers=108]="rulers",e[e.scrollbar=109]="scrollbar",e[e.scrollBeyondLastColumn=110]="scrollBeyondLastColumn",e[e.scrollBeyondLastLine=111]="scrollBeyondLastLine",e[e.scrollPredominantAxis=112]="scrollPredominantAxis",e[e.selectionClipboard=113]="selectionClipboard",e[e.selectionHighlight=114]="selectionHighlight",e[e.selectOnLineNumbers=115]="selectOnLineNumbers",e[e.showFoldingControls=116]="showFoldingControls",e[e.showUnused=117]="showUnused",e[e.snippetSuggestions=118]="snippetSuggestions",e[e.smartSelect=119]="smartSelect",e[e.smoothScrolling=120]="smoothScrolling",e[e.stickyScroll=121]="stickyScroll",e[e.stickyTabStops=122]="stickyTabStops",e[e.stopRenderingLineAfter=123]="stopRenderingLineAfter",e[e.suggest=124]="suggest",e[e.suggestFontSize=125]="suggestFontSize",e[e.suggestLineHeight=126]="suggestLineHeight",e[e.suggestOnTriggerCharacters=127]="suggestOnTriggerCharacters",e[e.suggestSelection=128]="suggestSelection",e[e.tabCompletion=129]="tabCompletion",e[e.tabIndex=130]="tabIndex",e[e.unicodeHighlighting=131]="unicodeHighlighting",e[e.unusualLineTerminators=132]="unusualLineTerminators",e[e.useShadowDOM=133]="useShadowDOM",e[e.useTabStops=134]="useTabStops",e[e.wordBreak=135]="wordBreak",e[e.wordSegmenterLocales=136]="wordSegmenterLocales",e[e.wordSeparators=137]="wordSeparators",e[e.wordWrap=138]="wordWrap",e[e.wordWrapBreakAfterCharacters=139]="wordWrapBreakAfterCharacters",e[e.wordWrapBreakBeforeCharacters=140]="wordWrapBreakBeforeCharacters",e[e.wordWrapColumn=141]="wordWrapColumn",e[e.wordWrapOverride1=142]="wordWrapOverride1",e[e.wordWrapOverride2=143]="wordWrapOverride2",e[e.wrappingIndent=144]="wrappingIndent",e[e.wrappingStrategy=145]="wrappingStrategy",e[e.showDeprecated=146]="showDeprecated",e[e.inlayHints=147]="inlayHints",e[e.effectiveCursorStyle=148]="effectiveCursorStyle",e[e.editorClassName=149]="editorClassName",e[e.pixelRatio=150]="pixelRatio",e[e.tabFocusMode=151]="tabFocusMode",e[e.layoutInfo=152]="layoutInfo",e[e.wrappingInfo=153]="wrappingInfo",e[e.defaultColorDecorators=154]="defaultColorDecorators",e[e.colorDecoratorsActivatedOn=155]="colorDecoratorsActivatedOn",e[e.inlineCompletionsAccessibilityVerbose=156]="inlineCompletionsAccessibilityVerbose",e[e.effectiveExperimentalEditContextEnabled=157]="effectiveExperimentalEditContextEnabled"})(XS||(XS={}));var Aq={acceptSuggestionOnCommitCharacter:T(new ye(0,"acceptSuggestionOnCommitCharacter",!0,{markdownDescription:d(532,null)})),acceptSuggestionOnEnter:T(new Je(1,"acceptSuggestionOnEnter","on",["on","smart","off"],{markdownEnumDescriptions:["",d(533,null),""],markdownDescription:d(534,null)})),accessibilitySupport:T(new UF),accessibilityPageSize:T(new Be(3,"accessibilityPageSize",500,1,1073741824,{description:d(535,null),tags:["accessibility"]})),allowVariableLineHeights:T(new ye(4,"allowVariableLineHeights",!0)),ariaLabel:T(new vi(5,"ariaLabel",d(536,null))),ariaRequired:T(new ye(6,"ariaRequired",!1,void 0)),screenReaderAnnounceInlineSuggestion:T(new ye(9,"screenReaderAnnounceInlineSuggestion",!0,{description:d(537,null),tags:["accessibility"]})),autoClosingBrackets:T(new Je(7,"autoClosingBrackets","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(538,null),d(539,null),""],description:d(540,null)})),autoClosingComments:T(new Je(8,"autoClosingComments","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(541,null),d(542,null),""],description:d(543,null)})),autoClosingDelete:T(new Je(10,"autoClosingDelete","auto",["always","auto","never"],{enumDescriptions:["",d(544,null),""],description:d(545,null)})),autoClosingOvertype:T(new Je(11,"autoClosingOvertype","auto",["always","auto","never"],{enumDescriptions:["",d(546,null),""],description:d(547,null)})),autoClosingQuotes:T(new Je(12,"autoClosingQuotes","languageDefined",["always","languageDefined","beforeWhitespace","never"],{enumDescriptions:["",d(548,null),d(549,null),""],description:d(550,null)})),autoIndent:T(new tu(13,"autoIndent",4,"full",["none","keep","brackets","advanced","full"],OF,{enumDescriptions:[d(551,null),d(552,null),d(553,null),d(554,null),d(555,null)],description:d(556,null)})),automaticLayout:T(new ye(14,"automaticLayout",!1)),autoSurround:T(new Je(15,"autoSurround","languageDefined",["languageDefined","quotes","brackets","never"],{enumDescriptions:[d(557,null),d(558,null),d(559,null),""],description:d(560,null)})),bracketPairColorization:T(new bO),bracketPairGuides:T(new yO),stickyTabStops:T(new ye(122,"stickyTabStops",!1,{description:d(561,null)})),codeLens:T(new ye(18,"codeLens",!0,{description:d(562,null)})),codeLensFontFamily:T(new vi(19,"codeLensFontFamily","",{description:d(563,null)})),codeLensFontSize:T(new Be(20,"codeLensFontSize",0,0,100,{type:"number",default:0,minimum:0,maximum:100,markdownDescription:d(564,null)})),colorDecorators:T(new ye(21,"colorDecorators",!0,{description:d(565,null)})),colorDecoratorActivatedOn:T(new Je(155,"colorDecoratorsActivatedOn","clickAndHover",["clickAndHover","hover","click"],{enumDescriptions:[d(566,null),d(567,null),d(568,null)],description:d(569,null)})),colorDecoratorsLimit:T(new Be(22,"colorDecoratorsLimit",500,1,1e6,{markdownDescription:d(570,null)})),columnSelection:T(new ye(23,"columnSelection",!1,{description:d(571,null)})),comments:T(new jF),contextmenu:T(new ye(25,"contextmenu",!0)),copyWithSyntaxHighlighting:T(new ye(26,"copyWithSyntaxHighlighting",!0,{description:d(572,null)})),cursorBlinking:T(new tu(27,"cursorBlinking",1,"blink",["blink","smooth","phase","expand","solid"],BF,{description:d(573,null)})),cursorSmoothCaretAnimation:T(new Je(28,"cursorSmoothCaretAnimation","off",["off","explicit","on"],{enumDescriptions:[d(574,null),d(575,null),d(576,null)],description:d(577,null)})),cursorStyle:T(new tu(29,"cursorStyle",fr.Line,"line",["line","block","underline","line-thin","block-outline","underline-thin"],GS,{description:d(578,null)})),overtypeCursorStyle:T(new tu(85,"overtypeCursorStyle",fr.Block,"block",["line","block","underline","line-thin","block-outline","underline-thin"],GS,{description:d(579,null)})),cursorSurroundingLines:T(new Be(30,"cursorSurroundingLines",0,0,1073741824,{description:d(580,null)})),cursorSurroundingLinesStyle:T(new Je(31,"cursorSurroundingLinesStyle","default",["default","all"],{enumDescriptions:[d(581,null),d(582,null)],markdownDescription:d(583,null)})),cursorWidth:T(new Be(32,"cursorWidth",0,0,1073741824,{markdownDescription:d(584,null)})),disableLayerHinting:T(new ye(33,"disableLayerHinting",!1)),disableMonospaceOptimizations:T(new ye(34,"disableMonospaceOptimizations",!1)),domReadOnly:T(new ye(35,"domReadOnly",!1)),dragAndDrop:T(new ye(36,"dragAndDrop",!0,{description:d(585,null)})),emptySelectionClipboard:T(new zF),dropIntoEditor:T(new CO),experimentalEditContextEnabled:T(new ye(38,"experimentalEditContextEnabled",!0,{description:d(586,null),included:$g||Wy||Oy})),stickyScroll:T(new iO),experimentalGpuAcceleration:T(new Je(40,"experimentalGpuAcceleration","off",["off","on"],{tags:["experimental"],enumDescriptions:[d(587,null),d(588,null)],description:d(589,null)})),experimentalWhitespaceRendering:T(new Je(41,"experimentalWhitespaceRendering","svg",["svg","font","off"],{enumDescriptions:[d(590,null),d(591,null),d(592,null)],description:d(593,null)})),extraEditorClassName:T(new vi(42,"extraEditorClassName","")),fastScrollSensitivity:T(new Fr(43,"fastScrollSensitivity",5,e=>e<=0?5:e,{markdownDescription:d(594,null)})),find:T(new _F),fixedOverflowWidgets:T(new ye(45,"fixedOverflowWidgets",!1)),folding:T(new ye(46,"folding",!0,{description:d(595,null)})),foldingStrategy:T(new Je(47,"foldingStrategy","auto",["auto","indentation"],{enumDescriptions:[d(596,null),d(597,null)],description:d(598,null)})),foldingHighlight:T(new ye(48,"foldingHighlight",!0,{description:d(599,null)})),foldingImportsByDefault:T(new ye(49,"foldingImportsByDefault",!1,{description:d(600,null)})),foldingMaximumRegions:T(new Be(50,"foldingMaximumRegions",5e3,10,65e3,{description:d(601,null)})),unfoldOnClickAfterEndOfLine:T(new ye(51,"unfoldOnClickAfterEndOfLine",!1,{description:d(602,null)})),fontFamily:T(new vi(52,"fontFamily",ls.fontFamily,{description:d(603,null)})),fontInfo:T(new qF),fontLigatures2:T(new WF),fontSize:T(new ZF),fontWeight:T(new YF),fontVariations:T(new VF),formatOnPaste:T(new ye(58,"formatOnPaste",!1,{description:d(604,null)})),formatOnType:T(new ye(59,"formatOnType",!1,{description:d(605,null)})),glyphMargin:T(new ye(60,"glyphMargin",!0,{description:d(606,null)})),gotoLocation:T(new QF),hideCursorInOverviewRuler:T(new ye(62,"hideCursorInOverviewRuler",!1,{description:d(607,null)})),hover:T(new XF),inDiffEditor:T(new ye(64,"inDiffEditor",!1)),letterSpacing:T(new Fr(66,"letterSpacing",ls.letterSpacing,e=>Fr.clamp(e,-5,20),{description:d(608,null)})),lightbulb:T(new tO),lineDecorationsWidth:T(new sO),lineHeight:T(new nO),lineNumbers:T(new fO),lineNumbersMinChars:T(new Be(71,"lineNumbersMinChars",5,1,300)),linkedEditing:T(new ye(72,"linkedEditing",!1,{description:d(609,null)})),links:T(new ye(73,"links",!0,{description:d(610,null)})),matchBrackets:T(new Je(74,"matchBrackets","always",["always","near","never"],{description:d(611,null)})),minimap:T(new oO),mouseStyle:T(new Je(76,"mouseStyle","text",["text","default","copy"])),mouseWheelScrollSensitivity:T(new Fr(77,"mouseWheelScrollSensitivity",1,e=>e===0?1:e,{markdownDescription:d(612,null)})),mouseWheelZoom:T(new ye(78,"mouseWheelZoom",!1,{markdownDescription:d(Oi?613:614,null)})),multiCursorMergeOverlapping:T(new ye(79,"multiCursorMergeOverlapping",!0,{description:d(615,null)})),multiCursorModifier:T(new tu(80,"multiCursorModifier","altKey","alt",["ctrlCmd","alt"],aO,{markdownEnumDescriptions:[d(616,null),d(617,null)],markdownDescription:d(618,null)})),multiCursorPaste:T(new Je(81,"multiCursorPaste","spread",["spread","full"],{markdownEnumDescriptions:[d(619,null),d(620,null)],markdownDescription:d(621,null)})),multiCursorLimit:T(new Be(82,"multiCursorLimit",1e4,1,1e5,{markdownDescription:d(622,null)})),occurrencesHighlight:T(new Je(83,"occurrencesHighlight","singleFile",["off","singleFile","multiFile"],{markdownEnumDescriptions:[d(623,null),d(624,null),d(625,null)],markdownDescription:d(626,null)})),occurrencesHighlightDelay:T(new Be(84,"occurrencesHighlightDelay",0,0,2e3,{description:d(627,null),tags:["preview"]})),overtypeOnPaste:T(new ye(86,"overtypeOnPaste",!0,{description:d(628,null)})),overviewRulerBorder:T(new ye(87,"overviewRulerBorder",!0,{description:d(629,null)})),overviewRulerLanes:T(new Be(88,"overviewRulerLanes",3,0,3)),padding:T(new cO),pasteAs:T(new IO),parameterHints:T(new lO),peekWidgetDefaultFocus:T(new Je(92,"peekWidgetDefaultFocus","tree",["tree","editor"],{enumDescriptions:[d(630,null),d(631,null)],description:d(632,null)})),placeholder:T(new hO),definitionLinkOpensInPeek:T(new ye(94,"definitionLinkOpensInPeek",!1,{description:d(633,null)})),quickSuggestions:T(new dO),quickSuggestionsDelay:T(new Be(96,"quickSuggestionsDelay",10,0,1073741824,{description:d(634,null)})),readOnly:T(new ye(97,"readOnly",!1)),readOnlyMessage:T(new gO),renameOnType:T(new ye(99,"renameOnType",!1,{description:d(635,null),markdownDeprecationMessage:d(636,null)})),renderControlCharacters:T(new ye(100,"renderControlCharacters",!0,{description:d(637,null),restricted:!0})),renderFinalNewline:T(new Je(101,"renderFinalNewline",Es?"dimmed":"on",["off","on","dimmed"],{description:d(638,null)})),renderLineHighlight:T(new Je(102,"renderLineHighlight","line",["none","gutter","line","all"],{enumDescriptions:["","","",d(639,null)],description:d(640,null)})),renderLineHighlightOnlyWhenFocus:T(new ye(103,"renderLineHighlightOnlyWhenFocus",!1,{description:d(641,null)})),renderValidationDecorations:T(new Je(104,"renderValidationDecorations","editable",["editable","on","off"])),renderWhitespace:T(new Je(105,"renderWhitespace","selection",["none","boundary","selection","trailing","all"],{enumDescriptions:["",d(642,null),d(643,null),d(644,null),""],description:d(645,null)})),revealHorizontalRightPadding:T(new Be(106,"revealHorizontalRightPadding",15,0,1e3)),roundedSelection:T(new ye(107,"roundedSelection",!0,{description:d(646,null)})),rulers:T(new pO),scrollbar:T(new mO),scrollBeyondLastColumn:T(new Be(110,"scrollBeyondLastColumn",4,0,1073741824,{description:d(647,null)})),scrollBeyondLastLine:T(new ye(111,"scrollBeyondLastLine",!0,{description:d(648,null)})),scrollPredominantAxis:T(new ye(112,"scrollPredominantAxis",!0,{description:d(649,null)})),selectionClipboard:T(new ye(113,"selectionClipboard",!0,{description:d(650,null),included:Es})),selectionHighlight:T(new ye(114,"selectionHighlight",!0,{description:d(651,null)})),selectOnLineNumbers:T(new ye(115,"selectOnLineNumbers",!0)),showFoldingControls:T(new Je(116,"showFoldingControls","mouseover",["always","never","mouseover"],{enumDescriptions:[d(652,null),d(653,null),d(654,null)],description:d(655,null)})),showUnused:T(new ye(117,"showUnused",!0,{description:d(656,null)})),showDeprecated:T(new ye(146,"showDeprecated",!0,{description:d(657,null)})),inlayHints:T(new rO),snippetSuggestions:T(new Je(118,"snippetSuggestions","inline",["top","bottom","inline","none"],{enumDescriptions:[d(658,null),d(659,null),d(660,null),d(661,null)],description:d(662,null)})),smartSelect:T(new EO),smoothScrolling:T(new ye(120,"smoothScrolling",!1,{description:d(663,null)})),stopRenderingLineAfter:T(new Be(123,"stopRenderingLineAfter",1e4,-1,1073741824)),suggest:T(new xO),inlineSuggest:T(new wO),inlineCompletionsAccessibilityVerbose:T(new ye(156,"inlineCompletionsAccessibilityVerbose",!1,{description:d(664,null)})),suggestFontSize:T(new Be(125,"suggestFontSize",0,0,1e3,{markdownDescription:d(665,null,"`0`","`#editor.fontSize#`")})),suggestLineHeight:T(new Be(126,"suggestLineHeight",0,0,1e3,{markdownDescription:d(666,null,"`0`","`#editor.lineHeight#`")})),suggestOnTriggerCharacters:T(new ye(127,"suggestOnTriggerCharacters",!0,{description:d(667,null)})),suggestSelection:T(new Je(128,"suggestSelection","first",["first","recentlyUsed","recentlyUsedByPrefix"],{markdownEnumDescriptions:[d(668,null),d(669,null),d(670,null)],description:d(671,null)})),tabCompletion:T(new Je(129,"tabCompletion","off",["on","off","onlySnippets"],{enumDescriptions:[d(672,null),d(673,null),d(674,null)],description:d(675,null)})),tabIndex:T(new Be(130,"tabIndex",0,-1,1073741824)),unicodeHighlight:T(new vO),unusualLineTerminators:T(new Je(132,"unusualLineTerminators","prompt",["auto","off","prompt"],{enumDescriptions:[d(676,null),d(677,null),d(678,null)],description:d(679,null)})),useShadowDOM:T(new ye(133,"useShadowDOM",!0)),useTabStops:T(new ye(134,"useTabStops",!0,{description:d(680,null)})),wordBreak:T(new Je(135,"wordBreak","normal",["normal","keepAll"],{markdownEnumDescriptions:[d(681,null),d(682,null)],description:d(683,null)})),wordSegmenterLocales:T(new SO),wordSeparators:T(new vi(137,"wordSeparators",eS,{description:d(684,null)})),wordWrap:T(new Je(138,"wordWrap","off",["off","on","wordWrapColumn","bounded"],{markdownEnumDescriptions:[d(685,null),d(686,null),d(687,null),d(688,null)],description:d(689,null)})),wordWrapBreakAfterCharacters:T(new vi(139,"wordWrapBreakAfterCharacters"," 	})]?|/&.,;\xA2\xB0\u2032\u2033\u2030\u2103\u3001\u3002\uFF61\uFF64\uFFE0\uFF0C\uFF0E\uFF1A\uFF1B\uFF1F\uFF01\uFF05\u30FB\uFF65\u309D\u309E\u30FD\u30FE\u30FC\u30A1\u30A3\u30A5\u30A7\u30A9\u30C3\u30E3\u30E5\u30E7\u30EE\u30F5\u30F6\u3041\u3043\u3045\u3047\u3049\u3063\u3083\u3085\u3087\u308E\u3095\u3096\u31F0\u31F1\u31F2\u31F3\u31F4\u31F5\u31F6\u31F7\u31F8\u31F9\u31FA\u31FB\u31FC\u31FD\u31FE\u31FF\u3005\u303B\uFF67\uFF68\uFF69\uFF6A\uFF6B\uFF6C\uFF6D\uFF6E\uFF6F\uFF70\u201D\u3009\u300B\u300D\u300F\u3011\u3015\uFF09\uFF3D\uFF5D\uFF63")),wordWrapBreakBeforeCharacters:T(new vi(140,"wordWrapBreakBeforeCharacters","([{\u2018\u201C\u3008\u300A\u300C\u300E\u3010\u3014\uFF08\uFF3B\uFF5B\uFF62\xA3\xA5\uFF04\uFFE1\uFFE5+\uFF0B")),wordWrapColumn:T(new Be(141,"wordWrapColumn",80,1,1073741824,{markdownDescription:d(690,null)})),wordWrapOverride1:T(new Je(142,"wordWrapOverride1","inherit",["off","on","inherit"])),wordWrapOverride2:T(new Je(143,"wordWrapOverride2","inherit",["off","on","inherit"])),effectiveCursorStyle:T(new GF),editorClassName:T(new HF),defaultColorDecorators:T(new Je(154,"defaultColorDecorators","auto",["auto","always","never"],{enumDescriptions:[d(691,null),d(692,null),d(693,null)],description:d(694,null)})),pixelRatio:T(new uO),tabFocusMode:T(new ye(151,"tabFocusMode",!1,{markdownDescription:d(695,null)})),layoutInfo:T(new KF),wrappingInfo:T(new $O),wrappingIndent:T(new kO),wrappingStrategy:T(new eO),effectiveExperimentalEditContextEnabled:T(new JF)};function KS(e,t,i,r,s,n){if(Array.isArray(e)){let o=0;for(const a of e){const c=KS(a,t,i,r,s,n);if(c===10)return c;c>o&&(o=c)}return o}else{if(typeof e=="string")return r?e==="*"?5:e===i?10:0:0;if(e){const{language:o,pattern:a,scheme:c,hasAccessToAllModels:l,notebookType:u}=e;if(!r&&!l)return 0;u&&s&&(t=s);let h=0;if(c)if(c===t.scheme)h=10;else if(c==="*")h=5;else return 0;if(o)if(o===i)h=10;else if(o==="*")h=Math.max(h,5);else return 0;if(u)if(u===n)h=10;else if(u==="*"&&n!==void 0)h=Math.max(h,5);else return 0;if(a){let f;if(typeof a=="string"?f=a:f={...a,base:ko(a.base)},f===t.fsPath||Ac(f,t.fsPath))h=10;else return 0}return h}else return 0}}function ek(e){return typeof e=="string"?!1:Array.isArray(e)?e.some(ek):!!e.notebookType}var Rw;(function(e){e[e.None=0]="None",e[e.Indent=1]="Indent",e[e.IndentOutdent=2]="IndentOutdent",e[e.Outdent=3]="Outdent"})(Rw||(Rw={}));var Tq=B("editSessionIdentityService"),Lw;(function(e){e[e.Complete=100]="Complete",e[e.Partial=50]="Partial",e[e.None=0]="None"})(Lw||(Lw={}));var Rq=new C("debugType",void 0,{type:"string",description:d(6775,null)}),Lq=new C("debugConfigurationType",void 0,{type:"string",description:d(6776,null)}),Nq=new C("debugState","inactive",{type:"string",description:d(6777,null)}),RO="debugUx",Mq=new C(RO,"default",{type:"string",description:d(6778,null)}),Fq=new C("hasDebugged",!1,{type:"boolean",description:d(6779,null)}),Oq=new C("inDebugMode",!1,{type:"boolean",description:d(6780,null)}),Uq=new C("inDebugRepl",!1,{type:"boolean",description:d(6781,null)}),jq=new C("breakpointWidgetVisible",!1,{type:"boolean",description:d(6782,null)}),Bq=new C("inBreakpointWidget",!1,{type:"boolean",description:d(6783,null)}),Hq=new C("breakpointsFocused",!0,{type:"boolean",description:d(6784,null)}),zq=new C("watchExpressionsFocused",!0,{type:"boolean",description:d(6785,null)}),_q=new C("watchExpressionsExist",!1,{type:"boolean",description:d(6786,null)}),Wq=new C("variablesFocused",!0,{type:"boolean",description:d(6787,null)}),Vq=new C("expressionSelected",!1,{type:"boolean",description:d(6788,null)}),qq=new C("breakpointInputFocused",!1,{type:"boolean",description:d(6789,null)}),Gq=new C("callStackItemType",void 0,{type:"string",description:d(6790,null)}),Jq=new C("callStackSessionIsAttach",!1,{type:"boolean",description:d(6791,null)}),Zq=new C("callStackItemStopped",!1,{type:"boolean",description:d(6792,null)}),Yq=new C("callStackSessionHasOneThread",!1,{type:"boolean",description:d(6793,null)}),Qq=new C("callStackFocused",!0,{type:"boolean",description:d(6794,null)}),Xq=new C("watchItemType",void 0,{type:"string",description:d(6795,null)}),Kq=new C("canViewMemory",void 0,{type:"boolean",description:d(6796,null)}),eG=new C("breakpointItemType",void 0,{type:"string",description:d(6797,null)}),tG=new C("breakpointItemBytes",void 0,{type:"boolean",description:d(6798,null)}),iG=new C("breakpointHasModes",!1,{type:"boolean",description:d(6799,null)}),rG=new C("breakpointSupportsCondition",!1,{type:"boolean",description:d(6800,null)}),sG=new C("loadedScriptsSupported",!1,{type:"boolean",description:d(6801,null)}),nG=new C("loadedScriptsItemType",void 0,{type:"string",description:d(6802,null)}),oG=new C("focusedSessionIsAttach",!1,{type:"boolean",description:d(6803,null)}),aG=new C("focusedSessionIsNoDebug",!1,{type:"boolean",description:d(6804,null)}),cG=new C("stepBackSupported",!1,{type:"boolean",description:d(6805,null)}),lG=new C("restartFrameSupported",!1,{type:"boolean",description:d(6806,null)}),uG=new C("stackFrameSupportsRestart",!1,{type:"boolean",description:d(6807,null)}),hG=new C("jumpToCursorSupported",!1,{type:"boolean",description:d(6808,null)}),dG=new C("stepIntoTargetsSupported",!1,{type:"boolean",description:d(6809,null)}),fG=new C("breakpointsExist",!1,{type:"boolean",description:d(6810,null)}),pG=new C("debuggersAvailable",!1,{type:"boolean",description:d(6811,null)}),gG=new C("debugExtensionAvailable",!0,{type:"boolean",description:d(6812,null)}),mG=new C("debugProtocolVariableMenuContext",void 0,{type:"string",description:d(6813,null)}),vG=new C("debugSetVariableSupported",!1,{type:"boolean",description:d(6814,null)}),wG=new C("debugSetDataBreakpointAddressSupported",!1,{type:"boolean",description:d(6815,null)}),bG=new C("debugSetExpressionSupported",!1,{type:"boolean",description:d(6816,null)}),yG=new C("breakWhenValueChangesSupported",!1,{type:"boolean",description:d(6817,null)}),xG=new C("breakWhenValueIsAccessedSupported",!1,{type:"boolean",description:d(6818,null)}),EG=new C("breakWhenValueIsReadSupported",!1,{type:"boolean",description:d(6819,null)}),SG=new C("terminateDebuggeeSupported",!1,{type:"boolean",description:d(6820,null)}),kG=new C("suspendDebuggeeSupported",!1,{type:"boolean",description:d(6821,null)}),$G=new C("variableEvaluateNamePresent",!1,{type:"boolean",description:d(6822,null)}),CG=new C("variableIsReadonly",!1,{type:"boolean",description:d(6823,null)}),IG=new C("variableValue",!1,{type:"string",description:d(6824,null)}),DG=new C("variableType",!1,{type:"string",description:d(6825,null)}),PG=new C("variableInterfaces",!1,{type:"array",description:d(6826,null)}),AG=new C("variableName",!1,{type:"string",description:d(6827,null)}),TG=new C("variableLanguage",!1,{type:"string",description:d(6828,null)}),RG=new C("variableExtensionId",!1,{type:"string",description:d(6829,null)}),LG=new C("exceptionWidgetVisible",!1,{type:"boolean",description:d(6830,null)}),NG=new C("multiSessionRepl",!1,{type:"boolean",description:d(6831,null)}),MG=new C("multiSessionDebug",!1,{type:"boolean",description:d(6832,null)}),FG=new C("disassembleRequestSupported",!1,{type:"boolean",description:d(6833,null)}),OG=new C("disassemblyViewFocus",!1,{type:"boolean",description:d(6834,null)}),UG=new C("languageSupportsDisassembleRequest",!1,{type:"boolean",description:d(6835,null)}),jG=new C("focusedStackFrameHasInstructionReference",!1,{type:"boolean",description:d(6836,null)}),BG={enum:["neverOpen","openOnSessionStart","openOnFirstSessionStart"],default:"openOnFirstSessionStart",description:d(6838,null)},tk;(function(e){e[e.Inactive=0]="Inactive",e[e.Initializing=1]="Initializing",e[e.Stopped=2]="Stopped",e[e.Running=3]="Running"})(tk||(tk={}));var ik;(function(e){e[e.Valid=0]="Valid",e[e.Unreadable=1]="Unreadable",e[e.Error=2]="Error"})(ik||(ik={}));var rk;(function(e){e[e.Variable=0]="Variable",e[e.Address=1]="Address"})(rk||(rk={}));var mp;(function(e){e[e.Initial=1]="Initial",e[e.Dynamic=2]="Dynamic"})(mp||(mp={}));var sk;(function(e){e.UnverifiedBreakpoints="unverifiedBreakpoints"})(sk||(sk={}));var HG=B("debugService"),nk;(function(e){e[e.CONDITION=0]="CONDITION",e[e.HIT_COUNT=1]="HIT_COUNT",e[e.LOG_MESSAGE=2]="LOG_MESSAGE",e[e.TRIGGER_POINT=3]="TRIGGER_POINT"})(nk||(nk={}));var ok;(function(e){e[e.Command=0]="Command",e[e.Tree=1]="Tree"})(ok||(ok={}));var ak;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(ak||(ak={}));var ck;(function(e){e.deserialize=t=>t,e.serialize=t=>t})(ck||(ck={}));var lk;(function(e){e.deserialize=t=>({id:t.id,name:t.name,iconPath:t.iconPath&&{light:y.revive(t.iconPath.light),dark:y.revive(t.iconPath.dark)},iconClass:t.iconClass,visualization:t.visualization}),e.serialize=t=>t})(lk||(lk={}));var LO=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(J.MainThreadAiRelatedInformation)}async $provideAiRelatedInformation(e,t,i){if(this.a.size===0)throw new Error("No related information providers registered");const r=this.a.get(e);if(!r)throw new Error("related information provider not found");return await r.provideRelatedInformation(t,i)??[]}getRelatedInformation(e,t,i){return this.c.$getAiRelatedInformation(t,i)}registerRelatedInformationProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiRelatedInformationProvider(r,t),new Pe(()=>{this.c.$unregisterAiRelatedInformationProvider(r),this.a.delete(r)})}},uk;(function(e){e[e.Full=1]="Full",e[e.Delta=2]="Delta"})(uk||(uk={}));function hk(e){for(let t=0,i=e.length;t<i;t+=4){const r=e[t+0],s=e[t+1],n=e[t+2],o=e[t+3];e[t+0]=o,e[t+1]=n,e[t+2]=s,e[t+3]=r}}function NO(e){const t=new Uint8Array(e.buffer,e.byteOffset,e.length*4);return _y()||hk(t),ae.wrap(t)}function MO(e){const t=e.buffer;if(_y()||hk(t),t.byteOffset%4===0)return new Uint32Array(t.buffer,t.byteOffset,t.length/4);{const i=new Uint8Array(t.byteLength);return i.set(t),new Uint32Array(i.buffer,i.byteOffset,i.length/4)}}function Nw(e){const t=new Uint32Array(FO(e));let i=0;if(t[i++]=e.id,e.type==="full")t[i++]=1,t[i++]=e.data.length,t.set(e.data,i),i+=e.data.length;else{t[i++]=2,t[i++]=e.deltas.length;for(const r of e.deltas)t[i++]=r.start,t[i++]=r.deleteCount,r.data?(t[i++]=r.data.length,t.set(r.data,i),i+=r.data.length):t[i++]=0}return NO(t)}function FO(e){let t=0;if(t+=2,e.type==="full")t+=1+e.data.length;else{t+=1,t+=3*e.deltas.length;for(const i of e.deltas)i.data&&(t+=i.data.length)}return t}function dk(e){const t=MO(e);let i=0;const r=t[i++];if(t[i++]===1){const a=t[i++],c=t.subarray(i,i+a);return i+=a,{id:r,type:"full",data:c}}const n=t[i++],o=[];for(let a=0;a<n;a++){const c=t[i++],l=t[i++],u=t[i++];let h;u>0&&(h=t.subarray(i,i+u),i+=u),o[a]={start:c,deleteCount:l,data:h}}return{id:r,type:"delta",deltas:o}}var OO=[new ge("vscode.executeDocumentHighlights","_executeDocumentHighlights","Execute document highlight provider.",[O.Uri,O.Position],new fe("A promise that resolves to an array of DocumentHighlight-instances.",gr(va.to))),new ge("vscode.executeDocumentSymbolProvider","_executeDocumentSymbolProvider","Execute document symbol provider.",[O.Uri],new fe("A promise that resolves to an array of SymbolInformation and DocumentSymbol instances.",(e,t)=>{if(lg(e))return;class i extends _c{constructor(){super(...arguments),this.containerName=""}static to(s){const n=new i(s.name,Ji.to(s.kind),s.containerName||"",new Bi(t[0],F.to(s.range)));return n.detail=s.detail,n.range=n.location.range,n.selectionRange=F.to(s.selectionRange),n.children=s.children?s.children.map(i.to):[],n}}return e.map(i.to)})),new ge("vscode.executeFormatDocumentProvider","_executeFormatDocumentProvider","Execute document format provider.",[O.Uri,new O("options","Formatting options",e=>!0,e=>e)],new fe("A promise that resolves to an array of TextEdits.",gr(At.to))),new ge("vscode.executeFormatRangeProvider","_executeFormatRangeProvider","Execute range format provider.",[O.Uri,O.Range,new O("options","Formatting options",e=>!0,e=>e)],new fe("A promise that resolves to an array of TextEdits.",gr(At.to))),new ge("vscode.executeFormatOnTypeProvider","_executeFormatOnTypeProvider","Execute format on type provider.",[O.Uri,O.Position,new O("ch","Trigger character",e=>typeof e=="string",e=>e),new O("options","Formatting options",e=>!0,e=>e)],new fe("A promise that resolves to an array of TextEdits.",gr(At.to))),new ge("vscode.executeDefinitionProvider","_executeDefinitionProvider","Execute all definition providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.experimental.executeDefinitionProvider_recursive","_executeDefinitionProvider_recursive","Execute all definition providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.executeTypeDefinitionProvider","_executeTypeDefinitionProvider","Execute all type definition providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.experimental.executeTypeDefinitionProvider_recursive","_executeTypeDefinitionProvider_recursive","Execute all type definition providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.executeDeclarationProvider","_executeDeclarationProvider","Execute all declaration providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.experimental.executeDeclarationProvider_recursive","_executeDeclarationProvider_recursive","Execute all declaration providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.executeImplementationProvider","_executeImplementationProvider","Execute all implementation providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.experimental.executeImplementationProvider_recursive","_executeImplementationProvider_recursive","Execute all implementation providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location or LocationLink instances.",Xs)),new ge("vscode.executeReferenceProvider","_executeReferenceProvider","Execute all reference providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location-instances.",gr(gi.to))),new ge("vscode.experimental.executeReferenceProvider","_executeReferenceProvider_recursive","Execute all reference providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Location-instances.",gr(gi.to))),new ge("vscode.executeHoverProvider","_executeHoverProvider","Execute all hover providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Hover-instances.",gr(kl.to))),new ge("vscode.experimental.executeHoverProvider_recursive","_executeHoverProvider_recursive","Execute all hover providers.",[O.Uri,O.Position],new fe("A promise that resolves to an array of Hover-instances.",gr(kl.to))),new ge("vscode.executeSelectionRangeProvider","_executeSelectionRangeProvider","Execute selection range provider.",[O.Uri,new O("position","A position in a text document",e=>Array.isArray(e)&&e.every(t=>Ae.isPosition(t)),e=>e.map(ze.from))],new fe("A promise that resolves to an array of ranges.",e=>e.map(t=>{let i;for(const r of t.reverse())i=new Gc(F.to(r),i);return i}))),new ge("vscode.executeWorkspaceSymbolProvider","_executeWorkspaceSymbolProvider","Execute all workspace symbol providers.",[O.String.with("query","Search string")],new fe("A promise that resolves to an array of SymbolInformation-instances.",e=>e.map(Zn.to))),new ge("vscode.prepareCallHierarchy","_executePrepareCallHierarchy","Prepare call hierarchy at a position inside a document",[O.Uri,O.Position],new fe("A promise that resolves to an array of CallHierarchyItem-instances",e=>e.map(Yn.to))),new ge("vscode.provideIncomingCalls","_executeProvideIncomingCalls","Compute incoming calls for an item",[O.CallHierarchyItem],new fe("A promise that resolves to an array of CallHierarchyIncomingCall-instances",e=>e.map(xv.to))),new ge("vscode.provideOutgoingCalls","_executeProvideOutgoingCalls","Compute outgoing calls for an item",[O.CallHierarchyItem],new fe("A promise that resolves to an array of CallHierarchyOutgoingCall-instances",e=>e.map(Ev.to))),new ge("vscode.prepareRename","_executePrepareRename","Execute the prepareRename of rename provider.",[O.Uri,O.Position],new fe("A promise that resolves to a range and placeholder text.",e=>{if(e)return{range:F.to(e.range),placeholder:e.text}})),new ge("vscode.executeDocumentRenameProvider","_executeDocumentRenameProvider","Execute rename provider.",[O.Uri,O.Position,O.String.with("newName","The new symbol name")],new fe("A promise that resolves to a WorkspaceEdit.",e=>{if(e){if(e.rejectReason)throw new Error(e.rejectReason);return Di.to(e)}})),new ge("vscode.executeLinkProvider","_executeLinkProvider","Execute document link provider.",[O.Uri,O.Number.with("linkResolveCount","Number of links that should be resolved, only when links are unresolved.").optional()],new fe("A promise that resolves to an array of DocumentLink-instances.",e=>e.map(Qn.to))),new ge("vscode.provideDocumentSemanticTokensLegend","_provideDocumentSemanticTokensLegend","Provide semantic tokens legend for a document",[O.Uri],new fe("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new U1(e.tokenTypes,e.tokenModifiers)})),new ge("vscode.provideDocumentSemanticTokens","_provideDocumentSemanticTokens","Provide semantic tokens for a document",[O.Uri],new fe("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=dk(e);if(t.type==="full")return new la(t.data,void 0)})),new ge("vscode.provideDocumentRangeSemanticTokensLegend","_provideDocumentRangeSemanticTokensLegend","Provide semantic tokens legend for a document range",[O.Uri,O.Range.optional()],new fe("A promise that resolves to SemanticTokensLegend.",e=>{if(e)return new U1(e.tokenTypes,e.tokenModifiers)})),new ge("vscode.provideDocumentRangeSemanticTokens","_provideDocumentRangeSemanticTokens","Provide semantic tokens for a document range",[O.Uri,O.Range],new fe("A promise that resolves to SemanticTokens.",e=>{if(!e)return;const t=dk(e);if(t.type==="full")return new la(t.data,void 0)})),new ge("vscode.executeCompletionItemProvider","_executeCompletionItemProvider","Execute completion item provider.",[O.Uri,O.Position,O.String.with("triggerCharacter","Trigger completion when the user types the character, like `,` or `(`").optional(),O.Number.with("itemResolveCount","Number of completions to resolve (too large numbers slow down completions)").optional()],new fe("A promise that resolves to a CompletionList-instance.",(e,t,i)=>{if(!e)return new Yo([]);const r=e.suggestions.map(s=>Iv.to(s,i));return new Yo(r,e.incomplete)})),new ge("vscode.executeSignatureHelpProvider","_executeSignatureHelpProvider","Execute signature help provider.",[O.Uri,O.Position,O.String.with("triggerCharacter","Trigger signature help when the user types the character, like `,` or `(`").optional()],new fe("A promise that resolves to SignatureHelp.",e=>{if(e)return $l.to(e)})),new ge("vscode.executeCodeLensProvider","_executeCodeLensProvider","Execute code lens provider.",[O.Uri,O.Number.with("itemResolveCount","Number of lenses that should be resolved and returned. Will only return resolved lenses, will impact performance)").optional()],new fe("A promise that resolves to an array of CodeLens-instances.",(e,t,i)=>gr(r=>new dd(F.to(r.range),r.command&&i.fromInternal(r.command)))(e))),new ge("vscode.executeCodeActionProvider","_executeCodeActionProvider","Execute code action provider.",[O.Uri,new O("rangeOrSelection","Range in a text document. Some refactoring provider requires Selection object.",e=>ke.isRange(e),e=>Xr.isSelection(e)?hr.from(e):F.from(e)),O.String.with("kind","Code action kind to return code actions for").optional(),O.Number.with("itemResolveCount","Number of code actions to resolve (too large numbers slow down code actions)").optional()],new fe("A promise that resolves to an array of Command-instances.",(e,t,i)=>gr(r=>{if(r._isSynthetic){if(!r.command)throw new Error("Synthetic code actions must have a command");return i.fromInternal(r.command)}else{const s=new qc(r.title,r.kind?new nt(r.kind):void 0);return r.edit&&(s.edit=Di.to(r.edit)),r.command&&(s.command=i.fromInternal(r.command)),s.isPreferred=r.isPreferred,s}})(e))),new ge("vscode.executeDocumentColorProvider","_executeDocumentColorProvider","Execute document color provider.",[O.Uri],new fe("A promise that resolves to an array of ColorInformation objects.",e=>e?e.map(t=>new wd(F.to(t.range),wa.to(t.color))):[])),new ge("vscode.executeColorPresentationProvider","_executeColorPresentationProvider","Execute color presentation provider.",[new O("color","The color to show and insert",e=>e instanceof ia,wa.from),new O("context","Context object with uri and range",e=>!0,e=>({uri:e.uri,range:F.from(e.range)}))],new fe("A promise that resolves to an array of ColorPresentation objects.",e=>e?e.map(gf.to):[])),new ge("vscode.executeInlayHintProvider","_executeInlayHintProvider","Execute inlay hints provider",[O.Uri,O.Range],new fe("A promise that resolves to an array of Inlay objects",(e,t,i)=>e.map(Dv.to.bind(void 0,i)))),new ge("vscode.executeFoldingRangeProvider","_executeFoldingRangeProvider","Execute folding range provider",[O.Uri],new fe("A promise that resolves to an array of FoldingRange objects",(e,t)=>{if(e)return e.map(wf.to)})),new ge("vscode.resolveNotebookContentProviders","_resolveNotebookContentProvider","Resolve Notebook Content Providers",[],new fe("A promise that resolves to an array of NotebookContentProvider static info objects.",gr(e=>({viewType:e.viewType,displayName:e.displayName,options:{transientOutputs:e.options.transientOutputs,transientCellMetadata:e.options.transientCellMetadata,transientDocumentMetadata:e.options.transientDocumentMetadata},filenamePattern:e.filenamePattern.map(t=>yf.to(t))})))),new ge("vscode.executeInlineValueProvider","_executeInlineValueProvider","Execute inline value provider",[O.Uri,O.Range,new O("context","An InlineValueContext",e=>e&&typeof e.frameId=="number"&&e.stoppedLocation instanceof ke,e=>lf.from(e))],new fe("A promise that resolves to an array of InlineValue objects",e=>e.map(cf.to))),new ge("vscode.open","_workbench.open","Opens the provided resource in the editor. Can be a text or binary file, or an http(s) URL. If you need more control over the options for opening a text file, use vscode.window.showTextDocument instead.",[new O("uriOrString","Uri-instance or string (only http/https)",e=>y.isUri(e)||typeof e=="string"&&xD(e,V.http,V.https),e=>e),new O("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Pt.from(e),void 0]:[Pt.from(e.viewColumn),Cl.from(e)])).optional(),O.String.with("label","").optional()],fe.Void),new ge("vscode.openWith","_workbench.openWith","Opens the provided resource with a specific editor.",[O.Uri.with("resource","Resource to open"),O.String.with("viewId","Custom editor view id. This should be the viewType string for custom editors or the notebookType string for notebooks. Use 'default' to use VS Code's default text editor"),new O("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="number"||typeof e=="object",e=>e&&(typeof e=="number"?[Pt.from(e),void 0]:[Pt.from(e.viewColumn),Cl.from(e)])).optional()],fe.Void),new ge("vscode.diff","_workbench.diff","Opens the provided resources in the diff editor to compare their contents.",[O.Uri.with("left","Left-hand side resource of the diff editor"),O.Uri.with("right","Right-hand side resource of the diff editor"),O.String.with("title","Human readable title for the diff editor").optional(),new O("columnOrOptions","Either the column in which to open or editor options, see vscode.TextDocumentShowOptions",e=>e===void 0||typeof e=="object",e=>e&&[Pt.from(e.viewColumn),Cl.from(e)]).optional()],fe.Void),new ge("vscode.changes","_workbench.changes","Opens a list of resources in the changes editor to compare their contents.",[O.String.with("title","Human readable title for the changes editor"),new O("resourceList","List of resources to compare",e=>{for(const t of e){if(t.length!==3)return!1;const[i,r,s]=t;if(!y.isUri(i)||!y.isUri(r)&&r!==void 0&&r!==null||!y.isUri(s)&&s!==void 0&&s!==null)return!1}return!0},e=>e)],fe.Void),new ge("vscode.prepareTypeHierarchy","_executePrepareTypeHierarchy","Prepare type hierarchy at a position inside a document",[O.Uri,O.Position],new fe("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Xn.to))),new ge("vscode.provideSupertypes","_executeProvideSupertypes","Compute supertypes for an item",[O.TypeHierarchyItem],new fe("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Xn.to))),new ge("vscode.provideSubtypes","_executeProvideSubtypes","Compute subtypes for an item",[O.TypeHierarchyItem],new fe("A promise that resolves to an array of TypeHierarchyItem-instances",e=>e.map(Xn.to))),new ge("vscode.revealTestInExplorer","_revealTestInExplorer","Reveals a test instance in the explorer",[O.TestItem],fe.Void),new ge("vscode.startContinuousTestRun","testing.startContinuousRunFromExtension","Starts running the given tests with continuous run mode.",[O.TestProfile,O.Arr(O.TestItem)],fe.Void),new ge("vscode.stopContinuousTestRun","testing.stopContinuousRunFromExtension","Stops running the given tests with continuous run mode.",[O.Arr(O.TestItem)],fe.Void),new ge("vscode.experimental.editSession.continue","_workbench.editSessions.actions.continueEditSession","Continue the current edit session in a different workspace",[O.Uri.with("workspaceUri","The target workspace to continue the current edit session in")],fe.Void),new ge("setContext","_setContext","Set a custom context key value that can be used in when clauses.",[O.String.with("name","The context key name"),new O("value","The context key value",()=>!0,e=>e)],fe.Void),new ge("vscode.editorChat.start","inlineChat.start","Invoke a new editor chat session",[new O("Run arguments","",e=>!0,e=>{if(e)return{initialRange:e.initialRange?F.from(e.initialRange):void 0,initialSelection:Xr.isSelection(e.initialSelection)?hr.from(e.initialSelection):void 0,message:e.message,attachments:e.attachments,autoSend:e.autoSend,position:e.position?ze.from(e.position):void 0}})],fe.Void)],UO=class{static register(e){OO.forEach(e.registerApiCommand,e),this.a(e)}static a(e){e.registerCommand(!1,"_validateWhenClauses",b2)}};function gr(e){return t=>{if(Array.isArray(t))return t.map(e)}}function Xs(e){if(!Array.isArray(e))return;const t=[];for(const i of e)WP(i)?t.push(Sl.to(i)):t.push(gi.to(i));return t}var Mw=class{constructor(t,i){this.a=t.getProxy(J.MainThreadBulkEdits),this.b={getTextDocumentVersion:r=>i.getDocument(r)?.version,getNotebookDocumentVersion:()=>{}}}applyWorkspaceEdit(t,i,r){const s=new ni(Di.from(t,this.b));return this.a.$tryApplyWorkspaceEdit(s,void 0,r?.isRefactoring??!1)}};Mw=__decorate([__param(0,Fe)],Mw);function jO(e){return!!e&&typeof e.sessionId=="string"&&e.$mid===19}var BO=class{constructor(e,t,i,r,s){this.j=e,this.k=t,this.l=i,this.m=r,this.n=s,this.b=un.create(!1),this.c=!1}close(){this.c=!0}get timings(){return{firstProgress:this.d,totalElapsed:this.b.elapsed()}}get apiObject(){if(!this.g){let i=function(l){if(s.c){const u=new Error("Response stream has been closed");throw Error.captureStackTrace(u,l),u}},r=function(l,u){if(o.push(u!==void 0?[l,u]:l)===1&&queueMicrotask(()=>{s.l.$handleProgressChunk(s.k.requestId,o).finally(()=>{a.forEach(f=>f()),a.length=0}),o.length=0}),u!==void 0)return new Promise(f=>{a.push(f)})};var e=i,t=r;const s=this;this.b.reset();let n=0;const o=[],a=[],c=(l,u)=>{if(typeof this.d>"u"&&(l.kind==="markdownContent"||l.kind==="markdownVuln"||l.kind==="prepareToolInvocation")&&(this.d=this.b.elapsed()),u){const h=n++,f=r(l,h),p={report:m=>{f.then(()=>{Ci.isMarkdownString(m.value)?r(Ll.from(m),h):r(eo.from(m),h)})}};Promise.all([f,u(p)]).then(([m,w])=>{r(Bv.from(w),h)})}else r(l)};this.g=Object.freeze({markdown(l){i(this.markdown);const u=new qd(l),h=Al.from(u);return c(h),this},markdownWithVulnerabilities(l,u){i(this.markdown),u&&L(s.j,"chatParticipantAdditions");const h=new fl(l,u),f=$f.from(h);return c(f),this},codeblockUri(l,u){i(this.codeblockUri),L(s.j,"chatParticipantAdditions");const h=new Qd(l,u),f=kf.from(h);return c(f),this},filetree(l,u){i(this.filetree);const h=new Jd(l,u),f=Tl.from(h);return c(f),this},anchor(l,u){const h=new pl(l,u);return this.push(h)},button(l){i(this.anchor);const u=new Yd(l),h=Ml.from(u,s.m,s.n);return c(h),this},progress(l,u){i(this.progress);const h=new Zd(l,u),f=u?If.from(h):Rl.from(h);return c(f,u),this},warning(l){i(this.progress),L(s.j,"chatParticipantAdditions");const u=new gl(l),h=Ll.from(u);return c(h),this},reference(l,u){return this.reference2(l,u)},reference2(l,u,h){if(i(this.reference),typeof l=="object"&&"variableName"in l&&L(s.j,"chatParticipantAdditions"),typeof l=="object"&&"variableName"in l&&!l.value){const f=s.k.variables.variables.find(p=>p.name===l.variableName);if(f){let p;if(f.references?.length)p=f.references.map(m=>({kind:"reference",reference:{variableName:l.variableName,value:m.reference}}));else{const m=new Gn(l,u,h);p=[eo.from(m)]}return p.forEach(m=>c(m)),this}}else{const f=new Gn(l,u,h),p=eo.from(f);c(p)}return this},codeCitation(l,u,h){i(this.codeCitation),L(s.j,"chatParticipantAdditions");const f=new Xd(l,u,h),p=Tf.from(f);c(p)},textEdit(l,u){i(this.textEdit),L(s.j,"chatParticipantAdditions");const h=new ml(l,u);h.isDone=u===!0?!0:void 0;const f=Df.from(h);return c(f),this},notebookEdit(l,u){i(this.notebookEdit),L(s.j,"chatParticipantAdditions");const h=new ef(l,u),f=Af.from(h);return c(f),this},confirmation(l,u,h,f){i(this.confirmation),L(s.j,"chatParticipantAdditions");const p=new Gd(l,u,h,f),m=Cf.from(p);return c(m),this},prepareToolInvocation(l){i(this.prepareToolInvocation),L(s.j,"chatParticipantAdditions");const u=new vl(l),h=Nl.from(u);return c(h),this},push(l){if(i(this.push),(l instanceof ml||l instanceof ef||l instanceof fl||l instanceof gl||l instanceof Gd||l instanceof Xd||l instanceof Kd||l instanceof nv||l instanceof Zd)&&L(s.j,"chatParticipantAdditions"),l instanceof Gn)this.reference2(l.value,l.iconPath,l.options);else if(l instanceof Zd){const u=l.task?If.from(l):Rl.from(l);c(u,l.task)}else if(l instanceof pl){const u=Da.from(l);if(l.resolve){L(s.j,"chatParticipantAdditions"),u.resolveId=Ut();const h=new at;l.resolve(h.token).then(()=>{const f=Da.from(l);s.l.$handleAnchorResolve(s.k.requestId,u.resolveId,f)}).then(()=>h.dispose(),()=>h.dispose()),s.n.add(oe(()=>h.dispose(!0)))}c(u)}else if(l instanceof vl){L(s.j,"chatParticipantAdditions");const u=Nl.from(l);return c(u),this}else{const u=Rf.from(l,s.m,s.n);c(u)}return this}})}return this.g}},HO=class Eu extends ne{static{this.b=0}static{this.j=0}static{this.n=0}constructor(t,i,r,s,n,o,a){super(),this.z=i,this.C=r,this.D=s,this.F=n,this.G=o,this.H=a,this.c=new Map,this.m=new Map,this.s=new Map,this.t=this.B(new Ru),this.u=this.B(new Ru),this.w=new Set,this.y=this.B(new P),this.onDidDisposeChatSession=this.y.event,this.g=t.getProxy(J.MainThreadChatAgents2),r.registerArgumentProcessor({processArgument:c=>jO(c)?null:c})}transferActiveChat(t){this.g.$transferActiveChatSession(t)}createChatAgent(t,i,r){const s=Eu.b++,n=new fk(t,i,this.g,s,r);return this.c.set(s,n),this.g.$registerAgent(s,t.identifier,i,{},void 0),n.apiAgent}createDynamicChatAgent(t,i,r,s){const n=Eu.b++,o=new fk(t,i,this.g,n,s);return this.c.set(n,o),this.g.$registerAgent(n,t.identifier,i,{isSticky:!0},r),o.apiAgent}registerChatParticipantDetectionProvider(t,i){const r=Eu.j++;return this.m.set(r,new zO(t,i)),this.g.$registerChatParticipantDetectionProvider(r),oe(()=>{this.m.delete(r),this.g.$unregisterChatParticipantDetectionProvider(r)})}registerRelatedFilesProvider(t,i,r){const s=Eu.n++;return this.s.set(s,new _O(t,i)),this.g.$registerRelatedFilesProvider(s,r),oe(()=>{this.s.delete(s),this.g.$unregisterRelatedFilesProvider(s)})}async $provideRelatedFiles(t,i,r){const s=this.s.get(t);if(!s)return Promise.resolve([]);const n=Hv.to(i);return await s.provider.provideRelatedFiles(n,r)??void 0}async $detectChatParticipant(t,i,r,s,n){const o=this.m.get(t);if(!o)return;const{request:a,location:c,history:l}=await this.I(i,r,o.extension),u=await this.J(a,o.extension),h=Lf.to(a,c,u,this.L(o.extension),this.M(o.extension,a),o.extension,this.z);return o.provider.provideParticipantDetection(h,{history:l},{participants:s.participants,location:Nf.to(s.location)},n)}async I(t,i,r){const s=St(t),n=await this.N(r,s.agentId,i);let o;if(s.locationData?.type===ti.Editor){const a=this.D.getDocument(s.locationData.document);o=new W8(a,hr.to(s.locationData.selection),F.to(s.locationData.wholeRange))}else if(s.locationData?.type===ti.Notebook){const a=this.D.getDocument(s.locationData.sessionInputUri);o=new V8(a)}else s.locationData?.type,ti.Terminal;return{request:s,location:o,history:n}}async J(t,i){let r;if(t.userSelectedModelId&&(r=await this.F.getLanguageModelByIdentifier(i,t.userSelectedModelId)),!r&&(r=await this.F.getDefaultLanguageModel(i),!r))throw new Error("Language model unavailable");return r}async $setRequestPaused(t,i,r){const s=this.c.get(t);if(!s)return;const n=Ot.find(this.w,o=>o.requestId===i);n&&s.setChatRequestPauseState({request:n.extRequest,isPaused:r})}async $invokeAgent(t,i,r,s){const n=this.c.get(t);if(!n)throw new Error(`[CHAT](${t}) CANNOT invoke agent because the agent is not registered`);let o,a;try{const{request:c,location:l,history:u}=await this.I(i,r,n.extension);let h=this.t.get(c.sessionId);h||(h=new ue,this.t.set(c.sessionId,h)),o=new BO(n.extension,c,this.g,this.C.converter,h);const f=await this.J(c,n.extension),p=Lf.to(c,l,f,this.L(n.extension),this.M(n.extension,c),n.extension,this.z);a={requestId:i.requestId,extRequest:p},this.w.add(a);const m=n.invoke(p,{history:u},o.apiObject,s);return await WO(1e3,Promise.resolve(m).then(w=>{if(w?.metadata)try{JSON.stringify(w.metadata)}catch(E){const $=`result.metadata MUST be JSON.stringify-able. Got error: ${E.message}`;return this.z.error(`[${n.extension.identifier.value}] [@${n.id}] ${$}`,n.extension),{errorDetails:{message:$},timings:o?.timings,nextQuestion:w.nextQuestion}}let x;return w?.errorDetails&&(x={...w.errorDetails,responseIsIncomplete:!0}),(x?.responseIsRedacted||x?.isQuotaExceeded||x?.confirmationButtons)&&L(n.extension,"chatParticipantPrivate"),{errorDetails:x,timings:o?.timings,metadata:w?.metadata,nextQuestion:w?.nextQuestion}}),s)}catch(c){this.z.error(c,n.extension),c instanceof is&&c.cause&&(c=c.cause);const l=c instanceof Error&&c.name==="ChatQuotaExceeded";return{errorDetails:{message:Po(c),responseIsIncomplete:!0,isQuotaExceeded:l}}}finally{a&&this.w.delete(a),o?.close()}}L(t){return Ge(t,"chatReferenceDiagnostic")?this.G.getDiagnostics():[]}M(t,i){if(!i.userSelectedTools)return new Map;const r=new Map;for(const s of this.H.getTools(t))typeof i.userSelectedTools[s.name]=="boolean"&&r.set(s.name,i.userSelectedTools[s.name]);return r}async N(t,i,r){const s=[];for(const n of r.history){const o=Pa.to(n.result),a=i===n.request.agentId?o:{...o,metadata:void 0},c=[],l=[];for(const p of n.request.variables.variables)if(p.kind==="tool")l.push(Fl.to(p));else if(p.kind==="toolset")l.push(...p.value.map(Fl.to));else{const m=Mf.to(p,this.L(t),this.z);m&&c.push(m)}const u=Ge(t,"chatParticipantPrivate")?n.request.editedFileEvents:void 0,h=new ov(n.request.message,n.request.command,c,n.request.agentId,l,u);s.push(h);const f=vt(n.response.map(p=>Rf.toContent(p,this.C.converter)));s.push(new _8(f,a,n.request.agentId,n.request.command))}return s}$releaseSession(t){this.t.deleteAndDispose(t),this.y.fire(t)}async $provideFollowups(t,i,r,s,n){const o=this.c.get(i);if(!o)return Promise.resolve([]);const a=St(t),c=await this.N(o.extension,o.id,s),l=Pa.to(r);return(await o.provideFollowups(l,{history:c},n)).filter(u=>{const h=!u.participant||Ot.some(this.c.values(),f=>f.id===u.participant&&je.equals(f.extension.identifier,o.extension.identifier));return h||this.z.warn(`[@${o.id}] ChatFollowup refers to an unknown participant: ${u.participant}`),h}).map(u=>Sf.from(u,a))}$acceptFeedback(t,i,r){const s=this.c.get(t);if(!s)return;const n=Pa.to(i);let o;switch(r.direction){case Wh.Down:o=dl.Unhelpful;break;case Wh.Up:o=dl.Helpful;break}const a={result:n,kind:o,unhelpfulReason:Ge(s.extension,"chatParticipantAdditions")?r.reason:void 0};s.acceptFeedback(Object.freeze(a))}$acceptAction(t,i,r){const s=this.c.get(t);if(!s||r.action.kind==="vote")return;const n=_v.to(i,r,this.C.converter);n&&s.acceptAction(Object.freeze(n))}async $invokeCompletionProvider(t,i,r){const s=this.c.get(t);if(!s)return[];let n=this.u.get(t);return n?n.clear():(n=new ue,this.u.set(t,n)),(await s.invokeCompletionProvider(i,r)).map(a=>zv.from(a,this.C.converter,n))}async $provideChatTitle(t,i,r){const s=this.c.get(t);if(!s)return;const n=await this.N(s.extension,s.id,{history:i});return await s.provideTitle({history:n},r)}},zO=class{constructor(e,t){this.extension=e,this.provider=t}},_O=class{constructor(e,t){this.extension=e,this.provider=t}},fk=class{constructor(e,t,i,r,s){this.extension=e,this.id=t,this.u=i,this.w=r,this.x=s,this.k=new P,this.l=new P,this.t=new P}acceptFeedback(e){this.k.fire(e)}acceptAction(e){this.l.fire(e)}setChatRequestPauseState(e){this.t.fire(e)}async invokeCompletionProvider(e,t){return this.n?await this.n.provider.provideCompletionItems(e,t)??[]:[]}async provideFollowups(e,t,i){if(!this.b)return[];const r=await this.b.provideFollowups(e,t,i);return r?r.filter(s=>!(s&&"commandId"in s)).filter(s=>!(s&&"message"in s)):[]}async provideTitle(e,t){if(this.q)return await this.q.provideChatTitle(e,t)??void 0}get apiAgent(){let e=!1,t=!1;const i=()=>{e||t||(t=!0,queueMicrotask(()=>{this.u.$updateAgent(this.w,{icon:this.c?this.c instanceof y?this.c:"light"in this.c?this.c.light:void 0:void 0,iconDark:this.c&&"dark"in this.c?this.c.dark:void 0,themeIcon:this.c instanceof ci?this.c:void 0,hasFollowups:this.b!==void 0,helpTextPrefix:!this.d||typeof this.d=="string"?this.d:we.from(this.d),helpTextVariablesPrefix:!this.g||typeof this.g=="string"?this.g:we.from(this.g),helpTextPostfix:!this.j||typeof this.j=="string"?this.j:we.from(this.j),supportIssueReporting:this.m,requester:this.s,additionalWelcomeMessage:!this.o||typeof this.o=="string"?this.o:we.from(this.o)}),t=!1}))},r=this;return{get id(){return r.id},get iconPath(){return r.c},set iconPath(s){r.c=s,i()},get requestHandler(){return r.x},set requestHandler(s){uy(typeof s=="function","Invalid request handler"),r.x=s},get followupProvider(){return r.b},set followupProvider(s){r.b=s,i()},get helpTextPrefix(){return L(r.extension,"defaultChatParticipant"),r.d},set helpTextPrefix(s){L(r.extension,"defaultChatParticipant"),r.d=s,i()},get helpTextVariablesPrefix(){return L(r.extension,"defaultChatParticipant"),r.g},set helpTextVariablesPrefix(s){L(r.extension,"defaultChatParticipant"),r.g=s,i()},get helpTextPostfix(){return L(r.extension,"defaultChatParticipant"),r.j},set helpTextPostfix(s){L(r.extension,"defaultChatParticipant"),r.j=s,i()},get supportIssueReporting(){return L(r.extension,"chatParticipantPrivate"),r.m},set supportIssueReporting(s){L(r.extension,"chatParticipantPrivate"),r.m=s,i()},get onDidReceiveFeedback(){return r.k.event},set participantVariableProvider(s){if(L(r.extension,"chatParticipantAdditions"),r.n=s,s){if(!s.triggerCharacters.length)throw new Error("triggerCharacters are required");r.u.$registerAgentCompletionsProvider(r.w,r.id,s.triggerCharacters)}else r.u.$unregisterAgentCompletionsProvider(r.w,r.id)},get participantVariableProvider(){return L(r.extension,"chatParticipantAdditions"),r.n},set additionalWelcomeMessage(s){L(r.extension,"defaultChatParticipant"),r.o=s,i()},get additionalWelcomeMessage(){return L(r.extension,"defaultChatParticipant"),r.o},set titleProvider(s){L(r.extension,"defaultChatParticipant"),r.q=s,i()},get titleProvider(){return L(r.extension,"defaultChatParticipant"),r.q},get onDidChangePauseState(){return L(r.extension,"chatParticipantAdditions"),r.t.event},onDidPerformAction:Ge(this.extension,"chatParticipantAdditions")?this.l.event:void 0,set requester(s){r.s=s,i()},get requester(){return r.s},dispose(){e=!0,r.b=void 0,r.k.dispose(),r.u.$unregisterAgent(r.w)}}}invoke(e,t,i,r){return this.x(e,t,i,r)}};function WO(e,t,i){return new Promise((r,s)=>{const n=i.onCancellationRequested(async()=>{n.dispose(),await Vi(e),r(void 0)});t.then(r,s).finally(()=>n.dispose())})}var VO=class{constructor(e){this.b=new Map,this.a=e.getProxy(J.MainThreadChatStatus)}createChatStatusItem(e,t){const i=qO(e.identifier,t);if(this.b.has(i))throw new Error(`Chat status item '${t}' already exists`);const r={id:i,title:"",description:"",detail:""};let s=!1,n=!1;const o=()=>{if(s)throw new Error("Chat status item is disposed");n&&this.a.$setEntry(t,r)},a=Object.freeze({id:t,get title(){return r.title},set title(c){r.title=c,o()},get description(){return r.description},set description(c){r.description=c,o()},get detail(){return r.detail},set detail(c){r.detail=c,o()},show:()=>{n=!0,o()},hide:()=>{n=!1,this.a.$disposeEntry(t)},dispose:()=>{s=!0,this.a.$disposeEntry(t),this.b.delete(i)}});return this.b.set(i,a),a}};function qO(e,t){return`${je.toKey(e)}.${t}`}var GO=class{constructor(e){const t=e.getProxy(J.MainThreadClipboard);this.value=Object.freeze({readText(){return t.$readText()},writeText(i){return t.$writeText(i)}})}},pk="vscode-cdn.net",JO=`vscode-resource.${pk}`,Fw=`'self' https://*.${pk}`;function iu(e,t){return e.scheme===V.http||e.scheme===V.https?e:(t&&t.authority&&t.isRemote&&e.scheme===V.file&&(e=y.from({scheme:V.vscodeRemote,authority:t.authority,path:e.path})),y.from({scheme:V.https,authority:`${e.scheme}+${ZO(e.authority)}.${JO}`,path:e.path,fragment:e.fragment,query:e.query}))}function ZO(e){return e.replace(/./g,t=>{const i=t.charCodeAt(0);return i>=97&&i<=122||i>=65&&i<=90||i>=48&&i<=57?t:"-"+i.toString(16).padStart(4,"0")})}var YO=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i,this.a=0,this.b=new ue,this.c=new Map,this.b.add(t.onDidChangeVisibleTextEditors(()=>{const r=t.getVisibleTextEditors();for(const s of this.c.values())r.indexOf(s.editor)<0&&s.inset.dispose()}))}dispose(){this.c.forEach(e=>e.inset.dispose()),this.b.dispose()}createWebviewEditorInset(e,t,i,r,s){let n;for(const f of this.e.getVisibleTextEditors(!0))if(f.value===e){n=f;break}if(!n)throw new Error("not a visible editor");const o=this,a=this.a++,c=new P,l=new P,u=new class{constructor(){this.a="",this.b=Object.create(null)}asWebviewUri(f){return iu(f,o.f)}get cspSource(){return Fw}set options(f){this.b=f,o.d.$setOptions(a,f)}get options(){return this.b}set html(f){this.a=f,o.d.$setHtml(a,f)}get html(){return this.a}get onDidReceiveMessage(){return c.event}postMessage(f){return o.d.$postMessage(a,f)}},h=new class{constructor(){this.editor=e,this.line=t,this.height=i,this.webview=u,this.onDidDispose=l.event}dispose(){o.c.has(a)&&(o.c.delete(a),o.d.$disposeEditorInset(a),l.fire(),l.dispose(),c.dispose())}};return this.d.$createEditorInset(a,n.id,n.value.document.uri,t+1,i,r||{},s.identifier,s.extensionLocation),this.c.set(a,{editor:e,inset:h,onDidReceiveMessage:c}),h}$onDidDispose(e){const t=this.c.get(e);t&&t.inset.dispose()}$onDidReceiveMessage(e,t){this.c.get(e)?.onDidReceiveMessage.fire(t)}},QO=class PC{static{this.a=0}constructor(t){this.c=new Map,this.b=t.getProxy(J.MainThreadCodeMapper)}async $mapCode(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Received request to map code for unknown provider handle ${t}`);const n={textEdit:(c,l)=>{l=Ni(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(At.from)})},notebookEdit:(c,l)=>{l=Ni(l),this.b.$handleProgress(i.requestId,{uri:c,edits:l.map(Pf.from)})}},o={location:i.location,chatRequestId:i.chatRequestId,chatRequestModel:i.chatRequestModel,chatSessionId:i.chatSessionId,codeBlocks:i.codeBlocks.map(c=>({code:c.code,resource:y.revive(c.resource),markdownBeforeBlock:c.markdownBeforeBlock}))};return await s.provideMappedEdits(o,n,r)??null}registerMappedEditsProvider(t,i){const r=PC.a++;return this.b.$registerCodeMapperProvider(r,t.displayName??t.name),this.c.set(r,i),{dispose:()=>this.b.$unregisterCodeMapperProvider(r)}}};function XO(e,t,i){const r=e.getProxy(J.MainThreadComments);class s{static{this.a=0}constructor(){this.b=new Map,this.c=new qr,t.registerArgumentProcessor({processArgument:m=>{if(m&&m.$mid===6){const w=this.b.get(m.handle);return w?w.value:m}else if(m&&m.$mid===7){const w=m,x=this.b.get(w.commentControlHandle);if(!x)return w;const E=x.getCommentThread(w.commentThreadHandle);return E?E.value:w}else if(m&&(m.$mid===9||m.$mid===8)){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);return x?m.$mid===8?x.value:{thread:x.value,text:m.text}:m}else if(m&&m.$mid===10){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);if(!x)return m;const E=m.commentUniqueId,$=x.getCommentByUniqueId(E);return $||m}else if(m&&m.$mid===11){const w=this.b.get(m.thread.commentControlHandle);if(!w)return m;const x=w.getCommentThread(m.thread.commentThreadHandle);if(!x)return m;const E=m.text,$=m.commentUniqueId,A=x.getCommentByUniqueId($);return A?(typeof A.body=="string"?A.body=E:A.body=new Ci(E),A):m}return m}})}createCommentController(m,w,x){const E=s.a++,$=new o(m,E,w,x);this.b.set($.handle,$);const A=this.c.get(m.identifier)||[];return A.push($),this.c.set(m.identifier,A),$.value}async $createCommentThreadTemplate(m,w,x,E){const $=this.b.get(m);$&&$.$createCommentThreadTemplate(w,x,E)}async $setActiveComment(m,w){const x=this.b.get(m);x&&x.$setActiveComment(w??void 0)}async $updateCommentThreadTemplate(m,w,x){const E=this.b.get(m);E&&E.$updateCommentThreadTemplate(w,x)}$deleteCommentThread(m,w){this.b.get(m)?.$deleteCommentThread(w)}async $updateCommentThread(m,w,x){this.b.get(m)?.$updateCommentThread(w,x)}async $provideCommentingRanges(m,w,x){const E=this.b.get(m);if(!E||!E.commentingRangeProvider)return Promise.resolve(void 0);const $=await i.ensureDocumentData(y.revive(w));return Yt(async()=>{const A=await E.commentingRangeProvider?.provideCommentingRanges($.document,x);let Q;return Array.isArray(A)?Q={ranges:A,fileComments:!1}:A?Q={ranges:A.ranges||[],fileComments:A.enableFileComments||!1}:Q=A??void 0,Q}).then(A=>{let Q;return A&&(Q={ranges:A.ranges.map(W=>F.from(W)),fileComments:A.fileComments}),Q})}$toggleReaction(m,w,x,E,$){const A=this.b.get(m);return!A||!A.reactionHandler?Promise.resolve(void 0):Yt(()=>{const Q=A.getCommentThread(w);if(Q){const W=Q.getCommentByUniqueId(E.uniqueIdInThread);if(A!==void 0&&W&&A.reactionHandler)return A.reactionHandler(W,l($))}return Promise.resolve(void 0)})}}class n{static{this.a=0}set threadId(m){this.n=m}get threadId(){return this.n}get id(){return this.n}get resource(){return this.o}get uri(){return this.o}set range(m){(m===void 0!=(this.p===void 0)||!m||!this.p||!m.isEqual(this.p))&&(this.p=m,this.b.range=m,this.c.fire())}get range(){return this.p}set canReply(m){this.d!==m&&(this.d=m,this.b.canReply=m,this.c.fire())}get canReply(){return this.d}get label(){return this.e}set label(m){this.e=m,this.b.label=m,this.c.fire()}get contextValue(){return this.f}set contextValue(m){this.f=m,this.b.contextValue=m,this.c.fire()}get comments(){return this.q}set comments(m){this.q=m,this.b.comments=m,this.c.fire()}get collapsibleState(){return this.g}set collapsibleState(m){this.g!==m&&(this.g=m,this.b.collapsibleState=m,this.c.fire())}get state(){return this.h}set state(m){this.h=m,typeof m=="object"?(L(this.extensionDescription,"commentThreadApplicability"),this.b.state=m.resolved,this.b.applicability=m.applicability):this.b.state=m,this.c.fire()}get isDisposed(){return this.j}constructor(m,w,x,E,$,A,Q,W,ce){this.m=w,this.n=x,this.o=E,this.p=$,this.q=A,this.extensionDescription=Q,this.r=W,this.handle=n.a++,this.commentHandle=0,this.b=Object.create(null),this.c=new P,this.onDidUpdateCommentThread=this.c.event,this.d=!0,this.k=new Map,this.l=new bs,this.l.value=new ue,this.n===void 0&&(this.n=`${m}.${this.handle}`),r.$createCommentThread(w,this.handle,this.n,this.o,F.from(this.p),this.q.map(z=>a(this,z,this.k,this.extensionDescription)),Q.identifier,this.r,ce),this.i=[],this.j=!1,this.i.push(this.onDidUpdateCommentThread(()=>{this.eventuallyUpdateCommentThread()})),this.i.push({dispose:()=>{r.$deleteCommentThread(w,this.handle)}});const U=this;this.value={get uri(){return U.uri},get range(){return U.range},set range(z){U.range=z},get comments(){return U.comments},set comments(z){U.comments=z},get collapsibleState(){return U.collapsibleState},set collapsibleState(z){U.collapsibleState=z},get canReply(){return U.canReply},set canReply(z){U.canReply=z},get contextValue(){return U.contextValue},set contextValue(z){U.contextValue=z},get label(){return U.label},set label(z){U.label=z},get state(){return U.state},set state(z){U.state=z},reveal:(z,q)=>U.reveal(z,q),hide:()=>U.hide(),dispose:()=>{U.dispose()}}}s(){this.r&&(this.r=!1,this.b.isTemplate=!1)}eventuallyUpdateCommentThread(){if(this.j)return;this.s(),this.l.value||(this.l.value=new ue);const m=x=>Object.prototype.hasOwnProperty.call(this.b,x),w={};m("range")&&(w.range=F.from(this.p)),m("label")&&(w.label=this.label),m("contextValue")&&(w.contextValue=this.contextValue??null),m("comments")&&(w.comments=this.q.map(x=>a(this,x,this.k,this.extensionDescription))),m("collapsibleState")&&(w.collapseState=u(this.g)),m("canReply")&&(w.canReply=this.canReply),m("state")&&(w.state=h(this.h)),m("applicability")&&(w.applicability=f(this.h)),m("isTemplate")&&(w.isTemplate=this.r),this.b={},r.$updateCommentThread(this.m,this.handle,this.n,this.o,w)}getCommentByUniqueId(m){for(const w of this.k){const x=w[0],E=w[1];if(m===E)return x}}async reveal(m,w){L(this.extensionDescription,"commentReveal");let x;m&&m.body!==void 0?x=m:w=w??m;let E=x?this.k.get(x):void 0;E??=this.k.get(this.q[0]);let $=!0,A=!1;return w?.focus===al.Reply?(A=!0,$=!1):w?.focus===al.Comment&&($=!1),r.$revealCommentThread(this.m,this.handle,E,{preserveFocus:$,focusReply:A})}async hide(){return r.$hideCommentThread(this.m,this.handle)}dispose(){this.j=!0,this.l.dispose(),this.i.forEach(m=>m.dispose())}}__decorate([F0(100)],n.prototype,"eventuallyUpdateCommentThread",null);class o{get id(){return this.j}get label(){return this.k}get handle(){return this.i}get commentingRangeProvider(){return this.b}set commentingRangeProvider(m){this.b=m,m?.resourceHints&&L(this.h,"commentingRangeHint"),r.$updateCommentingRanges(this.handle,m?.resourceHints)}get reactionHandler(){return this.c}set reactionHandler(m){this.c=m,r.$updateCommentControllerFeatures(this.handle,{reactionHandler:!!m})}get options(){return this.d}set options(m){this.d=m,r.$updateCommentControllerFeatures(this.handle,{options:this.d})}get activeComment(){return L(this.h,"activeComment"),this.e}get activeCommentThread(){return L(this.h,"activeComment"),this.f?.value}constructor(m,w,x,E){this.h=m,this.i=w,this.j=x,this.k=E,this.a=new Map,r.$registerCommentController(this.handle,x,E,this.h.identifier.value);const $=this;this.value=Object.freeze({id:$.id,label:$.label,get options(){return $.options},set options(A){$.options=A},get commentingRangeProvider(){return $.commentingRangeProvider},set commentingRangeProvider(A){$.commentingRangeProvider=A},get reactionHandler(){return $.reactionHandler},set reactionHandler(A){$.reactionHandler=A},get activeCommentThread(){return $.activeCommentThread},createCommentThread(A,Q,W){return $.createCommentThread(A,Q,W).value},dispose:()=>{$.dispose()}}),this.g=[],this.g.push({dispose:()=>{r.$unregisterCommentController(this.handle)}})}createCommentThread(m,w,x){const E=new n(this.id,this.handle,void 0,m,w,x,this.h,!1);return this.a.set(E.handle,E),E}$setActiveComment(m){if(!m){this.e=void 0,this.f=void 0;return}const w=this.a.get(m.commentThreadHandle);w&&(this.e=m.uniqueIdInThread?w.getCommentByUniqueId(m.uniqueIdInThread):void 0,this.f=w)}$createCommentThreadTemplate(m,w,x){const E=new n(this.id,this.handle,void 0,y.revive(m),F.to(w),[],this.h,!0,x);return E.collapsibleState=Fo.Expanded,this.a.set(E.handle,E),E}$updateCommentThreadTemplate(m,w){const x=this.a.get(m);x&&(x.range=F.to(w))}$updateCommentThread(m,w){const x=this.a.get(m);if(!x)return;($=>Object.prototype.hasOwnProperty.call(w,$))("collapseState")&&(x.collapsibleState=u(w.collapseState))}$deleteCommentThread(m){this.a.get(m)?.dispose(),this.a.delete(m)}getCommentThread(m){return this.a.get(m)}dispose(){this.a.forEach(m=>{m.dispose()}),this.g.forEach(m=>m.dispose())}}function a(p,m,w,x){let E=w.get(m);return E||(E=++p.commentHandle,w.set(m,E)),m.state!==void 0&&L(x,"commentsDraftState"),m.reactions?.some($=>$.reactors!==void 0)&&L(x,"commentReactor"),{mode:m.mode,contextValue:m.contextValue,uniqueIdInThread:E,body:typeof m.body=="string"?m.body:we.from(m.body),userName:m.author.name,userIconPath:m.author.iconPath,label:m.label,commentReactions:m.reactions?m.reactions.map($=>c($)):void 0,state:m.state,timestamp:m.timestamp?.toJSON()}}function c(p){return{label:p.label,iconPath:p.iconPath?of(p.iconPath):void 0,count:p.count,hasReacted:p.authorHasReacted,reactors:p.reactors&&p.reactors.length>0&&typeof p.reactors[0]!="string"?p.reactors.map(m=>m.name):p.reactors}}function l(p){return{label:p.label||"",count:p.count||0,iconPath:p.iconPath?y.revive(p.iconPath):"",authorHasReacted:p.hasReacted||!1,reactors:p.reactors?.map(m=>({name:m}))}}function u(p){if(p!==void 0)switch(p){case sl.Expanded:return Fo.Expanded;case sl.Collapsed:return Fo.Collapsed}return Fo.Collapsed}function h(p){let m;if(typeof p=="object"?m=p.resolved:m=p,m!==void 0)switch(m){case nl.Unresolved:return Cc.Unresolved;case nl.Resolved:return Cc.Resolved}return Cc.Unresolved}function f(p){let m;if(typeof p=="object"&&(m=p.applicability),m!==void 0)switch(m){case ol.Current:return Ic.Current;case ol.Outdated:return Ic.Outdated}return Ic.Current}return new s}var vp={},Ne={exports:vp};(function(e,t){if(typeof vp=="object"&&typeof Ne=="object")Ne.exports=t();else if(typeof define=="function"&&define.amd)define([],t);else{var i=t();for(var r in i)(typeof vp=="object"?vp:e)[r]=i[r]}})(typeof self<"u"?self:void 0,function(){return function(e){var t={};function i(r){if(t[r])return t[r].exports;var s=t[r]={i:r,l:!1,exports:{}};return e[r].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=e,i.c=t,i.d=function(r,s,n){i.o(r,s)||Object.defineProperty(r,s,{enumerable:!0,get:n})},i.r=function(r){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.t=function(r,s){if(1&s&&(r=i(r)),8&s||4&s&&typeof r=="object"&&r&&r.__esModule)return r;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:r}),2&s&&typeof r!="string")for(var o in r)i.d(n,o,function(a){return r[a]}.bind(null,o));return n},i.n=function(r){var s=r&&r.__esModule?function(){return r.default}:function(){return r};return i.d(s,"a",s),s},i.o=function(r,s){return Object.prototype.hasOwnProperty.call(r,s)},i.p="",i(i.s=0)}([function(e,t,i){(function(r){var s;t=e.exports=X,s=typeof r=="object"&&r.env&&r.env.NODE_DEBUG&&/\bsemver\b/i.test(r.env.NODE_DEBUG)?function(){var I=Array.prototype.slice.call(arguments,0);I.unshift("SEMVER"),console.log.apply(console,I)}:function(){},t.SEMVER_SPEC_VERSION="2.0.0";var n=256,o=Number.MAX_SAFE_INTEGER||9007199254740991,a=t.re=[],c=t.src=[],l=0,u=l++;c[u]="0|[1-9]\\d*";var h=l++;c[h]="[0-9]+";var f=l++;c[f]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=l++;c[p]="("+c[u]+")\\.("+c[u]+")\\.("+c[u]+")";var m=l++;c[m]="("+c[h]+")\\.("+c[h]+")\\.("+c[h]+")";var w=l++;c[w]="(?:"+c[u]+"|"+c[f]+")";var x=l++;c[x]="(?:"+c[h]+"|"+c[f]+")";var E=l++;c[E]="(?:-("+c[w]+"(?:\\."+c[w]+")*))";var $=l++;c[$]="(?:-?("+c[x]+"(?:\\."+c[x]+")*))";var A=l++;c[A]="[0-9A-Za-z-]+";var Q=l++;c[Q]="(?:\\+("+c[A]+"(?:\\."+c[A]+")*))";var W=l++,ce="v?"+c[p]+c[E]+"?"+c[Q]+"?";c[W]="^"+ce+"$";var U="[v=\\s]*"+c[m]+c[$]+"?"+c[Q]+"?",z=l++;c[z]="^"+U+"$";var q=l++;c[q]="((?:<|>)?=?)";var he=l++;c[he]=c[h]+"|x|X|\\*";var me=l++;c[me]=c[u]+"|x|X|\\*";var Ie=l++;c[Ie]="[v=\\s]*("+c[me]+")(?:\\.("+c[me]+")(?:\\.("+c[me]+")(?:"+c[E]+")?"+c[Q]+"?)?)?";var kt=l++;c[kt]="[v=\\s]*("+c[he]+")(?:\\.("+c[he]+")(?:\\.("+c[he]+")(?:"+c[$]+")?"+c[Q]+"?)?)?";var H=l++;c[H]="^"+c[q]+"\\s*"+c[Ie]+"$";var j=l++;c[j]="^"+c[q]+"\\s*"+c[kt]+"$";var G=l++;c[G]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var Z=l++;c[Z]="(?:~>?)";var K=l++;c[K]="(\\s*)"+c[Z]+"\\s+",a[K]=new RegExp(c[K],"g");var se=l++;c[se]="^"+c[Z]+c[Ie]+"$";var De=l++;c[De]="^"+c[Z]+c[kt]+"$";var Xe=l++;c[Xe]="(?:\\^)";var Ee=l++;c[Ee]="(\\s*)"+c[Xe]+"\\s+",a[Ee]=new RegExp(c[Ee],"g");var Rt=l++;c[Rt]="^"+c[Xe]+c[Ie]+"$";var ht=l++;c[ht]="^"+c[Xe]+c[kt]+"$";var Lt=l++;c[Lt]="^"+c[q]+"\\s*("+U+")$|^$";var ii=l++;c[ii]="^"+c[q]+"\\s*("+ce+")$|^$";var li=l++;c[li]="(\\s*)"+c[q]+"\\s*("+U+"|"+c[Ie]+")",a[li]=new RegExp(c[li],"g");var $t=l++;c[$t]="^\\s*("+c[Ie]+")\\s+-\\s+("+c[Ie]+")\\s*$";var tn=l++;c[tn]="^\\s*("+c[kt]+")\\s+-\\s+("+c[kt]+")\\s*$";var $u=l++;c[$u]="(<|>)?=?\\s*\\*";for(var Ti=0;Ti<35;Ti++)s(Ti,c[Ti]),a[Ti]||(a[Ti]=new RegExp(c[Ti]));function _i(I,R){if(I instanceof X)return I;if(typeof I!="string"||I.length>n||!(R?a[z]:a[W]).test(I))return null;try{return new X(I,R)}catch{return null}}function X(I,R){if(I instanceof X){if(I.loose===R)return I;I=I.version}else if(typeof I!="string")throw new TypeError("Invalid Version: "+I);if(I.length>n)throw new TypeError("version is longer than "+n+" characters");if(!(this instanceof X))return new X(I,R);s("SemVer",I,R),this.loose=R;var M=I.trim().match(R?a[z]:a[W]);if(!M)throw new TypeError("Invalid Version: "+I);if(this.raw=I,this.major=+M[1],this.minor=+M[2],this.patch=+M[3],this.major>o||this.major<0)throw new TypeError("Invalid major version");if(this.minor>o||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>o||this.patch<0)throw new TypeError("Invalid patch version");M[4]?this.prerelease=M[4].split(".").map(function(le){if(/^[0-9]+$/.test(le)){var xe=+le;if(xe>=0&&xe<o)return xe}return le}):this.prerelease=[],this.build=M[5]?M[5].split("."):[],this.format()}t.parse=_i,t.valid=function(I,R){var M=_i(I,R);return M?M.version:null},t.clean=function(I,R){var M=_i(I.trim().replace(/^[=v]+/,""),R);return M?M.version:null},t.SemVer=X,X.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},X.prototype.toString=function(){return this.version},X.prototype.compare=function(I){return s("SemVer.compare",this.version,this.loose,I),I instanceof X||(I=new X(I,this.loose)),this.compareMain(I)||this.comparePre(I)},X.prototype.compareMain=function(I){return I instanceof X||(I=new X(I,this.loose)),ms(this.major,I.major)||ms(this.minor,I.minor)||ms(this.patch,I.patch)},X.prototype.comparePre=function(I){if(I instanceof X||(I=new X(I,this.loose)),this.prerelease.length&&!I.prerelease.length)return-1;if(!this.prerelease.length&&I.prerelease.length)return 1;if(!this.prerelease.length&&!I.prerelease.length)return 0;var R=0;do{var M=this.prerelease[R],le=I.prerelease[R];if(s("prerelease compare",R,M,le),M===void 0&&le===void 0)return 0;if(le===void 0)return 1;if(M===void 0)return-1;if(M!==le)return ms(M,le)}while(++R)},X.prototype.inc=function(I,R){switch(I){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",R);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",R);break;case"prepatch":this.prerelease.length=0,this.inc("patch",R),this.inc("pre",R);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",R),this.inc("pre",R);break;case"major":this.minor===0&&this.patch===0&&this.prerelease.length!==0||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":this.patch===0&&this.prerelease.length!==0||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":if(this.prerelease.length===0)this.prerelease=[0];else{for(var M=this.prerelease.length;--M>=0;)typeof this.prerelease[M]=="number"&&(this.prerelease[M]++,M=-2);M===-1&&this.prerelease.push(0)}R&&(this.prerelease[0]===R?isNaN(this.prerelease[1])&&(this.prerelease=[R,0]):this.prerelease=[R,0]);break;default:throw new Error("invalid increment argument: "+I)}return this.format(),this.raw=this.version,this},t.inc=function(I,R,M,le){typeof M=="string"&&(le=M,M=void 0);try{return new X(I,M).inc(R,le).version}catch{return null}},t.diff=function(I,R){if(Ga(I,R))return null;var M=_i(I),le=_i(R);if(M.prerelease.length||le.prerelease.length){for(var xe in M)if((xe==="major"||xe==="minor"||xe==="patch")&&M[xe]!==le[xe])return"pre"+xe;return"prerelease"}for(var xe in M)if((xe==="major"||xe==="minor"||xe==="patch")&&M[xe]!==le[xe])return xe},t.compareIdentifiers=ms;var Cu=/^[0-9]+$/;function ms(I,R){var M=Cu.test(I),le=Cu.test(R);return M&&le&&(I=+I,R=+R),M&&!le?-1:le&&!M?1:I<R?-1:I>R?1:0}function Xt(I,R,M){return new X(I,M).compare(new X(R,M))}function br(I,R,M){return Xt(I,R,M)>0}function rn(I,R,M){return Xt(I,R,M)<0}function Ga(I,R,M){return Xt(I,R,M)===0}function Iu(I,R,M){return Xt(I,R,M)!==0}function Ja(I,R,M){return Xt(I,R,M)>=0}function Za(I,R,M){return Xt(I,R,M)<=0}function sn(I,R,M,le){var xe;switch(R){case"===":typeof I=="object"&&(I=I.version),typeof M=="object"&&(M=M.version),xe=I===M;break;case"!==":typeof I=="object"&&(I=I.version),typeof M=="object"&&(M=M.version),xe=I!==M;break;case"":case"=":case"==":xe=Ga(I,M,le);break;case"!=":xe=Iu(I,M,le);break;case">":xe=br(I,M,le);break;case">=":xe=Ja(I,M,le);break;case"<":xe=rn(I,M,le);break;case"<=":xe=Za(I,M,le);break;default:throw new TypeError("Invalid operator: "+R)}return xe}function yi(I,R){if(I instanceof yi){if(I.loose===R)return I;I=I.value}if(!(this instanceof yi))return new yi(I,R);s("comparator",I,R),this.loose=R,this.parse(I),this.semver===Br?this.value="":this.value=this.operator+this.semver.version,s("comp",this)}t.rcompareIdentifiers=function(I,R){return ms(R,I)},t.major=function(I,R){return new X(I,R).major},t.minor=function(I,R){return new X(I,R).minor},t.patch=function(I,R){return new X(I,R).patch},t.compare=Xt,t.compareLoose=function(I,R){return Xt(I,R,!0)},t.rcompare=function(I,R,M){return Xt(R,I,M)},t.sort=function(I,R){return I.sort(function(M,le){return t.compare(M,le,R)})},t.rsort=function(I,R){return I.sort(function(M,le){return t.rcompare(M,le,R)})},t.gt=br,t.lt=rn,t.eq=Ga,t.neq=Iu,t.gte=Ja,t.lte=Za,t.cmp=sn,t.Comparator=yi;var Br={};function ot(I,R){if(I instanceof ot)return I.loose===R?I:new ot(I.raw,R);if(I instanceof yi)return new ot(I.value,R);if(!(this instanceof ot))return new ot(I,R);if(this.loose=R,this.raw=I,this.set=I.split(/\s*\|\|\s*/).map(function(M){return this.parseRange(M.trim())},this).filter(function(M){return M.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+I);this.format()}function Kt(I){return!I||I.toLowerCase()==="x"||I==="*"}function rg(I,R,M,le,xe,Ct,_e,Nt,dt,qt,Wi,ct,Mt){return((R=Kt(M)?"":Kt(le)?">="+M+".0.0":Kt(xe)?">="+M+"."+le+".0":">="+R)+" "+(Nt=Kt(dt)?"":Kt(qt)?"<"+(+dt+1)+".0.0":Kt(Wi)?"<"+dt+"."+(+qt+1)+".0":ct?"<="+dt+"."+qt+"."+Wi+"-"+ct:"<="+Nt)).trim()}function vs(I,R){for(var M=0;M<I.length;M++)if(!I[M].test(R))return!1;if(R.prerelease.length){for(M=0;M<I.length;M++)if(s(I[M].semver),I[M].semver!==Br&&I[M].semver.prerelease.length>0){var le=I[M].semver;if(le.major===R.major&&le.minor===R.minor&&le.patch===R.patch)return!0}return!1}return!0}function go(I,R,M){try{R=new ot(R,M)}catch{return!1}return R.test(I)}function Ya(I,R,M,le){var xe,Ct,_e,Nt,dt;switch(I=new X(I,le),R=new ot(R,le),M){case">":xe=br,Ct=Za,_e=rn,Nt=">",dt=">=";break;case"<":xe=rn,Ct=Ja,_e=br,Nt="<",dt="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(go(I,R,le))return!1;for(var qt=0;qt<R.set.length;++qt){var Wi=R.set[qt],ct=null,Mt=null;if(Wi.forEach(function(ri){ri.semver===Br&&(ri=new yi(">=0.0.0")),ct=ct||ri,Mt=Mt||ri,xe(ri.semver,ct.semver,le)?ct=ri:_e(ri.semver,Mt.semver,le)&&(Mt=ri)}),ct.operator===Nt||ct.operator===dt||(!Mt.operator||Mt.operator===Nt)&&Ct(I,Mt.semver)||Mt.operator===dt&&_e(I,Mt.semver))return!1}return!0}yi.prototype.parse=function(I){var R=this.loose?a[Lt]:a[ii],M=I.match(R);if(!M)throw new TypeError("Invalid comparator: "+I);this.operator=M[1],this.operator==="="&&(this.operator=""),M[2]?this.semver=new X(M[2],this.loose):this.semver=Br},yi.prototype.toString=function(){return this.value},yi.prototype.test=function(I){return s("Comparator.test",I,this.loose),this.semver===Br||(typeof I=="string"&&(I=new X(I,this.loose)),sn(I,this.operator,this.semver,this.loose))},yi.prototype.intersects=function(I,R){if(!(I instanceof yi))throw new TypeError("a Comparator is required");var M;if(this.operator==="")return M=new ot(I.value,R),go(this.value,M,R);if(I.operator==="")return M=new ot(this.value,R),go(I.semver,M,R);var le=!(this.operator!==">="&&this.operator!==">"||I.operator!==">="&&I.operator!==">"),xe=!(this.operator!=="<="&&this.operator!=="<"||I.operator!=="<="&&I.operator!=="<"),Ct=this.semver.version===I.semver.version,_e=!(this.operator!==">="&&this.operator!=="<="||I.operator!==">="&&I.operator!=="<="),Nt=sn(this.semver,"<",I.semver,R)&&(this.operator===">="||this.operator===">")&&(I.operator==="<="||I.operator==="<"),dt=sn(this.semver,">",I.semver,R)&&(this.operator==="<="||this.operator==="<")&&(I.operator===">="||I.operator===">");return le||xe||Ct&&_e||Nt||dt},t.Range=ot,ot.prototype.format=function(){return this.range=this.set.map(function(I){return I.join(" ").trim()}).join("||").trim(),this.range},ot.prototype.toString=function(){return this.range},ot.prototype.parseRange=function(I){var R=this.loose;I=I.trim(),s("range",I,R);var M=R?a[tn]:a[$t];I=I.replace(M,rg),s("hyphen replace",I),I=I.replace(a[li],"$1$2$3"),s("comparator trim",I,a[li]),I=(I=(I=I.replace(a[K],"$1~")).replace(a[Ee],"$1^")).split(/\s+/).join(" ");var le=R?a[Lt]:a[ii],xe=I.split(" ").map(function(Ct){return function(_e,Nt){return s("comp",_e),_e=function(dt,qt){return dt.trim().split(/\s+/).map(function(Wi){return function(ct,Mt){s("caret",ct,Mt);var ri=Mt?a[ht]:a[Rt];return ct.replace(ri,function(S,ve,Te,_,pe){var Ht;return s("caret",ct,S,ve,Te,_,pe),Kt(ve)?Ht="":Kt(Te)?Ht=">="+ve+".0.0 <"+(+ve+1)+".0.0":Kt(_)?Ht=ve==="0"?">="+ve+"."+Te+".0 <"+ve+"."+(+Te+1)+".0":">="+ve+"."+Te+".0 <"+(+ve+1)+".0.0":pe?(s("replaceCaret pr",pe),pe.charAt(0)!=="-"&&(pe="-"+pe),Ht=ve==="0"?Te==="0"?">="+ve+"."+Te+"."+_+pe+" <"+ve+"."+Te+"."+(+_+1):">="+ve+"."+Te+"."+_+pe+" <"+ve+"."+(+Te+1)+".0":">="+ve+"."+Te+"."+_+pe+" <"+(+ve+1)+".0.0"):(s("no pr"),Ht=ve==="0"?Te==="0"?">="+ve+"."+Te+"."+_+" <"+ve+"."+Te+"."+(+_+1):">="+ve+"."+Te+"."+_+" <"+ve+"."+(+Te+1)+".0":">="+ve+"."+Te+"."+_+" <"+(+ve+1)+".0.0"),s("caret return",Ht),Ht})}(Wi,qt)}).join(" ")}(_e,Nt),s("caret",_e),_e=function(dt,qt){return dt.trim().split(/\s+/).map(function(Wi){return function(ct,Mt){var ri=Mt?a[De]:a[se];return ct.replace(ri,function(S,ve,Te,_,pe){var Ht;return s("tilde",ct,S,ve,Te,_,pe),Kt(ve)?Ht="":Kt(Te)?Ht=">="+ve+".0.0 <"+(+ve+1)+".0.0":Kt(_)?Ht=">="+ve+"."+Te+".0 <"+ve+"."+(+Te+1)+".0":pe?(s("replaceTilde pr",pe),pe.charAt(0)!=="-"&&(pe="-"+pe),Ht=">="+ve+"."+Te+"."+_+pe+" <"+ve+"."+(+Te+1)+".0"):Ht=">="+ve+"."+Te+"."+_+" <"+ve+"."+(+Te+1)+".0",s("tilde return",Ht),Ht})}(Wi,qt)}).join(" ")}(_e,Nt),s("tildes",_e),_e=function(dt,qt){return s("replaceXRanges",dt,qt),dt.split(/\s+/).map(function(Wi){return function(ct,Mt){ct=ct.trim();var ri=Mt?a[j]:a[H];return ct.replace(ri,function(S,ve,Te,_,pe,Ht){s("xRange",ct,S,ve,Te,_,pe,Ht);var Du=Kt(Te),ws=Du||Kt(_),nn=ws||Kt(pe);return ve==="="&&nn&&(ve=""),Du?S=ve===">"||ve==="<"?"<0.0.0":"*":ve&&nn?(ws&&(_=0),nn&&(pe=0),ve===">"?(ve=">=",ws?(Te=+Te+1,_=0,pe=0):nn&&(_=+_+1,pe=0)):ve==="<="&&(ve="<",ws?Te=+Te+1:_=+_+1),S=ve+Te+"."+_+"."+pe):ws?S=">="+Te+".0.0 <"+(+Te+1)+".0.0":nn&&(S=">="+Te+"."+_+".0 <"+Te+"."+(+_+1)+".0"),s("xRange return",S),S})}(Wi,qt)}).join(" ")}(_e,Nt),s("xrange",_e),_e=function(dt,qt){return s("replaceStars",dt,qt),dt.trim().replace(a[$u],"")}(_e,Nt),s("stars",_e),_e}(Ct,R)}).join(" ").split(/\s+/);return this.loose&&(xe=xe.filter(function(Ct){return!!Ct.match(le)})),xe=xe.map(function(Ct){return new yi(Ct,R)})},ot.prototype.intersects=function(I,R){if(!(I instanceof ot))throw new TypeError("a Range is required");return this.set.some(function(M){return M.every(function(le){return I.set.some(function(xe){return xe.every(function(Ct){return le.intersects(Ct,R)})})})})},t.toComparators=function(I,R){return new ot(I,R).set.map(function(M){return M.map(function(le){return le.value}).join(" ").trim().split(" ")})},ot.prototype.test=function(I){if(!I)return!1;typeof I=="string"&&(I=new X(I,this.loose));for(var R=0;R<this.set.length;R++)if(vs(this.set[R],I))return!0;return!1},t.satisfies=go,t.maxSatisfying=function(I,R,M){var le=null,xe=null;try{var Ct=new ot(R,M)}catch{return null}return I.forEach(function(_e){Ct.test(_e)&&(le&&xe.compare(_e)!==-1||(xe=new X(le=_e,M)))}),le},t.minSatisfying=function(I,R,M){var le=null,xe=null;try{var Ct=new ot(R,M)}catch{return null}return I.forEach(function(_e){Ct.test(_e)&&(le&&xe.compare(_e)!==1||(xe=new X(le=_e,M)))}),le},t.validRange=function(I,R){try{return new ot(I,R).range||"*"}catch{return null}},t.ltr=function(I,R,M){return Ya(I,R,"<",M)},t.gtr=function(I,R,M){return Ya(I,R,">",M)},t.outside=Ya,t.prerelease=function(I,R){var M=_i(I,R);return M&&M.prerelease.length?M.prerelease:null},t.intersects=function(I,R,M){return I=new ot(I,M),R=new ot(R,M),I.intersects(R)},t.coerce=function(I){if(I instanceof X)return I;if(typeof I!="string")return null;var R=I.match(a[G]);return R==null?null:_i((R[1]||"0")+"."+(R[2]||"0")+"."+(R[3]||"0"))}}).call(this,i(1))},function(e,t){var i,r,s=e.exports={};function n(){throw new Error("setTimeout has not been defined")}function o(){throw new Error("clearTimeout has not been defined")}function a(x){if(i===setTimeout)return setTimeout(x,0);if((i===n||!i)&&setTimeout)return i=setTimeout,setTimeout(x,0);try{return i(x,0)}catch{try{return i.call(null,x,0)}catch{return i.call(this,x,0)}}}(function(){try{i=typeof setTimeout=="function"?setTimeout:n}catch{i=n}try{r=typeof clearTimeout=="function"?clearTimeout:o}catch{r=o}})();var c,l=[],u=!1,h=-1;function f(){u&&c&&(u=!1,c.length?l=c.concat(l):h=-1,l.length&&p())}function p(){if(!u){var x=a(f);u=!0;for(var E=l.length;E;){for(c=l,l=[];++h<E;)c&&c[h].run();h=-1,E=l.length}c=null,u=!1,function($){if(r===clearTimeout)return clearTimeout($);if((r===o||!r)&&clearTimeout)return r=clearTimeout,clearTimeout($);try{r($)}catch{try{return r.call(null,$)}catch{return r.call(this,$)}}}(x)}}function m(x,E){this.fun=x,this.array=E}function w(){}s.nextTick=function(x){var E=new Array(arguments.length-1);if(arguments.length>1)for(var $=1;$<arguments.length;$++)E[$-1]=arguments[$];l.push(new m(x,E)),l.length!==1||u||a(p)},m.prototype.run=function(){this.fun.apply(null,this.array)},s.title="browser",s.browser=!0,s.env={},s.argv=[],s.version="",s.versions={},s.on=w,s.addListener=w,s.once=w,s.off=w,s.removeListener=w,s.removeAllListeners=w,s.emit=w,s.prependListener=w,s.prependOnceListener=w,s.listeners=function(x){return[]},s.binding=function(x){throw new Error("process.binding is not supported")},s.cwd=function(){return"/"},s.chdir=function(x){throw new Error("process.chdir is not supported")},s.umask=function(){return 0}}])});var _G=Ne.exports.SEMVER_SPEC_VERSION,WG=Ne.exports.parse,VG=Ne.exports.valid,qG=Ne.exports.coerce,GG=Ne.exports.clean,JG=Ne.exports.inc,ZG=Ne.exports.major,YG=Ne.exports.minor,QG=Ne.exports.patch,XG=Ne.exports.prerelease,KG=Ne.exports.gt,eJ=Ne.exports.gte,tJ=Ne.exports.lt,iJ=Ne.exports.lte,rJ=Ne.exports.eq,sJ=Ne.exports.neq,nJ=Ne.exports.cmp,oJ=Ne.exports.compare,aJ=Ne.exports.rcompare,cJ=Ne.exports.compareIdentifiers,lJ=Ne.exports.rcompareIdentifiers,uJ=Ne.exports.compareBuild,hJ=Ne.exports.sort,dJ=Ne.exports.rsort,fJ=Ne.exports.diff,pJ=Ne.exports.validRange,gJ=Ne.exports.satisfies,mJ=Ne.exports.maxSatisfying,vJ=Ne.exports.minSatisfying,wJ=Ne.exports.minVersion,bJ=Ne.exports.gtr,yJ=Ne.exports.ltr,xJ=Ne.exports.outside,EJ=Ne.exports.intersects,SJ=Ne.exports.SemVer,kJ=Ne.exports.Comparator,$J=Ne.exports.Range,gk=/^(\^|>=)?((\d+)|x)\.((\d+)|x)\.((\d+)|x)(\-.*)?$/,KO=/^-(\d{4})(\d{2})(\d{2})$/;function eU(e){return e=e.trim(),e==="*"||gk.test(e)}function mk(e){if(!eU(e))return null;if(e=e.trim(),e==="*")return{hasCaret:!1,hasGreaterEquals:!1,majorBase:0,majorMustEqual:!1,minorBase:0,minorMustEqual:!1,patchBase:0,patchMustEqual:!1,preRelease:null};const t=e.match(gk);return t?{hasCaret:t[1]==="^",hasGreaterEquals:t[1]===">=",majorBase:t[2]==="x"?0:parseInt(t[2],10),majorMustEqual:t[2]!=="x",minorBase:t[4]==="x"?0:parseInt(t[4],10),minorMustEqual:t[4]!=="x",patchBase:t[6]==="x"?0:parseInt(t[6],10),patchMustEqual:t[6]!=="x",preRelease:t[8]||null}:null}function vk(e){if(!e)return null;const t=e.majorBase,i=e.majorMustEqual,r=e.minorBase;let s=e.minorMustEqual;const n=e.patchBase;let o=e.patchMustEqual;e.hasCaret&&(t===0||(s=!1),o=!1);let a=0;if(e.preRelease){const c=KO.exec(e.preRelease);if(c){const[,l,u,h]=c;a=Date.UTC(Number(l),Number(u)-1,Number(h))}}return{majorBase:t,majorMustEqual:i,minorBase:r,minorMustEqual:s,patchBase:n,patchMustEqual:o,isMinimum:e.hasGreaterEquals,notBefore:a}}var tU=class{constructor(){this.buffers=[]}add(e){let t=this.buffers.indexOf(e);return t<0&&(t=this.buffers.length,this.buffers.push(e)),t}};function iU(e,t){if(t.serializeBuffersForPostMessage){const i=new tU,s=JSON.stringify(e,(o,a)=>{if(a instanceof ArrayBuffer)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a)};if(ArrayBuffer.isView(a)){const c=rU(a);if(c)return{$$vscode_array_buffer_reference$$:!0,index:i.add(a.buffer),view:{type:c,byteLength:a.byteLength,byteOffset:a.byteOffset}}}return a}),n=i.buffers.map(o=>{const a=new Uint8Array(o);return ae.wrap(a)});return{message:s,buffers:n}}else return{message:JSON.stringify(e),buffers:[]}}function rU(e){switch(e.constructor.name){case"Int8Array":return 1;case"Uint8Array":return 2;case"Uint8ClampedArray":return 3;case"Int16Array":return 4;case"Uint16Array":return 5;case"Int32Array":return 6;case"Uint32Array":return 7;case"Float32Array":return 8;case"Float64Array":return 9;case"BigInt64Array":return 10;case"BigUint64Array":return 11}}function sU(e,t){const i=t.map(n=>{const o=new ArrayBuffer(n.byteLength);return new Uint8Array(o).set(n.buffer),o}),r=t.length?(n,o)=>{if(o&&typeof o=="object"&&o.$$vscode_array_buffer_reference$$){const a=o,{index:c}=a,l=i[c];if(a.view)switch(a.view.type){case 1:return new Int8Array(l,a.view.byteOffset,a.view.byteLength/Int8Array.BYTES_PER_ELEMENT);case 2:return new Uint8Array(l,a.view.byteOffset,a.view.byteLength/Uint8Array.BYTES_PER_ELEMENT);case 3:return new Uint8ClampedArray(l,a.view.byteOffset,a.view.byteLength/Uint8ClampedArray.BYTES_PER_ELEMENT);case 4:return new Int16Array(l,a.view.byteOffset,a.view.byteLength/Int16Array.BYTES_PER_ELEMENT);case 5:return new Uint16Array(l,a.view.byteOffset,a.view.byteLength/Uint16Array.BYTES_PER_ELEMENT);case 6:return new Int32Array(l,a.view.byteOffset,a.view.byteLength/Int32Array.BYTES_PER_ELEMENT);case 7:return new Uint32Array(l,a.view.byteOffset,a.view.byteLength/Uint32Array.BYTES_PER_ELEMENT);case 8:return new Float32Array(l,a.view.byteOffset,a.view.byteLength/Float32Array.BYTES_PER_ELEMENT);case 9:return new Float64Array(l,a.view.byteOffset,a.view.byteLength/Float64Array.BYTES_PER_ELEMENT);case 10:return new BigInt64Array(l,a.view.byteOffset,a.view.byteLength/BigInt64Array.BYTES_PER_ELEMENT);case 11:return new BigUint64Array(l,a.view.byteOffset,a.view.byteLength/BigUint64Array.BYTES_PER_ELEMENT);default:throw new Error("Unknown array buffer view type")}return l}return o}:void 0;return{message:JSON.parse(e,r),arrayBuffers:i}}var nU=class{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;constructor(e,t,i,r,s,n,o){this.#a="",this.#c=!1,this.#l=!1,this._onMessageEmitter=new P,this.onDidReceiveMessage=this._onMessageEmitter.event,this.#h=new P,this._onDidDispose=this.#h.event,this.#e=e,this.#t=t,this.#o=i,this.#r=r,this.#n=s,this.#s=n,this.#u=Ha(n),this.#d=oU(n),this.#i=o}#h;dispose(){this.#c=!0,this.#h.fire(),this.#h.dispose(),this._onMessageEmitter.dispose()}asWebviewUri(e){return this.#l=!0,iu(e,this.#r)}get cspSource(){const e=this.#s.extensionLocation;if(e.scheme===V.https||e.scheme===V.http){let t=e.toString();return t.endsWith("/")||(t+="/"),t+" "+Fw}return Fw}get html(){return this.a(),this.#a}set html(e){this.a(),this.#a!==e&&(this.#a=e,this.#d&&!this.#l&&/(["'])vscode-resource:([^\s'"]+?)(["'])/i.test(e)&&(this.#l=!0,this.#i.report("Webview vscode-resource: uris",this.#s,"Please migrate to use the 'webview.asWebviewUri' api instead: https://aka.ms/vscode-webview-use-aswebviewuri")),this.#t.$setHtml(this.#e,this.b(e)))}get options(){return this.a(),this.#o}set options(e){this.a(),oi(this.#o,e)||this.#t.$setOptions(this.#e,wk(this.#s,this.#n,e)),this.#o=e}async postMessage(e){if(this.#c)return!1;const t=iU(e,{serializeBuffersForPostMessage:this.#u});return this.#t.$postMessage(this.#e,t.message,...t.buffers)}a(){if(this.#c)throw new Error("Webview is disposed")}b(e){if(!this.#d)return e;const t=this.#s.extensionLocation?.scheme===V.vscodeRemote,i=this.#s.extensionLocation.scheme===V.vscodeRemote?this.#s.extensionLocation.authority:void 0;return e.replace(/(["'])(?:vscode-resource):(\/\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=iu(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`}).replace(/(["'])(?:vscode-webview-resource):(\/\/[^\s\/'"]+\/([^\s\/'"]+?)(?=\/))?([^\s'"]+?)(["'])/gi,(r,s,n,o,a,c)=>{const l=y.from({scheme:o||"file",path:decodeURIComponent(a)}),u=iu(l,{isRemote:t,authority:i}).toString();return`${s}${u}${c}`})}};function Ha(e){try{const t=vk(mk(e.engines.vscode));return!!t&&t.majorBase>=1&&t.minorBase>=57}catch{return!1}}function oU(e){try{const t=vk(mk(e.engines.vscode));return t?t.majorBase<1||t.majorBase===1&&t.minorBase<60:!1}catch{return!1}}var aU=class extends ne{constructor(e,t,i,r,s){super(),this.c=t,this.f=i,this.g=r,this.h=s,this.b=new Map,this.a=e.getProxy(J.MainThreadWebviews)}dispose(){super.dispose();for(const e of this.b.values())e.dispose();this.b.clear()}$onMessage(e,t,i){const r=this.j(e);if(r){const{message:s}=sU(t,i.value);r._onMessageEmitter.fire(s)}}$onMissingCsp(e,t){this.g.warn(`${t} created a webview without a content security policy: https://aka.ms/vscode-webview-missing-csp`)}createNewWebview(e,t,i){const r=new nU(e,this.a,cU(t),this.c,this.f,i,this.h);this.b.set(e,r);const s=r._onDidDispose(()=>{s.dispose(),this.deleteWebview(e)});return r}deleteWebview(e){this.b.delete(e)}j(e){return this.b.get(e)}};function wp(e){return{id:e.identifier,location:e.extensionLocation}}function wk(e,t,i){return{enableCommandUris:i.enableCommandUris,enableScripts:i.enableScripts,enableForms:i.enableForms,portMapping:i.portMapping,localResourceRoots:i.localResourceRoots||lU(e,t)}}function cU(e){return{enableCommandUris:e.enableCommandUris,enableScripts:e.enableScripts,enableForms:e.enableForms,portMapping:e.portMapping,localResourceRoots:e.localResourceRoots?.map(t=>y.from(t))}}function lU(e,t){return[...(t?.getWorkspaceFolders()||[]).map(i=>i.uri),e.extensionLocation]}var mr=class AC{static{this.a=!1}constructor(t){this.d=t,this.b=new Map,this.c=1}add(t){const i=this.c++;return this.b.set(i,t),this.e(),i}get(t,i){return this.b.has(t)?this.b.get(t)[i]:void 0}delete(t){this.b.delete(t),this.e()}e(){AC.a&&console.log(`${this.d} cache size - ${this.b.size}`)}},uU=class{constructor(e,t){this.document=e,this.b=t,this.a=1,this.c=new mr("custom documents")}addEdit(e){return this.c.add([e])}async undo(e,t){await this.f(e).undo(),t||this.disposeBackup()}async redo(e,t){await this.f(e).redo(),t||this.disposeBackup()}disposeEdits(e){for(const t of e)this.c.delete(t)}getNewBackupUri(){if(!this.b)throw new Error("Backup requires a valid storage path");const e=mU(this.document.uri)+this.a++;return Zt(this.b,e)}updateBackup(e){this.d?.delete(),this.d=e}disposeBackup(){this.d?.delete(),this.d=void 0}f(e){const t=this.c.get(e,0);if(!t)throw new Error("No edit found");return t}},hU=class{constructor(){this.a=new Map}get(e,t){return this.a.get(this.b(e,t))}add(e,t,i){const r=this.b(e,t.uri);if(this.a.has(r))throw new Error(`Document already exists for viewType:${e} resource:${t.uri}`);const s=new uU(t,i);return this.a.set(r,s),s}delete(e,t){const i=this.b(e,t.uri);this.a.delete(i)}b(e,t){return`${e}@@@${t}`}},bk;(function(e){e[e.Text=0]="Text",e[e.Custom=1]="Custom"})(bk||(bk={}));var dU=class{constructor(){this.a=new Map}addTextProvider(e,t,i){return this.b(e,{type:0,extension:t,provider:i})}addCustomProvider(e,t,i){return this.b(e,{type:1,extension:t,provider:i})}get(e){return this.a.get(e)}b(e,t){if(this.a.has(e))throw new Error(`Provider for viewType:${e} already registered`);return this.a.set(e,t),new Pe(()=>this.a.delete(e))}},fU=class{constructor(e,t,i,r,s){this.d=t,this.f=i,this.g=r,this.h=s,this.b=new dU,this.c=new hU,this.a=e.getProxy(J.MainThreadCustomEditors)}registerCustomEditorProvider(e,t,i,r){const s=new ue;return pU(i)?(s.add(this.b.addTextProvider(t,e,i)),this.a.$registerTextEditorProvider(wp(e),t,r.webviewOptions||{},{supportsMove:!!i.moveCustomTextEditor},Ha(e))):(s.add(this.b.addCustomProvider(t,e,i)),bp(i)&&s.add(i.onDidChangeCustomDocument(n=>{const o=this.i(t,n.document.uri);if(gU(n)){const a=o.addEdit(n);this.a.$onDidEdit(n.document.uri,t,a,n.label)}else this.a.$onContentChange(n.document.uri,t)})),this.a.$registerCustomEditorProvider(wp(e),t,r.webviewOptions||{},!!r.supportsMultipleEditorsPerDocument,Ha(e))),Pe.from(s,new Pe(()=>{this.a.$unregisterEditorProvider(t)}))}async $createCustomDocument(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No provider found for '${t}'`);if(n.type!==1)throw new Error(`Invalid provide type for '${t}'`);const o=y.revive(e),a=await n.provider.openCustomDocument(o,{backupId:i,untitledDocumentData:r?.buffer},s);let c;return bp(n.provider)&&this.f&&(c=this.f.workspaceValue(n.extension)??this.f.globalValue(n.extension)),this.c.add(t,a,c),{editable:bp(n.provider)}}async $disposeCustomDocument(e,t){const i=this.b.get(t);if(!i)throw new Error(`No provider found for '${t}'`);if(i.type!==1)throw new Error(`Invalid provider type for '${t}'`);const r=y.revive(e),{document:s}=this.i(t,r);this.c.delete(t,s),s.dispose()}async $resolveCustomEditor(e,t,i,r,s,n){const o=this.b.get(i);if(!o)throw new Error(`No provider found for '${i}'`);const a=Pt.to(s),c=this.g.createNewWebview(t,r.contentOptions,o.extension),l=this.h.createNewWebviewPanel(t,i,r.title,a,r.options,c,r.active),u=y.revive(e);switch(o.type){case 1:{const{document:h}=this.i(i,u);return o.provider.resolveCustomEditor(h,l,n)}case 0:{const h=this.d.getDocument(u);return o.provider.resolveCustomTextEditor(h,l,n)}default:throw new Error("Unknown webview provider type")}}$disposeEdits(e,t,i){this.i(t,e).disposeEdits(i)}async $onMoveCustomEditor(e,t,i){const r=this.b.get(i);if(!r)throw new Error(`No provider found for '${i}'`);if(!r.provider.moveCustomTextEditor)throw new Error(`Provider does not implement move '${i}'`);const s=this.h.getWebviewPanel(e);if(!s)throw new Error("No webview found");const n=y.revive(t),o=this.d.getDocument(n);await r.provider.moveCustomTextEditor(o,s,et.None)}async $undo(e,t,i,r){return this.i(t,e).undo(i,r)}async $redo(e,t,i,r){return this.i(t,e).redo(i,r)}async $revert(e,t,i){const r=this.i(t,e);await this.j(t).revertCustomDocument(r.document,i),r.disposeBackup()}async $onSave(e,t,i){const r=this.i(t,e);await this.j(t).saveCustomDocument(r.document,i),r.disposeBackup()}async $onSaveAs(e,t,i,r){const s=this.i(t,e);return this.j(t).saveCustomDocumentAs(s.document,y.revive(i),r)}async $backup(e,t,i){const r=this.i(t,e),n=await this.j(t).backupCustomDocument(r.document,{destination:r.getNewBackupUri()},i);return r.updateBackup(n),n.id}i(e,t){const i=this.c.get(e,y.revive(t));if(!i)throw new Error("No custom document found");return i}j(e){const i=this.b.get(e)?.provider;if(!i||!bp(i))throw new Error("Custom document is not editable");return i}};function bp(e){return!!e.onDidChangeCustomDocument}function pU(e){return typeof e.resolveCustomTextEditor=="function"}function gU(e){return typeof e.undo=="function"&&typeof e.redo=="function"}function mU(e){const t=e.scheme===V.file||e.scheme===V.untitled?e.fsPath:e.toString();return pc(t)+""}var co,yk=class TC{#e;#t;#i;constructor(t,i,r,s,n,o,a,c){this.d=t,this.e=i,this.f=r,this.g=s,this.h=n,this.c=!1,this.f=Math.max(s,r),this.#i=new Ft(l=>o.getComparisonKey(l)),this.#e=a,this.#t=c}dispose(){this.c||(this.#t.fire([...this.#i.keys()]),this.#e?.$clear(this.e),this.#i.clear(),this.c=!0)}get name(){return this.j(),this.d}set(t,i){if(!t){this.clear();return}this.j();let r=[];if(y.isUri(t)){if(!i){this.delete(t);return}this.#i.set(t,i.slice()),r=[t]}else if(Array.isArray(t)){r=[];let o;t=[...t].sort(TC.k);for(const a of t){const[c,l]=a;if((!o||c.toString()!==o.toString())&&(o&&this.#i.get(o).length===0&&this.#i.delete(o),o=c,r.push(c),this.#i.set(c,[])),l)this.#i.get(c)?.push(...l);else{const u=this.#i.get(c);u&&(u.length=0)}}}if(this.#t.fire(r),!this.#e)return;const s=[];let n=0;for(const o of r){let a=[];const c=this.#i.get(o);if(c)if(c.length>this.g){a=[];const l=[Qt.Error,Qt.Warning,Qt.Information,Qt.Hint];e:for(let u=0;u<4;u++)for(const h of c)if(h.severity===l[u]&&a.push({...ga.from(h),modelVersionId:this.h(o)})===this.g)break e;a.push({severity:fi.Info,message:d(2895,null,c.length-this.g),startLineNumber:a[a.length-1].startLineNumber,startColumn:a[a.length-1].startColumn,endLineNumber:a[a.length-1].endLineNumber,endColumn:a[a.length-1].endColumn})}else a=c.map(l=>({...ga.from(l),modelVersionId:this.h(o)}));if(s.push([o,a]),n+=a.length,n>this.f)break}this.#e.$changeMany(this.e,s)}delete(t){this.j(),this.#t.fire([t]),this.#i.delete(t),this.#e?.$changeMany(this.e,[[t,void 0]])}clear(){this.j(),this.#t.fire([...this.#i.keys()]),this.#i.clear(),this.#e?.$clear(this.e)}forEach(t,i){this.j();for(const[r,s]of this)t.call(i,r,s,this)}*[Symbol.iterator](){this.j();for(const t of this.#i.keys())yield[t,this.get(t)]}get(t){this.j();const i=this.#i.get(t);return Array.isArray(i)?Object.freeze(i.slice(0)):[]}has(t){return this.j(),Array.isArray(this.#i.get(t))}j(){if(this.c)throw new Error("illegal state - object is disposed")}static k(t,i){return t[0].toString()<i[0].toString()?-1:t[0].toString()>i[0].toString()?1:0}},Ow=class{static{co=this}static{this.c=0}static{this.d=1e3}static{this.e=1.1*this.d}static _mapper(t){const i=new Ft;for(const r of t)i.set(r,r);return{uris:Object.freeze(Array.from(i.values()))}}constructor(t,i,r,s){this.j=i,this.k=r,this.l=s,this.g=new Map,this.h=new l3({merge:n=>n.flat(),delay:50}),this.onDidChangeDiagnostics=lt.map(this.h.event,co._mapper),this.f=t.getProxy(J.MainThreadDiagnostics)}createDiagnosticCollection(t,i){const{g:r,f:s,h:n,j:o,k:a,l:c}=this,l=new class{$changeMany(f,p){s.$changeMany(f,p),o.trace("[DiagnosticCollection] change many (extension, owner, uris)",t.value,f,p.length===0?"CLEARING":p)}$clear(f){s.$clear(f),o.trace("[DiagnosticCollection] remove all (extension, owner)",t.value,f)}dispose(){s.dispose()}};let u;if(!i)i="_generated_diagnostic_collection_name_#"+co.c++,u=i;else if(!r.has(i))u=i;else{this.j.warn(`DiagnosticCollection with name '${i}' does already exist.`);do u=i+co.c++;while(r.has(u))}return new class extends yk{constructor(){super(i,u,co.e,co.d,f=>c.getDocument(f)?.version,a.extUri,l,n),r.set(u,this)}dispose(){super.dispose(),r.delete(u)}}}getDiagnostics(t){if(t)return this.m(t);{const i=new Map,r=[];for(const s of this.g.values())s.forEach((n,o)=>{let a=i.get(n.toString());typeof a>"u"&&(a=r.length,i.set(n.toString(),a),r.push([n,[]])),r[a][1]=r[a][1].concat(...o)});return r}}m(t){let i=[];for(const r of this.g.values())r.has(t)&&(i=i.concat(r.get(t)));return i}$acceptMarkersChange(t){if(!this.n){const i="_generated_mirror",r=new yk(i,i,Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,s=>{},this.k.extUri,void 0,this.h);this.g.set(i,r),this.n=r}for(const[i,r]of t)this.n.set(y.revive(i),r.map(ga.to))}};Ow=co=__decorate([__param(1,We),__param(2,Ro)],Ow);var vU=class{constructor(e){this.a=e.getProxy(J.MainThreadDialogs)}showOpenDialog(e){return this.a.$showOpenDialog(e).then(t=>t?t.map(i=>y.revive(i)):void 0)}showSaveDialog(e){return this.a.$showSaveDialog(e).then(t=>t?y.revive(t):void 0)}},wU=class RC{static{this.a=0}constructor(t,i,r){this.d=i,this.e=r,this.b=new Map,this.c=t.getProxy(J.MainThreadDocumentContentProviders)}registerTextDocumentContentProvider(t,i){if(Object.keys(V).indexOf(t)>=0)throw new Error(`scheme '${t}' already registered`);const r=RC.a++;this.b.set(r,i),this.c.$registerTextContentProvider(r,t);let s;if(typeof i.onDidChange=="function"){let n;s=i.onDidChange(async o=>{if(o.scheme!==t){this.e.warn(`Provider for scheme '${t}' is firing event for schema '${o.scheme}' which will be IGNORED`);return}if(!this.d.getDocument(o))return;n&&await n;const a=this.$provideTextDocumentContent(r,o).then(async c=>{if(!c&&typeof c!="string")return;const l=this.d.getDocument(o);if(!l)return;const u=f4(c);if(!l.equalLines(u))return this.c.$onVirtualDocumentChange(o,c)}).catch(Gt).finally(()=>{n===a&&(n=void 0)});n=a})}return new Pe(()=>{this.b.delete(r)&&this.c.$unregisterTextContentProvider(r),s&&(s.dispose(),s=void 0)})}$provideTextDocumentContent(t,i){const r=this.b.get(t);return r?Promise.resolve(r.provideTextDocumentContent(y.revive(i),et.None)):Promise.reject(new Error(`unsupported uri-scheme: ${i.scheme}`))}},bU=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.c=e,this.d=t,this.f=i,this.g=r,this.a=new ys,this.b=new WeakMap}dispose(){this.a.clear()}getOnWillSaveTextDocumentEvent(e){return(t,i,r)=>{const n={dispose:this.a.push([t,i,e])};return Array.isArray(r)&&r.push(n),n}}async $participateInSave(e,t){const i=y.revive(e);let r=!1;const s=setTimeout(()=>r=!0,this.g.timeout),n=[];try{for(const o of[...this.a]){if(r)break;const a=this.d.getDocument(i),c=await this.h(o,{document:a,reason:mf.to(t)});n.push(c)}}finally{clearTimeout(s)}return n}h([e,t,i],r){const s=this.b.get(e);return typeof s=="number"&&s>this.g.errors?Promise.resolve(!1):this.i(i,e,t,r).then(()=>!0,n=>{if(this.c.error(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' threw ERROR`),this.c.error(n),!(n instanceof Error)||n.message!=="concurrent_edits"){const o=this.b.get(e);this.b.set(e,o?o+1:1),typeof o=="number"&&o>this.g.errors&&this.c.info(`onWillSaveTextDocument-listener from extension '${i.identifier.value}' will now be IGNORED because of timeouts and/or errors`)}return!1})}i(e,t,i,r){const s=[],n=Date.now(),{document:o,reason:a}=r,{version:c}=o,l=Object.freeze({document:o,reason:a,waitUntil(u){if(Object.isFrozen(s))throw ag("waitUntil can not be called async");s.push(Promise.resolve(u))}});try{t.apply(i,[l])}catch(u){return Promise.reject(u)}return Object.freeze(s),new Promise((u,h)=>{const f=setTimeout(()=>h(new Error("timeout")),this.g.timeout);return Promise.all(s).then(p=>{this.c.debug(`onWillSaveTextDocument-listener from extension '${e.identifier.value}' finished after ${Date.now()-n}ms`),clearTimeout(f),u(p)}).catch(p=>{clearTimeout(f),h(p)})}).then(u=>{const h={edits:[]};for(const f of u)if(Array.isArray(f)&&f.every(p=>p instanceof Fs))for(const{newText:p,newEol:m,range:w}of f)h.edits.push({resource:o.uri,versionId:void 0,textEdit:{range:w&&F.from(w),text:p,eol:m&&ya.from(m)}});if(h.edits.length!==0)return c===o.version?this.f.$tryApplyWorkspaceEdit(new ni(h)):Promise.reject(new Error("concurrent_edits"))})}},yU=class{constructor(e,t){this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.onDidAddDocument=this.a.event,this.onDidRemoveDocument=this.b.event,this.onDidChangeDocument=this.c.event,this.onDidSaveDocument=this.d.event,this.e=new ue,this.h=new Map,this.f=e.getProxy(J.MainThreadDocuments),this.g=t,this.g.onDidRemoveDocuments(i=>{for(const r of i)this.b.fire(r.document)},void 0,this.e),this.g.onDidAddDocuments(i=>{for(const r of i)this.a.fire(r.document)},void 0,this.e)}dispose(){this.e.dispose()}getAllDocumentData(){return[...this.g.allDocuments()]}getDocumentData(e){if(!e)return;const t=this.g.getDocument(e);if(t)return t}getDocument(e){const t=this.getDocumentData(e);if(!t?.document)throw new Error(`Unable to retrieve document from URI '${e}'`);return t.document}ensureDocumentData(e,t){const i=this.g.getDocument(e);if(i&&(!t?.encoding||i.document.encoding===t.encoding))return Promise.resolve(i);let r=this.h.get(e.toString());return r?t?.encoding&&(r=r.then(s=>s.document.encoding!==t.encoding?this.ensureDocumentData(e,t):s)):(r=this.f.$tryOpenDocument(e,t).then(s=>{this.h.delete(e.toString());const n=y.revive(s);return wo(this.g.getDocument(n))},s=>(this.h.delete(e.toString()),Promise.reject(s))),this.h.set(e.toString(),r)),r}createDocumentData(e){return this.f.$tryCreateDocument(e).then(t=>y.revive(t))}$acceptModelLanguageChanged(e,t){const i=y.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");this.b.fire(r.document),r._acceptLanguageId(t),this.a.fire(r.document)}$acceptModelSaved(e){const t=y.revive(e),i=this.g.getDocument(t);if(!i)throw new Error("unknown document");this.$acceptDirtyStateChanged(e,!1),this.d.fire(i.document)}$acceptDirtyStateChanged(e,t){const i=y.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");r._acceptIsDirty(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptEncodingChanged(e,t){const i=y.revive(e),r=this.g.getDocument(i);if(!r)throw new Error("unknown document");r._acceptEncoding(t),this.c.fire({document:r.document,contentChanges:[],reason:void 0})}$acceptModelChanged(e,t,i){const r=y.revive(e),s=this.g.getDocument(r);if(!s)throw new Error("unknown document");s._acceptIsDirty(i),s.onEvents(t);let n;t.isUndoing?n=Yc.Undo:t.isRedoing&&(n=Yc.Redo),this.c.fire(E5({document:s.document,contentChanges:t.changes.map(o=>({range:F.to(o.range),rangeOffset:o.rangeOffset,rangeLength:o.rangeLength,text:o.text})),reason:n}))}setWordDefinitionFor(e,t){EM(e,t)}},xU=class{constructor(e){this.b=new Map,this.c=new P,this.onDidChange=this.c.event,this.d=new Set,this.e=0,this.a=e.getProxy(J.MainThreadEmbeddings)}registerEmbeddingsProvider(e,t,i){if(this.d.has(t))throw new Error("An embeddings provider for this model is already registered");const r=this.e++;return this.a.$registerEmbeddingProvider(r,t),this.b.set(r,{id:t,provider:i}),oe(()=>{this.d.delete(t),this.a.$unregisterEmbeddingProvider(r),this.b.delete(r)})}async computeEmbeddings(e,t,i){i??=et.None;let r=!1;typeof t=="string"&&(t=[t],r=!0);const s=await this.a.$computeEmbeddings(e,t,i);if(s.length!==t.length)throw new Error;if(r){if(s.length!==1)throw new Error;return s[0]}return s}async $provideEmbeddings(e,t,i){const r=this.b.get(e);if(!r)return[];const s=await r.provider.provideEmbeddings(t,i);return s||[]}get embeddingsModels(){return Array.from(this.d)}$acceptEmbeddingModels(e){this.d=new Set(e),this.c.fire()}},EU=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(J.MainThreadAiEmbeddingVector)}async $provideAiEmbeddingVector(e,t,i){if(this.a.size===0)throw new Error("No embedding vector providers registered");const r=this.a.get(e);if(!r)throw new Error("Embedding vector provider not found");const s=await r.provideEmbeddingVector(t,i);if(!s)throw new Error("Embedding vector provider returned undefined");return s}registerEmbeddingVectorProvider(e,t,i){const r=this.b;return this.b++,this.a.set(r,i),this.c.$registerAiEmbeddingVectorProvider(t,r),new Pe(()=>{this.c.$unregisterAiEmbeddingVectorProvider(r),this.a.delete(r)})}},xk;(function(e){e[e.Invalid=0]="Invalid",e[e.Start=1]="Start",e[e.H=2]="H",e[e.HT=3]="HT",e[e.HTT=4]="HTT",e[e.HTTP=5]="HTTP",e[e.F=6]="F",e[e.FI=7]="FI",e[e.FIL=8]="FIL",e[e.BeforeColon=9]="BeforeColon",e[e.AfterColon=10]="AfterColon",e[e.AlmostThere=11]="AlmostThere",e[e.End=12]="End",e[e.Accept=13]="Accept",e[e.LastKnownState=14]="LastKnownState"})(xk||(xk={}));var SU=class{constructor(e,t,i){const r=new Uint8Array(e*t);for(let s=0,n=e*t;s<n;s++)r[s]=i;this.a=r,this.rows=e,this.cols=t}get(e,t){return this.a[e*this.cols+t]}set(e,t,i){this.a[e*this.cols+t]=i}},Ek=class{constructor(e){let t=0,i=0;for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];a>t&&(t=a),o>i&&(i=o),c>i&&(i=c)}t++,i++;const r=new SU(i,t,0);for(let s=0,n=e.length;s<n;s++){const[o,a,c]=e[s];r.set(o,a,c)}this.a=r,this.b=t}nextState(e,t){return t<0||t>=this.b?0:this.a.get(e,t)}},Uw=null;function kU(){return Uw===null&&(Uw=new Ek([[1,104,2],[1,72,2],[1,102,6],[1,70,6],[2,116,3],[2,84,3],[3,116,4],[3,84,4],[4,112,5],[4,80,5],[5,115,9],[5,83,9],[5,58,10],[6,105,7],[6,73,7],[7,108,8],[7,76,8],[8,101,9],[8,69,9],[9,58,10],[10,47,11],[11,47,12]])),Uw}var Sk;(function(e){e[e.None=0]="None",e[e.ForceTermination=1]="ForceTermination",e[e.CannotEndIn=2]="CannotEndIn"})(Sk||(Sk={}));var ru=null;function $U(){if(ru===null){ru=new SE(0);const e=` 	<>'"\u3001\u3002\uFF61\uFF64\uFF0C\uFF0E\uFF1A\uFF1B\u2018\u3008\u300C\u300E\u3014\uFF08\uFF3B\uFF5B\uFF62\uFF63\uFF5D\uFF3D\uFF09\u3015\u300F\u300D\u3009\u2019\uFF40\uFF5E\u2026`;for(let i=0;i<e.length;i++)ru.set(e.charCodeAt(i),1);const t=".,;:";for(let i=0;i<t.length;i++)ru.set(t.charCodeAt(i),2)}return ru}var CU=class _b{static a(t,i,r,s,n){let o=n-1;do{const a=i.charCodeAt(o);if(t.get(a)!==2)break;o--}while(o>s);if(s>0){const a=i.charCodeAt(s-1),c=i.charCodeAt(o);(a===40&&c===41||a===91&&c===93||a===123&&c===125)&&o--}return{range:{startLineNumber:r,startColumn:s+1,endLineNumber:r,endColumn:o+2},url:i.substring(s,o+1)}}static computeLinks(t,i=kU()){const r=$U(),s=[];for(let n=1,o=t.getLineCount();n<=o;n++){const a=t.getLineContent(n),c=a.length;let l=0,u=0,h=0,f=1,p=!1,m=!1,w=!1,x=!1;for(;l<c;){let E=!1;const $=a.charCodeAt(l);if(f===13){let A;switch($){case 40:p=!0,A=0;break;case 41:A=p?0:1;break;case 91:w=!0,m=!0,A=0;break;case 93:w=!1,A=m?0:1;break;case 123:x=!0,A=0;break;case 125:A=x?0:1;break;case 39:case 34:case 96:h===$?A=1:h===39||h===34||h===96?A=0:A=1;break;case 42:A=h===42?1:0;break;case 124:A=h===124?1:0;break;case 32:A=w?0:1;break;default:A=r.get($)}A===1&&(s.push(_b.a(r,a,n,u,l)),E=!0)}else if(f===12){let A;$===91?(m=!0,A=0):A=r.get($),A===1?E=!0:f=13}else f=i.nextState(f,$),f===0&&(E=!0);E&&(f=1,p=!1,m=!1,x=!1,u=l+1,h=$),l++}f===13&&s.push(_b.a(r,a,n,u,c))}return s}},IU=class{constructor(){this.a=[]}add(e){this.b=void 0,this.a.push(e)}delete(e){const t=this.a.indexOf(e);t>=0&&(this.a.splice(t,1),this.b=void 0)}c(){if(!this.b){const e=this.a.sort(),t=[];let i,r,s=14,n=14;for(const o of e){let a=i?eD(i,o):0;for(a===0?r=1:r=n;a<o.length;a++)a+1===o.length?(s=n,n=9):n+=1,t.push([r,o.toUpperCase().charCodeAt(a),n]),t.push([r,o.toLowerCase().charCodeAt(a),n]),r=n;i=o,n=s}t.push([9,58,10]),t.push([10,47,12]),this.b=new Ek(t)}}provideDocumentLinks(e){this.c();const t=[],i=CU.computeLinks({getLineContent(r){return e.lineAt(r-1).text},getLineCount(){return e.lineCount}},this.b);for(const r of i){const s=Qn.to(r);s.target&&t.push(s)}return t}},DU=class Wb{constructor(t,i){this.i=i,this.b=new IU,this.c=new Map,this.d=new Set,this.f=new Map,this.h=0,this.a=t.getProxy(J.MainThreadFileSystem)}dispose(){this.g?.dispose()}registerFileSystemProvider(t,i,r,s={}){if(Wb.j(r),this.d.has(i))throw new Error(`a provider for the scheme '${i}' is already registered`);this.g||(this.g=this.i.registerDocumentLinkProvider(t,"*",this.b));const n=this.h++;this.b.add(i),this.d.add(i),this.c.set(n,r);let o=2;s.isCaseSensitive&&(o+=1024),s.isReadonly&&(o+=2048),typeof r.copy=="function"&&(o+=8),typeof r.open=="function"&&typeof r.close=="function"&&typeof r.read=="function"&&typeof r.write=="function"&&(L(t,"fsChunks"),o+=4);let a;s.isReadonly&&Jr(s.isReadonly)&&s.isReadonly.value!==""&&(a={value:s.isReadonly.value,isTrusted:s.isReadonly.isTrusted,supportThemeIcons:s.isReadonly.supportThemeIcons,supportHtml:s.isReadonly.supportHtml,baseUri:s.isReadonly.baseUri,uris:s.isReadonly.uris}),this.a.$registerFileSystemProvider(n,i,o,a).catch(l=>{console.error(`FAILED to register filesystem provider of ${t.identifier.value}-extension for the scheme ${i}`),console.error(l)});const c=r.onDidChangeFile(l=>{const u=[];for(const h of l){const{uri:f,type:p}=h;if(f.scheme!==i)continue;let m;switch(p){case ca.Changed:m=0;break;case ca.Created:m=1;break;case ca.Deleted:m=2;break;default:throw new Error("Unknown FileChangeType")}u.push({resource:f,type:m})}this.a.$onFileSystemChange(n,u)});return oe(()=>{c.dispose(),this.b.delete(i),this.d.delete(i),this.c.delete(n),this.a.$unregisterProvider(n)})}static j(t){if(!t)throw new Error("MISSING provider");if(typeof t.watch!="function")throw new Error("Provider does NOT implement watch");if(typeof t.stat!="function")throw new Error("Provider does NOT implement stat");if(typeof t.readDirectory!="function")throw new Error("Provider does NOT implement readDirectory");if(typeof t.createDirectory!="function")throw new Error("Provider does NOT implement createDirectory");if(typeof t.readFile!="function")throw new Error("Provider does NOT implement readFile");if(typeof t.writeFile!="function")throw new Error("Provider does NOT implement writeFile");if(typeof t.delete!="function")throw new Error("Provider does NOT implement delete");if(typeof t.rename!="function")throw new Error("Provider does NOT implement rename")}static k(t){const{type:i,ctime:r,mtime:s,size:n,permissions:o}=t;return{type:i,ctime:r,mtime:s,size:n,permissions:o}}$stat(t,i){return Promise.resolve(this.l(t).stat(y.revive(i))).then(r=>Wb.k(r))}$readdir(t,i){return Promise.resolve(this.l(t).readDirectory(y.revive(i)))}$readFile(t,i){return Promise.resolve(this.l(t).readFile(y.revive(i))).then(r=>ae.wrap(r))}$writeFile(t,i,r,s){return Promise.resolve(this.l(t).writeFile(y.revive(i),r.buffer,s))}$delete(t,i,r){return Promise.resolve(this.l(t).delete(y.revive(i),r))}$rename(t,i,r,s){return Promise.resolve(this.l(t).rename(y.revive(i),y.revive(r),s))}$copy(t,i,r,s){const n=this.l(t);if(!n.copy)throw new Error('FileSystemProvider does not implement "copy"');return Promise.resolve(n.copy(y.revive(i),y.revive(r),s))}$mkdir(t,i){return Promise.resolve(this.l(t).createDirectory(y.revive(i)))}$watch(t,i,r,s){const n=this.l(t).watch(y.revive(r),s);this.f.set(i,n)}$unwatch(t,i){const r=this.f.get(i);r&&(r.dispose(),this.f.delete(i))}$open(t,i,r){const s=this.l(t);if(!s.open)throw new Error('FileSystemProvider does not implement "open"');return Promise.resolve(s.open(y.revive(i),r))}$close(t,i){const r=this.l(t);if(!r.close)throw new Error('FileSystemProvider does not implement "close"');return Promise.resolve(r.close(i))}$read(t,i,r,s){const n=this.l(t);if(!n.read)throw new Error('FileSystemProvider does not implement "read"');const o=ae.alloc(s);return Promise.resolve(n.read(i,r,o.buffer,0,s)).then(a=>o.slice(0,a))}$write(t,i,r,s){const n=this.l(t);if(!n.write)throw new Error('FileSystemProvider does not implement "write"');return Promise.resolve(n.write(i,r,s.buffer,0,s.byteLength))}l(t){const i=this.c.get(t);if(!i){const r=new Error;throw r.name="ENOPRO",r.message="no provider",r}return i}},IJ=class LC extends ne{static{this.a=5}constructor(t,i,r,s){super(),this.h=t,this.j=i,this.m=r,this.n=s,this.c=this.B(new bs),this.f=void 0,this.g=0}s(){const t=new ue;this.c.value=t,this.b=this.r(t),this.b.setVerboseLogging(this.m),t.add(this.b.onDidChangeFile(i=>this.h(i))),t.add(this.b.onDidLogMessage(i=>this.j(i))),t.add(this.b.onDidError(i=>this.t(i.error,i.request)))}t(t,i){this.u(t,i)?this.g<LC.a&&this.f?(this.y(`restarting watcher after unexpected error: ${t}`),this.w(this.f)):this.y(`gave up attempting to restart watcher after unexpected error: ${t}`):this.y(t)}u(t,i){return!(!this.n.restartOnError||i||t.indexOf("No space left on device")!==-1||t.indexOf("EMFILE")!==-1)}w(t){this.g++,this.s(),this.watch(t)}async watch(t){this.f=t,await this.b?.watch(t)}async setVerboseLogging(t){this.m=t,await this.b?.setVerboseLogging(t)}y(t){this.j({type:"error",message:`[File Watcher (${this.n.type})] ${t}`})}z(t){this.j({type:"trace",message:`[File Watcher (${this.n.type})] ${t}`})}dispose(){return this.b=void 0,super.dispose()}};function PU(e,t){return typeof t=="string"&&!t.startsWith(Pn)&&!Wu(t)?{base:e,pattern:t}:t}var AU=class{get ignoreCreateEvents(){return!!(this.h&1)}get ignoreChangeEvents(){return!!(this.h&2)}get ignoreDeleteEvents(){return!!(this.h&4)}constructor(e,t,i,r,s,n,o){this.a=Math.random(),this.b=new P,this.c=new P,this.d=new P,this.h=0,o.ignoreCreateEvents&&(this.h+=1),o.ignoreChangeEvents&&(this.h+=2),o.ignoreDeleteEvents&&(this.h+=4);const a=Bo(n),c=typeof n=="string",l=!1,u=s(h=>{if(!(typeof h.session=="number"&&h.session!==this.a)&&!(l&&typeof h.session>"u")){if(!o.ignoreCreateEvents)for(const f of h.created){const p=y.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.b.fire(p)}if(!o.ignoreChangeEvents)for(const f of h.changed){const p=y.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.c.fire(p)}if(!o.ignoreDeleteEvents)for(const f of h.deleted){const p=y.revive(f);a(p.fsPath)&&(!c||i.getWorkspaceFolder(p))&&this.d.fire(p)}}});this.g=Pe.from(this.i(e,i,t,r,n,o,!1),this.b,this.c,this.d,u)}i(e,t,i,r,s,n,o){const a=Pe.from();if(typeof s=="string"||n.ignoreChangeEvents&&n.ignoreCreateEvents&&n.ignoreDeleteEvents)return a;const c=e.getProxy(J.MainThreadFileSystemEventService);let l=!1;(s.pattern.includes(Pn)||s.pattern.includes(Om))&&(l=!0);const u=[];let h,f;if(o)(n.ignoreChangeEvents||n.ignoreCreateEvents||n.ignoreDeleteEvents)&&(f=14,n.ignoreChangeEvents&&(f&=-3),n.ignoreCreateEvents&&(f&=-5),n.ignoreDeleteEvents&&(f&=-9));else if(l&&u.length===0){const p=t.getWorkspaceFolder(y.revive(s.baseUri)),m=i.getConfiguration("files",p).get("watcherExclude");if(m)for(const w in m)w&&m[w]===!0&&u.push(w)}else if(!l){const p=t.getWorkspaceFolder(y.revive(s.baseUri));if(p){const m=i.getConfiguration("files",p).get("watcherExclude");if(m){for(const w in m)if(w&&m[w]===!0){const x=`${Tg(w,"/")}/${Pn}`;h||(h=[]),h.push(PU(p.uri.fsPath,x))}}if(!h||h.length===0)return a}}return c.$watch(r.identifier.value,this.a,s.baseUri,{recursive:l,excludes:u,includes:h,filter:f},!!o),Pe.from({dispose:()=>c.$unwatch(this.a)})}dispose(){this.g.dispose()}get onDidCreate(){return this.b.event}get onDidChange(){return this.c.event}get onDidDelete(){return this.d.event}},TU=class{get created(){return this.a.value}get changed(){return this.b.value}get deleted(){return this.c.value}constructor(e){this.d=e,this.a=new _t(()=>this.d.created.map(y.revive)),this.b=new _t(()=>this.d.changed.map(y.revive)),this.c=new _t(()=>this.d.deleted.map(y.revive)),this.session=this.d.session}},RU=class{constructor(e,t,i){this.j=e,this.k=t,this.l=i,this.a=new P,this.b=new P,this.c=new P,this.d=new P,this.g=new tc,this.h=new tc,this.i=new tc,this.onDidRenameFile=this.b.event,this.onDidCreateFile=this.c.event,this.onDidDeleteFile=this.d.event}createFileSystemWatcher(e,t,i,r,s){return new AU(this.j,t,e,i,this.a.event,Pi.from(r),s)}$onFileEvent(e){this.a.fire(new TU(e))}$onDidRunFileOperation(e,t){switch(e){case 2:this.b.fire(Object.freeze({files:t.map(i=>({oldUri:y.revive(i.source),newUri:y.revive(i.target)}))}));break;case 1:this.d.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;case 0:case 3:this.c.fire(Object.freeze({files:t.map(i=>y.revive(i.target))}));break;default:}}getOnWillRenameFileEvent(e){return this.m(e,this.g)}getOnWillCreateFileEvent(e){return this.m(e,this.h)}getOnWillDeleteFileEvent(e){return this.m(e,this.i)}m(e,t){return(i,r,s)=>{const n=function(a){i.call(r,a)};return n.extension=e,t.event(n,void 0,s)}}async $onWillRunFileOperation(e,t,i,r){switch(e){case 2:return await this.n(this.g,{files:t.map(s=>({oldUri:y.revive(s.source),newUri:y.revive(s.target)}))},i,r);case 1:return await this.n(this.i,{files:t.map(s=>y.revive(s.target))},i,r);case 0:case 3:return await this.n(this.h,{files:t.map(s=>y.revive(s.target))},i,r)}}async n(e,t,i,r){const s=new Set,n=[];if(await e.fireAsync(t,r,async(a,c)=>{const l=Date.now(),u=await Promise.resolve(a);u instanceof Mn&&(n.push([c.extension,u]),s.add(c.extension.displayName??c.extension.identifier.value)),Date.now()-l>i&&this.k.warn("SLOW file-participant",c.extension.identifier)}),r.isCancellationRequested||n.length===0)return;const o={edits:[]};for(const[,a]of n){const{edits:c}=Di.from(a,{getTextDocumentVersion:l=>this.l.getDocument(l)?.version,getNotebookDocumentVersion:()=>{}});o.edits=o.edits.concat(c)}return{edit:o,extensionNames:Array.from(s)}}},LU=class{constructor(e,t,i,r,s){this.a=t,this.b=i,this.c=r;const n=new ge("interactive.open","_interactive.open","Open interactive window and return notebook editor and input URI",[new O("showOptions","Show Options",o=>!0,o=>o),new O("resource","Interactive resource Uri",o=>!0,o=>o),new O("controllerId","Notebook controller Id",o=>!0,o=>o),new O("title","Interactive editor title",o=>!0,o=>o)],new fe("Notebook and input URI",o=>{if(s.debug("[ExtHostInteractive] open iw with notebook editor id",o.notebookEditorId),o.notebookEditorId!==void 0){const a=this.a.getEditorById(o.notebookEditorId);return s.debug("[ExtHostInteractive] notebook editor found",a.id),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri),notebookEditor:a.apiEditor}}return s.debug("[ExtHostInteractive] notebook editor not found, uris for the interactive document",o.notebookUri,o.inputUri),{notebookUri:y.revive(o.notebookUri),inputUri:y.revive(o.inputUri)}}));this.c.registerApiCommand(n)}$willAddInteractiveDocument(e,t,i,r){this.b.acceptDocumentsAndEditorsDelta({addedDocuments:[{EOL:t,lines:[""],languageId:i,uri:e,isDirty:!1,versionId:1,encoding:"utf8"}]})}$willRemoveInteractiveDocument(e,t){this.b.acceptDocumentsAndEditorsDelta({removedDocuments:[e]})}},NU=class{constructor(e){this.b=0,this.a=e.getProxy(J.MainThreadLabelService)}$registerResourceLabelFormatter(e){const t=this.b++;return this.a.$registerResourceLabelFormatter(t,e),oe(()=>{this.a.$unregisterResourceLabelFormatter(t)})}},kk;(function(e){e[e.LTR=0]="LTR",e[e.RTL=1]="RTL"})(kk||(kk={}));var MU=class Qi extends Oe{constructor(t,i,r,s){super(t,i,r,s),this.selectionStartLineNumber=t,this.selectionStartColumn=i,this.positionLineNumber=r,this.positionColumn=s}toString(){return"["+this.selectionStartLineNumber+","+this.selectionStartColumn+" -> "+this.positionLineNumber+","+this.positionColumn+"]"}equalsSelection(t){return Qi.selectionsEqual(this,t)}static selectionsEqual(t,i){return t.selectionStartLineNumber===i.selectionStartLineNumber&&t.selectionStartColumn===i.selectionStartColumn&&t.positionLineNumber===i.positionLineNumber&&t.positionColumn===i.positionColumn}getDirection(){return this.selectionStartLineNumber===this.startLineNumber&&this.selectionStartColumn===this.startColumn?0:1}setEndPosition(t,i){return this.getDirection()===0?new Qi(this.startLineNumber,this.startColumn,t,i):new Qi(t,i,this.startLineNumber,this.startColumn)}getPosition(){return new ji(this.positionLineNumber,this.positionColumn)}getSelectionStart(){return new ji(this.selectionStartLineNumber,this.selectionStartColumn)}setStartPosition(t,i){return this.getDirection()===0?new Qi(t,i,this.endLineNumber,this.endColumn):new Qi(this.endLineNumber,this.endColumn,t,i)}static fromPositions(t,i=t){return new Qi(t.lineNumber,t.column,i.lineNumber,i.column)}static fromRange(t,i){return i===0?new Qi(t.startLineNumber,t.startColumn,t.endLineNumber,t.endColumn):new Qi(t.endLineNumber,t.endColumn,t.startLineNumber,t.startColumn)}static liftSelection(t){return new Qi(t.selectionStartLineNumber,t.selectionStartColumn,t.positionLineNumber,t.positionColumn)}static selectionsArrEqual(t,i){if(t&&!i||!t&&i)return!1;if(!t&&!i)return!0;if(t.length!==i.length)return!1;for(let r=0,s=t.length;r<s;r++)if(!this.selectionsEqual(t[r],i[r]))return!1;return!0}static isISelection(t){return t&&typeof t.selectionStartLineNumber=="number"&&typeof t.selectionStartColumn=="number"&&typeof t.positionLineNumber=="number"&&typeof t.positionColumn=="number"}static createWithDirection(t,i,r,s,n){return n===0?new Qi(t,i,r,s):new Qi(r,s,t,i)}},$k=class NC{constructor(t,i){this.d=t,this.e=i}async provideDocumentSymbols(t,i){const r=this.d.getDocument(t),s=await this.e.provideDocumentSymbols(r,i);if(!lg(s))return s[0]instanceof Wc?s.map(yv.from):NC.f(s)}static f(t){t=t.slice(0).sort((s,n)=>{let o=s.location.range.start.compareTo(n.location.range.start);return o===0&&(o=n.location.range.end.compareTo(s.location.range.end)),o});const i=[],r=[];for(const s of t){const n={name:s.name||"!!MISSING: name!!",kind:Ji.from(s.kind),tags:s.tags?.map(rs.from)||[],detail:"",containerName:s.containerName,range:F.from(s.location.range),selectionRange:F.from(s.location.range),children:[]};for(;;){if(r.length===0){r.push(n),i.push(n);break}const o=r[r.length-1];if(Oe.containsRange(o.range,n.range)&&!Oe.equalsRange(o.range,n.range)){o.children?.push(n),r.push(n);break}r.pop()}}return i}},yp=class{constructor(e,t,i,r,s,n){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.d=new mr("CodeLens"),this.e=new Map}async provideCodeLenses(e,t){const i=this.f.getDocument(e),r=await this.h.provideCodeLenses(i,t);if(!r||t.isCancellationRequested)return;const s=this.d.add(r),n=new ue;this.e.set(s,n);const o={cacheId:s,lenses:[]};for(let a=0;a<r.length;a++){if(!ke.isRange(r[a].range)){console.warn("INVALID code lens, range is not defined",this.j.identifier.value);continue}o.lenses.push({cacheId:[s,a],range:F.from(r[a].range),command:this.g.toInternal(r[a].command,n)})}return o}async resolveCodeLens(e,t){const i=e.cacheId&&this.d.get(...e.cacheId);if(!i)return;let r;if(typeof this.h.resolveCodeLens!="function"||i.isResolved?r=i:r=await this.h.resolveCodeLens(i,t),r||(r=i),t.isCancellationRequested)return;const s=e.cacheId&&this.e.get(e.cacheId[0]);if(s){if(!r.command){const n=new Error("INVALID code lens resolved, lacks command: "+this.j.identifier.value);this.k.onExtensionError(this.j.identifier,n),this.l.error(n);return}return e.command=this.g.toInternal(r.command,s),e}}releaseCodeLenses(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}};function xp(e){return Array.isArray(e)?e.map(Sl.from):e?[Sl.from(e)]:[]}var Ck=class{constructor(e,t){this.d=e,this.e=t}async provideDefinition(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDefinition(r,s,i);return xp(n)}},Ik=class{constructor(e,t){this.d=e,this.e=t}async provideDeclaration(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDeclaration(r,s,i);return xp(n)}},Dk=class{constructor(e,t){this.d=e,this.e=t}async provideImplementation(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideImplementation(r,s,i);return xp(n)}},Pk=class{constructor(e,t){this.d=e,this.e=t}async provideTypeDefinition(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideTypeDefinition(r,s,i);return xp(n)}},jw=class MC{static{this.f=10}constructor(t,i){this.g=t,this.h=i,this.d=0,this.e=new Map}async provideHover(t,i,r,s){const n=this.g.getDocument(t),o=ze.to(i);let a;if(r&&r.verbosityRequest){const h=r.verbosityRequest.previousHover.id,f=this.e.get(h);if(!f)throw new Error(`Hover with id ${h} not found`);const p={verbosityDelta:r.verbosityRequest.verbosityDelta,previousHover:f};a=await this.h.provideHover(n,o,s,p)}else a=await this.h.provideHover(n,o,s);if(!a||lg(a.contents))return;a.range||(a.range=n.getWordRangeAtPosition(o)),a.range||(a.range=new ke(o,o));const c=kl.from(a),l=this.d;if(this.e.size===MC.f){const h=Math.min(...this.e.keys());this.e.delete(h)}return this.e.set(l,a),this.d+=1,{...c,id:l}}releaseHover(t){this.e.delete(t)}},Ak=class{constructor(e,t){this.d=e,this.e=t}async provideEvaluatableExpression(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideEvaluatableExpression(r,s,i);if(n)return Sv.from(n)}},Tk=class{constructor(e,t){this.d=e,this.e=t}async provideInlineValues(e,t,i,r){const s=this.d.getDocument(e),n=await this.e.provideInlineValues(s,F.to(t),lf.to(i),r);if(Array.isArray(n))return n.map(o=>cf.from(o))}},Rk=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentHighlights(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideDocumentHighlights(r,s,i);if(Array.isArray(n))return n.map(va.from)}},Lk=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideMultiDocumentHighlights(e,t,i,r){const s=this.d.getDocument(e),n=i.map(c=>{try{return this.d.getDocument(c)}catch(l){this.f.error("Error: Unable to retrieve document from URI: "+c+". Error message: "+l);return}}).filter(c=>c!==void 0),o=ze.to(t),a=await this.e.provideMultiDocumentHighlights(s,o,n,r);if(Array.isArray(a))return a.map(kv.from)}},Nk=class{constructor(e,t){this.d=e,this.e=t}async provideLinkedEditingRanges(e,t,i){const r=this.d.getDocument(e),s=ze.to(t),n=await this.e.provideLinkedEditingRanges(r,s,i);if(n&&Array.isArray(n.ranges))return{ranges:vt(n.ranges.map(F.from)),wordPattern:n.wordPattern}}},Mk=class{constructor(e,t){this.d=e,this.e=t}async provideReferences(e,t,i,r){const s=this.d.getDocument(e),n=ze.to(t),o=await this.e.provideReferences(s,n,i,r);if(Array.isArray(o))return o.map(gi.from)}},Ep=class eg{static{this.d=1e3}constructor(t,i,r,s,n,o,a){this.g=t,this.h=i,this.j=r,this.k=s,this.l=n,this.m=o,this.n=a,this.e=new mr("CodeAction"),this.f=new Map}async provideCodeActions(t,i,r,s){const n=this.g.getDocument(t),o=MU.isISelection(i)?hr.to(i):F.to(i),a=[];for(const p of this.j.getDiagnostics(t))if(o.intersection(p.range)&&a.push(p)>eg.d)break;const c={diagnostics:a,only:r.only?new nt(r.only):void 0,triggerKind:Ov.to(r.trigger)},l=await this.k.provideCodeActions(n,o,c,s);if(!Xa(l)||s.isCancellationRequested)return;const u=this.e.add(l),h=new ue;this.f.set(u,h);const f=[];for(let p=0;p<l.length;p++){const m=l[p];if(m)if(eg.o(m)&&!(m instanceof qc))this.n.report("CodeActionProvider.provideCodeActions - return commands",this.m,"Return 'CodeAction' instances instead."),f.push({_isSynthetic:!0,title:m.title,command:this.h.toInternal(m,h)});else{const w=m;c.only&&(w.kind?c.only.contains(w.kind)||this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action is of kind '${w.kind.value}'. Code action will be dropped. Please check 'CodeActionContext.only' to only return requested code actions.`):this.l.warn(`${this.m.identifier.value} - Code actions of kind '${c.only.value}' requested but returned code action does not have a 'kind'. Code action will be dropped. Please set 'CodeAction.kind'.`));const x=w.ranges??[];f.push({cacheId:[u,p],title:w.title,command:w.command&&this.h.toInternal(w.command,h),diagnostics:w.diagnostics&&w.diagnostics.map(ga.from),edit:w.edit&&Di.from(w.edit,void 0),kind:w.kind&&w.kind.value,isPreferred:w.isPreferred,isAI:Ge(this.m,"codeActionAI")?w.isAI:!1,ranges:Ge(this.m,"codeActionRanges")?vt(x.map(F.from)):void 0,disabled:w.disabled?.reason})}}return{cacheId:u,actions:f}}async resolveCodeAction(t,i){const[r,s]=t,n=this.e.get(r,s);if(!n||eg.o(n))return{};if(!this.k.resolveCodeAction)return{};const o=await this.k.resolveCodeAction(n,i)??n;let a;o.edit&&(a=Di.from(o.edit,void 0));let c;if(o.command){const l=this.f.get(r);l&&(c=this.h.toInternal(o.command,l))}return{edit:a,command:c}}releaseCodeActions(t){this.f.get(t)?.dispose(),this.f.delete(t),this.e.delete(t)}static o(t){return typeof t.command=="string"&&typeof t.title=="string"}},su=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.e=new mr("DocumentPasteEdit.edits")}async prepareDocumentPaste(e,t,i,r){if(!this.h.prepareDocumentPaste)return;this.d=void 0;const s=this.g.getDocument(e),n=t.map(u=>F.to(u)),o=Ca.toDataTransfer(i,()=>{throw new pI});if(await this.h.prepareDocumentPaste(s,n,o,r),r.isCancellationRequested)return;const a=Array.from(o).filter(([,u])=>!(u instanceof Sd)),c=new Map,l=await Promise.all(Array.from(a,async([u,h])=>{const f=Ut();return c.set(f,h),[u,await Kn.from(u,h,f)]}));return this.d=c,{items:l}}async providePasteEdits(e,t,i,r,s,n){if(!this.h.provideDocumentPasteEdits)return[];const o=this.g.getDocument(t),a=i.map(f=>F.to(f)),c=r.items.map(([f,p])=>{const m=this.d?.get(p.id);return m?[f,m]:[f,Kn.to(f,p,async w=>(await this.f.$resolvePasteFileData(this.j,e,w)).buffer)]}),l=new sa(c),u=await this.h.provideDocumentPasteEdits(o,a,l,{only:s.only?new Bs(s.only):void 0,triggerKind:s.triggerKind},n);if(!u||n.isCancellationRequested)return[];const h=this.e.add(u);return u.map((f,p)=>({_cacheId:[h,p],title:f.title??d(2898,null,this.k.displayName||this.k.name),kind:f.kind,yieldTo:f.yieldTo?.map(m=>m.value),insertText:typeof f.insertText=="string"?f.insertText:{snippet:f.insertText.value},additionalEdit:f.additionalEdit?Di.from(f.additionalEdit,void 0):void 0}))}async resolvePasteEdit(e,t){const[i,r]=e,s=this.e.get(i,r);if(!s||!this.h.resolveDocumentPasteEdit)return{};const n=await this.h.resolveDocumentPasteEdit(s,t)??s;return{insertText:n.insertText,additionalEdit:n.additionalEdit?Di.from(n.additionalEdit,void 0):void 0}}releasePasteEdits(e){this.e.delete(e)}},Fk=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentFormattingEdits(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentFormattingEdits(r,t,i);if(Array.isArray(s))return s.map(At.from)}},Bw=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeFormattingEdits(e,t,i,r){const s=this.d.getDocument(e),n=F.to(t),o=await this.e.provideDocumentRangeFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(At.from)}async provideDocumentRangesFormattingEdits(e,t,i,r){uy(typeof this.e.provideDocumentRangesFormattingEdits=="function","INVALID invocation of `provideDocumentRangesFormattingEdits`");const s=this.d.getDocument(e),n=t.map(F.to),o=await this.e.provideDocumentRangesFormattingEdits(s,n,i,r);if(Array.isArray(o))return o.map(At.from)}},Ok=class{constructor(e,t){this.d=e,this.e=t,this.autoFormatTriggerCharacters=[]}async provideOnTypeFormattingEdits(e,t,i,r,s){const n=this.d.getDocument(e),o=ze.to(t),a=await this.e.provideOnTypeFormattingEdits(n,o,i,r,s);if(Array.isArray(a))return a.map(At.from)}},Sp=class{constructor(e,t){this.e=e,this.f=t,this.d=new mr("WorkspaceSymbols")}async provideWorkspaceSymbols(e,t){const i=await this.e.provideWorkspaceSymbols(e,t);if(!Xa(i))return{symbols:[]};const r=this.d.add(i),s={cacheId:r,symbols:[]};for(let n=0;n<i.length;n++){const o=i[n];if(!o||!o.name){this.f.warn("INVALID SymbolInformation",o);continue}s.symbols.push({...Zn.from(o),cacheId:[r,n]})}return s}async resolveWorkspaceSymbol(e,t){if(typeof this.e.resolveWorkspaceSymbol!="function"||!e.cacheId)return e;const i=this.d.get(...e.cacheId);if(i){const r=await this.e.resolveWorkspaceSymbol(i,t);return r&&xn(e,Zn.from(r),!0)}}releaseWorkspaceSymbols(e){this.d.delete(e)}},kp=class Vb{static supportsResolving(t){return typeof t.prepareRename=="function"}constructor(t,i,r){this.d=t,this.e=i,this.f=r}async provideRenameEdits(t,i,r,s){const n=this.d.getDocument(t),o=ze.to(i);try{const a=await this.e.provideRenameEdits(n,o,r,s);return a?Di.from(a):void 0}catch(a){const c=Vb.g(a);return c?{rejectReason:c,edits:void 0}:Promise.reject(a)}}async resolveRenameLocation(t,i,r){if(typeof this.e.prepareRename!="function")return Promise.resolve(void 0);const s=this.d.getDocument(t),n=ze.to(i);try{const o=await this.e.prepareRename(s,n,r);let a,c;if(ke.isRange(o)?(a=o,c=s.getText(o)):wt(o)&&(a=o.range,c=o.placeholder),!a||!c)return;if(a.start.line>n.line||a.end.line<n.line){this.f.warn("INVALID rename location: position line must be within range start/end lines");return}return{range:F.from(a),text:c}}catch(o){const a=Vb.g(o);return a?{rejectReason:a,range:void 0,text:void 0}:Promise.reject(o)}}static g(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},Hw=class qb{static{this.d={[vh.Invoke]:rl.Invoke,[vh.Automatic]:rl.Automatic}}constructor(t,i,r){this.e=t,this.f=i,this.g=r}async supportsAutomaticNewSymbolNamesTriggerKind(){return this.f.supportsAutomaticTriggerKind}async provideNewSymbolNames(t,i,r,s){const n=this.e.getDocument(t),o=F.to(i);try{const a=qb.d[r],c=await this.f.provideNewSymbolNames(n,o,a,s);return c?c.map(l=>typeof l=="string"?{newSymbolName:l}:{newSymbolName:l.newSymbolName,tags:l.tags}):void 0}catch(a){this.g.error(qb.h(a)??JSON.stringify(a,null,"	"));return}}static h(t){return typeof t=="string"?t:t instanceof Error&&typeof t.message=="string"?t.message:void 0}},zw=class{constructor(e,t){this.resultId=e,this.tokens=t}},_w=class wr{constructor(t,i){this.f=t,this.g=i,this.e=1,this.d=new Map}async provideDocumentSemanticTokens(t,i,r){const s=this.f.getDocument(t),n=i!==0?this.d.get(i):null;let o=typeof n?.resultId=="string"&&typeof this.g.provideDocumentSemanticTokensEdits=="function"?await this.g.provideDocumentSemanticTokensEdits(s,n.resultId,r):await this.g.provideDocumentSemanticTokens(s,r);return n&&this.d.delete(i),o?(o=wr.h(o),this.o(wr.n(n,o),o)):null}async releaseDocumentSemanticColoring(t){this.d.delete(t)}static h(t){return wr.j(t)?wr.k(t)?t:new la(new Uint32Array(t.data),t.resultId):wr.l(t)?wr.m(t)?t:new Td(t.edits.map(i=>new P8(i.start,i.deleteCount,i.data?new Uint32Array(i.data):i.data)),t.resultId):t}static j(t){return t&&!!t.data}static k(t){return t.data instanceof Uint32Array}static l(t){return t&&Array.isArray(t.edits)}static m(t){for(const i of t.edits)if(!(i.data instanceof Uint32Array))return!1;return!0}static n(t,i){if(!wr.j(i)||!t||!t.tokens)return i;const r=t.tokens,s=r.length,n=i.data,o=n.length;let a=0;const c=Math.min(s,o);for(;a<c&&r[a]===n[a];)a++;if(a===s&&a===o)return new Td([],i.resultId);let l=0;const u=c-a;for(;l<u&&r[s-l-1]===n[o-l-1];)l++;return new Td([{start:a,deleteCount:s-a-l,data:n.subarray(a,o-l)}],i.resultId)}o(t,i){if(wr.j(t)){const r=this.e++;return this.d.set(r,new zw(t.resultId,t.data)),Nw({id:r,type:"full",data:t.data})}if(wr.l(t)){const r=this.e++;return wr.j(i)?this.d.set(r,new zw(i.resultId,i.data)):this.d.set(r,new zw(t.resultId)),Nw({id:r,type:"delta",deltas:(t.edits||[]).map(s=>({start:s.start,deleteCount:s.deleteCount,data:s.data}))})}return null}},Uk=class{constructor(e,t){this.d=e,this.e=t}async provideDocumentRangeSemanticTokens(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideDocumentRangeSemanticTokens(r,F.to(t),i);return s?this.f(s):null}f(e){return Nw({id:0,type:"full",data:e.data})}},nu=class FC{static supportsResolving(t){return typeof t.resolveCompletionItem=="function"}constructor(t,i,r,s,n){this.f=t,this.g=i,this.h=r,this.j=s,this.k=n,this.d=new mr("CompletionItem"),this.e=new Map}async provideCompletionItems(t,i,r,s){const n=this.f.getDocument(t),o=ze.to(i),a=n.getWordRangeAtPosition(o)||new ke(o,o),c=a.with({end:o}),l=new un,u=await this.h.provideCompletionItems(n,o,s,Cv.to(r));if(!u||s.isCancellationRequested)return;const h=Array.isArray(u)?new Yo(u):u,f=FC.supportsResolving(this.h)?this.d.add(h.items):this.d.add([]),p=new ue;this.e.set(f,p);const m=[],w={x:f,b:m,a:{replace:F.from(a),insert:F.from(c)},c:h.isIncomplete||void 0,d:l.elapsed()};for(let x=0;x<h.items.length;x++){const E=h.items[x],$=this.l(E,[f,x],c,a);m.push($)}return w}async resolveCompletionItem(t,i){if(typeof this.h.resolveCompletionItem!="function")return;const r=this.d.get(...t);if(!r)return;const s=this.l(r,t),n=await this.h.resolveCompletionItem(r,i);if(!n)return;const o=this.l(n,t);return(s.h!==o.h||s.i!==o.i)&&this.j.report("CompletionItem.insertText",this.k,"extension MAY NOT change 'insertText' of a CompletionItem during resolve"),(s.n!==o.n||s.o!==o.o||!oi(s.p,o.p))&&this.j.report("CompletionItem.command",this.k,"extension MAY NOT change 'command' of a CompletionItem during resolve"),{...s,d:o.d,c:o.c,l:o.l,h:o.h,i:o.i,n:o.n,o:o.o,p:o.p}}releaseCompletionItems(t){this.e.get(t)?.dispose(),this.e.delete(t),this.d.delete(t)}l(t,i,r,s){const n=this.e.get(i[0]);if(!n)throw Error("DisposableStore is missing...");const o=this.g.toInternal(t.command,n),a={x:i,a:t.label,b:t.kind!==void 0?hf.from(t.kind):void 0,m:t.tags&&t.tags.map(uf.from),c:t.detail,d:typeof t.documentation>"u"?void 0:we.fromStrict(t.documentation),e:t.sortText!==t.label?t.sortText:void 0,f:t.filterText!==t.label?t.filterText:void 0,g:t.preselect||void 0,i:t.keepWhitespace?1:0,k:t.commitCharacters?.join(""),l:t.additionalTextEdits&&t.additionalTextEdits.map(At.from),n:o?.$ident,o:o?.id,p:o?.$ident?void 0:o?.arguments};t.textEdit?(this.j.report("CompletionItem.textEdit",this.k,"Use 'CompletionItem.insertText' and 'CompletionItem.range' instead."),a.h=t.textEdit.newText):typeof t.insertText=="string"?a.h=t.insertText:t.insertText instanceof Fn&&(a.h=t.insertText.value,a.i|=4);let c;return t.textEdit?c=t.textEdit.range:t.range&&(c=t.range),ke.isRange(c)?a.j=F.from(c):c&&(!r?.isEqual(c.inserting)||!s?.isEqual(c.replacing))&&(a.j={insert:F.from(c.inserting),replace:F.from(c.replacing)}),a}},Ks=class{constructor(e,t,i,r){this.f=e,this.g=t,this.h=i,this.j=r,this.d=new jk,this.k={[gh.Automatic]:il.Automatic,[gh.Explicit]:il.Invoke},this.e=Ge(this.f,"inlineCompletionsAdditions")}get supportsHandleEvents(){return Ge(this.f,"inlineCompletionsAdditions")&&(typeof this.h.handleDidShowCompletionItem=="function"||typeof this.h.handleDidPartiallyAcceptCompletionItem=="function"||typeof this.h.handleDidRejectCompletionItem=="function"||typeof this.h.handleEndOfLifetime=="function")}async provideInlineCompletions(e,t,i,r){const s=this.g.getDocument(e),n=ze.to(t),o=await this.h.provideInlineCompletionItems(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:F.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],requestUuid:i.requestUuid},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let m;f.command&&(u||(u=new ue),m=this.j.toInternal(f.command,u));let w;f.action&&(u||(u=new ue),w=this.j.toInternal(f.action,u));const x=f.insertText;return{insertText:typeof x=="string"?x:{snippet:x.value},filterText:f.filterText,range:f.range?F.from(f.range):void 0,showRange:this.e&&f.showRange?F.from(f.showRange):void 0,command:m,action:w,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1,isInlineEdit:this.e?f.isInlineEdit:!1,showInlineEditMenu:this.e?f.showInlineEditMenu:!1,displayLocation:f.displayLocation&&this.e?{range:F.from(f.displayLocation.range),label:f.displayLocation.label}:void 0,warning:f.warning&&this.e?{message:we.from(f.warning.message),icon:f.warning.icon?Yv.fromThemeIcon(f.warning.icon):void 0}:void 0}}),commands:c.map(f=>(u||(u=new ue),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}async provideInlineEditsForRange(e,t,i,r){if(!this.h.provideInlineEditsForRange)return;L(this.f,"inlineCompletionsAdditions");const s=this.g.getDocument(e),n=F.to(t),o=await this.h.provideInlineEditsForRange(s,n,{selectedCompletionInfo:i.selectedSuggestionInfo?{range:F.to(i.selectedSuggestionInfo.range),text:i.selectedSuggestionInfo.text}:void 0,triggerKind:this.k[i.triggerKind],userPrompt:i.userPrompt,requestUuid:i.requestUuid},r);if(!o||r.isCancellationRequested)return;const a=Array.isArray(o)?o:o.items,c=this.e?Array.isArray(o)?[]:o.commands||[]:[],l=this.e&&!Array.isArray(o)?o.enableForwardStability:void 0;let u;return{pid:this.d.createReferenceId({dispose(){u?.dispose()},items:a}),items:a.map((f,p)=>{let m;f.command&&(u||(u=new ue),m=this.j.toInternal(f.command,u));let w;f.action&&(u||(u=new ue),w=this.j.toInternal(f.action,u));const x=f.insertText;return{insertText:typeof x=="string"?x:{snippet:x.value},filterText:f.filterText,range:f.range?F.from(f.range):void 0,command:m,action:w,idx:p,completeBracketPairs:this.e?f.completeBracketPairs:!1}}),commands:c.map(f=>(u||(u=new ue),this.j.toInternal(f,u))),suppressSuggestions:!1,enableForwardStability:l}}disposeCompletions(e){this.d.disposeReferenceId(e)?.dispose()}handleDidShowCompletionItem(e,t,i){const r=this.d.get(e)?.items[t];r&&this.h.handleDidShowCompletionItem&&this.e&&this.h.handleDidShowCompletionItem(r,i)}handlePartialAccept(e,t,i,r){const s=this.d.get(e)?.items[t];s&&this.h.handleDidPartiallyAcceptCompletionItem&&this.e&&(this.h.handleDidPartiallyAcceptCompletionItem(s,i),this.h.handleDidPartiallyAcceptCompletionItem(s,qv.to(r)))}handleEndOfLifetime(e,t,i){const r=this.d.get(e)?.items[t];if(r&&this.h.handleEndOfLifetime&&this.e){const s=Jv.to(i,n=>this.d.get(n.pid)?.items[n.idx]);this.h.handleEndOfLifetime(r,s)}}handleRejection(e,t){const i=this.d.get(e)?.items[t];i&&this.h.handleDidRejectCompletionItem&&this.e&&this.h.handleDidRejectCompletionItem(i)}},Ww=class{async provideInlineEdits(e,t,i){const r=this.f.getDocument(e),s=await this.g.provideInlineEdit(r,{triggerKind:this.e[t.triggerKind],requestUuid:t.requestUuid},i);if(!s||i.isCancellationRequested)return;let n;const o=this.d.createReferenceId({dispose(){n?.dispose()},item:s});let a;s.accepted&&(n||(n=new ue),a=this.h.toInternal(s.accepted,n));let c;s.rejected&&(n||(n=new ue),c=this.h.toInternal(s.rejected,n));let l;s.shown&&(n||(n=new ue),l=this.h.toInternal(s.shown,n));let u;return s.action&&(n||(n=new ue),u=this.h.toInternal(s.action,n)),n||(n=new ue),{pid:o,text:s.text,range:F.from(s.range),showRange:F.from(s.showRange),accepted:a,rejected:c,shown:l,action:u,commands:s.commands?.map(f=>this.h.toInternal(f,n))}}disposeEdit(e){this.d.disposeReferenceId(e)?.dispose()}constructor(e,t,i,r){this.f=t,this.g=i,this.h=r,this.d=new jk,this.e={[wh.Automatic]:wl.Automatic,[wh.Invoke]:wl.Invoke}}},jk=class{constructor(){this.d=new Map,this.e=1}createReferenceId(e){const t=this.e++;return this.d.set(t,e),t}disposeReferenceId(e){const t=this.d.get(e);return this.d.delete(e),t}get(e){return this.d.get(e)}},Vw=class{constructor(e,t){this.e=e,this.f=t,this.d=new mr("SignatureHelp")}async provideSignatureHelp(e,t,i,r){const s=this.e.getDocument(e),n=ze.to(t),o=this.g(i),a=await this.f.provideSignatureHelp(s,n,r,o);if(a){const c=this.d.add([a]);return{...$l.from(a),id:c}}}g(e){let t;if(e.activeSignatureHelp){const i=$l.to(e.activeSignatureHelp),r=this.d.get(e.activeSignatureHelp.id,0);r?(t=r,t.activeSignature=i.activeSignature,t.activeParameter=i.activeParameter):t=i}return{...e,activeSignatureHelp:t}}releaseSignatureHelp(e){this.d.delete(e)}},$p=class{constructor(e,t,i,r,s){this.f=e,this.g=t,this.h=i,this.j=r,this.k=s,this.d=new mr("InlayHints"),this.e=new Map}async provideInlayHints(e,t,i){const r=this.f.getDocument(e),s=F.to(t),n=await this.h.provideInlayHints(r,s,i);if(!Array.isArray(n)||n.length===0){this.j.trace(`[InlayHints] NO inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`);return}if(i.isCancellationRequested)return;const o=this.d.add(n);this.e.set(o,new ue);const a={hints:[],cacheId:o};for(let c=0;c<n.length;c++)this.l(n[c],s)&&a.hints.push(this.m(n[c],[o,c]));return this.j.trace(`[InlayHints] ${a.hints.length} inlay hints from '${this.k.identifier.value}' for range ${JSON.stringify(t)}`),a}async resolveInlayHint(e,t){if(typeof this.h.resolveInlayHint!="function")return;const i=this.d.get(...e);if(!i)return;const r=await this.h.resolveInlayHint(i,t);if(r&&this.l(r))return this.m(r,e)}releaseHints(e){this.e.get(e)?.dispose(),this.e.delete(e),this.d.delete(e)}l(e,t){return e.label.length===0||Array.isArray(e.label)&&e.label.every(i=>i.value.length===0)?(console.log("INVALID inlay hint, empty label",e),!1):!(t&&!t.contains(e.position))}m(e,t){const i=this.e.get(t[0]);if(!i)throw Error("DisposableStore is missing...");const r={label:"",cacheId:t,tooltip:we.fromStrict(e.tooltip),position:ze.from(e.position),textEdits:e.textEdits&&e.textEdits.map(At.from),kind:e.kind&&pf.from(e.kind),paddingLeft:e.paddingLeft,paddingRight:e.paddingRight};if(typeof e.label=="string")r.label=e.label;else{const s=[];r.label=s;for(const n of e.label){if(!n.value){console.warn("INVALID inlay hint, empty label part",this.k.identifier.value);continue}const o={label:n.value,tooltip:we.fromStrict(n.tooltip)};Bi.isLocation(n.location)&&(o.location=gi.from(n.location)),n.command&&(o.command=this.g.toInternal(n.command,i)),s.push(o)}}return r}},Cp=class tg{constructor(t,i){this.e=t,this.f=i,this.d=new mr("DocumentLink")}async provideLinks(t,i){const r=this.e.getDocument(t),s=await this.f.provideDocumentLinks(r,i);if(!(!Array.isArray(s)||s.length===0)&&!i.isCancellationRequested){if(typeof this.f.resolveDocumentLink!="function")return{links:s.filter(tg.g).map(Qn.from)};{const n=this.d.add(s),o={links:[],cacheId:n};for(let a=0;a<s.length;a++){if(!tg.g(s[a]))continue;const c=Qn.from(s[a]);c.cacheId=[n,a],o.links.push(c)}return o}}}static g(t){return t.target&&t.target.path.length>5e4?(console.warn("DROPPING link because it is too long"),!1):!0}async resolveLink(t,i){if(typeof this.f.resolveDocumentLink!="function")return;const r=this.d.get(...t);if(!r)return;const s=await this.f.resolveDocumentLink(r,i);if(!(!s||!tg.g(s)))return Qn.from(s)}releaseLinks(t){this.d.delete(t)}},qw=class{constructor(e,t){this.d=e,this.e=t}async provideColors(e,t){const i=this.d.getDocument(e),r=await this.e.provideDocumentColors(i,t);return Array.isArray(r)?r.map(n=>({color:wa.from(n.color),range:F.from(n.range)})):[]}async provideColorPresentations(e,t,i){const r=this.d.getDocument(e),s=F.to(t.range),n=wa.to(t.color),o=await this.e.provideColorPresentations(n,{document:r,range:s},i);if(Array.isArray(o))return o.map(gf.from)}},Bk=class{constructor(e,t){this.d=e,this.e=t}async provideFoldingRanges(e,t,i){const r=this.d.getDocument(e),s=await this.e.provideFoldingRanges(r,t,i);if(Array.isArray(s))return s.map(wf.from)}},Hk=class{constructor(e,t,i){this.d=e,this.e=t,this.f=i}async provideSelectionRanges(e,t,i){const r=this.d.getDocument(e),s=t.map(ze.to),n=await this.e.provideSelectionRanges(r,s,i);if(!Xa(n))return[];if(n.length!==s.length)return this.f.warn("BAD selection ranges, provider must return ranges for each position"),[];const o=[];for(let a=0;a<s.length;a++){const c=[];o.push(c);let l=s[a],u=n[a];for(;;){if(!u.range.contains(l))throw new Error("INVALID selection range, must contain the previous range");if(c.push(Av.from(u)),!u.parent)break;l=u.range,u=u.parent}}return o}},ou=class{constructor(e,t){this.f=e,this.g=t,this.d=new sp(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=ze.to(t),n=await this.g.prepareCallHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideCallsTo(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyIncomingCalls(r,i);if(s)return s.map(n=>({from:this.h(e,n.from),fromRanges:n.fromRanges.map(o=>F.from(o))}))}async provideCallsFrom(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing call hierarchy item");const s=await this.g.provideCallHierarchyOutgoingCalls(r,i);if(s)return s.map(n=>({to:this.h(e,n.to),fromRanges:n.fromRanges.map(o=>F.from(o))}))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Yn.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},au=class{constructor(e,t){this.f=e,this.g=t,this.d=new sp(""),this.e=new Map}async prepareSession(e,t,i){const r=this.f.getDocument(e),s=ze.to(t),n=await this.g.prepareTypeHierarchy(r,s,i);if(!n)return;const o=this.d.nextId();return this.e.set(o,new Map),Array.isArray(n)?n.map(a=>this.h(o,a)):[this.h(o,n)]}async provideSupertypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySupertypes(r,i);if(s)return s.map(n=>this.h(e,n))}async provideSubtypes(e,t,i){const r=this.j(e,t);if(!r)throw new Error("missing type hierarchy item");const s=await this.g.provideTypeHierarchySubtypes(r,i);if(s)return s.map(n=>this.h(e,n))}releaseSession(e){this.e.delete(e)}h(e,t){const i=this.e.get(e),r=Xn.from(t,e,i.size.toString(36));return i.set(r._itemId,t),r}j(e,t){return this.e.get(e)?.get(t)}},Ip=class{constructor(e,t,i,r,s){this.e=e,this.f=t,this.g=i,this.h=r,this.j=s,this.d=new mr("DocumentDropEdit")}async provideDocumentOnDropEdits(e,t,i,r,s){const n=this.f.getDocument(t),o=ze.to(i),a=Ca.toDataTransfer(r,async h=>(await this.e.$resolveDocumentOnDropFileData(this.h,e,h)).buffer),c=await this.g.provideDocumentDropEdits(n,o,a,s);if(!c)return;const l=Ni(c),u=this.d.add(l);return l.map((h,f)=>({_cacheId:[u,f],title:h.title??d(2899,null,this.j.displayName||this.j.name),kind:h.kind?.value,yieldTo:h.yieldTo?.map(p=>p.value),insertText:typeof h.insertText=="string"?h.insertText:{snippet:h.insertText.value},additionalEdit:h.additionalEdit?Di.from(h.additionalEdit,void 0):void 0}))}async resolveDropEdit(e,t){const[i,r]=e,s=this.d.get(i,r);if(!s||!this.g.resolveDocumentDropEdit)return{};const n=await this.g.resolveDocumentDropEdit(s,t)??s;return{additionalEdit:n.additionalEdit?Di.from(n.additionalEdit,void 0):void 0}}releaseDropEdits(e){this.d.delete(e)}},cu=class{constructor(e,t){this.adapter=e,this.extension=t}},FU=class Bt{static{this.d=0}constructor(t,i,r,s,n,o,a,c){this.g=i,this.h=r,this.j=s,this.k=n,this.l=o,this.m=a,this.n=c,this.f=new Map,this.e=t.getProxy(J.MainThreadLanguageFeatures)}o(t,i){return pa.from(t,this.g,i)}p(t){return new Pe(()=>{this.f.delete(t),this.e.$unregister(t)})}q(){return Bt.d++}async s(t,i,r,s,n,o=!1){const a=this.f.get(t);if(!a||!(a.adapter instanceof i))return s;const c=Date.now();o||this.l.trace(`[${a.extension.identifier.value}] INVOKE provider '${r.toString().replace(/[\r\n]/g,"")}'`);const l=r(a.adapter,a.extension);return Promise.resolve(l).catch(u=>{yr(u)||(this.l.error(`[${a.extension.identifier.value}] provider FAILED`),this.l.error(u),this.n.onExtensionError(a.extension.identifier,u))}).finally(()=>{o||this.l.trace(`[${a.extension.identifier.value}] provider DONE after ${Date.now()-c}ms`)}),et.isCancellationToken(n)?Bg(l,n):l}t(t,i){const r=this.q();return this.f.set(r,new cu(t,i)),r}static u(t){return t.displayName||t.name}static w(t){return t.identifier.value}registerDocumentSymbolProvider(t,i,r,s){const n=this.t(new $k(this.h,r),t),o=s&&s.label||Bt.u(t);return this.e.$registerDocumentSymbolProvider(n,this.o(i,t),o),this.p(n)}$provideDocumentSymbols(t,i,r){return this.s(t,$k,s=>s.provideDocumentSymbols(y.revive(i),r),void 0,r)}registerCodeLensProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeCodeLenses=="function"?this.q():void 0;this.f.set(s,new cu(new yp(this.h,this.j.converter,r,t,this.n,this.l),t)),this.e.$registerCodeLensSupport(s,this.o(i,t),n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeCodeLenses(c=>this.e.$emitCodeLensEvent(n));o=Pe.from(o,a)}return o}$provideCodeLenses(t,i,r){return this.s(t,yp,s=>s.provideCodeLenses(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveCodeLens(t,i,r){return this.s(t,yp,s=>s.resolveCodeLens(i,r),void 0,void 0,!0)}$releaseCodeLenses(t,i){this.s(t,yp,r=>Promise.resolve(r.releaseCodeLenses(i)),void 0,void 0,!0)}registerDefinitionProvider(t,i,r){const s=this.t(new Ck(this.h,r),t);return this.e.$registerDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideDefinition(t,i,r,s){return this.s(t,Ck,n=>n.provideDefinition(y.revive(i),r,s),[],s)}registerDeclarationProvider(t,i,r){const s=this.t(new Ik(this.h,r),t);return this.e.$registerDeclarationSupport(s,this.o(i,t)),this.p(s)}$provideDeclaration(t,i,r,s){return this.s(t,Ik,n=>n.provideDeclaration(y.revive(i),r,s),[],s)}registerImplementationProvider(t,i,r){const s=this.t(new Dk(this.h,r),t);return this.e.$registerImplementationSupport(s,this.o(i,t)),this.p(s)}$provideImplementation(t,i,r,s){return this.s(t,Dk,n=>n.provideImplementation(y.revive(i),r,s),[],s)}registerTypeDefinitionProvider(t,i,r){const s=this.t(new Pk(this.h,r),t);return this.e.$registerTypeDefinitionSupport(s,this.o(i,t)),this.p(s)}$provideTypeDefinition(t,i,r,s){return this.s(t,Pk,n=>n.provideTypeDefinition(y.revive(i),r,s),[],s)}registerHoverProvider(t,i,r,s){const n=this.t(new jw(this.h,r),t);return this.e.$registerHoverProvider(n,this.o(i,t)),this.p(n)}$provideHover(t,i,r,s,n){return this.s(t,jw,o=>o.provideHover(y.revive(i),r,s,n),void 0,n)}$releaseHover(t,i){this.s(t,jw,r=>Promise.resolve(r.releaseHover(i)),void 0,void 0)}registerEvaluatableExpressionProvider(t,i,r,s){const n=this.t(new Ak(this.h,r),t);return this.e.$registerEvaluatableExpressionProvider(n,this.o(i,t)),this.p(n)}$provideEvaluatableExpression(t,i,r,s){return this.s(t,Ak,n=>n.provideEvaluatableExpression(y.revive(i),r,s),void 0,s)}registerInlineValuesProvider(t,i,r,s){const n=typeof r.onDidChangeInlineValues=="function"?this.q():void 0,o=this.t(new Tk(this.h,r),t);this.e.$registerInlineValuesProvider(o,this.o(i,t),n);let a=this.p(o);if(n!==void 0){const c=r.onDidChangeInlineValues(l=>this.e.$emitInlineValuesEvent(n));a=Pe.from(a,c)}return a}$provideInlineValues(t,i,r,s,n){return this.s(t,Tk,o=>o.provideInlineValues(y.revive(i),r,s,n),void 0,n)}registerDocumentHighlightProvider(t,i,r){const s=this.t(new Rk(this.h,r),t);return this.e.$registerDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}registerMultiDocumentHighlightProvider(t,i,r){const s=this.t(new Lk(this.h,r,this.l),t);return this.e.$registerMultiDocumentHighlightProvider(s,this.o(i,t)),this.p(s)}$provideDocumentHighlights(t,i,r,s){return this.s(t,Rk,n=>n.provideDocumentHighlights(y.revive(i),r,s),void 0,s)}$provideMultiDocumentHighlights(t,i,r,s,n){return this.s(t,Lk,o=>o.provideMultiDocumentHighlights(y.revive(i),r,s.map(a=>y.revive(a)),n),void 0,n)}registerLinkedEditingRangeProvider(t,i,r){const s=this.t(new Nk(this.h,r),t);return this.e.$registerLinkedEditingRangeProvider(s,this.o(i,t)),this.p(s)}$provideLinkedEditingRanges(t,i,r,s){return this.s(t,Nk,async n=>{const o=await n.provideLinkedEditingRanges(y.revive(i),r,s);if(o)return{ranges:o.ranges,wordPattern:o.wordPattern?Bt.y(o.wordPattern):void 0}},void 0,s)}registerReferenceProvider(t,i,r){const s=this.t(new Mk(this.h,r),t);return this.e.$registerReferenceSupport(s,this.o(i,t)),this.p(s)}$provideReferences(t,i,r,s,n){return this.s(t,Mk,o=>o.provideReferences(y.revive(i),r,s,n),void 0,n)}registerCodeActionProvider(t,i,r,s){const n=new ue,o=this.t(new Ep(this.h,this.j.converter,this.k,r,this.l,t,this.m),t);return this.e.$registerCodeActionSupport(o,this.o(i,t),{providedKinds:s?.providedCodeActionKinds?.map(a=>a.value),documentation:s?.documentation?.map(a=>({kind:a.kind.value,command:this.j.converter.toInternal(a.command,n)}))},Bt.u(t),Bt.w(t),!!r.resolveCodeAction),n.add(this.p(o)),n}$provideCodeActions(t,i,r,s,n){return this.s(t,Ep,o=>o.provideCodeActions(y.revive(i),r,s,n),void 0,n)}$resolveCodeAction(t,i,r){return this.s(t,Ep,s=>s.resolveCodeAction(i,r),{},void 0)}$releaseCodeActions(t,i){this.s(t,Ep,r=>Promise.resolve(r.releaseCodeActions(i)),void 0,void 0)}registerDocumentFormattingEditProvider(t,i,r){const s=this.t(new Fk(this.h,r),t);return this.e.$registerDocumentFormattingSupport(s,this.o(i,t),t.identifier,t.displayName||t.name),this.p(s)}$provideDocumentFormattingEdits(t,i,r,s){return this.s(t,Fk,n=>n.provideDocumentFormattingEdits(y.revive(i),r,s),void 0,s)}registerDocumentRangeFormattingEditProvider(t,i,r){const s=typeof r.provideDocumentRangesFormattingEdits=="function",n=this.t(new Bw(this.h,r),t);return this.e.$registerRangeFormattingSupport(n,this.o(i,t),t.identifier,t.displayName||t.name,s),this.p(n)}$provideDocumentRangeFormattingEdits(t,i,r,s,n){return this.s(t,Bw,o=>o.provideDocumentRangeFormattingEdits(y.revive(i),r,s,n),void 0,n)}$provideDocumentRangesFormattingEdits(t,i,r,s,n){return this.s(t,Bw,o=>o.provideDocumentRangesFormattingEdits(y.revive(i),r,s,n),void 0,n)}registerOnTypeFormattingEditProvider(t,i,r,s){const n=this.t(new Ok(this.h,r),t);return this.e.$registerOnTypeFormattingSupport(n,this.o(i,t),s,t.identifier),this.p(n)}$provideOnTypeFormattingEdits(t,i,r,s,n,o){return this.s(t,Ok,a=>a.provideOnTypeFormattingEdits(y.revive(i),r,s,n,o),void 0,o)}registerWorkspaceSymbolProvider(t,i){const r=this.t(new Sp(i,this.l),t);return this.e.$registerNavigateTypeSupport(r,typeof i.resolveWorkspaceSymbol=="function"),this.p(r)}$provideWorkspaceSymbols(t,i,r){return this.s(t,Sp,s=>s.provideWorkspaceSymbols(i,r),{symbols:[]},r)}$resolveWorkspaceSymbol(t,i,r){return this.s(t,Sp,s=>s.resolveWorkspaceSymbol(i,r),void 0,void 0)}$releaseWorkspaceSymbols(t,i){this.s(t,Sp,r=>r.releaseWorkspaceSymbols(i),void 0,void 0)}registerRenameProvider(t,i,r){const s=this.t(new kp(this.h,r,this.l),t);return this.e.$registerRenameSupport(s,this.o(i,t),kp.supportsResolving(r)),this.p(s)}$provideRenameEdits(t,i,r,s,n){return this.s(t,kp,o=>o.provideRenameEdits(y.revive(i),r,s,n),void 0,n)}$resolveRenameLocation(t,i,r,s){return this.s(t,kp,n=>n.resolveRenameLocation(y.revive(i),r,s),void 0,s)}registerNewSymbolNamesProvider(t,i,r){const s=this.t(new Hw(this.h,r,this.l),t);return this.e.$registerNewSymbolNamesProvider(s,this.o(i,t)),this.p(s)}$supportsAutomaticNewSymbolNamesTriggerKind(t){return this.s(t,Hw,i=>i.supportsAutomaticNewSymbolNamesTriggerKind(),!1,void 0)}$provideNewSymbolNames(t,i,r,s,n){return this.s(t,Hw,o=>o.provideNewSymbolNames(y.revive(i),r,s,n),void 0,n)}registerDocumentSemanticTokensProvider(t,i,r,s){const n=this.t(new _w(this.h,r),t),o=typeof r.onDidChangeSemanticTokens=="function"?this.q():void 0;this.e.$registerDocumentSemanticTokensProvider(n,this.o(i,t),s,o);let a=this.p(n);if(o){const c=r.onDidChangeSemanticTokens(l=>this.e.$emitDocumentSemanticTokensEvent(o));a=Pe.from(a,c)}return a}$provideDocumentSemanticTokens(t,i,r,s){return this.s(t,_w,n=>n.provideDocumentSemanticTokens(y.revive(i),r,s),null,s)}$releaseDocumentSemanticTokens(t,i){this.s(t,_w,r=>r.releaseDocumentSemanticColoring(i),void 0,void 0)}registerDocumentRangeSemanticTokensProvider(t,i,r,s){const n=this.t(new Uk(this.h,r),t);return this.e.$registerDocumentRangeSemanticTokensProvider(n,this.o(i,t),s),this.p(n)}$provideDocumentRangeSemanticTokens(t,i,r,s){return this.s(t,Uk,n=>n.provideDocumentRangeSemanticTokens(y.revive(i),r,s),null,s)}registerCompletionItemProvider(t,i,r,s){const n=this.t(new nu(this.h,this.j.converter,r,this.m,t),t);return this.e.$registerCompletionsProvider(n,this.o(i,t),s,nu.supportsResolving(r),t.identifier),this.p(n)}$provideCompletionItems(t,i,r,s,n){return this.s(t,nu,o=>o.provideCompletionItems(y.revive(i),r,s,n),void 0,n)}$resolveCompletionItem(t,i,r){return this.s(t,nu,s=>s.resolveCompletionItem(i,r),void 0,r)}$releaseCompletionItems(t,i){this.s(t,nu,r=>r.releaseCompletionItems(i),void 0,void 0)}registerInlineCompletionsProvider(t,i,r,s){const n=typeof r.onDidChange=="function"&&Ge(t,"inlineCompletionsAdditions")?this.q():void 0,o=new Ks(t,this.h,r,this.j.converter),a=this.t(o,t);let c=this.p(a);if(n!==void 0){const l=r.onDidChange(u=>this.e.$emitInlineCompletionsChange(n));c=Pe.from(c,l)}return this.e.$registerInlineCompletionsSupport(a,this.o(i,t),o.supportsHandleEvents,je.toKey(t.identifier.value),s?.yieldTo?.map(l=>je.toKey(l))||[],s?.displayName,s?.debounceDelayMs,n),c}$provideInlineCompletions(t,i,r,s,n){return this.s(t,Ks,o=>o.provideInlineCompletions(y.revive(i),r,s,n),void 0,n)}$provideInlineEditsForRange(t,i,r,s,n){return this.s(t,Ks,o=>o.provideInlineEditsForRange(y.revive(i),r,s,n),void 0,n)}$handleInlineCompletionDidShow(t,i,r,s){this.s(t,Ks,async n=>{n.handleDidShowCompletionItem(i,r,s)},void 0,void 0)}$handleInlineCompletionPartialAccept(t,i,r,s,n){this.s(t,Ks,async o=>{o.handlePartialAccept(i,r,s,n)},void 0,void 0)}$handleInlineCompletionEndOfLifetime(t,i,r,s){this.s(t,Ks,async n=>{n.handleEndOfLifetime(i,r,s)},void 0,void 0)}$handleInlineCompletionRejection(t,i,r){this.s(t,Ks,async s=>{s.handleRejection(i,r)},void 0,void 0)}$freeInlineCompletionsList(t,i){this.s(t,Ks,async r=>{r.disposeCompletions(i)},void 0,void 0)}registerInlineEditProvider(t,i,r){const s=new Ww(t,this.h,r,this.j.converter),n=this.t(s,t);return this.e.$registerInlineEditProvider(n,this.o(i,t),t.identifier,r.displayName||t.name),this.p(n)}$provideInlineEdit(t,i,r,s){return this.s(t,Ww,n=>n.provideInlineEdits(y.revive(i),r,s),void 0,s)}$freeInlineEdit(t,i){this.s(t,Ww,async r=>{r.disposeEdit(i)},void 0,void 0)}registerSignatureHelpProvider(t,i,r,s){const n=Array.isArray(s)?{triggerCharacters:s,retriggerCharacters:[]}:s,o=this.t(new Vw(this.h,r),t);return this.e.$registerSignatureHelpProvider(o,this.o(i,t),n),this.p(o)}$provideSignatureHelp(t,i,r,s,n){return this.s(t,Vw,o=>o.provideSignatureHelp(y.revive(i),r,s,n),void 0,n)}$releaseSignatureHelp(t,i){this.s(t,Vw,r=>r.releaseSignatureHelp(i),void 0,void 0)}registerInlayHintsProvider(t,i,r){const s=typeof r.onDidChangeInlayHints=="function"?this.q():void 0,n=this.t(new $p(this.h,this.j.converter,r,this.l,t),t);this.e.$registerInlayHintsProvider(n,this.o(i,t),typeof r.resolveInlayHint=="function",s,Bt.u(t));let o=this.p(n);if(s!==void 0){const a=r.onDidChangeInlayHints(c=>this.e.$emitInlayHintsEvent(s));o=Pe.from(o,a)}return o}$provideInlayHints(t,i,r,s){return this.s(t,$p,n=>n.provideInlayHints(y.revive(i),r,s),void 0,s)}$resolveInlayHint(t,i,r){return this.s(t,$p,s=>s.resolveInlayHint(i,r),void 0,r)}$releaseInlayHints(t,i){this.s(t,$p,r=>r.releaseHints(i),void 0,void 0)}registerDocumentLinkProvider(t,i,r){const s=this.t(new Cp(this.h,r),t);return this.e.$registerDocumentLinkProvider(s,this.o(i,t),typeof r.resolveDocumentLink=="function"),this.p(s)}$provideDocumentLinks(t,i,r){return this.s(t,Cp,s=>s.provideLinks(y.revive(i),r),void 0,r,i.scheme==="output")}$resolveDocumentLink(t,i,r){return this.s(t,Cp,s=>s.resolveLink(i,r),void 0,void 0,!0)}$releaseDocumentLinks(t,i){this.s(t,Cp,r=>r.releaseLinks(i),void 0,void 0,!0)}registerColorProvider(t,i,r){const s=this.t(new qw(this.h,r),t);return this.e.$registerDocumentColorProvider(s,this.o(i,t)),this.p(s)}$provideDocumentColors(t,i,r){return this.s(t,qw,s=>s.provideColors(y.revive(i),r),[],r)}$provideColorPresentations(t,i,r,s){return this.s(t,qw,n=>n.provideColorPresentations(y.revive(i),r,s),void 0,s)}registerFoldingRangeProvider(t,i,r){const s=this.q(),n=typeof r.onDidChangeFoldingRanges=="function"?this.q():void 0;this.f.set(s,new cu(new Bk(this.h,r),t)),this.e.$registerFoldingRangeProvider(s,this.o(i,t),t.identifier,n);let o=this.p(s);if(n!==void 0){const a=r.onDidChangeFoldingRanges(()=>this.e.$emitFoldingRangeEvent(n));o=Pe.from(o,a)}return o}$provideFoldingRanges(t,i,r,s){return this.s(t,Bk,n=>n.provideFoldingRanges(y.revive(i),r,s),void 0,s)}registerSelectionRangeProvider(t,i,r){const s=this.t(new Hk(this.h,r,this.l),t);return this.e.$registerSelectionRangeProvider(s,this.o(i,t)),this.p(s)}$provideSelectionRanges(t,i,r,s){return this.s(t,Hk,n=>n.provideSelectionRanges(y.revive(i),r,s),[],s)}registerCallHierarchyProvider(t,i,r){const s=this.t(new ou(this.h,r),t);return this.e.$registerCallHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareCallHierarchy(t,i,r,s){return this.s(t,ou,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideCallHierarchyIncomingCalls(t,i,r,s){return this.s(t,ou,n=>n.provideCallsTo(i,r,s),void 0,s)}$provideCallHierarchyOutgoingCalls(t,i,r,s){return this.s(t,ou,n=>n.provideCallsFrom(i,r,s),void 0,s)}$releaseCallHierarchy(t,i){this.s(t,ou,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerTypeHierarchyProvider(t,i,r){const s=this.t(new au(this.h,r),t);return this.e.$registerTypeHierarchyProvider(s,this.o(i,t)),this.p(s)}$prepareTypeHierarchy(t,i,r,s){return this.s(t,au,n=>Promise.resolve(n.prepareSession(y.revive(i),r,s)),void 0,s)}$provideTypeHierarchySupertypes(t,i,r,s){return this.s(t,au,n=>n.provideSupertypes(i,r,s),void 0,s)}$provideTypeHierarchySubtypes(t,i,r,s){return this.s(t,au,n=>n.provideSubtypes(i,r,s),void 0,s)}$releaseTypeHierarchy(t,i){this.s(t,au,r=>Promise.resolve(r.releaseSession(i)),void 0,void 0)}registerDocumentOnDropEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new cu(new Ip(this.e,this.h,r,n,t),t)),this.e.$registerDocumentOnDropEditProvider(n,this.o(i,t),s?{supportsResolve:!!r.resolveDocumentDropEdit,dropMimeTypes:s.dropMimeTypes,providedDropKinds:s.providedDropEditKinds?.map(o=>o.value)}:void 0),this.p(n)}$provideDocumentOnDropEdits(t,i,r,s,n,o){return this.s(t,Ip,a=>Promise.resolve(a.provideDocumentOnDropEdits(i,y.revive(r),s,n,o)),void 0,void 0)}$resolveDropEdit(t,i,r){return this.s(t,Ip,s=>s.resolveDropEdit(i,r),{},void 0)}$releaseDocumentOnDropEdits(t,i){this.s(t,Ip,r=>Promise.resolve(r.releaseDropEdits(i)),void 0,void 0)}registerDocumentPasteEditProvider(t,i,r,s){const n=this.q();return this.f.set(n,new cu(new su(this.e,this.h,r,n,t),t)),this.e.$registerPasteEditProvider(n,this.o(i,t),{supportsCopy:!!r.prepareDocumentPaste,supportsPaste:!!r.provideDocumentPasteEdits,supportsResolve:!!r.resolveDocumentPasteEdit,providedPasteEditKinds:s.providedPasteEditKinds?.map(o=>o.value),copyMimeTypes:s.copyMimeTypes,pasteMimeTypes:s.pasteMimeTypes}),this.p(n)}$prepareDocumentPaste(t,i,r,s,n){return this.s(t,su,o=>o.prepareDocumentPaste(y.revive(i),r,s,n),void 0,n)}$providePasteEdits(t,i,r,s,n,o,a){return this.s(t,su,c=>c.providePasteEdits(i,y.revive(r),s,n,o,a),void 0,a)}$resolvePasteEdit(t,i,r){return this.s(t,su,s=>s.resolvePasteEdit(i,r),{},void 0)}$releasePasteEdits(t,i){this.s(t,su,r=>Promise.resolve(r.releasePasteEdits(i)),void 0,void 0)}static y(t){return{pattern:t.source,flags:t.flags}}static z(t){return{decreaseIndentPattern:Bt.y(t.decreaseIndentPattern),increaseIndentPattern:Bt.y(t.increaseIndentPattern),indentNextLinePattern:t.indentNextLinePattern?Bt.y(t.indentNextLinePattern):void 0,unIndentedLinePattern:t.unIndentedLinePattern?Bt.y(t.unIndentedLinePattern):void 0}}static B(t){return{beforeText:Bt.y(t.beforeText),afterText:t.afterText?Bt.y(t.afterText):void 0,previousLineText:t.previousLineText?Bt.y(t.previousLineText):void 0,action:t.action}}static C(t){return t.map(Bt.B)}static D(t){return{open:t.open,close:t.close,notIn:t.notIn?t.notIn.map(i=>ta.toString(i)):void 0}}static E(t){return t.map(Bt.D)}setLanguageConfiguration(t,i,r){const{wordPattern:s}=r;if(s&&d4(s))throw new Error(`Invalid language configuration: wordPattern '${s}' is not allowed to match the empty string.`);s?this.h.setWordDefinitionFor(i,s):this.h.setWordDefinitionFor(i,void 0),r.__electricCharacterSupport&&this.m.report("LanguageConfiguration.__electricCharacterSupport",t,"Do not use."),r.__characterPairSupport&&this.m.report("LanguageConfiguration.__characterPairSupport",t,"Do not use.");const n=this.q(),o={comments:r.comments,brackets:r.brackets,wordPattern:r.wordPattern?Bt.y(r.wordPattern):void 0,indentationRules:r.indentationRules?Bt.z(r.indentationRules):void 0,onEnterRules:r.onEnterRules?Bt.C(r.onEnterRules):void 0,__electricCharacterSupport:r.__electricCharacterSupport,__characterPairSupport:r.__characterPairSupport,autoClosingPairs:r.autoClosingPairs?Bt.E(r.autoClosingPairs):void 0};return this.e.$setLanguageConfiguration(n,i,o),this.p(n)}$setWordDefinitions(t){for(const i of t)this.h.setWordDefinitionFor(i.languageId,new RegExp(i.regexSource,i.regexFlags))}},Dp;(function(e){e.Internal={type:"internal",label:"Built-In"};function t(s){switch(s.type){case"extension":return`extension:${s.extensionId.value}`;case"mcp":return`mcp:${s.collectionId}:${s.definitionId}`;case"user":return`user:${s.file.toString()}`;case"internal":return"internal"}}e.toKey=t;function i(s,n){return t(s)===t(n)}e.equals=i;function r(s){return s.type==="internal"?{ordinal:1,label:d(5707,null)}:s.type==="mcp"?{ordinal:2,label:d(5708,null,s.label)}:s.type==="user"?{ordinal:0,label:d(5709,null)}:{ordinal:3,label:d(5710,null,s.label)}}e.classify=r})(Dp||(Dp={}));function OU(e){return typeof e=="object"&&typeof e.sessionId=="string"}var UU=B("ILanguageModelToolsService"),jU=B("notebookService"),BU=B("codeMapperService"),zk="vscode_editFile",Gw="vscode_editFile_internal",_k={id:Gw,displayName:"",modelDescription:"",source:Dp.Internal},Jw=class{constructor(t,i,r){this.a=t,this.b=i,this.c=r}async invoke(t,i,r,s){if(!t.context)throw new Error("toolInvocationToken is required for this tool");const n=t.parameters,o=y.revive(n.uri),a=Ih.parse(o)?.notebook||o,c=this.a.getSession(t.context?.sessionId),l=c.getRequests().at(-1);c.acceptResponseProgress(l,{kind:"markdownContent",content:new No("\n````\n")}),c.acceptResponseProgress(l,{kind:"codeblockUri",uri:a,isEdit:!0}),c.acceptResponseProgress(l,{kind:"markdownContent",content:new No("\n````\n")}),this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",edits:[],uri:a}):c.acceptResponseProgress(l,{kind:"textEdit",edits:[],uri:a});const u=c.editingSession;if(!u)throw new Error("This tool must be called from within an editing session");const h=await this.b.mapCode({codeBlocks:[{code:n.code,resource:a,markdownBeforeBlock:n.explanation}],location:"tool",chatRequestId:t.chatRequestId,chatRequestModel:t.modelId,chatSessionId:t.context.sessionId},{textEdit:(p,m)=>{c.acceptResponseProgress(l,{kind:"textEdit",uri:p,edits:m})},notebookEdit(p,m){c.acceptResponseProgress(l,{kind:"notebookEdit",uri:p,edits:m})}},s);if(this.c.hasSupportedNotebooks(a)&&this.c.getNotebookTextModel(a)?c.acceptResponseProgress(l,{kind:"notebookEdit",uri:a,edits:[],done:!0}):c.acceptResponseProgress(l,{kind:"textEdit",uri:a,edits:[],done:!0}),h?.errorMessage)throw new Error(h.errorMessage);let f;return await new Promise(p=>{let m=!1;f=u7(w=>{const E=u.entries.read(w)?.find($=>$.modifiedURI.toString()===a.toString());E&&(E.isCurrentlyBeingModifiedBy.read(w)?m=!0:m&&p(!0))})}).finally(()=>{f.dispose()}),{content:[{kind:"text",value:"The file was edited successfully"}]}}async prepareToolInvocation(t,i){return{presentation:"hidden"}}};Jw=__decorate([__param(0,GT),__param(1,BU),__param(2,jU)],Jw);var Wk=class extends ne{static{this.ID="chat.builtinTools"}constructor(t,i){super();const r=i.createInstance(Jw);this.B(t.registerToolData(_k)),this.B(t.registerToolImplementation(_k.id,r))}};Wk=__decorate([__param(0,UU),__param(1,fc)],Wk);var HU="vscode_fetchWebPage_internal",Vk=B("commandService"),Zw=new class{constructor(){this.a=new Map,this.b=new P,this.onDidRegisterCommand=this.b.event}registerCommand(e,t){if(!e)throw new Error("invalid command");if(typeof e=="string"){if(!t)throw new Error("invalid command");return this.registerCommand({id:e,handler:t})}if(e.metadata&&Array.isArray(e.metadata.args)){const o=[];for(const c of e.metadata.args)o.push(c.constraint);const a=e.handler;e.handler=function(c,...l){return LI(l,o),a(c,...l)}}const{id:i}=e;let r=this.a.get(i);r||(r=new ys,this.a.set(i,r));const s=r.unshift(e),n=oe(()=>{s(),this.a.get(i)?.isEmpty()&&this.a.delete(i)});return this.b.fire(i),mg(n)}registerCommandAlias(e,t){return Zw.registerCommand(e,(i,...r)=>i.get(Vk).executeCommand(t,...r))}getCommand(e){const t=this.a.get(e);if(!(!t||t.isEmpty()))return Ot.first(t)}getCommands(){const e=new Map;for(const t of this.a.keys()){const i=this.getCommand(t);i&&e.set(t,i)}return e}};Zw.registerCommand("noop",()=>{});var qk;(function(e){e[e.CtrlCmd=2048]="CtrlCmd",e[e.Shift=1024]="Shift",e[e.Alt=512]="Alt",e[e.WinCtrl=256]="WinCtrl",e[e.KeyCode=255]="KeyCode"})(qk||(qk={}));function Gk(e,t){if(typeof e=="number"){if(e===0)return null;const i=(e&65535)>>>0,r=(e&4294901760)>>>16;return r!==0?new Ap([Pp(i,t),Pp(r,t)]):new Ap([Pp(i,t)])}else{const i=[];for(let r=0;r<e.length;r++)i.push(Pp(e[r],t));return new Ap(i)}}function Pp(e,t){const i=!!(e&2048),r=!!(e&256),s=t===2?r:i,n=!!(e&1024),o=!!(e&512),a=t===2?i:r,c=e&255;return new zU(s,n,o,a,c)}var zU=class OC{constructor(t,i,r,s,n){this.ctrlKey=t,this.shiftKey=i,this.altKey=r,this.metaKey=s,this.keyCode=n}equals(t){return t instanceof OC&&this.ctrlKey===t.ctrlKey&&this.shiftKey===t.shiftKey&&this.altKey===t.altKey&&this.metaKey===t.metaKey&&this.keyCode===t.keyCode}getHashCode(){const t=this.ctrlKey?"1":"0",i=this.shiftKey?"1":"0",r=this.altKey?"1":"0",s=this.metaKey?"1":"0";return`K${t}${i}${r}${s}${this.keyCode}`}isModifierKey(){return this.keyCode===0||this.keyCode===5||this.keyCode===57||this.keyCode===6||this.keyCode===4}toKeybinding(){return new Ap([this])}isDuplicateModifierCase(){return this.ctrlKey&&this.keyCode===5||this.shiftKey&&this.keyCode===4||this.altKey&&this.keyCode===6||this.metaKey&&this.keyCode===57}},Ap=class{constructor(e){if(e.length===0)throw Ce("chords");this.chords=e}getHashCode(){let e="";for(let t=0,i=this.chords.length;t<i;t++)t!==0&&(e+=";"),e+=this.chords[t].getHashCode();return e}equals(e){if(e===null||this.chords.length!==e.chords.length)return!1;for(let t=0;t<this.chords.length;t++)if(!this.chords[t].equals(e.chords[t]))return!1;return!0}},Jk;(function(e){e[e.EditorCore=0]="EditorCore",e[e.EditorContrib=100]="EditorContrib",e[e.WorkbenchContrib=200]="WorkbenchContrib",e[e.BuiltinExtension=300]="BuiltinExtension",e[e.ExternalExtension=400]="ExternalExtension"})(Jk||(Jk={}));var _U=class UC{constructor(){this.c=new ys,this.d=[],this.e=null}static f(t){if(oc===1){if(t&&t.win)return t.win}else if(oc===2){if(t&&t.mac)return t.mac}else if(t&&t.linux)return t.linux;return t}registerKeybindingRule(t){const i=UC.f(t),r=new ue;if(i&&i.primary){const s=Gk(i.primary,oc);s&&r.add(this.g(s,t.id,t.args,t.weight,0,t.when))}if(i&&Array.isArray(i.secondary))for(let s=0,n=i.secondary.length;s<n;s++){const o=i.secondary[s],a=Gk(o,oc);a&&r.add(this.g(a,t.id,t.args,t.weight,-s-1,t.when))}return r}setExtensionKeybindings(t){const i=[];let r=0;for(const s of t)s.keybinding&&(i[r++]={keybinding:s.keybinding,command:s.id,commandArgs:s.args,when:s.when,weight1:s.weight,weight2:0,extensionId:s.extensionId||null,isBuiltinExtension:s.isBuiltinExtension||!1});this.d=i,this.e=null}registerCommandAndKeybindingRule(t){return vg(this.registerKeybindingRule(t),Zw.registerCommand(t))}g(t,i,r,s,n,o){const a=this.c.push({keybinding:t,command:i,commandArgs:r,when:o,weight1:s,weight2:n,extensionId:null,isBuiltinExtension:!1});return this.e=null,oe(()=>{a(),this.e=null})}getDefaultKeybindings(){return this.e||(this.e=Array.from(this.c).concat(this.d),this.e.sort(qU)),this.e.slice(0)}},WU=new _U,VU={EditorModes:"platform.keybindingsRegistry"};jt.add(VU.EditorModes,WU);function qU(e,t){if(e.weight1!==t.weight1)return e.weight1-t.weight1;if(e.command&&t.command){if(e.command<t.command)return-1;if(e.command>t.command)return 1}return e.weight2-t.weight2}var Tp;function GU(e){return e.command!==void 0}var lu=class D{static{this.a=new Map}static{this.CommandPalette=new D("CommandPalette")}static{this.DebugBreakpointsContext=new D("DebugBreakpointsContext")}static{this.DebugCallStackContext=new D("DebugCallStackContext")}static{this.DebugConsoleContext=new D("DebugConsoleContext")}static{this.DebugVariablesContext=new D("DebugVariablesContext")}static{this.NotebookVariablesContext=new D("NotebookVariablesContext")}static{this.DebugHoverContext=new D("DebugHoverContext")}static{this.DebugWatchContext=new D("DebugWatchContext")}static{this.DebugToolBar=new D("DebugToolBar")}static{this.DebugToolBarStop=new D("DebugToolBarStop")}static{this.DebugDisassemblyContext=new D("DebugDisassemblyContext")}static{this.DebugCallStackToolbar=new D("DebugCallStackToolbar")}static{this.DebugCreateConfiguration=new D("DebugCreateConfiguration")}static{this.EditorContext=new D("EditorContext")}static{this.SimpleEditorContext=new D("SimpleEditorContext")}static{this.EditorContent=new D("EditorContent")}static{this.EditorLineNumberContext=new D("EditorLineNumberContext")}static{this.EditorContextCopy=new D("EditorContextCopy")}static{this.EditorContextPeek=new D("EditorContextPeek")}static{this.EditorContextShare=new D("EditorContextShare")}static{this.EditorTitle=new D("EditorTitle")}static{this.CompactWindowEditorTitle=new D("CompactWindowEditorTitle")}static{this.EditorTitleRun=new D("EditorTitleRun")}static{this.EditorTitleContext=new D("EditorTitleContext")}static{this.EditorTitleContextShare=new D("EditorTitleContextShare")}static{this.EmptyEditorGroup=new D("EmptyEditorGroup")}static{this.EmptyEditorGroupContext=new D("EmptyEditorGroupContext")}static{this.EditorTabsBarContext=new D("EditorTabsBarContext")}static{this.EditorTabsBarShowTabsSubmenu=new D("EditorTabsBarShowTabsSubmenu")}static{this.EditorTabsBarShowTabsZenModeSubmenu=new D("EditorTabsBarShowTabsZenModeSubmenu")}static{this.EditorActionsPositionSubmenu=new D("EditorActionsPositionSubmenu")}static{this.ExplorerContext=new D("ExplorerContext")}static{this.ExplorerContextShare=new D("ExplorerContextShare")}static{this.ExtensionContext=new D("ExtensionContext")}static{this.ExtensionEditorContextMenu=new D("ExtensionEditorContextMenu")}static{this.GlobalActivity=new D("GlobalActivity")}static{this.CommandCenter=new D("CommandCenter")}static{this.CommandCenterCenter=new D("CommandCenterCenter")}static{this.LayoutControlMenuSubmenu=new D("LayoutControlMenuSubmenu")}static{this.LayoutControlMenu=new D("LayoutControlMenu")}static{this.MenubarMainMenu=new D("MenubarMainMenu")}static{this.MenubarAppearanceMenu=new D("MenubarAppearanceMenu")}static{this.MenubarDebugMenu=new D("MenubarDebugMenu")}static{this.MenubarEditMenu=new D("MenubarEditMenu")}static{this.MenubarCopy=new D("MenubarCopy")}static{this.MenubarFileMenu=new D("MenubarFileMenu")}static{this.MenubarGoMenu=new D("MenubarGoMenu")}static{this.MenubarHelpMenu=new D("MenubarHelpMenu")}static{this.MenubarLayoutMenu=new D("MenubarLayoutMenu")}static{this.MenubarNewBreakpointMenu=new D("MenubarNewBreakpointMenu")}static{this.PanelAlignmentMenu=new D("PanelAlignmentMenu")}static{this.PanelPositionMenu=new D("PanelPositionMenu")}static{this.ActivityBarPositionMenu=new D("ActivityBarPositionMenu")}static{this.MenubarPreferencesMenu=new D("MenubarPreferencesMenu")}static{this.MenubarRecentMenu=new D("MenubarRecentMenu")}static{this.MenubarSelectionMenu=new D("MenubarSelectionMenu")}static{this.MenubarShare=new D("MenubarShare")}static{this.MenubarSwitchEditorMenu=new D("MenubarSwitchEditorMenu")}static{this.MenubarSwitchGroupMenu=new D("MenubarSwitchGroupMenu")}static{this.MenubarTerminalMenu=new D("MenubarTerminalMenu")}static{this.MenubarTerminalSuggestStatusMenu=new D("MenubarTerminalSuggestStatusMenu")}static{this.MenubarViewMenu=new D("MenubarViewMenu")}static{this.MenubarHomeMenu=new D("MenubarHomeMenu")}static{this.OpenEditorsContext=new D("OpenEditorsContext")}static{this.OpenEditorsContextShare=new D("OpenEditorsContextShare")}static{this.ProblemsPanelContext=new D("ProblemsPanelContext")}static{this.SCMInputBox=new D("SCMInputBox")}static{this.SCMChangeContext=new D("SCMChangeContext")}static{this.SCMResourceContext=new D("SCMResourceContext")}static{this.SCMResourceContextShare=new D("SCMResourceContextShare")}static{this.SCMResourceFolderContext=new D("SCMResourceFolderContext")}static{this.SCMResourceGroupContext=new D("SCMResourceGroupContext")}static{this.SCMSourceControl=new D("SCMSourceControl")}static{this.SCMSourceControlInline=new D("SCMSourceControlInline")}static{this.SCMSourceControlTitle=new D("SCMSourceControlTitle")}static{this.SCMHistoryTitle=new D("SCMHistoryTitle")}static{this.SCMHistoryItemContext=new D("SCMHistoryItemContext")}static{this.SCMHistoryItemChatContext=new D("SCMHistoryItemChatContext")}static{this.SCMHistoryItemChangeContext=new D("SCMHistoryItemChangeContext")}static{this.SCMHistoryItemHover=new D("SCMHistoryItemHover")}static{this.SCMHistoryItemRefContext=new D("SCMHistoryItemRefContext")}static{this.SCMQuickDiffDecorations=new D("SCMQuickDiffDecorations")}static{this.SCMTitle=new D("SCMTitle")}static{this.SearchContext=new D("SearchContext")}static{this.SearchActionMenu=new D("SearchActionContext")}static{this.StatusBarWindowIndicatorMenu=new D("StatusBarWindowIndicatorMenu")}static{this.StatusBarRemoteIndicatorMenu=new D("StatusBarRemoteIndicatorMenu")}static{this.StickyScrollContext=new D("StickyScrollContext")}static{this.TestItem=new D("TestItem")}static{this.TestItemGutter=new D("TestItemGutter")}static{this.TestProfilesContext=new D("TestProfilesContext")}static{this.TestMessageContext=new D("TestMessageContext")}static{this.TestMessageContent=new D("TestMessageContent")}static{this.TestPeekElement=new D("TestPeekElement")}static{this.TestPeekTitle=new D("TestPeekTitle")}static{this.TestCallStack=new D("TestCallStack")}static{this.TestCoverageFilterItem=new D("TestCoverageFilterItem")}static{this.TouchBarContext=new D("TouchBarContext")}static{this.TitleBar=new D("TitleBar")}static{this.TitleBarContext=new D("TitleBarContext")}static{this.TitleBarTitleContext=new D("TitleBarTitleContext")}static{this.TunnelContext=new D("TunnelContext")}static{this.TunnelPrivacy=new D("TunnelPrivacy")}static{this.TunnelProtocol=new D("TunnelProtocol")}static{this.TunnelPortInline=new D("TunnelInline")}static{this.TunnelTitle=new D("TunnelTitle")}static{this.TunnelLocalAddressInline=new D("TunnelLocalAddressInline")}static{this.TunnelOriginInline=new D("TunnelOriginInline")}static{this.ViewItemContext=new D("ViewItemContext")}static{this.ViewContainerTitle=new D("ViewContainerTitle")}static{this.ViewContainerTitleContext=new D("ViewContainerTitleContext")}static{this.ViewTitle=new D("ViewTitle")}static{this.ViewTitleContext=new D("ViewTitleContext")}static{this.CommentEditorActions=new D("CommentEditorActions")}static{this.CommentThreadTitle=new D("CommentThreadTitle")}static{this.CommentThreadActions=new D("CommentThreadActions")}static{this.CommentThreadAdditionalActions=new D("CommentThreadAdditionalActions")}static{this.CommentThreadTitleContext=new D("CommentThreadTitleContext")}static{this.CommentThreadCommentContext=new D("CommentThreadCommentContext")}static{this.CommentTitle=new D("CommentTitle")}static{this.CommentActions=new D("CommentActions")}static{this.CommentsViewThreadActions=new D("CommentsViewThreadActions")}static{this.InteractiveToolbar=new D("InteractiveToolbar")}static{this.InteractiveCellTitle=new D("InteractiveCellTitle")}static{this.InteractiveCellDelete=new D("InteractiveCellDelete")}static{this.InteractiveCellExecute=new D("InteractiveCellExecute")}static{this.InteractiveInputExecute=new D("InteractiveInputExecute")}static{this.InteractiveInputConfig=new D("InteractiveInputConfig")}static{this.ReplInputExecute=new D("ReplInputExecute")}static{this.IssueReporter=new D("IssueReporter")}static{this.NotebookToolbar=new D("NotebookToolbar")}static{this.NotebookToolbarContext=new D("NotebookToolbarContext")}static{this.NotebookStickyScrollContext=new D("NotebookStickyScrollContext")}static{this.NotebookCellTitle=new D("NotebookCellTitle")}static{this.NotebookCellDelete=new D("NotebookCellDelete")}static{this.NotebookCellInsert=new D("NotebookCellInsert")}static{this.NotebookCellBetween=new D("NotebookCellBetween")}static{this.NotebookCellListTop=new D("NotebookCellTop")}static{this.NotebookCellExecute=new D("NotebookCellExecute")}static{this.NotebookCellExecuteGoTo=new D("NotebookCellExecuteGoTo")}static{this.NotebookCellExecutePrimary=new D("NotebookCellExecutePrimary")}static{this.NotebookDiffCellInputTitle=new D("NotebookDiffCellInputTitle")}static{this.NotebookDiffDocumentMetadata=new D("NotebookDiffDocumentMetadata")}static{this.NotebookDiffCellMetadataTitle=new D("NotebookDiffCellMetadataTitle")}static{this.NotebookDiffCellOutputsTitle=new D("NotebookDiffCellOutputsTitle")}static{this.NotebookOutputToolbar=new D("NotebookOutputToolbar")}static{this.NotebookOutlineFilter=new D("NotebookOutlineFilter")}static{this.NotebookOutlineActionMenu=new D("NotebookOutlineActionMenu")}static{this.NotebookEditorLayoutConfigure=new D("NotebookEditorLayoutConfigure")}static{this.NotebookKernelSource=new D("NotebookKernelSource")}static{this.BulkEditTitle=new D("BulkEditTitle")}static{this.BulkEditContext=new D("BulkEditContext")}static{this.TimelineItemContext=new D("TimelineItemContext")}static{this.TimelineTitle=new D("TimelineTitle")}static{this.TimelineTitleContext=new D("TimelineTitleContext")}static{this.TimelineFilterSubMenu=new D("TimelineFilterSubMenu")}static{this.AccountsContext=new D("AccountsContext")}static{this.SidebarTitle=new D("SidebarTitle")}static{this.PanelTitle=new D("PanelTitle")}static{this.AuxiliaryBarTitle=new D("AuxiliaryBarTitle")}static{this.AuxiliaryBarHeader=new D("AuxiliaryBarHeader")}static{this.TerminalInstanceContext=new D("TerminalInstanceContext")}static{this.TerminalEditorInstanceContext=new D("TerminalEditorInstanceContext")}static{this.TerminalNewDropdownContext=new D("TerminalNewDropdownContext")}static{this.TerminalTabContext=new D("TerminalTabContext")}static{this.TerminalTabEmptyAreaContext=new D("TerminalTabEmptyAreaContext")}static{this.TerminalStickyScrollContext=new D("TerminalStickyScrollContext")}static{this.WebviewContext=new D("WebviewContext")}static{this.InlineCompletionsActions=new D("InlineCompletionsActions")}static{this.InlineEditsActions=new D("InlineEditsActions")}static{this.NewFile=new D("NewFile")}static{this.MergeInput1Toolbar=new D("MergeToolbar1Toolbar")}static{this.MergeInput2Toolbar=new D("MergeToolbar2Toolbar")}static{this.MergeBaseToolbar=new D("MergeBaseToolbar")}static{this.MergeInputResultToolbar=new D("MergeToolbarResultToolbar")}static{this.InlineSuggestionToolbar=new D("InlineSuggestionToolbar")}static{this.InlineEditToolbar=new D("InlineEditToolbar")}static{this.ChatContext=new D("ChatContext")}static{this.ChatCodeBlock=new D("ChatCodeblock")}static{this.ChatCompareBlock=new D("ChatCompareBlock")}static{this.ChatMessageTitle=new D("ChatMessageTitle")}static{this.ChatMessageFooter=new D("ChatMessageFooter")}static{this.ChatExecute=new D("ChatExecute")}static{this.ChatExecuteSecondary=new D("ChatExecuteSecondary")}static{this.ChatInput=new D("ChatInput")}static{this.ChatInputSide=new D("ChatInputSide")}static{this.ChatModelPicker=new D("ChatModelPicker")}static{this.ChatModePicker=new D("ChatModePicker")}static{this.ChatEditingWidgetToolbar=new D("ChatEditingWidgetToolbar")}static{this.ChatEditingEditorContent=new D("ChatEditingEditorContent")}static{this.ChatEditingEditorHunk=new D("ChatEditingEditorHunk")}static{this.ChatEditingDeletedNotebookCell=new D("ChatEditingDeletedNotebookCell")}static{this.ChatInputAttachmentToolbar=new D("ChatInputAttachmentToolbar")}static{this.ChatEditingWidgetModifiedFilesToolbar=new D("ChatEditingWidgetModifiedFilesToolbar")}static{this.ChatInputResourceAttachmentContext=new D("ChatInputResourceAttachmentContext")}static{this.ChatInputSymbolAttachmentContext=new D("ChatInputSymbolAttachmentContext")}static{this.ChatInlineResourceAnchorContext=new D("ChatInlineResourceAnchorContext")}static{this.ChatInlineSymbolAnchorContext=new D("ChatInlineSymbolAnchorContext")}static{this.ChatEditingCodeBlockContext=new D("ChatEditingCodeBlockContext")}static{this.ChatTitleBarMenu=new D("ChatTitleBarMenu")}static{this.ChatAttachmentsContext=new D("ChatAttachmentsContext")}static{this.ChatToolOutputResourceToolbar=new D("ChatToolOutputResourceToolbar")}static{this.ChatExplorerMenu=new D("ChatExplorerMenu")}static{this.ChatTextEditorMenu=new D("ChatTextEditorMenu")}static{this.ChatTerminalMenu=new D("ChatTerminalMenu")}static{this.ChatToolOutputResourceContext=new D("ChatToolOutputResourceContext")}static{this.AccessibleView=new D("AccessibleView")}static{this.MultiDiffEditorFileToolbar=new D("MultiDiffEditorFileToolbar")}static{this.DiffEditorHunkToolbar=new D("DiffEditorHunkToolbar")}static{this.DiffEditorSelectionToolbar=new D("DiffEditorSelectionToolbar")}static for(t){return D.a.get(t)??new D(t)}constructor(t){if(D.a.has(t))throw new TypeError(`MenuId with identifier '${t}' already exists. Use MenuId.for(ident) or a unique identifier`);D.a.set(t,this),this.id=t}},AJ=B("menuService"),uu=class Gb{static{this.a=new Map}static for(t){let i=this.a.get(t);return i||(i=new Gb(t),this.a.set(t,i)),i}static merge(t){const i=new Set;for(const r of t)r instanceof Gb&&i.add(r.b);return i}constructor(t){this.b=t,this.has=i=>i===t}},TJ=new class{constructor(){this.a=new Map,this.b=new Map,this.c=new u3({merge:uu.merge}),this.onDidChangeMenu=this.c.event}addCommand(e){return this.a.set(e.id,e),this.c.fire(uu.for(lu.CommandPalette)),mg(oe(()=>{this.a.delete(e.id)&&this.c.fire(uu.for(lu.CommandPalette))}))}getCommand(e){return this.a.get(e)}getCommands(){const e=new Map;return this.a.forEach((t,i)=>e.set(i,t)),e}appendMenuItem(e,t){let i=this.b.get(e);i||(i=new ys,this.b.set(e,i));const r=i.push(t);return this.c.fire(uu.for(e)),mg(oe(()=>{r(),this.c.fire(uu.for(e))}))}appendMenuItems(e){const t=new ue;for(const{id:i,item:r}of e)t.add(this.appendMenuItem(i,r));return t}getMenuItems(e){let t;return this.b.has(e)?t=[...this.b.get(e)]:t=[],e===lu.CommandPalette&&this.d(t),t}d(e){const t=new Set;for(const i of e)GU(i)&&(t.add(i.command.id),i.alt&&t.add(i.alt.id));this.a.forEach((i,r)=>{t.has(r)||e.push({command:i})})}},Zk=Tp=class{static label(t,i){return i?.renderShortTitle&&t.shortTitle?typeof t.shortTitle=="string"?t.shortTitle:t.shortTitle.value:typeof t.title=="string"?t.title:t.title.value}constructor(t,i,r,s,n,o,a){this.hideActions=s,this.menuKeybinding=n,this.b=a,this.id=t.id,this.label=Tp.label(t,r),this.tooltip=(typeof t.tooltip=="string"?t.tooltip:t.tooltip?.value)??"",this.enabled=!t.precondition||o.contextMatchesRules(t.precondition),this.checked=void 0;let c;if(t.toggled){const l=t.toggled.condition?t.toggled:{condition:t.toggled};this.checked=o.contextMatchesRules(l.condition),this.checked&&l.tooltip&&(this.tooltip=typeof l.tooltip=="string"?l.tooltip:l.tooltip.value),this.checked&&Et.isThemeIcon(l.icon)&&(c=l.icon),this.checked&&l.title&&(this.label=typeof l.title=="string"?l.title:l.title.value)}c||(c=Et.isThemeIcon(t.icon)?t.icon:void 0),this.item=t,this.alt=i?new Tp(i,void 0,r,s,void 0,o,a):void 0,this.a=r,this.class=c&&Et.asClassName(c)}run(...t){let i=[];return this.a?.arg&&(i=[...i,this.a.arg]),this.a?.shouldForwardArgs&&(i=[...i,...t]),this.b.executeCommand(this.id,...i)}};Zk=Tp=__decorate([__param(5,rm),__param(6,Vk)],Zk);var LJ=Bu(7649,"Extensions"),Yk;(function(e){e[e.Installing=0]="Installing",e[e.Installed=1]="Installed",e[e.Uninstalling=2]="Uninstalling",e[e.Uninstalled=3]="Uninstalled"})(Yk||(Yk={}));var Qk;(function(e){e.ReloadWindow="reloadWindow",e.RestartExtensions="restartExtensions",e.DownloadUpdate="downloadUpdate",e.ApplyUpdate="applyUpdate",e.QuitAndInstall="quitAndInstall"})(Qk||(Qk={}));var Xk=B("extensionsWorkbenchService"),Kk;(function(e){e.Readme="readme",e.Features="features",e.Changelog="changelog",e.Dependencies="dependencies",e.ExtensionPack="extensionPack"})(Kk||(Kk={}));var e$=class extends ne{constructor(t,i){super(),this.a=t,this.B(i.onChange(this.b,this))}set extension(t){this.a.forEach(i=>i.extension=t)}b(t){for(const i of this.a)t&&i.extension?gR(i.extension.identifier,t.identifier)&&(i.extension.server&&t.server&&i.extension.server!==t.server?i.updateWhenCounterExtensionChanges&&i.update():i.extension=t):i.update()}};e$=__decorate([__param(1,Xk)],e$);var MJ=new C("defaultExtensionViews",!0),FJ=new C("hasOutdatedExtensions",!1),OJ=new C("hasGallery",!1),UJ=new C("extensionResultListFocused ",!0),jJ=new C("searchMcpServers",!1),BJ=new lu("extensionsSearchActionsMenu"),HJ=new lu("extensionsFilterSubMenu"),t$="vscode_searchExtensions_internal",zJ={id:t$,toolReferenceName:"extensions",canBeReferencedInPrompt:!0,icon:Et.fromId(te.extensions.id),displayName:d(7670,null),modelDescription:d(7671,null),userDescription:d(7672,null),source:Dp.Internal,inputSchema:{type:"object",properties:{category:{type:"string",description:"The category of extensions to search for",enum:J4},keywords:{type:"array",items:{type:"string"},description:"The keywords to search for"},ids:{type:"array",items:{type:"string"},description:"The ids of the extensions to search for"}}}},i$=class{constructor(t){this.a=t}async invoke(t,i,r,s){const n=t.parameters;if(!n.keywords?.length&&!n.category&&!n.ids?.length)return{content:[{kind:"text",value:d(7673,null)}]};const o=new Map,a=u=>{for(const h of u)h.deprecationInfo||h.isMalicious||o.set(h.identifier.id.toLowerCase(),{id:h.identifier.id,name:h.displayName,description:h.description,installed:h.state===1,installCount:h.installCount??0,rating:h.rating??0,categories:h.categories??[],tags:h.gallery?.tags??[]})},c=async u=>{const h=await this.a.queryGallery({text:u,pageSize:10,sortBy:"InstallCount"},s);h.firstPage.length&&a(h.firstPage)};if(n.ids?.length){const u=await this.a.getExtensions(n.ids.map(h=>({id:h})),s);a(u)}if(n.keywords?.length)for(const u of n.keywords??[])if(u==="featured")await c("featured");else{let h=n.category?`category:"${n.category}"`:"";h=u?`${h} ${u}`.trim():h,await c(h)}else await c(`category:"${n.category}"`);const l=Array.from(o.values());return{content:[{kind:"text",value:`Here are the list of extensions:
${JSON.stringify(l)}
. Important: Use the following format to display extensions to the user because there is a renderer available to parse these extensions in this format and display them with all details. So, do not describe about the extensions to the user.
\`\`\`vscode-extensions
extensionId1,extensionId2
\`\`\`
.`}],toolResultDetails:{input:JSON.stringify(n),output:[{isText:!0,value:JSON.stringify(l.map(u=>u.id))}]}}}};i$=__decorate([__param(0,Xk)],i$);var r$=class{constructor(e){this.a=e}update(e){this.a=e}get data(){return this.a}get apiObject(){if(!this.b){const e=this;this.b=Object.freeze({get name(){return e.a.id},get description(){return e.a.modelDescription},get inputSchema(){return e.a.inputSchema},get tags(){return e.a.tags??[]}})}return this.b}},JU=class{constructor(e,t){this.e=t,this.a=new Map,this.c=new Map,this.d=new Map,this.b=e.getProxy(J.MainThreadLanguageModelTools),this.b.$getTools().then(i=>{for(const r of i)this.d.set(r.id,new r$(St(r)))})}async $countTokensForInvocation(e,t,i){const r=this.c.get(e);if(!r)throw new Error(`Tool invocation call ${e} not found`);return await r(t,i)}async invokeTool(e,t,i,r){const s=Ut();i.tokenizationOptions&&this.c.set(s,i.tokenizationOptions.countTokens);try{if(i.toolInvocationToken&&!OU(i.toolInvocationToken))throw new Error("Invalid tool invocation token");if((t===Gw||t===zk)&&!Ge(e,"chatParticipantPrivate"))throw new Error(`Invalid tool: ${t}`);const n=await this.b.$invokeTool({toolId:t,callId:s,parameters:i.input,tokenBudget:i.tokenizationOptions?.tokenBudget,context:i.toolInvocationToken,chatRequestId:Ge(e,"chatParticipantPrivate")?i.chatRequestId:void 0,chatInteractionId:Ge(e,"chatParticipantPrivate")?i.chatInteractionId:void 0},r),o=n instanceof ni?n.value:n;return Uf.to(St(o))}finally{this.c.delete(s)}}$onDidChangeTools(e){const t=new Set(this.a.keys());for(const i of e){t.delete(i.id);const r=this.d.get(i.id);r?r.update(i):this.d.set(i.id,new r$(St(i)))}for(const i of t)this.d.delete(i)}getTools(e){return Array.from(this.d.values()).map(t=>t.apiObject).filter(t=>{switch(t.name){case Gw:case zk:case HU:case t$:return Ge(e,"chatParticipantPrivate");default:return!0}})}async $invokeTool(e,t){const i=this.a.get(e.toolId);if(!i)throw new Error(`Unknown tool ${e.toolId}`);const r={input:e.parameters,toolInvocationToken:e.context};Ge(i.extension,"chatParticipantPrivate")&&(r.chatRequestId=e.chatRequestId,r.chatInteractionId=e.chatInteractionId,r.chatSessionId=e.context?.sessionId,e.toolSpecificData?.kind==="terminal"&&(r.terminalCommand=e.toolSpecificData.command)),Ge(i.extension,"chatParticipantAdditions")&&e.modelId&&(r.model=await this.f(e.modelId,i.extension)),e.tokenBudget!==void 0&&(r.tokenizationOptions={tokenBudget:e.tokenBudget,countTokens:this.c.get(e.callId)||((o,a=et.None)=>this.b.$countTokensForInvocation(e.callId,o,a))});let s;Ge(i.extension,"toolProgress")&&(s={report:o=>{this.b.$acceptToolProgress(e.callId,{message:we.fromStrict(o.message),increment:o.increment,total:100})}});const n=await MD(Promise.resolve(i.tool.invoke(r,t,s)),t);if(!n)throw new Ri;return Uf.from(n,i.extension)}async f(e,t){let i;if(e&&(i=await this.e.getLanguageModelByIdentifier(t,e)),!i&&(i=await this.e.getDefaultLanguageModel(t),!i))throw new Error("Language model unavailable");return i}async $prepareToolInvocation(e,t,i){const r=this.a.get(e);if(!r)throw new Error(`Unknown tool ${e}`);const s={input:t};if(Ge(r.extension,"chatParticipantPrivate")&&r.tool.prepareInvocation2){const n=await r.tool.prepareInvocation2(s,i);return n?{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:we.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:we.from(n.confirmationMessages.message)}:void 0,toolSpecificData:{kind:"terminal",language:n.language,command:n.command},presentation:n.presentation}:void 0}else if(r.tool.prepareInvocation){const n=await r.tool.prepareInvocation(s,i);return n?((n.pastTenseMessage||n.presentation)&&L(r.extension,"chatParticipantPrivate"),{confirmationMessages:n.confirmationMessages?{title:typeof n.confirmationMessages.title=="string"?n.confirmationMessages.title:we.from(n.confirmationMessages.title),message:typeof n.confirmationMessages.message=="string"?n.confirmationMessages.message:we.from(n.confirmationMessages.message)}:void 0,invocationMessage:we.fromStrict(n.invocationMessage),pastTenseMessage:we.fromStrict(n.pastTenseMessage),presentation:n.presentation}):void 0}}registerTool(e,t,i){return this.a.set(t,{extension:e,tool:i}),this.b.$registerTool(t),oe(()=>{this.a.delete(t),this.b.$unregisterTool(t)})}},ZU=class{constructor(e,t,i,r){this.c=t,this.d=i,this.e=r,this.b=[],this.f=0,this.g=new Set,this.a=e.getProxy(J.MainThreadLanguages)}$acceptLanguageIds(e){this.b=e}async getLanguages(){return this.b.slice(0)}async changeLanguage(e,t){await this.a.$changeLanguage(e,t);const i=this.c.getDocumentData(e);if(!i)throw new Error(`document '${e.toString()}' NOT found`);return i.document}async tokenAtPosition(e,t){const i=e.version,r=ze.from(t),s=await this.a.$tokensAtPosition(e.uri,r),n={type:zs.Other,range:e.getWordRangeAtPosition(t)??new ke(t.line,t.character,t.line,t.character)};if(!s)return n;const o={range:F.to(s.range),type:vv.to(s.type)};return!o.range.contains(t)||i!==e.version?n:o}createLanguageStatusItem(e,t,i){const r=this.f++,s=this.a,n=this.g,o=`${e.identifier.value}/${t}`;if(n.has(o))throw new Error(`LanguageStatusItem with id '${t}' ALREADY exists`);n.add(o);const a={selector:i,id:t,name:e.displayName??e.name,severity:Jo.Information,command:void 0,text:"",detail:"",busy:!1};let c;const l=new ue,u=()=>{if(c?.dispose(),!n.has(o)){console.warn(`LanguageStatusItem (${t}) from ${e.identifier.value} has been disposed and CANNOT be updated anymore`);return}c=_D(()=>{l.clear(),this.a.$setLanguageStatus(r,{id:o,name:a.name??e.displayName??e.name,source:e.displayName??e.name,selector:pa.from(a.selector,this.e),label:a.text,detail:a.detail??"",severity:a.severity===Jo.Error?mt.Error:a.severity===Jo.Warning?mt.Warning:mt.Info,command:a.command&&this.d.toInternal(a.command,l),accessibilityInfo:a.accessibilityInformation,busy:a.busy})},0)},h={dispose(){l.dispose(),c?.dispose(),s.$removeLanguageStatus(r),n.delete(o)},get id(){return a.id},get name(){return a.name},set name(f){a.name=f,u()},get selector(){return a.selector},set selector(f){a.selector=f,u()},get text(){return a.text},set text(f){a.text=f,u()},set text2(f){L(e,"languageStatusText"),a.text=f,u()},get text2(){return L(e,"languageStatusText"),a.text},get detail(){return a.detail},set detail(f){a.detail=f,u()},get severity(){return a.severity},set severity(f){a.severity=f,u()},get accessibilityInformation(){return a.accessibilityInformation},set accessibilityInformation(f){a.accessibilityInformation=f,u()},get command(){return a.command},set command(f){a.command=f,u()},get busy(){return a.busy},set busy(f){a.busy=f,u()}};return u(),h}};function YU(e){return e&&e.title}var Yw=class{constructor(t,i){this.b=i,this.a=t.getProxy(J.MainThreadMessageService)}showMessage(t,i,r,s,n){const o={source:{identifier:t.identifier,label:t.displayName||t.name}};let a;typeof s=="string"||YU(s)?a=[s,...n]:(o.modal=s?.modal,o.useCustom=s?.useCustom,o.detail=s?.detail,a=n),o.useCustom&&L(t,"resolvers");const c=[];let l=!1;for(let u=0;u<a.length;u++){const h=a[u];if(typeof h=="string")c.push({title:h,handle:u,isCloseAffordance:!1});else if(typeof h=="object"){const{title:f,isCloseAffordance:p}=h;c.push({title:f,isCloseAffordance:!!p,handle:u}),p&&(l?this.b.warn(`[${t.identifier}] Only one message item can have 'isCloseAffordance':`,h):l=!0)}else this.b.warn(`[${t.identifier}] Invalid message item:`,h)}return this.a.$showMessage(i,r,o,c).then(u=>{if(typeof u=="number")return a[u]})}};Yw=__decorate([__param(1,We)],Yw);var Qw=class{constructor(e,t,i,r){this.start=e,this.deletedCount=t,this.deletedItems=i,this.items=r}asApiEvent(){return{range:new lr(this.start,this.start+this.deletedCount),addedCells:this.items.map(e=>e.apiCell),removedCells:this.deletedItems}}},Xw=class{static asModelAddData(e){return{EOL:e.eol,lines:e.source,languageId:e.language,uri:e.uri,isDirty:!1,versionId:1,encoding:"utf8"}}constructor(e,t,i){this.notebook=e,this.h=t,this.j=i,this.handle=i.handle,this.uri=y.revive(i.uri),this.cellKind=i.cellKind,this.a=i.outputs.map(Vs.to),this.e=i.internalMetadata??{},this.b=Object.freeze(i.metadata??{}),this.d=Object.freeze(xa.to(i.internalMetadata??{}))}get internalMetadata(){return this.e}get apiCell(){if(!this.f){const e=this,t=this.h.getDocument(this.uri);if(!t)throw new Error(`MISSING extHostDocument for notebook cell: ${this.uri}`);const i={get index(){return e.notebook.getCellIndex(e)},notebook:e.notebook.apiNotebook,kind:Il.to(this.j.cellKind),document:t.document,get mime(){return e.g},set mime(r){e.g=r},get outputs(){return e.a.slice(0)},get metadata(){return e.b},get executionSummary(){return e.d}};this.f=Object.freeze(i)}return this.f}setOutputs(e){this.a=e.map(Vs.to)}setOutputItems(e,t,i){const r=i.map(Sa.to),s=this.a.find(n=>n.id===e);if(s&&(t||(s.items.length=0),s.items.push(...r),s.items.length>1&&s.items.every(n=>j7(n.mime)))){const n=new Map,o=[];s.items.forEach(a=>{let c;n.has(a.mime)?c=n.get(a.mime):(c=[],n.set(a.mime,c),o.push(a.mime)),c.push(a.data)}),s.items.length=0,o.forEach(a=>{const c=rT(n.get(a));s.items.push({mime:a,data:c.data.buffer})})}}setMetadata(e){this.b=Object.freeze(e)}setInternalMetadata(e){this.e=e,this.d=Object.freeze(xa.to(e))}setMime(e){}},QU=class jC{static{this.a=0}constructor(t,i,r,s,n){this.k=t,this.l=i,this.m=r,this.uri=s,this.handle=jC.a++,this.b=[],this.g=0,this.h=!1,this.j=!1,this.d=n.viewType,this.f=Object.freeze(n.metadata??Object.create(null)),this.r([[0,0,n.cells]],!0,void 0),this.g=n.versionId}dispose(){this.j=!0}get versionId(){return this.g}get apiNotebook(){if(!this.e){const t=this,i={get uri(){return t.uri},get version(){return t.g},get notebookType(){return t.d},get isDirty(){return t.h},get isUntitled(){return t.uri.scheme===V.untitled},get isClosed(){return t.j},get metadata(){return t.f},get cellCount(){return t.b.length},cellAt(r){return r=t.n(r),t.b[r].apiCell},getCells(r){return(r?t.p(r):t.b).map(n=>n.apiCell)},save(){return t.q()},[Symbol.for("debug.description")](){return`NotebookDocument(${this.uri.toString()})`}};this.e=Object.freeze(i)}return this.e}acceptDocumentPropertiesChanged(t){t.metadata&&(this.f=Object.freeze({...this.f,...t.metadata}))}acceptDirty(t){this.h=t}acceptModelChanged(t,i,r){this.g=t.versionId,this.h=i,this.acceptDocumentPropertiesChanged({metadata:r});const s={notebook:this.apiNotebook,metadata:r,cellChanges:[],contentChanges:[]},n=[];for(const a of t.rawEvents)a.kind===sr.ModelChange?this.r(a.changes,!1,s.contentChanges):a.kind===sr.Move?this.s(a.index,a.length,a.newIdx,s.contentChanges):a.kind===sr.Output?(this.t(a.index,a.outputs),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===sr.OutputItem?(this.u(a.index,a.outputId,a.append,a.outputItems),n.push({cell:this.b[a.index].apiCell,outputs:this.b[a.index].apiCell.outputs})):a.kind===sr.ChangeCellLanguage?(this.v(a.index,a.language),n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document})):a.kind===sr.ChangeCellContent?n.push({cell:this.b[a.index].apiCell,document:this.b[a.index].apiCell.document}):a.kind===sr.ChangeCellMime?this.w(a.index,a.mime):a.kind===sr.ChangeCellMetadata?(this.x(a.index,a.metadata),n.push({cell:this.b[a.index].apiCell,metadata:this.b[a.index].apiCell.metadata})):a.kind===sr.ChangeCellInternalMetadata&&(this.y(a.index,a.internalMetadata),n.push({cell:this.b[a.index].apiCell,executionSummary:this.b[a.index].apiCell.executionSummary}));const o=new Map;for(let a=0;a<n.length;a++){const c=n[a],l=o.get(c.cell);if(l===void 0){const u=s.cellChanges.push({document:void 0,executionSummary:void 0,metadata:void 0,outputs:void 0,...c});o.set(c.cell,u-1)}else s.cellChanges[l]={...s.cellChanges[l],...c}}return Object.freeze(s),Object.freeze(s.cellChanges),Object.freeze(s.contentChanges),s}n(t){return t=t|0,t<0?0:t>=this.b.length?this.b.length-1:t}o(t){let i=t.start|0,r=t.end|0;return i<0&&(i=0),r>this.b.length&&(r=this.b.length),t.with({start:i,end:r})}p(t){t=this.o(t);const i=[];for(let r=t.start;r<t.end;r++)i.push(this.b[r]);return i}async q(){return this.j?Promise.reject(new Error("Notebook has been closed")):this.k.$trySaveNotebook(this.uri)}r(t,i,r){if(this.j)return;const s=[],n=[],o=[];if(t.reverse().forEach(a=>{const l=a[2].map(f=>{const p=new Xw(this,this.l,f);return i||n.push(Xw.asModelAddData(f)),p}),u=new Qw(a[0],a[1],[],l),h=this.b.splice(a[0],a[1],...l);for(const f of h)o.push(f.uri),u.deletedItems.push(f.apiCell);s.push(u)}),this.l.acceptDocumentsAndEditorsDelta({addedDocuments:n,removedDocuments:o}),r)for(const a of s)r.push(a.asApiEvent())}s(t,i,r,s){const n=this.b.splice(t,i);this.b.splice(r,0,...n);const o=[new Qw(t,i,n.map(a=>a.apiCell),[]),new Qw(r,0,[],n)];for(const a of o)s.push(a.asApiEvent())}t(t,i){this.b[t].setOutputs(i)}u(t,i,r,s){this.b[t].setOutputItems(i,r,s)}v(t,i){const r=this.b[t];r.apiCell.document.languageId!==i&&this.m.$acceptModelLanguageChanged(r.uri,i)}w(t,i){const r=this.b[t];r.apiCell.mime=i}x(t,i){this.b[t].setMetadata(i)}y(t,i){this.b[t].setInternalMetadata(i)}getCellFromApiCell(t){return this.b.find(i=>i.apiCell===t)}getCellFromIndex(t){return this.b[t]}getCell(t){return this.b.find(i=>i.handle===t)}getCellIndex(t){return this.b.indexOf(t)}},Kw=class BC{static{this.apiEditorsToExtHost=new WeakMap}constructor(t,i,r,s,n,o,a){this.id=t,this.c=i,this.notebookData=r,this.d=s,this.e=n,this.f=o,this.g=a,this.a=!1}get apiEditor(){if(!this.b){const t=this;this.b={get notebook(){return t.notebookData.apiNotebook},get selection(){return t.e[0]},set selection(i){this.selections=[i]},get selections(){return t.e},set selections(i){if(!Array.isArray(i)||!i.every(lr.isNotebookRange))throw Ce("selections");t.e=i.length===0?[new lr(0,0)]:i,t.h(t.e)},get visibleRanges(){return t.d},revealRange(i,r){t.c.$tryRevealRange(t.id,Nr.from(i),r??Od.Default)},get viewColumn(){return t.f},get replOptions(){if(t.g==="repl")return{appendIndex:this.notebook.cellCount-1}},[Symbol.for("debug.description")](){return`NotebookEditor(${this.notebook.uri.toString()})`}},BC.apiEditorsToExtHost.set(this.b,this)}return this.b}get visible(){return this.a}_acceptVisibility(t){this.a=t}_acceptVisibleRanges(t){this.d=t}_acceptSelections(t){this.e=t.length===0?[new lr(0,0)]:t}h(t){this.c.$trySetSelections(this.id,t.map(Nr.from))}_acceptViewColumn(t){this.f=t}},eb=class{constructor(e,t){this.piece=e,this.color=t,this.size_left=0,this.lf_left=0,this.parent=this,this.left=this,this.right=this}next(){if(this.right!==ie)return tb(this.right);let e=this;for(;e.parent!==ie&&e.parent.left!==e;)e=e.parent;return e.parent===ie?ie:e.parent}prev(){if(this.left!==ie)return n$(this.left);let e=this;for(;e.parent!==ie&&e.parent.right!==e;)e=e.parent;return e.parent===ie?ie:e.parent}detach(){this.parent=null,this.left=null,this.right=null}},s$;(function(e){e[e.Black=0]="Black",e[e.Red=1]="Red"})(s$||(s$={}));var ie=new eb(null,0);ie.parent=ie,ie.left=ie,ie.right=ie,ie.color=0;function tb(e){for(;e.left!==ie;)e=e.left;return e}function n$(e){for(;e.right!==ie;)e=e.right;return e}function ib(e){return e===ie?0:e.size_left+e.piece.length+ib(e.right)}function rb(e){return e===ie?0:e.lf_left+e.piece.lineFeedCnt+rb(e.right)}function sb(){ie.parent=ie}function hu(e,t){const i=t.right;i.size_left+=t.size_left+(t.piece?t.piece.length:0),i.lf_left+=t.lf_left+(t.piece?t.piece.lineFeedCnt:0),t.right=i.left,i.left!==ie&&(i.left.parent=t),i.parent=t.parent,t.parent===ie?e.root=i:t.parent.left===t?t.parent.left=i:t.parent.right=i,i.left=t,t.parent=i}function du(e,t){const i=t.left;t.left=i.right,i.right!==ie&&(i.right.parent=t),i.parent=t.parent,t.size_left-=i.size_left+(i.piece?i.piece.length:0),t.lf_left-=i.lf_left+(i.piece?i.piece.lineFeedCnt:0),t.parent===ie?e.root=i:t===t.parent.right?t.parent.right=i:t.parent.left=i,i.right=t,t.parent=i}function Rp(e,t){let i,r;if(t.left===ie?(r=t,i=r.right):t.right===ie?(r=t,i=r.left):(r=tb(t.right),i=r.right),r===e.root){e.root=i,i.color=0,t.detach(),sb(),e.root.parent=ie;return}const s=r.color===1;if(r===r.parent.left?r.parent.left=i:r.parent.right=i,r===t?(i.parent=r.parent,fu(e,i)):(r.parent===t?i.parent=r:i.parent=r.parent,fu(e,i),r.left=t.left,r.right=t.right,r.parent=t.parent,r.color=t.color,t===e.root?e.root=r:t===t.parent.left?t.parent.left=r:t.parent.right=r,r.left!==ie&&(r.left.parent=r),r.right!==ie&&(r.right.parent=r),r.size_left=t.size_left,r.lf_left=t.lf_left,fu(e,r)),t.detach(),i.parent.left===i){const o=ib(i),a=rb(i);if(o!==i.parent.size_left||a!==i.parent.lf_left){const c=o-i.parent.size_left,l=a-i.parent.lf_left;i.parent.size_left=o,i.parent.lf_left=a,us(e,i.parent,c,l)}}if(fu(e,i.parent),s){sb();return}let n;for(;i!==e.root&&i.color===0;)i===i.parent.left?(n=i.parent.right,n.color===1&&(n.color=0,i.parent.color=1,hu(e,i.parent),n=i.parent.right),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.right.color===0&&(n.left.color=0,n.color=1,du(e,n),n=i.parent.right),n.color=i.parent.color,i.parent.color=0,n.right.color=0,hu(e,i.parent),i=e.root)):(n=i.parent.left,n.color===1&&(n.color=0,i.parent.color=1,du(e,i.parent),n=i.parent.left),n.left.color===0&&n.right.color===0?(n.color=1,i=i.parent):(n.left.color===0&&(n.right.color=0,n.color=1,hu(e,n),n=i.parent.left),n.color=i.parent.color,i.parent.color=0,n.left.color=0,du(e,i.parent),i=e.root));i.color=0,sb()}function o$(e,t){for(fu(e,t);t!==e.root&&t.parent.color===1;)if(t.parent===t.parent.parent.left){const i=t.parent.parent.right;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.right&&(t=t.parent,hu(e,t)),t.parent.color=0,t.parent.parent.color=1,du(e,t.parent.parent))}else{const i=t.parent.parent.left;i.color===1?(t.parent.color=0,i.color=0,t.parent.parent.color=1,t=t.parent.parent):(t===t.parent.left&&(t=t.parent,du(e,t)),t.parent.color=0,t.parent.parent.color=1,hu(e,t.parent.parent))}e.root.color=0}function us(e,t,i,r){for(;t!==e.root&&t!==ie;)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}function fu(e,t){let i=0,r=0;if(t!==e.root){for(;t!==e.root&&t===t.parent.right;)t=t.parent;if(t!==e.root)for(t=t.parent,i=ib(t.left)-t.size_left,r=rb(t.left)-t.lf_left,t.size_left+=i,t.lf_left+=r;t!==e.root&&(i!==0||r!==0);)t.parent.left===t&&(t.parent.size_left+=i,t.parent.lf_left+=r),t=t.parent}}var hs=65535;function a$(e){let t;return e[e.length-1]<65536?t=new Uint16Array(e.length):t=new Uint32Array(e.length),t.set(e,0),t}var XU=class{constructor(e,t,i,r,s){this.lineStarts=e,this.cr=t,this.lf=i,this.crlf=r,this.isBasicASCII=s}};function ds(e,t=!0){const i=[0];let r=1;for(let s=0,n=e.length;s<n;s++){const o=e.charCodeAt(s);o===13?s+1<n&&e.charCodeAt(s+1)===10?(i[r++]=s+2,s++):i[r++]=s+1:o===10&&(i[r++]=s+1)}return t?a$(i):i}function KU(e,t){e.length=0,e[0]=0;let i=1,r=0,s=0,n=0,o=!0;for(let c=0,l=t.length;c<l;c++){const u=t.charCodeAt(c);u===13?c+1<l&&t.charCodeAt(c+1)===10?(n++,e[i++]=c+2,c++):(r++,e[i++]=c+1):u===10?(s++,e[i++]=c+1):o&&u!==9&&(u<32||u>126)&&(o=!1)}const a=new XU(a$(e),r,s,n,o);return e.length=0,a}var wi=class{constructor(e,t,i,r,s){this.bufferIndex=e,this.start=t,this.end=i,this.lineFeedCnt=r,this.length=s}},lo=class{constructor(e,t){this.buffer=e,this.lineStarts=t}},ej=class{constructor(e,t){this.a=[],this.c=e,this.d=t,this.b=0,e.root!==ie&&e.iterate(e.root,i=>(i!==ie&&this.a.push(i.piece),!0))}read(){return this.a.length===0?this.b===0?(this.b++,this.d):null:this.b>this.a.length-1?null:this.b===0?this.d+this.c.getPieceContent(this.a[this.b++]):this.c.getPieceContent(this.a[this.b++])}},tj=class{constructor(e){this.a=e,this.b=[]}get(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartOffset<=e&&i.nodeStartOffset+i.node.piece.length>=e)return i}return null}get2(e){for(let t=this.b.length-1;t>=0;t--){const i=this.b[t];if(i.nodeStartLineNumber&&i.nodeStartLineNumber<e&&i.nodeStartLineNumber+i.node.piece.lineFeedCnt>=e)return i}return null}set(e){this.b.length>=this.a&&this.b.shift(),this.b.push(e)}validate(e){let t=!1;const i=this.b;for(let r=0;r<i.length;r++){const s=i[r];if(s.node.parent===null||s.nodeStartOffset>=e){i[r]=null,t=!0;continue}}if(t){const r=[];for(const s of i)s!==null&&r.push(s);this.b=r}}},ij=class{constructor(e,t,i){this.create(e,t,i)}create(e,t,i){this.a=[new lo("",[0])],this.g={line:0,column:0},this.root=ie,this.b=1,this.c=0,this.d=t,this.e=t.length,this.f=i;let r=null;for(let s=0,n=e.length;s<n;s++)if(e[s].buffer.length>0){e[s].lineStarts||(e[s].lineStarts=ds(e[s].buffer));const o=new wi(s+1,{line:0,column:0},{line:e[s].lineStarts.length-1,column:e[s].buffer.length-e[s].lineStarts[e[s].lineStarts.length-1]},e[s].lineStarts.length-1,e[s].buffer.length);this.a.push(e[s]),r=this.S(r,o)}this.h=new tj(1),this.j={lineNumber:0,value:""},this.y()}normalizeEOL(e){const t=hs,i=t-Math.floor(t/3),r=i*2;let s="",n=0;const o=[];if(this.iterate(this.root,a=>{const c=this.R(a),l=c.length;if(n<=i||n+l<r)return s+=c,n+=l,!0;const u=s.replace(/\r\n|\r|\n/g,e);return o.push(new lo(u,ds(u))),s=c,n=l,!0}),n>0){const a=s.replace(/\r\n|\r|\n/g,e);o.push(new lo(a,ds(a)))}this.create(o,e,!0)}getEOL(){return this.d}setEOL(e){this.d=e,this.e=this.d.length,this.normalizeEOL(e)}createSnapshot(e){return new ej(this,e)}equal(e){if(this.getLength()!==e.getLength()||this.getLineCount()!==e.getLineCount())return!1;let t=0;return this.iterate(this.root,r=>{if(r===ie)return!0;const s=this.R(r),n=s.length,o=e.G(t),a=e.G(t+n),c=e.getValueInRange2(o,a);return t+=n,s===c})}getOffsetAt(e,t){let i=0,r=this.root;for(;r!==ie;)if(r.left!==ie&&r.lf_left+1>=e)r=r.left;else if(r.lf_left+r.piece.lineFeedCnt+1>=e){i+=r.size_left;const s=this.B(r,e-r.lf_left-2);return i+=s+t-1}else e-=r.lf_left+r.piece.lineFeedCnt,i+=r.size_left+r.piece.length,r=r.right;return i}getPositionAt(e){e=Math.floor(e),e=Math.max(0,e);let t=this.root,i=0;const r=e;for(;t!==ie;)if(t.size_left!==0&&t.size_left>=e)t=t.left;else if(t.size_left+t.piece.length>=e){const s=this.A(t,e-t.size_left);if(i+=t.lf_left+s.index,s.index===0){const n=this.getOffsetAt(i+1,1),o=r-n;return new ji(i+1,o+1)}return new ji(i+1,s.remainder+1)}else if(e-=t.size_left+t.piece.length,i+=t.lf_left+t.piece.lineFeedCnt,t.right===ie){const s=this.getOffsetAt(i+1,1),n=r-e-s;return new ji(i+1,n+1)}else t=t.right;return new ji(1,1)}getValueInRange(e,t){if(e.startLineNumber===e.endLineNumber&&e.startColumn===e.endColumn)return"";const i=this.H(e.startLineNumber,e.startColumn),r=this.H(e.endLineNumber,e.endColumn),s=this.getValueInRange2(i,r);return t?t!==this.d||!this.f?s.replace(/\r\n|\r|\n/g,t):t===this.getEOL()&&this.f?s:s.replace(/\r\n|\r|\n/g,t):s}getValueInRange2(e,t){if(e.node===t.node){const o=e.node,a=this.a[o.piece.bufferIndex].buffer,c=this.u(o.piece.bufferIndex,o.piece.start);return a.substring(c+e.remainder,c+t.remainder)}let i=e.node;const r=this.a[i.piece.bufferIndex].buffer,s=this.u(i.piece.bufferIndex,i.piece.start);let n=r.substring(s+e.remainder,s+i.piece.length);for(i=i.next();i!==ie;){const o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(i===t.node){n+=o.substring(a,a+t.remainder);break}else n+=o.substr(a,i.piece.length);i=i.next()}return n}getLinesContent(){const e=[];let t=0,i="",r=!1;return this.iterate(this.root,s=>{if(s===ie)return!0;const n=s.piece;let o=n.length;if(o===0)return!0;const a=this.a[n.bufferIndex].buffer,c=this.a[n.bufferIndex].lineStarts,l=n.start.line,u=n.end.line;let h=c[l]+n.start.column;if(r&&(a.charCodeAt(h)===10&&(h++,o--),e[t++]=i,i="",r=!1,o===0))return!0;if(l===u)return!this.f&&a.charCodeAt(h+o-1)===13?(r=!0,i+=a.substr(h,o-1)):i+=a.substr(h,o),!0;i+=this.f?a.substring(h,Math.max(h,c[l+1]-this.e)):a.substring(h,c[l+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;for(let f=l+1;f<u;f++)i=this.f?a.substring(c[f],c[f+1]-this.e):a.substring(c[f],c[f+1]).replace(/(\r\n|\r|\n)$/,""),e[t++]=i;return!this.f&&a.charCodeAt(c[u]+n.end.column-1)===13?(r=!0,n.end.column===0?t--:i=a.substr(c[u],n.end.column-1)):i=a.substr(c[u],n.end.column),!0}),r&&(e[t++]=i,i=""),e[t++]=i,e}getLength(){return this.c}getLineCount(){return this.b}getLineContent(e){return this.j.lineNumber===e?this.j.value:(this.j.lineNumber=e,e===this.b?this.j.value=this.getLineRawContent(e):this.f?this.j.value=this.getLineRawContent(e,this.e):this.j.value=this.getLineRawContent(e).replace(/(\r\n|\r|\n)$/,""),this.j.value)}l(e){if(e.remainder===e.node.piece.length){const t=e.node.next();if(!t)return 0;const i=this.a[t.piece.bufferIndex],r=this.u(t.piece.bufferIndex,t.piece.start);return i.buffer.charCodeAt(r)}else{const t=this.a[e.node.piece.bufferIndex],r=this.u(e.node.piece.bufferIndex,e.node.piece.start)+e.remainder;return t.buffer.charCodeAt(r)}}getLineCharCode(e,t){const i=this.H(e,t+1);return this.l(i)}getLineLength(e){if(e===this.getLineCount()){const t=this.getOffsetAt(e,1);return this.getLength()-t}return this.getOffsetAt(e+1,1)-this.getOffsetAt(e,1)-this.e}getCharCode(e){const t=this.G(e);return this.l(t)}getNearestChunk(e){const t=this.G(e);if(t.remainder===t.node.piece.length){const i=t.node.next();if(!i||i===ie)return"";const r=this.a[i.piece.bufferIndex],s=this.u(i.piece.bufferIndex,i.piece.start);return r.buffer.substring(s,s+i.piece.length)}else{const i=this.a[t.node.piece.bufferIndex],r=this.u(t.node.piece.bufferIndex,t.node.piece.start),s=r+t.remainder,n=r+t.node.piece.length;return i.buffer.substring(s,n)}}findMatchesInNode(e,t,i,r,s,n,o,a,c,l,u){const h=this.a[e.piece.bufferIndex],f=this.u(e.piece.bufferIndex,e.piece.start),p=this.u(e.piece.bufferIndex,s),m=this.u(e.piece.bufferIndex,n);let w;const x={line:0,column:0};let E,$;t._wordSeparators?(E=h.buffer.substring(p,m),$=A=>A+p,t.reset(0)):(E=h.buffer,$=A=>A,t.reset(p));do if(w=t.next(E),w){if($(w.index)>=m)return l;this.s(e,$(w.index)-f,x);const A=this.t(e.piece.bufferIndex,s,x),Q=x.line===s.line?x.column-s.column+r:x.column+1,W=Q+w[0].length;if(u[l++]=jE(new Oe(i+A,Q,i+A,W),w,a),$(w.index)+w[0].length>=m||l>=c)return l}while(w);return l}findMatchesLineByLine(e,t,i,r){const s=[];let n=0;const o=new VN(t.wordSeparators,t.regex);let a=this.H(e.startLineNumber,e.startColumn);if(a===null)return[];const c=this.H(e.endLineNumber,e.endColumn);if(c===null)return[];let l=this.s(a.node,a.remainder);const u=this.s(c.node,c.remainder);if(a.node===c.node)return this.findMatchesInNode(a.node,o,e.startLineNumber,e.startColumn,l,u,t,i,r,n,s),s;let h=e.startLineNumber,f=a.node;for(;f!==c.node;){const m=this.t(f.piece.bufferIndex,l,f.piece.end);if(m>=1){const x=this.a[f.piece.bufferIndex].lineStarts,E=this.u(f.piece.bufferIndex,f.piece.start),$=x[l.line+m],A=h===e.startLineNumber?e.startColumn:1;if(n=this.findMatchesInNode(f,o,h,A,l,this.s(f,$-E),t,i,r,n,s),n>=r)return s;h+=m}const w=h===e.startLineNumber?e.startColumn-1:0;if(h===e.endLineNumber){const x=this.getLineContent(h).substring(w,e.endColumn-1);return n=this.n(t,o,x,e.endLineNumber,w,n,s,i,r),s}if(n=this.n(t,o,this.getLineContent(h).substr(w),h,w,n,s,i,r),n>=r)return s;h++,a=this.H(h,1),f=a.node,l=this.s(a.node,a.remainder)}if(h===e.endLineNumber){const m=h===e.startLineNumber?e.startColumn-1:0,w=this.getLineContent(h).substring(m,e.endColumn-1);return n=this.n(t,o,w,e.endLineNumber,m,n,s,i,r),s}const p=h===e.startLineNumber?e.startColumn:1;return n=this.findMatchesInNode(c.node,o,h,p,l,u,t,i,r,n,s),s}n(e,t,i,r,s,n,o,a,c){const l=e.wordSeparators;if(!a&&e.simpleSearch){const h=e.simpleSearch,f=h.length,p=i.length;let m=-f;for(;(m=i.indexOf(h,m+f))!==-1;)if((!l||BE(l,i,p,m,f))&&(o[n++]=new V0(new Oe(r,m+1+s,r,m+1+f+s),null),n>=c))return n;return n}let u;t.reset(0);do if(u=t.next(i),u&&(o[n++]=jE(new Oe(r,u.index+1+s,r,u.index+1+u[0].length+s),u,a),n>=c))return n;while(u);return n}insert(e,t,i=!1){if(this.f=this.f&&i,this.j.lineNumber=0,this.j.value="",this.root!==ie){const{node:r,remainder:s,nodeStartOffset:n}=this.G(e),o=r.piece,a=o.bufferIndex,c=this.s(r,s);if(r.piece.bufferIndex===0&&o.end.line===this.g.line&&o.end.column===this.g.column&&n+o.length===e&&t.length<hs){this.F(r,t),this.y();return}if(n===e)this.o(t,r),this.h.validate(e);else if(n+r.piece.length>e){const l=[];let u=new wi(o.bufferIndex,c,o.end,this.t(o.bufferIndex,c,o.end),this.u(a,o.end)-this.u(a,c));if(this.K()&&this.M(t)&&this.I(r,s)===10){const m={line:u.start.line+1,column:0};u=new wi(u.bufferIndex,m,u.end,this.t(u.bufferIndex,m,u.end),u.length-1),t+=`
`}if(this.K()&&this.L(t))if(this.I(r,s-1)===13){const m=this.s(r,s-1);this.C(r,m),t="\r"+t,r.piece.length===0&&l.push(r)}else this.C(r,c);else this.C(r,c);const h=this.w(t);u.length>0&&this.S(r,u);let f=r;for(let p=0;p<h.length;p++)f=this.S(f,h[p]);this.v(l)}else this.q(t,r)}else{const r=this.w(t);let s=this.T(null,r[0]);for(let n=1;n<r.length;n++)s=this.S(s,r[n])}this.y()}delete(e,t){if(this.j.lineNumber=0,this.j.value="",t<=0||this.root===ie)return;const i=this.G(e),r=this.G(e+t),s=i.node,n=r.node;if(s===n){const h=this.s(s,i.remainder),f=this.s(s,r.remainder);if(i.nodeStartOffset===e){if(t===s.piece.length){const p=s.next();Rp(this,s),this.N(p),this.y();return}this.D(s,f),this.h.validate(e),this.N(s),this.y();return}if(i.nodeStartOffset+s.piece.length===e+t){this.C(s,h),this.O(s),this.y();return}this.E(s,h,f),this.y();return}const o=[],a=this.s(s,i.remainder);this.C(s,a),this.h.validate(e),s.piece.length===0&&o.push(s);const c=this.s(n,r.remainder);this.D(n,c),n.piece.length===0&&o.push(n);const l=s.next();for(let h=l;h!==ie&&h!==n;h=h.next())o.push(h);const u=s.piece.length===0?s.prev():s;this.v(o),this.O(u),this.y()}o(e,t){const i=[];if(this.K()&&this.M(e)&&this.L(t)){const n=t.piece,o={line:n.start.line+1,column:0},a=new wi(n.bufferIndex,o,n.end,this.t(n.bufferIndex,o,n.end),n.length-1);t.piece=a,e+=`
`,us(this,t,-1,-1),t.piece.length===0&&i.push(t)}const r=this.w(e);let s=this.T(t,r[r.length-1]);for(let n=r.length-2;n>=0;n--)s=this.T(s,r[n]);this.N(s),this.v(i)}q(e,t){this.Q(e,t)&&(e+=`
`);const i=this.w(e),r=this.S(t,i[0]);let s=r;for(let n=1;n<i.length;n++)s=this.S(s,i[n]);this.N(r)}s(e,t,i){const r=e.piece,s=e.piece.bufferIndex,n=this.a[s].lineStarts,a=n[r.start.line]+r.start.column+t;let c=r.start.line,l=r.end.line,u=0,h=0,f=0;for(;c<=l&&(u=c+(l-c)/2|0,f=n[u],u!==l);)if(h=n[u+1],a<f)l=u-1;else if(a>=h)c=u+1;else break;return i?(i.line=u,i.column=a-f,null):{line:u,column:a-f}}t(e,t,i){if(i.column===0)return i.line-t.line;const r=this.a[e].lineStarts;if(i.line===r.length-1)return i.line-t.line;const s=r[i.line+1],n=r[i.line]+i.column;if(s>n+1)return i.line-t.line;const o=n-1;return this.a[e].buffer.charCodeAt(o)===13?i.line-t.line+1:i.line-t.line}u(e,t){return this.a[e].lineStarts[t.line]+t.column}v(e){for(let t=0;t<e.length;t++)Rp(this,e[t])}w(e){if(e.length>hs){const l=[];for(;e.length>hs;){const h=e.charCodeAt(hs-1);let f;h===13||h>=55296&&h<=56319?(f=e.substring(0,hs-1),e=e.substring(hs-1)):(f=e.substring(0,hs),e=e.substring(hs));const p=ds(f);l.push(new wi(this.a.length,{line:0,column:0},{line:p.length-1,column:f.length-p[p.length-1]},p.length-1,f.length)),this.a.push(new lo(f,p))}const u=ds(e);return l.push(new wi(this.a.length,{line:0,column:0},{line:u.length-1,column:e.length-u[u.length-1]},u.length-1,e.length)),this.a.push(new lo(e,u)),l}let t=this.a[0].buffer.length;const i=ds(e,!1);let r=this.g;if(this.a[0].lineStarts[this.a[0].lineStarts.length-1]===t&&t!==0&&this.L(e)&&this.M(this.a[0].buffer)){this.g={line:this.g.line,column:this.g.column+1},r=this.g;for(let l=0;l<i.length;l++)i[l]+=t+1;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+="_"+e,t+=1}else{if(t!==0)for(let l=0;l<i.length;l++)i[l]+=t;this.a[0].lineStarts=this.a[0].lineStarts.concat(i.slice(1)),this.a[0].buffer+=e}const s=this.a[0].buffer.length,n=this.a[0].lineStarts.length-1,o=s-this.a[0].lineStarts[n],a={line:n,column:o},c=new wi(0,r,a,this.t(0,r,a),s-t);return this.g=a,[c]}getLinesRawContent(){return this.U(this.root)}getLineRawContent(e,t=0){let i=this.root,r="";const s=this.h.get2(e);if(s){i=s.node;const n=this.B(i,e-s.nodeStartLineNumber-1),o=this.a[i.piece.bufferIndex].buffer,a=this.u(i.piece.bufferIndex,i.piece.start);if(s.nodeStartLineNumber+i.piece.lineFeedCnt===e)r=o.substring(a+n,a+i.piece.length);else{const c=this.B(i,e-s.nodeStartLineNumber);return o.substring(a+n,a+c-t)}}else{let n=0;const o=e;for(;i!==ie;)if(i.left!==ie&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const a=this.B(i,e-i.lf_left-2),c=this.B(i,e-i.lf_left-1),l=this.a[i.piece.bufferIndex].buffer,u=this.u(i.piece.bufferIndex,i.piece.start);return n+=i.size_left,this.h.set({node:i,nodeStartOffset:n,nodeStartLineNumber:o-(e-1-i.lf_left)}),l.substring(u+a,u+c-t)}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const a=this.B(i,e-i.lf_left-2),c=this.a[i.piece.bufferIndex].buffer,l=this.u(i.piece.bufferIndex,i.piece.start);r=c.substring(l+a,l+i.piece.length);break}else e-=i.lf_left+i.piece.lineFeedCnt,n+=i.size_left+i.piece.length,i=i.right}for(i=i.next();i!==ie;){const n=this.a[i.piece.bufferIndex].buffer;if(i.piece.lineFeedCnt>0){const o=this.B(i,0),a=this.u(i.piece.bufferIndex,i.piece.start);return r+=n.substring(a,a+o-t),r}else{const o=this.u(i.piece.bufferIndex,i.piece.start);r+=n.substr(o,i.piece.length)}i=i.next()}return r}y(){let e=this.root,t=1,i=0;for(;e!==ie;)t+=e.lf_left+e.piece.lineFeedCnt,i+=e.size_left+e.piece.length,e=e.right;this.b=t,this.c=i,this.h.validate(this.c)}A(e,t){const i=e.piece,r=this.s(e,t),s=r.line-i.start.line;if(this.u(i.bufferIndex,i.end)-this.u(i.bufferIndex,i.start)===t){const n=this.t(e.piece.bufferIndex,i.start,r);if(n!==s)return{index:n,remainder:0}}return{index:s,remainder:r.column}}B(e,t){if(t<0)return 0;const i=e.piece,r=this.a[i.bufferIndex].lineStarts,s=i.start.line+t+1;return s>i.end.line?r[i.end.line]+i.end.column-r[i.start.line]-i.start.column:r[s]-r[i.start.line]-i.start.column}C(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.end),n=t,o=this.u(i.bufferIndex,n),a=this.t(i.bufferIndex,i.start,n),c=a-r,l=o-s,u=i.length+l;e.piece=new wi(i.bufferIndex,i.start,n,a,u),us(this,e,l,c)}D(e,t){const i=e.piece,r=i.lineFeedCnt,s=this.u(i.bufferIndex,i.start),n=t,o=this.t(i.bufferIndex,n,i.end),a=this.u(i.bufferIndex,n),c=o-r,l=s-a,u=i.length+l;e.piece=new wi(i.bufferIndex,n,i.end,o,u),us(this,e,l,c)}E(e,t,i){const r=e.piece,s=r.start,n=r.end,o=r.length,a=r.lineFeedCnt,c=t,l=this.t(r.bufferIndex,r.start,c),u=this.u(r.bufferIndex,t)-this.u(r.bufferIndex,s);e.piece=new wi(r.bufferIndex,r.start,c,l,u),us(this,e,u-o,l-a);const h=new wi(r.bufferIndex,i,n,this.t(r.bufferIndex,i,n),this.u(r.bufferIndex,n)-this.u(r.bufferIndex,i)),f=this.S(e,h);this.N(f)}F(e,t){this.Q(t,e)&&(t+=`
`);const i=this.K()&&this.L(t)&&this.M(e),r=this.a[0].buffer.length;this.a[0].buffer+=t;const s=ds(t,!1);for(let f=0;f<s.length;f++)s[f]+=r;if(i){const f=this.a[0].lineStarts[this.a[0].lineStarts.length-2];this.a[0].lineStarts.pop(),this.g={line:this.g.line-1,column:r-f}}this.a[0].lineStarts=this.a[0].lineStarts.concat(s.slice(1));const n=this.a[0].lineStarts.length-1,o=this.a[0].buffer.length-this.a[0].lineStarts[n],a={line:n,column:o},c=e.piece.length+t.length,l=e.piece.lineFeedCnt,u=this.t(0,e.piece.start,a),h=u-l;e.piece=new wi(e.piece.bufferIndex,e.piece.start,a,u,c),this.g=a,us(this,e,t.length,h)}G(e){let t=this.root;const i=this.h.get(e);if(i)return{node:i.node,nodeStartOffset:i.nodeStartOffset,remainder:e-i.nodeStartOffset};let r=0;for(;t!==ie;)if(t.size_left>e)t=t.left;else if(t.size_left+t.piece.length>=e){r+=t.size_left;const s={node:t,remainder:e-t.size_left,nodeStartOffset:r};return this.h.set(s),s}else e-=t.size_left+t.piece.length,r+=t.size_left+t.piece.length,t=t.right;return null}H(e,t){let i=this.root,r=0;for(;i!==ie;)if(i.left!==ie&&i.lf_left>=e-1)i=i.left;else if(i.lf_left+i.piece.lineFeedCnt>e-1){const s=this.B(i,e-i.lf_left-2),n=this.B(i,e-i.lf_left-1);return r+=i.size_left,{node:i,remainder:Math.min(s+t-1,n),nodeStartOffset:r}}else if(i.lf_left+i.piece.lineFeedCnt===e-1){const s=this.B(i,e-i.lf_left-2);if(s+t-1<=i.piece.length)return{node:i,remainder:s+t-1,nodeStartOffset:r};t-=i.piece.length-s;break}else e-=i.lf_left+i.piece.lineFeedCnt,r+=i.size_left+i.piece.length,i=i.right;for(i=i.next();i!==ie;){if(i.piece.lineFeedCnt>0){const s=this.B(i,0),n=this.J(i);return{node:i,remainder:Math.min(t-1,s),nodeStartOffset:n}}else if(i.piece.length>=t-1){const s=this.J(i);return{node:i,remainder:t-1,nodeStartOffset:s}}else t-=i.piece.length;i=i.next()}return null}I(e,t){if(e.piece.lineFeedCnt<1)return-1;const i=this.a[e.piece.bufferIndex],r=this.u(e.piece.bufferIndex,e.piece.start)+t;return i.buffer.charCodeAt(r)}J(e){if(!e)return 0;let t=e.size_left;for(;e!==this.root;)e.parent.right===e&&(t+=e.parent.size_left+e.parent.piece.length),e=e.parent;return t}K(){return!(this.f&&this.d===`
`)}L(e){if(typeof e=="string")return e.charCodeAt(0)===10;if(e===ie||e.piece.lineFeedCnt===0)return!1;const t=e.piece,i=this.a[t.bufferIndex].lineStarts,r=t.start.line,s=i[r]+t.start.column;return r===i.length-1||i[r+1]>s+1?!1:this.a[t.bufferIndex].buffer.charCodeAt(s)===10}M(e){return typeof e=="string"?e.charCodeAt(e.length-1)===13:e===ie||e.piece.lineFeedCnt===0?!1:this.I(e,e.piece.length-1)===13}N(e){if(this.K()&&this.L(e)){const t=e.prev();this.M(t)&&this.P(t,e)}}O(e){if(this.K()&&this.M(e)){const t=e.next();this.L(t)&&this.P(e,t)}}P(e,t){const i=[],r=this.a[e.piece.bufferIndex].lineStarts;let s;e.piece.end.column===0?s={line:e.piece.end.line-1,column:r[e.piece.end.line]-r[e.piece.end.line-1]-1}:s={line:e.piece.end.line,column:e.piece.end.column-1};const n=e.piece.length-1,o=e.piece.lineFeedCnt-1;e.piece=new wi(e.piece.bufferIndex,e.piece.start,s,o,n),us(this,e,-1,-1),e.piece.length===0&&i.push(e);const a={line:t.piece.start.line+1,column:0},c=t.piece.length-1,l=this.t(t.piece.bufferIndex,a,t.piece.end);t.piece=new wi(t.piece.bufferIndex,a,t.piece.end,l,c),us(this,t,-1,-1),t.piece.length===0&&i.push(t);const u=this.w(`\r
`);this.S(e,u[0]);for(let h=0;h<i.length;h++)Rp(this,i[h])}Q(e,t){if(this.K()&&this.M(e)){const i=t.next();if(this.L(i)){if(e+=`
`,i.piece.length===1)Rp(this,i);else{const r=i.piece,s={line:r.start.line+1,column:0},n=r.length-1,o=this.t(r.bufferIndex,s,r.end);i.piece=new wi(r.bufferIndex,s,r.end,o,n),us(this,i,-1,-1)}return!0}}return!1}iterate(e,t){if(e===ie)return t(ie);const i=this.iterate(e.left,t);return i&&t(e)&&this.iterate(e.right,t)}R(e){if(e===ie)return"";const t=this.a[e.piece.bufferIndex],i=e.piece,r=this.u(i.bufferIndex,i.start),s=this.u(i.bufferIndex,i.end);return t.buffer.substring(r,s)}getPieceContent(e){const t=this.a[e.bufferIndex],i=this.u(e.bufferIndex,e.start),r=this.u(e.bufferIndex,e.end);return t.buffer.substring(i,r)}S(e,t){const i=new eb(t,1);if(i.left=ie,i.right=ie,i.parent=ie,i.size_left=0,i.lf_left=0,this.root===ie)this.root=i,i.color=0;else if(e.right===ie)e.right=i,i.parent=e;else{const s=tb(e.right);s.left=i,i.parent=s}return o$(this,i),i}T(e,t){const i=new eb(t,1);if(i.left=ie,i.right=ie,i.parent=ie,i.size_left=0,i.lf_left=0,this.root===ie)this.root=i,i.color=0;else if(e.left===ie)e.left=i,i.parent=e;else{const r=n$(e.left);r.right=i,i.parent=r}return o$(this,i),i}U(e){let t="";return this.iterate(e,i=>(t+=this.R(i),!0)),t}},c$;(function(e){e[e.Unknown=0]="Unknown",e[e.Invalid=3]="Invalid",e[e.LF=1]="LF",e[e.CRLF=2]="CRLF"})(c$||(c$={}));function nb(e){let t=0,i=0,r=0,s=0;for(let n=0,o=e.length;n<o;n++){const a=e.charCodeAt(n);a===13?(t===0&&(i=n),t++,n+1<o&&e.charCodeAt(n+1)===10?(s|=2,n++):s|=3,r=n+1):a===10&&(s|=1,t===0&&(i=n),t++,r=n+1)}return t===0&&(i=e.length),[t,i,e.length-r,s]}var ob;function rj(){return ob||(ob=new TextDecoder("UTF-16LE")),ob}function sj(e,t,i){const r=new Uint16Array(e.buffer,t,i);return i>0&&(r[0]===65279||r[0]===65534)?nj(e,t,i):rj().decode(r)}function nj(e,t,i){const r=[];let s=0;for(let n=0;n<i;n++){const o=zI(e,t);t+=2,r[s++]=String.fromCharCode(o)}return r.join("")}function Lp(e){return e.replace(/\n/g,"\\n").replace(/\r/g,"\\r")}var oj=class jr{get oldLength(){return this.oldText.length}get oldEnd(){return this.oldPosition+this.oldText.length}get newLength(){return this.newText.length}get newEnd(){return this.newPosition+this.newText.length}constructor(t,i,r,s){this.oldPosition=t,this.oldText=i,this.newPosition=r,this.newText=s}toString(){return this.oldText.length===0?`(insert@${this.oldPosition} "${Lp(this.newText)}")`:this.newText.length===0?`(delete@${this.oldPosition} "${Lp(this.oldText)}")`:`(replace@${this.oldPosition} "${Lp(this.oldText)}" with "${Lp(this.newText)}")`}static a(t){return 4+2*t.length}static c(t,i,r){const s=i.length;Mu(t,s,r),r+=4;for(let n=0;n<s;n++)_I(t,i.charCodeAt(n),r),r+=2;return r}static d(t,i){const r=Nu(t,i);return i+=4,sj(t,i,r)}writeSize(){return 8+jr.a(this.oldText)+jr.a(this.newText)}write(t,i){return Mu(t,this.oldPosition,i),i+=4,Mu(t,this.newPosition,i),i+=4,i=jr.c(t,this.oldText,i),i=jr.c(t,this.newText,i),i}static read(t,i,r){const s=Nu(t,i);i+=4;const n=Nu(t,i);i+=4;const o=jr.d(t,i);i+=jr.a(o);const a=jr.d(t,i);return i+=jr.a(a),r.push(new jr(s,o,n,a)),i}},aj=class Su extends ne{constructor(t,i,r,s,n,o,a){super(),this.m=this.B(new P),this.onDidChangeContent=this.m.event,this.f=i,this.j=!o,this.g=s,this.h=n,this.c=new ij(t,r,a)}equals(t){return!(t instanceof Su)||this.f!==t.f||this.getEOL()!==t.getEOL()?!1:this.c.equal(t.c)}mightContainRTL(){return this.g}mightContainUnusualLineTerminators(){return this.h}resetMightContainUnusualLineTerminators(){this.h=!1}mightContainNonBasicASCII(){return this.j}getBOM(){return this.f}getEOL(){return this.c.getEOL()}createSnapshot(t){return this.c.createSnapshot(t?this.f:"")}getOffsetAt(t,i){return this.c.getOffsetAt(t,i)}getPositionAt(t){return this.c.getPositionAt(t)}getRangeAt(t,i){const r=t+i,s=this.getPositionAt(t),n=this.getPositionAt(r);return new Oe(s.lineNumber,s.column,n.lineNumber,n.column)}getValueInRange(t,i=0){if(t.isEmpty())return"";const r=this.n(i);return this.c.getValueInRange(t,r)}getValueLengthInRange(t,i=0){if(t.isEmpty())return 0;if(t.startLineNumber===t.endLineNumber)return t.endColumn-t.startColumn;const r=this.getOffsetAt(t.startLineNumber,t.startColumn),s=this.getOffsetAt(t.endLineNumber,t.endColumn);let n=0;const o=this.n(i),a=this.getEOL();if(o.length!==a.length){const c=o.length-a.length,l=t.endLineNumber-t.startLineNumber;n=c*l}return s-r+n}getCharacterCountInRange(t,i=0){if(this.j){let r=0;const s=t.startLineNumber,n=t.endLineNumber;for(let o=s;o<=n;o++){const a=this.getLineContent(o),c=o===s?t.startColumn-1:0,l=o===n?t.endColumn-1:a.length;for(let u=c;u<l;u++)Xu(a.charCodeAt(u))?(r=r+1,u=u+1):r=r+1}return r+=this.n(i).length*(n-s),r}return this.getValueLengthInRange(t,i)}getNearestChunk(t){return this.c.getNearestChunk(t)}getLength(){return this.c.getLength()}getLineCount(){return this.c.getLineCount()}getLinesContent(){return this.c.getLinesContent()}getLineContent(t){return this.c.getLineContent(t)}getLineCharCode(t,i){return this.c.getLineCharCode(t,i)}getCharCode(t){return this.c.getCharCode(t)}getLineLength(t){return this.c.getLineLength(t)}getLineMinColumn(t){return 1}getLineMaxColumn(t){return this.getLineLength(t)+1}getLineFirstNonWhitespaceColumn(t){const i=Rg(this.getLineContent(t));return i===-1?0:i+1}getLineLastNonWhitespaceColumn(t){const i=K3(this.getLineContent(t));return i===-1?0:i+2}n(t){switch(t){case 1:return`
`;case 2:return`\r
`;case 0:return this.getEOL();default:throw new Error("Unknown EOL preference")}}setEOL(t){this.c.setEOL(t)}applyEdits(t,i,r){let s=this.g,n=this.h,o=this.j,a=!0,c=[];for(let w=0;w<t.length;w++){const x=t[w];a&&x._isTracked&&(a=!1);const E=x.range;if(x.text){let ce=!0;o||(ce=!oD(x.text),o=ce),!s&&ce&&(s=v4(x.text)),!n&&ce&&(n=w4(x.text))}let $="",A=0,Q=0,W=0;if(x.text){let ce;[A,Q,W,ce]=nb(x.text);const U=this.getEOL();ce===0||ce===(U===`\r
`?2:1)?$=x.text:$=x.text.replace(/\r\n|\r|\n/g,U)}c[w]={sortIndex:w,identifier:x.identifier||null,range:E,rangeOffset:this.getOffsetAt(E.startLineNumber,E.startColumn),rangeLength:this.getValueLengthInRange(E),text:$,eolCount:A,firstLineLength:Q,lastLineLength:W,forceMoveMarkers:!!x.forceMoveMarkers,isAutoWhitespaceEdit:x.isAutoWhitespaceEdit||!1}}c.sort(Su.u);let l=!1;for(let w=0,x=c.length-1;w<x;w++){const E=c[w].range.getEndPosition(),$=c[w+1].range.getStartPosition();if($.isBeforeOrEqual(E)){if($.isBefore(E))throw new Error("Overlapping ranges are not allowed!");l=!0}}a&&(c=this.s(c));const u=r||i?Su._getInverseEditRanges(c):[],h=[];if(i)for(let w=0;w<c.length;w++){const x=c[w],E=u[w];if(x.isAutoWhitespaceEdit&&x.range.isEmpty())for(let $=E.startLineNumber;$<=E.endLineNumber;$++){let A="";$===E.startLineNumber&&(A=this.getLineContent(x.range.startLineNumber),Rg(A)!==-1)||h.push({lineNumber:$,oldContent:A})}}let f=null;if(r){let w=0;f=[];for(let x=0;x<c.length;x++){const E=c[x],$=u[x],A=this.getValueInRange(E.range),Q=E.rangeOffset+w;w+=E.text.length-A.length,f[x]={sortIndex:E.sortIndex,identifier:E.identifier,range:$,text:A,textChange:new oj(E.rangeOffset,A,Q,E.text)}}l||f.sort((x,E)=>x.sortIndex-E.sortIndex)}this.g=s,this.h=n,this.j=o;const p=this.t(c);let m=null;if(i&&h.length>0){h.sort((w,x)=>x.lineNumber-w.lineNumber),m=[];for(let w=0,x=h.length;w<x;w++){const E=h[w].lineNumber;if(w>0&&h[w-1].lineNumber===E)continue;const $=h[w].oldContent,A=this.getLineContent(E);A.length===0||A===$||Rg(A)!==-1||m.push(E)}}return this.m.fire(),new zN(f,p,m)}s(t){return t.length<1e3?t:[this._toSingleEditOperation(t)]}_toSingleEditOperation(t){let i=!1;const r=t[0].range,s=t[t.length-1].range,n=new Oe(r.startLineNumber,r.startColumn,s.endLineNumber,s.endColumn);let o=r.startLineNumber,a=r.startColumn;const c=[];for(let p=0,m=t.length;p<m;p++){const w=t[p],x=w.range;i=i||w.forceMoveMarkers,c.push(this.getValueInRange(new Oe(o,a,x.startLineNumber,x.startColumn))),w.text.length>0&&c.push(w.text),o=x.endLineNumber,a=x.endColumn}const l=c.join(""),[u,h,f]=nb(l);return{sortIndex:0,identifier:t[0].identifier,range:n,rangeOffset:this.getOffsetAt(n.startLineNumber,n.startColumn),rangeLength:this.getValueLengthInRange(n,0),text:l,eolCount:u,firstLineLength:h,lastLineLength:f,forceMoveMarkers:i,isAutoWhitespaceEdit:!1}}t(t){t.sort(Su.w);const i=[];for(let r=0;r<t.length;r++){const s=t[r],n=s.range.startLineNumber,o=s.range.startColumn,a=s.range.endLineNumber,c=s.range.endColumn;if(n===a&&o===c&&s.text.length===0)continue;s.text?(this.c.delete(s.rangeOffset,s.rangeLength),this.c.insert(s.rangeOffset,s.text,!0)):this.c.delete(s.rangeOffset,s.rangeLength);const l=new Oe(n,o,a,c);i.push({range:l,rangeLength:s.rangeLength,text:s.text,rangeOffset:s.rangeOffset,forceMoveMarkers:s.forceMoveMarkers})}return i}findMatchesLineByLine(t,i,r,s){return this.c.findMatchesLineByLine(t,i,r,s)}getPieceTree(){return this.c}static _getInverseEditRange(t,i){const r=t.startLineNumber,s=t.startColumn,[n,o,a]=nb(i);let c;if(i.length>0){const l=n+1;l===1?c=new Oe(r,s,r,s+o):c=new Oe(r,s,r+l-1,a+1)}else c=new Oe(r,s,r,s);return c}static _getInverseEditRanges(t){const i=[];let r=0,s=0,n=null;for(let o=0,a=t.length;o<a;o++){const c=t[o];let l,u;n?n.range.endLineNumber===c.range.startLineNumber?(l=r,u=s+(c.range.startColumn-n.range.endColumn)):(l=r+(c.range.startLineNumber-n.range.endLineNumber),u=c.range.startColumn):(l=c.range.startLineNumber,u=c.range.startColumn);let h;if(c.text.length>0){const f=c.eolCount+1;f===1?h=new Oe(l,u,l,u+c.firstLineLength):h=new Oe(l,u,l+f-1,c.lastLineLength+1)}else h=new Oe(l,u,l,u);r=h.endLineNumber,s=h.endColumn,i.push(h),n=c}return i}static u(t,i){const r=Oe.compareRangesUsingEnds(t.range,i.range);return r===0?t.sortIndex-i.sortIndex:r}static w(t,i){const r=Oe.compareRangesUsingEnds(t.range,i.range);return r===0?i.sortIndex-t.sortIndex:-r}},cj=class{constructor(e,t,i,r,s,n,o,a,c){this.a=e,this.b=t,this.c=i,this.d=r,this.e=s,this.f=n,this.g=o,this.h=a,this.j=c}k(e){const t=this.c+this.d+this.e,i=this.c+this.e;return t===0?e===1?`
`:`\r
`:i>t/2?`\r
`:`
`}create(e){const t=this.k(e),i=this.a;if(this.j&&(t===`\r
`&&(this.c>0||this.d>0)||t===`
`&&(this.c>0||this.e>0)))for(let s=0,n=i.length;s<n;s++){const o=i[s].buffer.replace(/\r\n|\r|\n/g,t),a=ds(o);i[s]=new lo(o,a)}const r=new aj(i,this.b,t,this.f,this.g,this.h,this.j);return{textBuffer:r,disposable:r}}getFirstLineText(e){return this.a[0].buffer.substr(0,e).split(/\r\n|\r|\n/)[0]}},l$=class{constructor(){this.a=[],this.b="",this.c=!1,this.d=0,this.e=[],this.f=0,this.g=0,this.h=0,this.j=!1,this.k=!1,this.l=!0}acceptChunk(e){if(e.length===0)return;this.a.length===0&&dD(e)&&(this.b=hD,e=e.substr(1));const t=e.charCodeAt(e.length-1);t===13||t>=55296&&t<=56319?(this.m(e.substr(0,e.length-1),!1),this.c=!0,this.d=t):(this.m(e,!1),this.c=!1,this.d=t)}m(e,t){!t&&e.length===0||(this.c?this.n(String.fromCharCode(this.d)+e):this.n(e))}n(e){const t=KU(this.e,e);this.a.push(new lo(e,t.lineStarts)),this.f+=t.cr,this.g+=t.lf,this.h+=t.crlf,t.isBasicASCII||(this.l=!1,this.j||(this.j=v4(e)),this.k||(this.k=w4(e)))}finish(e=!0){return this.o(),new cj(this.a,this.b,this.f,this.g,this.h,this.j,this.k,this.l,e)}o(){if(this.a.length===0&&this.m("",!0),this.c){this.c=!1;const e=this.a[this.a.length-1];e.buffer+=String.fromCharCode(this.d);const t=ds(e.buffer);e.lineStarts=t,this.d===13&&this.f++}}},lj=class extends ne{constructor(e,t,i){super(),this._source=e,this.b=t,this.c=i,this.a=void 0}f(e){const t=e.getLineCount();return new Oe(1,1,t,this.g(e,t))}g(e,t){if(t<1||t>e.getLineCount())throw new Error("Illegal value for lineNumber");return e.getLineLength(t)+1}get inputTextBuffer(){if(!this.b){const e=new l$;e.acceptChunk(this._source);const t=e.finish(!0),{textBuffer:i,disposable:r}=t.create(1);this.b=i,this.B(r)}return this.b}get outputTextBuffers(){return this.a||(this.a=this.c.map(e=>{const t=new l$;t.acceptChunk(e);const i=t.finish(!0),{textBuffer:r,disposable:s}=i.create(1);return this.B(s),r})),this.a}findInInputs(e){const i=new OE(e,!1,!1,null).parseSearchRequest();if(!i)return[];const r=this.f(this.inputTextBuffer);return this.inputTextBuffer.findMatchesLineByLine(r,i,!0,5e3)}findInOutputs(e){const i=new OE(e,!1,!1,null).parseSearchRequest();return i?this.outputTextBuffers.map(r=>{const s=r.findMatchesLineByLine(this.f(r),i,!0,5e3);if(s.length!==0)return{textBuffer:r,matches:s}}).filter(r=>!!r):[]}};function u$(e,t){let i=-1;const r=[];let s=[];return e.forEach(o=>{o.range.startLineNumber!==i&&s.length>0&&(r.push([...s]),s=[]),s.push(o),i=o.range.endLineNumber}),s.length>0&&r.push([...s]),r.map(o=>{const a=[],c=o[0].range.startLineNumber,l=o[o.length-1].range.endLineNumber;for(let u=c;u<=l;u++)a.push(t.getLineContent(u));return new gL(a.join(`
`)+`
`,o.map(u=>new Oe(u.range.startLineNumber-1,u.range.startColumn-1,u.range.endLineNumber-1,u.range.endColumn-1)))})}var VJ=Object.freeze({id:"application",order:100,title:d(4214,null),type:"object"}),uj=Object.freeze({id:"workbench",order:7,title:d(4215,null),type:"object"}),hj=Object.freeze({id:"security",scope:1,title:d(4216,null),type:"object",order:7}),qJ=Object.freeze({id:"problems",title:d(4217,null),type:"object",order:101}),dj=Object.freeze({id:"window",order:8,title:d(4218,null),type:"object"}),fj={ConfigurationMigration:"base.contributions.configuration.migration"},pj=class{constructor(){this.migrations=[],this.a=new P,this.onDidRegisterConfigurationMigration=this.a.event}registerConfigurationMigrations(e){this.migrations.push(...e)}},Np=new pj;jt.add(fj.ConfigurationMigration,Np);var h$=class extends ne{static{this.ID="workbench.contrib.configurationMigration"}constructor(t,i){super(),this.a=t,this.b=i,this.B(this.b.onDidChangeWorkspaceFolders(async r=>{for(const s of r.added)await this.f(s,Np.migrations)})),this.c(Np.migrations),this.B(Np.onDidRegisterConfigurationMigration(r=>this.c(r)))}async c(t){await this.f(void 0,t);for(const i of this.b.getWorkspace().folders)await this.f(i,t)}async f(t,i){await Promise.all([i.map(r=>this.g(r,t?.uri))])}async g(t,i){const r=this.a.inspect(t.key,{resource:i}),s=this.b.getWorkbenchState()===3?[["user",2],["userLocal",3],["userRemote",4],["workspace",5],["workspaceFolder",6]]:[["user",2],["userLocal",3],["userRemote",4],["workspace",5]];for(const[n,o]of s){const a=r[n];if(!a)continue;const c=[];if(a.value!==void 0){const l=await this.h(t,n,a.value,i,void 0);for(const u of l??[])c.push([u,[]])}for(const{identifiers:l,value:u}of a.overrides??[])if(u!==void 0){const h=await this.h(t,n,u,i,l);for(const f of h??[])c.push([f,l])}c.length&&await Promise.allSettled(c.map(async([[l,u],h])=>this.a.updateValue(l,u.value,{resource:i,overrideIdentifiers:h},o)))}}async h(t,i,r,s,n){const o=c=>{const u=this.a.inspect(c,{resource:s})[i];if(u)return n?u.overrides?.find(({identifiers:h})=>oi(h,n))?.value:u.value},a=await t.migrateFn(r,o);return Array.isArray(a)?a:[[t.key,a]]}};h$=__decorate([__param(0,Ph),__param(1,am)],h$);var d$=class extends ne{static{this.ID="workbench.contrib.dynamicWorkbenchSecurityConfiguration"}constructor(t){super(),this.b=t,this.a=new Is,this.ready=this.a.p,this.c()}async c(){try{await this.f()}finally{this.a.complete()}}async f(){if(!ei&&(await this.b.getEnvironment())?.os!==1)return;jt.as(An.Configuration).registerConfiguration({...hj,properties:{"security.allowedUNCHosts":{type:"array",items:{type:"string",pattern:"^[^\\\\]+$",patternErrorMessage:d(4219,null)},default:[],markdownDescription:d(4220,null),scope:3},"security.restrictUNCAccess":{type:"boolean",default:!0,markdownDescription:d(4221,null),scope:3}}})}};d$=__decorate([__param(0,zE)],d$);var pu="window.newWindowProfile",f$=class extends ne{static{this.ID="workbench.contrib.dynamicWindowConfiguration"}constructor(t,i){super(),this.c=t,this.f=i,this.g(),this.B(this.c.onDidChangeProfiles(r=>this.g())),this.h(),this.j(),this.B(i.onDidChangeConfiguration(r=>{r.source!==7&&r.affectsConfiguration(pu)&&this.h()})),this.B(this.c.onDidChangeProfiles(()=>this.j()))}g(){const t=jt.as(An.Configuration),i={...dj,properties:{[pu]:{type:["string","null"],default:null,enum:[...this.c.profiles.map(r=>r.name),null],enumItemLabels:[...this.c.profiles.map(r=>""),d(4222,null)],description:d(4223,null),scope:1}}};this.a?t.updateConfigurations({add:[i],remove:[this.a]}):t.registerConfiguration(i),this.a=i}h(){const t=this.f.getValue(pu);this.b=t?this.c.profiles.find(i=>i.name===t):void 0}j(){const t=this.f.getValue(pu);if(!t)return;const i=this.b?this.c.profiles.find(r=>r.id===this.b.id):void 0;t!==i?.name&&this.f.updateValue(pu,i?.name)}};f$=__decorate([__param(0,DT),__param(1,Ph)],f$);var YJ=B("editorResolverService"),gj=jt.as(An.Configuration),mj={...uj,properties:{"workbench.editorAssociations":{type:"object",markdownDescription:d(13914,null),additionalProperties:{type:"string"}}}};gj.registerConfiguration(mj);var ab;(function(e){e.builtin="builtin",e.option="option",e.exclusive="exclusive",e.default="default"})(ab||(ab={}));var p$;(function(e){e[e.ABORT=1]="ABORT",e[e.NONE=2]="NONE"})(p$||(p$={}));function vj(e,t){if(new Set([V.extension,V.webviewPanel,V.vscodeWorkspaceTrust,V.vscodeSettings]).has(t.scheme))return!1;const s=typeof e=="string"&&e.indexOf(Me.sep)>=0?`${t.scheme}:${t.path}`:tr(t);return Ac(typeof e=="string"?e.toLowerCase():e,s.toLowerCase())}var wj=class ku{static{this.a=0}get activeNotebookEditor(){return this.k?.apiEditor}get visibleNotebookEditors(){return this.l.map(t=>t.apiEditor)}constructor(t,i,r,s,n,o,a){this.q=r,this.r=s,this.s=n,this.t=o,this.u=a,this.f=new Map,this.g=new Ft,this.h=new Map,this.j=new P,this.onDidChangeActiveNotebookEditor=this.j.event,this.l=[],this.m=new P,this.onDidOpenNotebookDocument=this.m.event,this.n=new P,this.onDidCloseNotebookDocument=this.n.event,this.o=new P,this.onDidChangeVisibleNotebookEditors=this.o.event,this.p=new mr("NotebookCellStatusBarCache"),this.x=0,this.y=new Map,this.b=t.getProxy(J.MainThreadNotebook),this.c=t.getProxy(J.MainThreadNotebookDocuments),this.d=t.getProxy(J.MainThreadNotebookEditors),this.i=i.converter,i.registerArgumentProcessor({processArgument:c=>{if(c&&c.$mid===13){const l=c.notebookEditor?.notebookUri,u=c.cell.handle,f=this.g.get(l)?.getCell(u);if(f)return f.apiCell}if(c&&c.$mid===14){const l=c.uri,u=this.g.get(l);if(u)return u.apiNotebook}return c}}),ku.C(i)}getEditorById(t){const i=this.h.get(t);if(!i)throw new Error(`unknown text editor: ${t}. known editors: ${[...this.h.keys()]} `);return i}getIdByEditor(t){for(const[i,r]of this.h)if(r.apiEditor===t)return i}get notebookDocuments(){return[...this.g.values()]}getNotebookDocument(t,i){const r=this.g.get(t);if(!r&&!i)throw new Error(`NO notebook document for '${t}'`);return r}static w(t,i){if(!i)return;const r=i.filenamePattern.map(s=>yf.from(s)).filter(s=>s!==void 0);if(i.filenamePattern&&!r){console.warn(`Notebook content provider view options file name pattern is invalid ${i.filenamePattern}`);return}return{extension:t.identifier,providerDisplayName:t.displayName||t.name,displayName:i.displayName,filenamePattern:r,priority:i.exclusive?ab.exclusive:void 0}}registerNotebookCellStatusBarItemProvider(t,i,r){const s=ku.a++,n=typeof r.onDidChangeCellStatusBarItems=="function"?ku.a++:void 0;this.f.set(s,r),this.b.$registerNotebookCellStatusBarItemProvider(s,n,i);let o;return n!==void 0&&(o=r.onDidChangeCellStatusBarItems(a=>this.b.$emitCellStatusBarEvent(n))),new Pe(()=>{this.f.delete(s),this.b.$unregisterNotebookCellStatusBarItemProvider(s,n),o?.dispose()})}async createNotebookDocument(t){const i=await this.c.$tryCreateNotebook({viewType:t.viewType,content:t.content&&Ws.from(t.content)});return y.revive(i)}async openNotebookDocument(t){const i=this.g.get(t);if(i)return i.apiNotebook;const r=await this.c.$tryOpenNotebook(t),s=this.g.get(y.revive(r));return wo(s?.apiNotebook)}async showNotebookDocument(t,i){let r;typeof i=="object"?r={position:Pt.from(i.viewColumn),preserveFocus:i.preserveFocus,selections:i.selections&&i.selections.map(Nr.from),pinned:typeof i.preview=="boolean"?!i.preview:void 0,label:typeof i.asRepl=="string"?i.asRepl:typeof i.asRepl=="object"?i.asRepl.label:void 0}:r={preserveFocus:!1,pinned:!0};const s=i?.asRepl?"repl":t.notebookType,n=await this.d.$tryShowNotebookDocument(t.uri,s,r),o=n&&this.h.get(n)?.apiEditor;if(o)return o;throw n?new Error(`Could NOT open editor for "${t.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${t.uri.toString()}".`)}async $provideNotebookCellStatusBarItems(t,i,r,s){const n=this.f.get(t),o=y.revive(i),a=this.g.get(o);if(!a||!n)return;const c=a.getCellFromIndex(r);if(!c)return;const l=await n.provideCellStatusBarItems(c.apiCell,s);if(!l)return;const u=new ue,h=this.p.add([u]),p=(Array.isArray(l)?l:[l]).map(m=>Rv.from(m,this.i,u));return{cacheId:h,items:p}}$releaseNotebookCellStatusBarItems(t){this.p.delete(t)}registerNotebookSerializer(t,i,r,s,n){if(Qu(i))throw new Error("viewType cannot be empty or just whitespace");const o=this.x++;return this.y.set(o,{viewType:i,serializer:r,options:s}),this.b.$registerNotebookSerializer(o,{id:t.identifier,location:t.extensionLocation},i,Nv.from(s),ku.w(t,n)),oe(()=>{this.b.$unregisterNotebookSerializer(o)})}async $dataToNotebook(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.deserializeNotebook(i.buffer,r);return new ni(Ws.from(n))}async $notebookToData(t,i,r){const s=this.y.get(t);if(!s)throw new Error("NO serializer found");const n=await s.serializer.serializeNotebook(Ws.to(i.value),r);return ae.wrap(n)}async $saveNotebook(t,i,r,s,n){const o=y.revive(i),a=this.y.get(t);if(this.D(`enter saveNotebook(versionId: ${r}, ${o.toString()})`),!a)throw new Error("NO serializer found");const c=this.g.get(o);if(!c)throw new Error("Document NOT found");if(c.versionId!==r)throw new Error("Document version mismatch");if(!this.s.value.isWritableFileSystem(o.scheme))throw new Im(d(2904,null,this.A(o)),6);const l={metadata:k5(c.apiNotebook.metadata,m=>!(a.options?.transientDocumentMetadata??{})[m]),cells:[]};for(const m of c.apiNotebook.getCells()){const w=new Nd(m.kind,m.document.getText(),m.document.languageId,m.mime,a.options?.transientOutputs?[]:[...m.outputs],m.metadata,m.executionSummary);w.metadata=k5(m.metadata,x=>!(a.options?.transientCellMetadata??{})[x]),l.cells.push(w)}if(await this.z(o,s),n.isCancellationRequested)throw new Error("canceled");const u=await a.serializer.serializeNotebook(l,n);if(n.isCancellationRequested)throw new Error("canceled");this.D(`serialized versionId: ${r} ${o.toString()}`),await this.s.value.writeFile(o,u),this.D(`Finished write versionId: ${r} ${o.toString()}`);const h=this.s.getFileSystemProviderExtUri(o.scheme),f=await this.s.value.stat(o),p={name:h.basename(o),isFile:(f.type&Cn.File)!==0,isDirectory:(f.type&Cn.Directory)!==0,isSymbolicLink:(f.type&Cn.SymbolicLink)!==0,mtime:f.mtime,ctime:f.ctime,size:f.size,readonly:!!((f.permissions??0)&Oo.Readonly)||!this.s.value.isWritableFileSystem(o.scheme),locked:!!((f.permissions??0)&Oo.Locked),etag:B6({mtime:f.mtime,size:f.size}),children:void 0};return this.D(`exit saveNotebook(versionId: ${r}, ${o.toString()})`),p}async $searchInNotebooks(t,i,r,s,n){const o=this.y.get(t)?.serializer;if(!o)return{limitHit:!1,results:[]};const a=new oy;await(async(f,p,m)=>{await Promise.all(f.map(async w=>await Promise.all(w.filenamePatterns.map(x=>{const E={_reason:m._reason,folderQueries:m.folderQueries,includePattern:m.includePattern,excludePattern:m.excludePattern,maxResults:m.maxResults,type:1,filePattern:x};return this.t.doInternalFileSearchWithCustomCallback(E,p,$=>{$.forEach(A=>{a.has(A)||s.some(W=>w.isFromSettings&&!W.isFromSettings?!1:W.filenamePatterns.some(ce=>vj(ce,A)))||a.add(A)})}).catch($=>{if($.code==="ENOENT")return console.warn("Could not find notebook search results, ignoring notebook results."),{limitHit:!1,messages:[]};throw $})}))))})(r,n,i);const l=new Ft;let u=!1;const h=Array.from(a).map(async f=>{const p=[];try{if(n.isCancellationRequested)return;if(i.maxResults&&[...l.values()].reduce((E,$)=>E+$.cellResults.length,0)>i.maxResults){u=!0;return}const m=[],w=this.g.get(f);if(w)w.apiNotebook.getCells().forEach($=>m.push({input:$.document.getText(),outputs:$.outputs.flatMap(A=>A.items.map(Q=>Q.data.toString()))}));else{const E=await this.s.value.readFile(f),$=ae.fromString(E.toString()),A=await o.deserializeNotebook($.buffer,n);if(n.isCancellationRequested)return;Ws.from(A).cells.forEach(W=>m.push({input:W.source,outputs:W.outputs.flatMap(ce=>ce.items.map(U=>U.valueBytes.toString()))}))}if(n.isCancellationRequested)return;m.forEach((E,$)=>{const A=i.contentPattern.pattern,Q=new lj(E.input,void 0,E.outputs),W=Q.findInInputs(A),ce=Q.findInOutputs(A),U=ce.flatMap(z=>u$(z.matches,z.textBuffer)).map((z,q)=>(z.webviewIndex=q,z));if(W.length>0||ce.length>0){const z={index:$,contentResults:u$(W,Q.inputTextBuffer),webviewResults:U};p.push(z)}});const x={resource:f,cellResults:p};l.set(f,x);return}catch{return}});return await Promise.all(h),{limitHit:u,results:[...l.values()]}}async z(t,i){const r=await this.s.value.stat(t);if(typeof i?.mtime=="number"&&typeof i.etag=="string"&&i.etag!==ZP&&typeof r.mtime=="number"&&typeof r.size=="number"&&i.mtime<r.mtime&&i.etag!==B6({mtime:i.mtime,size:r.size}))throw new Im(d(2905,null),3,i)}A(t){return t.scheme===V.file?t.fsPath:t.toString()}B(t,i,r){if(this.h.has(i))throw new Error(`editor with id ALREADY EXSIST: ${i}`);const s=new Kw(i,this.d,t,r.visibleRanges.map(Nr.to),r.selections.map(Nr.to),typeof r.viewColumn=="number"?Pt.to(r.viewColumn):void 0,r.viewType);this.h.set(i,s)}$acceptDocumentAndEditorsDelta(t){if(t.value.removedDocuments)for(const r of t.value.removedDocuments){const s=y.revive(r),n=this.g.get(s);n&&(n.dispose(),this.g.delete(s),this.q.$acceptDocumentsAndEditorsDelta({removedDocuments:n.apiNotebook.getCells().map(o=>o.document.uri)}),this.n.fire(n.apiNotebook));for(const o of this.h.values())o.notebookData.uri.toString()===s.toString()&&this.h.delete(o.id)}if(t.value.addedDocuments){const r=[];for(const s of t.value.addedDocuments){const n=y.revive(s.uri);if(this.g.has(n))throw new Error(`adding EXISTING notebook ${n} `);const o=new QU(this.c,this.q,this.r,n,s);r.push(...s.cells.map(a=>Xw.asModelAddData(a))),this.g.get(n)?.dispose(),this.g.set(n,o),this.q.$acceptDocumentsAndEditorsDelta({addedDocuments:r}),this.m.fire(o.apiNotebook)}}if(t.value.addedEditors)for(const r of t.value.addedEditors){if(this.h.has(r.id))return;const s=y.revive(r.documentUri),n=this.g.get(s);n&&this.B(n,r.id,r)}const i=[];if(t.value.removedEditors)for(const r of t.value.removedEditors){const s=this.h.get(r);s&&(this.h.delete(r),this.k?.id===s.id&&(this.k=void 0),i.push(s))}if(t.value.visibleEditors){this.l=t.value.visibleEditors.map(s=>this.h.get(s)).filter(s=>!!s);const r=new Set;this.l.forEach(s=>r.add(s.id));for(const s of this.h.values()){const n=r.has(s.id);s._acceptVisibility(n)}this.l=[...this.h.values()].map(s=>s).filter(s=>s.visible),this.o.fire(this.visibleNotebookEditors)}t.value.newActiveEditor===null?this.k=void 0:t.value.newActiveEditor&&(this.h.get(t.value.newActiveEditor)||console.error(`FAILED to find active notebook editor ${t.value.newActiveEditor}`),this.k=this.h.get(t.value.newActiveEditor)),t.value.newActiveEditor!==void 0&&this.j.fire(this.k?.apiEditor)}static C(t){const i=O.String.with("notebookType","A notebook type"),r=new ge("vscode.executeDataToNotebook","_executeDataToNotebook","Invoke notebook serializer",[i,new O("data","Bytes to convert to data",n=>n instanceof Uint8Array,n=>ae.wrap(n))],new fe("Notebook Data",n=>Ws.to(n.value))),s=new ge("vscode.executeNotebookToData","_executeNotebookToData","Invoke notebook serializer",[i,new O("NotebookData","Notebook data to convert to bytes",n=>!0,n=>new ni(Ws.from(n)))],new fe("Bytes",n=>n.buffer));t.registerApiCommand(r),t.registerApiCommand(s)}D(t){this.u.trace(`[Extension Host Notebook] ${t}`)}},bj=class{constructor(e,t,i,r={timeout:1500,errors:3}){this.b=e,this.c=t,this.d=i,this.f=r,this.a=new tc}dispose(){}getOnWillSaveNotebookDocumentEvent(e){return(t,i,r)=>{const s=function(o){t.call(i,o)};return s.extension=e,this.a.event(s,void 0,r)}}async $participateInSave(e,t,i){const r=y.revive(e),s=this.c.getNotebookDocument(r);if(!s)throw new Error("Unable to resolve notebook document");const n=[];if(await this.a.fireAsync({notebook:s.apiNotebook,reason:mf.to(t)},i,async(a,c)=>{const l=Date.now(),u=await await Promise.resolve(a);Date.now()-l>this.f.timeout&&this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier),!i.isCancellationRequested&&u&&(u instanceof Mn?n.push(u):this.b.warn("onWillSaveNotebookDocument-listener from extension",c.extension.identifier,"ignored due to invalid data"))}),i.isCancellationRequested)return!1;if(n.length===0)return!0;const o={edits:[]};for(const a of n){const{edits:c}=Di.from(a);o.edits=o.edits.concat(c)}return this.d.$tryApplyWorkspaceEdit(new ni(o))}},yj=class{constructor(e){this.c=e,this.a=new P,this.onDidSaveNotebookDocument=this.a.event,this.b=new P,this.onDidChangeNotebookDocument=this.b.event}$acceptModelChanged(e,t,i,r){const n=this.c.getNotebookDocument(y.revive(e)).acceptModelChanged(t.value,i,r);this.b.fire(n)}$acceptDirtyStateChanged(e,t){this.c.getNotebookDocument(y.revive(e)).acceptDirty(t)}$acceptModelSaved(e){const t=this.c.getNotebookDocument(y.revive(e));this.a.fire(t.apiNotebook)}},cb=class{constructor(t,i){this.c=t,this.d=i,this.a=new P,this.b=new P,this.onDidChangeNotebookEditorSelection=this.a.event,this.onDidChangeNotebookEditorVisibleRanges=this.b.event}$acceptEditorPropertiesChanged(t,i){this.c.debug("ExtHostNotebook#$acceptEditorPropertiesChanged",t,i);const r=this.d.getEditorById(t);i.visibleRanges&&r._acceptVisibleRanges(i.visibleRanges.ranges.map(Nr.to)),i.selections&&r._acceptSelections(i.selections.selections.map(Nr.to)),i.visibleRanges&&this.b.fire({notebookEditor:r.apiEditor,visibleRanges:r.apiEditor.visibleRanges}),i.selections&&this.a.fire(Object.freeze({notebookEditor:r.apiEditor,selections:r.apiEditor.selections}))}$acceptEditorViewColumns(t){for(const i in t)this.d.getEditorById(i)._acceptViewColumn(Pt.to(t[i]))}};cb=__decorate([__param(0,We)],cb);var za;(function(e){e[e.Output=1]="Output",e[e.OutputItems=2]="OutputItems",e[e.ExecutionState=3]="ExecutionState"})(za||(za={}));var XJ=B("INotebookExecutionService"),xj=100,g$;(function(e){e[e.Disconnected=1]="Disconnected",e[e.Connected=2]="Connected",e[e.Initializing=3]="Initializing"})(g$||(g$={}));var KJ=B("INotebookKernelService"),eZ=B("INotebookKernelHistoryService"),lb=class{constructor(t,i,r,s,n){this.l=i,this.m=r,this.n=s,this.o=n,this.b=new Ft,this.c=new Ft,this.f=new Map,this.g=0,this.h=new Map,this.i=0,this.j=new Map,this.k=0,this.q=0,this.r={},this.a=t.getProxy(J.MainThreadNotebookKernels);const o=new ge("notebook.selectKernel","_notebook.selectKernel","Trigger kernel picker for specified notebook editor widget",[new O("options","Select kernel options",c=>!0,c=>{if(c&&"notebookEditor"in c&&"id"in c){const l=this.m.getIdByEditor(c.notebookEditor);return{id:c.id,extension:c.extension,notebookEditorId:l}}else if(c&&"notebookEditor"in c){const l=this.m.getIdByEditor(c.notebookEditor);if(l===void 0)throw new Error(`Cannot invoke 'notebook.selectKernel' for unrecognized notebook editor ${c.notebookEditor.notebook.uri.toString()}`);return"skipIfAlreadySelected"in c?{notebookEditorId:l,skipIfAlreadySelected:c.skipIfAlreadySelected}:{notebookEditorId:l}}return c})],fe.Void),a=new ge("vscode.executeNotebookVariableProvider","_executeNotebookVariableProvider","Execute notebook variable provider",[O.Uri],new fe("A promise that resolves to an array of variables",(c,l)=>c.map(u=>({variable:{name:u.name,value:u.value,expression:u.expression,type:u.type,language:u.language},hasNamedChildren:u.hasNamedChildren,indexedChildrenCount:u.indexedChildrenCount}))));this.n.registerApiCommand(o),this.n.registerApiCommand(a)}createNotebookController(t,i,r,s,n,o){for(const W of this.j.values())if(W.controller.id===i&&je.equals(t.identifier,W.extensionId))throw new Error(`notebook controller with id '${i}' ALREADY exist`);const a=this.k++,c=this;this.o.trace(`NotebookController[${a}], CREATED by ${t.identifier.value}, ${i}`);const l=()=>console.warn(`NO execute handler from notebook controller '${p.id}' of extension: '${t.identifier}'`);let u=!1;const h=new P,f=new P,p={id:Mp(t.identifier,i),notebookType:r,extensionId:t.identifier,extensionLocation:t.extensionLocation,label:s||t.identifier.value,preloads:o?o.map(xf.from):[]};let m=n??l,w,x;this.a.$addKernel(a,p).catch(W=>{console.log(W),u=!0});let E=0;const $=()=>{if(u)return;const W=++E;Promise.resolve().then(()=>{W===E&&this.a.$updateKernel(a,p)})},A=new Ft,Q={get id(){return i},get notebookType(){return p.notebookType},onDidChangeSelectedNotebooks:h.event,get label(){return p.label},set label(W){p.label=W??t.displayName??t.name,$()},get detail(){return p.detail??""},set detail(W){p.detail=W,$()},get description(){return p.description??""},set description(W){p.description=W,$()},get supportedLanguages(){return p.supportedLanguages},set supportedLanguages(W){p.supportedLanguages=W,$()},get supportsExecutionOrder(){return p.supportsExecutionOrder??!1},set supportsExecutionOrder(W){p.supportsExecutionOrder=W,$()},get rendererScripts(){return p.preloads?p.preloads.map(xf.to):[]},get executeHandler(){return m},set executeHandler(W){m=W??l},get interruptHandler(){return w},set interruptHandler(W){w=W,p.supportsInterrupt=!!W,$()},set variableProvider(W){L(t,"notebookVariableProvider"),x=W,p.hasVariableProvider=!!W,W?.onDidChangeVariables(ce=>c.a.$variablesUpdated(ce.uri)),$()},get variableProvider(){return x},createNotebookCellExecution(W){if(u)throw new Error("notebook controller is DISPOSED");if(!A.has(W.notebook.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(A.keys()).map(ce=>ce.toString())),new Error(`notebook controller is NOT associated to notebook: ${W.notebook.uri.toString()}`);return c._createNotebookCellExecution(W,Mp(t.identifier,this.id))},createNotebookExecution(W){if(L(t,"notebookExecution"),u)throw new Error("notebook controller is DISPOSED");if(!A.has(W.uri))throw c.o.trace(`NotebookController[${a}] NOT associated to notebook, associated to THESE notebooks:`,Array.from(A.keys()).map(ce=>ce.toString())),new Error(`notebook controller is NOT associated to notebook: ${W.uri.toString()}`);return c._createNotebookExecution(W,Mp(t.identifier,this.id))},dispose:()=>{u||(this.o.trace(`NotebookController[${a}], DISPOSED`),u=!0,this.j.delete(a),h.dispose(),f.dispose(),this.a.$removeKernel(a))},updateNotebookAffinity(W,ce){ce===Ud.Hidden&&L(t,"notebookControllerAffinityHidden"),c.a.$updateNotebookPriority(a,W.uri,ce)},onDidReceiveMessage:f.event,postMessage(W,ce){return L(t,"notebookMessaging"),c.a.$postMessage(a,ce&&c.m.getIdByEditor(ce),W)},asWebviewUri(W){return L(t,"notebookMessaging"),iu(W,c.l.remote)}};return this.j.set(a,{extensionId:t.identifier,controller:Q,onDidReceiveMessage:f,onDidChangeSelection:h,associatedNotebooks:A}),Q}getIdByController(t){for(const[i,r]of this.j)if(r.controller===t)return Mp(r.extensionId,t.id);return null}createNotebookControllerDetectionTask(t,i){const r=this.g++,s=this;this.o.trace(`NotebookControllerDetectionTask[${r}], CREATED by ${t.identifier.value}`),this.a.$addKernelDetectionTask(r,i);const n={dispose:()=>{this.f.delete(r),s.a.$removeKernelDetectionTask(r)}};return this.f.set(r,n),n}registerKernelSourceActionProvider(t,i,r){const s=this.i++,n=typeof r.onDidChangeNotebookKernelSourceActions=="function"?s:void 0,o=this;this.h.set(s,r),this.o.trace(`NotebookKernelSourceActionProvider[${s}], CREATED by ${t.identifier.value}`),this.a.$addKernelSourceActionProvider(s,s,i);let a;return n!==void 0&&(a=r.onDidChangeNotebookKernelSourceActions(c=>this.a.$emitNotebookKernelSourceActionsChangeEvent(n))),{dispose:()=>{this.h.delete(s),o.a.$removeKernelSourceActionProvider(s,s),a?.dispose()}}}async $provideKernelSourceActions(t,i){const r=this.h.get(t);if(r){const s=new ue;return(await r.provideNotebookKernelSourceActions(i)??[]).map(o=>Lv.from(o,this.n.converter,s))}return[]}$acceptNotebookAssociation(t,i,r){const s=this.j.get(t);if(s){const n=this.m.getNotebookDocument(y.revive(i));r?s.associatedNotebooks.set(n.uri,!0):s.associatedNotebooks.delete(n.uri),this.o.trace(`NotebookController[${t}] ASSOCIATE notebook`,n.uri.toString(),r),s.onDidChangeSelection.fire({selected:r,notebook:n.apiNotebook})}}async $executeCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(y.revive(i)),o=[];for(const a of r){const c=n.getCell(a);c&&o.push(c.apiCell)}try{this.o.trace(`NotebookController[${t}] EXECUTE cells`,n.uri.toString(),o.length),await s.controller.executeHandler.call(s.controller,o,n.apiNotebook,s.controller)}catch(a){this.o.error(`NotebookController[${t}] execute cells FAILED`,a),console.error(a)}}async $cancelCells(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getNotebookDocument(y.revive(i));if(s.controller.interruptHandler)await s.controller.interruptHandler.call(s.controller,n.apiNotebook);else for(const o of r){const a=n.getCell(o);a&&this.b.get(a.uri)?.cancel()}if(s.controller.interruptHandler){const o=this.c.get(n.uri);this.c.delete(n.uri),r.length&&Array.isArray(o)&&o.length&&o.forEach(a=>a.dispose())}}async $provideVariables(t,i,r,s,n,o,a){const c=this.j.get(t);if(!c)return;const l=this.m.getNotebookDocument(y.revive(r)),u=c.controller.variableProvider;if(!u)return;let h;if(s!==void 0){if(h=this.r[s],!h)return}else this.r={};const f=n==="named"?ul.Named:ul.Indexed,p=u.provideVariables(l.apiNotebook,h,f,o,a);let m=0;for await(const w of p){if(a.isCancellationRequested)return;const x={id:this.q++,name:w.variable.name,value:w.variable.value,type:w.variable.type,interfaces:w.variable.interfaces,language:w.variable.language,expression:w.variable.expression,hasNamedChildren:w.hasNamedChildren,indexedChildrenCount:w.indexedChildrenCount,extensionId:c.extensionId.value};if(this.r[x.id]=w.variable,this.a.$receiveVariable(i,x),m++>=xj)return}}$acceptKernelMessageFromRenderer(t,i,r){const s=this.j.get(t);if(!s)return;const n=this.m.getEditorById(i);s.onDidReceiveMessage.fire(Object.freeze({editor:n.apiEditor,message:r}))}_createNotebookCellExecution(t,i){if(t.index<0)throw new Error("CANNOT execute cell that has been REMOVED from notebook");const s=this.m.getNotebookDocument(t.notebook.uri).getCellFromApiCell(t);if(!s)throw new Error("invalid cell");if(this.b.has(s.uri))throw new Error(`duplicate execution for ${s.uri}`);const n=new Ej(i,s,this.a);this.b.set(s.uri,n);const o=n.onDidChangeState(()=>{n.state===vr.Resolved&&(n.dispose(),o.dispose(),this.b.delete(s.uri))});return n.asApiObject()}_createNotebookExecution(t,i){const r=this.m.getNotebookDocument(t.uri),s=t.getCells().find(a=>{const c=r.getCellFromApiCell(a);return c&&this.b.has(c.uri)});if(s)throw new Error(`duplicate cell execution for ${s.document.uri}`);if(this.c.has(r.uri))throw new Error(`duplicate notebook execution for ${r.uri}`);const n=new kj(i,r,this.a),o=n.onDidChangeState(()=>{n.state===fs.Resolved&&(n.dispose(),o.dispose(),this.c.delete(r.uri))});return this.c.set(r.uri,[n,o]),n.asApiObject()}};lb=__decorate([__param(4,We)],lb);var vr;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(vr||(vr={}));var Ej=class HC extends ne{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.m=i,this.n=r,this.b=HC.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=vr.Init,this.g=this.B(new at),this.h=new $j(10,s=>this.s(s)),this.j=i.internalMetadata.executionOrder,this.n.$createExecution(this.b,t,this.m.notebook.uri,this.m.handle)}cancel(){this.g.cancel()}async r(t){await this.h.addItem(t)}async s(t){const i=Array.isArray(t)?t:[t];return this.n.$updateExecution(this.b,new ni(i))}t(){if(this.f===vr.Init)throw new Error("Must call start before modifying cell output");if(this.f===vr.Resolved)throw new Error("Cannot modify cell output after calling resolve")}w(t){let i=this.m;if(t&&(i=this.m.notebook.getCellFromApiCell(t)),!i)throw new Error("INVALID cell");return i.handle}y(t){return t.map(i=>{const r=Md.ensureUniqueMimeTypes(i.items,!0);return r===i.items?Vs.from(i):Vs.from({items:r,id:i.id,metadata:i.metadata})})}async z(t,i,r){const s=this.w(i),n=this.y(Ni(t));return this.r({editType:za.Output,cellHandle:s,append:r,outputs:n})}async C(t,i,r){return t=Md.ensureUniqueMimeTypes(Ni(t),!0),this.r({editType:za.OutputItems,items:t.map(Sa.from),outputId:i.id,append:r})}asApiObject(){const t=this;return Object.freeze({get token(){return t.g.token},get cell(){return t.m.apiCell},get executionOrder(){return t.j},set executionOrder(r){t.j=r,t.s([{editType:za.ExecutionState,executionOrder:t.j}])},start(r){if(t.f===vr.Resolved||t.f===vr.Started)throw new Error("Cannot call start again");t.f=vr.Started,t.c.fire(),t.s({editType:za.ExecutionState,runStartTime:r})},end(r,s,n){if(t.f===vr.Resolved)throw new Error("Cannot call resolve twice");t.f=vr.Resolved,t.c.fire(),t.h.flush();const o=Sj(n);t.n.$completeExecution(t.b,new ni({runEndTime:s,lastRunSuccess:r,error:o}))},clearOutput(r){return t.t(),t.z([],r,!1)},appendOutput(r,s){return t.t(),t.z(r,s,!0)},replaceOutput(r,s){return t.t(),t.z(r,s,!1)},appendOutputItems(r,s){return t.t(),t.C(r,s,!0)},replaceOutputItems(r,s){return t.t(),t.C(r,s,!1)}})}};function Sj(e){const t=s=>s?{startLineNumber:s.start.line,startColumn:s.start.character,endLineNumber:s.end.line,endColumn:s.end.character}:void 0,i=s=>({uri:s.uri,position:s.position,label:s.label});return e?{name:e.name,message:e.message,stack:e.stack instanceof Array?e.stack.map(s=>i(s)):e.stack,location:t(e.location),uri:e.uri}:void 0}var fs;(function(e){e[e.Init=0]="Init",e[e.Started=1]="Started",e[e.Resolved=2]="Resolved"})(fs||(fs={}));var kj=class zC extends ne{static{this.a=0}get state(){return this.f}constructor(t,i,r){super(),this.h=i,this.j=r,this.b=zC.a++,this.c=new P,this.onDidChangeState=this.c.event,this.f=fs.Init,this.g=this.B(new at),this.j.$createNotebookExecution(this.b,t,this.h.uri)}cancel(){this.g.cancel()}asApiObject(){return Object.freeze({start:()=>{if(this.f===fs.Resolved||this.f===fs.Started)throw new Error("Cannot call start again");this.f=fs.Started,this.c.fire(),this.j.$beginNotebookExecution(this.b)},end:()=>{if(this.f===fs.Resolved)throw new Error("Cannot call resolve twice");this.f=fs.Resolved,this.c.fire(),this.j.$completeNotebookExecution(this.b)}})}},$j=class{constructor(e,t){this.f=e,this.g=t,this.a=[],this.b=Date.now()}addItem(e){return this.a.push(e),this.c||(this.c=new Is,this.b=Date.now(),Vi(this.f).then(()=>this.flush())),Date.now()-this.b>this.f?this.flush():this.c.p}flush(){if(this.a.length===0||!this.c)return Promise.resolve();const e=this.c;this.c=void 0;const t=this.a;return this.a=[],this.g(t).finally(()=>e.complete())}};function Mp(e,t){return`${e.value}/${t}`}var Cj=class{constructor(e,t){this.c=t,this.a=new Map,this.b=e.getProxy(J.MainThreadNotebookRenderers)}$postRendererMessage(e,t,i){const r=this.c.getEditorById(e);this.a.get(t)?.fire({editor:r.apiEditor,message:i})}createRendererMessaging(e,t){if(!e.contributes?.notebookRenderer?.some(r=>r.id===t))throw new Error(`Extensions may only call createRendererMessaging() for renderers they contribute (got ${t})`);return{onDidReceiveMessage:(r,s,n)=>this.d(t).event(r,s,n),postMessage:(r,s)=>{Kw.apiEditorsToExtHost.has(r)&&([r,s]=[s,r]);const n=s&&Kw.apiEditorsToExtHost.get(s);return this.b.$postMessage(n?.id,t,r)}}}d(e){let t=this.a.get(e);return t||(t=new P({onDidRemoveLastListener:()=>{t?.dispose(),this.a.delete(e)}}),this.a.set(e,t),t)}},Ij=class{constructor(e){this.b=new Map,this.a=e.getProxy(J.MainThreadProfileContentHandlers)}registerProfileContentHandler(e,t,i){if(L(e,"profileContentHandlers"),this.b.has(t))throw new Error(`Handler with id '${t}' already registered`);return this.b.set(t,i),this.a.$registerProfileContentHandler(t,i.name,i.description,e.identifier.value),oe(()=>{this.b.delete(t),this.a.$unregisterProfileContentHandler(t)})}async $saveProfile(e,t,i,r){const s=this.b.get(e);if(!s)throw new Error(`Unknown handler with id: ${e}`);return s.saveProfile(t,i,r)}async $readProfile(e,t,i){const r=this.b.get(e);if(!r)throw new Error(`Unknown handler with id: ${e}`);return r.readProfile(Ue(t)?t:y.revive(t),i)}},Dj=class _C{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(J.MainThreadQuickDiff)}$provideOriginalResource(t,i,r){const s=y.revive(i),n=this.c.get(t);return n?Yt(()=>n.provideOriginalResource(s,r)).then(o=>o||null):Promise.resolve(null)}registerQuickDiffProvider(t,i,r,s,n,o){const a=_C.a++;this.c.set(a,r);const c=je.toKey(t.identifier);return this.b.$registerQuickDiffProvider(a,pa.from(i,this.d),`${c}.${s}`,n,o),{dispose:()=>{this.b.$unregisterQuickDiffProvider(a),this.c.delete(a)}}}};function Pj(e,t,i){const r=e.getProxy(J.MainThreadQuickOpen);class s{constructor(p,m){this.e=new Map,this.f=0,this.a=p,this.b=m}showQuickPick(p,m,w,x=et.None){this.c=void 0;const E=Promise.resolve(m),$=++this.f,A=r.$show($,{title:w?.title,placeHolder:w?.placeHolder,matchOnDescription:w?.matchOnDescription,matchOnDetail:w?.matchOnDetail,ignoreFocusLost:w?.ignoreFocusOut,canPickMany:w?.canPickMany},x),Q={},W=A.then(()=>Q);return Promise.race([W,E]).then(ce=>{if(ce===Q)return;const U=Ge(p,"quickPickItemTooltip");return E.then(z=>{const q=[];for(let he=0;he<z.length;he++){const me=z[he];if(typeof me=="string")q.push({label:me,handle:he});else if(me.kind===ll.Separator)q.push({type:"separator",label:me.label});else{me.tooltip&&!U&&console.warn(`Extension '${p.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${p.identifier.value}`);const Ie=me.iconPath?l(me.iconPath):void 0;q.push({label:me.label,iconPath:Ie?.iconPath,iconClass:Ie?.iconClass,description:me.description,detail:me.detail,picked:me.picked,alwaysShow:me.alwaysShow,tooltip:U?we.fromStrict(me.tooltip):void 0,handle:he})}}return w&&typeof w.onDidSelectItem=="function"&&(this.c=he=>{w.onDidSelectItem(z[he])}),r.$setItems($,q),A.then(he=>{if(typeof he=="number")return z[he];if(Array.isArray(he))return he.map(me=>z[me])})})}).then(void 0,ce=>{if(!yr(ce))return r.$setError($,ce),Promise.reject(ce)})}$onItemSelected(p){this.c?.(p)}showInput(p,m=et.None){return this.d=p?.validateInput,r.$input(p,typeof this.d=="function",m).then(void 0,w=>{if(!yr(w))return Promise.reject(w)})}async $validateInput(p){if(!this.d)return;const m=await this.d(p);if(!m||typeof m=="string")return m;let w;switch(m.severity){case ua.Info:w=mt.Info;break;case ua.Warning:w=mt.Warning;break;case ua.Error:w=mt.Error;break;default:w=m.message?mt.Error:mt.Ignore;break}return{content:m.message,severity:w}}async showWorkspaceFolderPick(p,m=et.None){const w=await this.b.executeCommand("_workbench.pickWorkspaceFolder",[p]);if(!w)return;const x=await this.a.getWorkspaceFolders2();if(x)return x.find(E=>E.uri.toString()===w.uri.toString())}createQuickPick(p){const m=new u(p,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}createInputBox(p){const m=new h(p,()=>this.e.delete(m._id));return this.e.set(m._id,m),m}$onDidChangeValue(p,m){this.e.get(p)?._fireDidChangeValue(m)}$onDidAccept(p){this.e.get(p)?._fireDidAccept()}$onDidChangeActive(p,m){const w=this.e.get(p);w instanceof u&&w._fireDidChangeActive(m)}$onDidChangeSelection(p,m){const w=this.e.get(p);w instanceof u&&w._fireDidChangeSelection(m)}$onDidTriggerButton(p,m){this.e.get(p)?._fireDidTriggerButton(m)}$onDidTriggerItemButton(p,m,w){const x=this.e.get(p);x instanceof u&&x._fireDidTriggerItemButton(m,w)}$onDidHide(p){this.e.get(p)?._fireDidHide()}}class n{static{this.a=1}constructor(p,m){this.y=p,this.z=m,this._id=u.a++,this.e=!1,this.f=!1,this.g=!0,this.j=!1,this.k=!0,this.l="",this.m=void 0,this.o=[],this.p=new Map,this.q=new P,this.r=new P,this.s=new P,this.t=new P,this.v={id:this._id},this.w=!1,this.x=[this.s,this.t,this.q,this.r],this.onDidChangeValue=this.r.event,this.onDidAccept=this.q.event,this.onDidTriggerButton=this.s.event,this.onDidHide=this.t.event}get title(){return this.b}set title(p){this.b=p,this.A({title:p})}get step(){return this.c}set step(p){this.c=p,this.A({step:p})}get totalSteps(){return this.d}set totalSteps(p){this.d=p,this.A({totalSteps:p})}get enabled(){return this.g}set enabled(p){this.g=p,this.A({enabled:p})}get busy(){return this.j}set busy(p){this.j=p,this.A({busy:p})}get ignoreFocusOut(){return this.k}set ignoreFocusOut(p){this.k=p,this.A({ignoreFocusOut:p})}get value(){return this.l}set value(p){this.l=p,this.A({value:p})}get valueSelection(){return this.m}set valueSelection(p){this.m=p,this.A({valueSelection:p})}get placeholder(){return this.n}set placeholder(p){this.n=p,this.A({placeholder:p})}get buttons(){return this.o}set buttons(p){const m=Ge(this.y,"quickInputButtonLocation");!m&&p.some(w=>w.location)&&console.warn(`Extension '${this.y.identifier.value}' uses a button location which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`),this.o=p.slice(),this.p.clear(),p.forEach((w,x)=>{const E=w===cl.Back?-1:x;this.p.set(E,w)}),this.A({buttons:p.map((w,x)=>({...l(w.iconPath),tooltip:w.tooltip,handle:w===cl.Back?-1:x,location:m?w.location:void 0}))})}show(){this.e=!0,this.f=!0,this.A({visible:!0})}hide(){this.e=!1,this.A({visible:!1})}_fireDidAccept(){this.q.fire()}_fireDidChangeValue(p){this.l=p,this.r.fire(p)}_fireDidTriggerButton(p){const m=this.p.get(p);m&&this.s.fire(m)}_fireDidHide(){this.f&&(this.f=this.e,this.t.fire())}dispose(){this.w||(this.w=!0,this._fireDidHide(),this.x=Hr(this.x),this.u&&(clearTimeout(this.u),this.u=void 0),this.z(),r.$dispose(this._id))}A(p){if(!this.w){for(const m of Object.keys(p)){const w=p[m];this.v[m]=w===void 0?null:w}"visible"in this.v?(this.u&&(clearTimeout(this.u),this.u=void 0),this.B()):this.e&&!this.u&&(this.u=setTimeout(()=>{this.u=void 0,this.B()},0))}}B(){r.$createOrUpdate(this.v),this.v={id:this._id}}}function o(f){if(f instanceof ci)return{id:f.id};const p=c(f),m=a(f);return{dark:typeof p=="string"?y.file(p):p,light:typeof m=="string"?y.file(m):m}}function a(f){return typeof f=="object"&&"light"in f?f.light:f}function c(f){return typeof f=="object"&&"dark"in f?f.dark:f}function l(f){const p=o(f);let m,w;return"id"in p?w=Et.asClassName(p):m=p,{iconPath:m,iconClass:w}}class u extends n{constructor(p,m){super(p,m),this.C=[],this.D=new Map,this.E=new Map,this.F=!1,this.G=!0,this.H=!0,this.I=!0,this.J=!1,this.K=[],this.L=new P,this.M=[],this.N=new P,this.O=new P,this.onDidChangeActive=this.L.event,this.onDidChangeSelection=this.N.event,this.onDidTriggerItemButton=this.O.event,this.x.push(this.L,this.N,this.O),this.A({type:"quickPick"})}get items(){return this.C}set items(p){this.C=p.slice(),this.D.clear(),this.E.clear(),p.forEach((x,E)=>{this.D.set(E,x),this.E.set(x,E)});const m=Ge(this.y,"quickPickItemTooltip"),w=[];for(let x=0;x<p.length;x++){const E=p[x];if(E.kind===ll.Separator)w.push({type:"separator",label:E.label});else{E.tooltip&&!m&&console.warn(`Extension '${this.y.identifier.value}' uses a tooltip which is proposed API that is only available when running out of dev or with the following command line switch: --enable-proposed-api ${this.y.identifier.value}`);const $=E.iconPath?l(E.iconPath):void 0;w.push({handle:x,label:E.label,iconPath:$?.iconPath,iconClass:$?.iconClass,description:E.description,detail:E.detail,picked:E.picked,alwaysShow:E.alwaysShow,tooltip:m?we.fromStrict(E.tooltip):void 0,buttons:E.buttons?.map((A,Q)=>({...l(A.iconPath),tooltip:A.tooltip,handle:Q}))})}}this.A({items:w})}get canSelectMany(){return this.F}set canSelectMany(p){this.F=p,this.A({canSelectMany:p})}get matchOnDescription(){return this.G}set matchOnDescription(p){this.G=p,this.A({matchOnDescription:p})}get matchOnDetail(){return this.H}set matchOnDetail(p){this.H=p,this.A({matchOnDetail:p})}get sortByLabel(){return this.I}set sortByLabel(p){this.I=p,this.A({sortByLabel:p})}get keepScrollPosition(){return this.J}set keepScrollPosition(p){this.J=p,this.A({keepScrollPosition:p})}get activeItems(){return this.K}set activeItems(p){this.K=p.filter(m=>this.E.has(m)),this.A({activeItems:this.K.map(m=>this.E.get(m))})}get selectedItems(){return this.M}set selectedItems(p){this.M=p.filter(m=>this.E.has(m)),this.A({selectedItems:this.M.map(m=>this.E.get(m))})}_fireDidChangeActive(p){const m=vt(p.map(w=>this.D.get(w)));this.K=m,this.L.fire(m)}_fireDidChangeSelection(p){const m=vt(p.map(w=>this.D.get(w)));this.M=m,this.N.fire(m)}_fireDidTriggerItemButton(p,m){const w=this.D.get(p);if(!w||!w.buttons||!w.buttons.length)return;const x=w.buttons[m];x&&this.O.fire({button:x,item:w})}}class h extends n{constructor(p,m){super(p,m),this.C=!1,this.A({type:"inputBox"})}get password(){return this.C}set password(p){this.C=p,this.A({password:p})}get prompt(){return this.D}set prompt(p){this.D=p,this.A({prompt:p})}get validationMessage(){return this.E}set validationMessage(p){this.E=p,p?typeof p=="string"?this.A({validationMessage:p,severity:mt.Error}):this.A({validationMessage:p.message,severity:p.severity??mt.Error}):this.A({validationMessage:void 0,severity:mt.Ignore})}}return new s(t,i)}var m$=new _t(()=>{const e=ip.Collator(void 0,{numeric:!0,sensitivity:"base"}).value;return{collator:e,collatorIsNumeric:e.resolvedOptions().numeric}}),iZ=new _t(()=>({collator:ip.Collator(void 0,{numeric:!0}).value})),rZ=new _t(()=>({collator:ip.Collator(void 0,{numeric:!0,sensitivity:"accent"}).value}));function Aj(e,t,i=!1){const r=e||"",s=t||"",n=m$.value.collator.compare(r,s);return m$.value.collatorIsNumeric&&n===0&&r!==s?r<s?-1:1:n}function Tj(e,t,i=!1){return i||(e=e&&e.toLowerCase(),t=t&&t.toLowerCase()),e===t?0:e<t?-1:1}function Fp(e,t,i=!1){const r=e.split(Xi),s=t.split(Xi),n=r.length-1,o=s.length-1;let a,c;for(let l=0;;l++){if(a=n===l,c=o===l,a&&c)return Aj(r[l],s[l],i);if(a)return-1;if(c)return 1;const u=Tj(r[l],s[l],i);if(u!==0)return u}}var ub;function v$(e){return e instanceof y}function Rj(e,t){return e.scheme===V.file&&t.scheme===V.file&&Es?e.toString()===t.toString():e.toString().toLowerCase()===t.toString().toLowerCase()}function hb(e){if(e)return typeof e.iconPath=="string"?y.file(e.iconPath):y.isUri(e.iconPath)||Et.isThemeIcon(e.iconPath)?e.iconPath:void 0}function uo(e){if(e){if(y.isUri(e))return e;if(Et.isThemeIcon(e))return e;{const t=e;return{light:t.light,dark:t.dark}}}else return}function Lj(e){const t=uo(e.authorIcon),i=e.references?.map(r=>({...r,icon:uo(r.icon)}));return{...e,authorIcon:t,references:i}}function db(e){return e?{...e,icon:uo(e.icon)}:void 0}function fb(e,t){if(!e.iconPath&&!t.iconPath)return 0;if(e.iconPath){if(!t.iconPath)return 1}else return-1;const i=typeof e.iconPath=="string"?e.iconPath:y.isUri(e.iconPath)?e.iconPath.fsPath:e.iconPath.id,r=typeof t.iconPath=="string"?t.iconPath:y.isUri(t.iconPath)?t.iconPath.fsPath:t.iconPath.id;return Fp(i,r)}function Nj(e,t){let i=0;if(e.strikeThrough!==t.strikeThrough)return e.strikeThrough?1:-1;if(e.faded!==t.faded)return e.faded?1:-1;if(e.tooltip!==t.tooltip)return(e.tooltip||"").localeCompare(t.tooltip||"");if(i=fb(e,t),i!==0)return i;if(e.light&&t.light)i=fb(e.light,t.light);else{if(e.light)return 1;if(t.light)return-1}if(i!==0)return i;if(e.dark&&t.dark)i=fb(e.dark,t.dark);else{if(e.dark)return 1;if(t.dark)return-1}return i}function Mj(e,t){if(e.command!==t.command)return e.command<t.command?-1:1;if(e.title!==t.title)return e.title<t.title?-1:1;if(e.tooltip!==t.tooltip){if(e.tooltip!==void 0&&t.tooltip!==void 0)return e.tooltip<t.tooltip?-1:1;if(e.tooltip!==void 0)return 1;if(t.tooltip!==void 0)return-1}if(e.arguments===t.arguments)return 0;if(e.arguments)if(t.arguments){if(e.arguments.length!==t.arguments.length)return e.arguments.length-t.arguments.length}else return 1;else return-1;for(let i=0;i<e.arguments.length;i++){const r=e.arguments[i],s=t.arguments[i];if(r!==s&&!(v$(r)&&v$(s)&&Rj(r,s)))return r<s?-1:1}return 0}function w$(e,t){let i=Fp(e.resourceUri.fsPath,t.resourceUri.fsPath,!0);if(i!==0)return i;if(e.command&&t.command)i=Mj(e.command,t.command);else{if(e.command)return 1;if(t.command)return-1}if(i!==0)return i;if(e.decorations&&t.decorations)i=Nj(e.decorations,t.decorations);else{if(e.decorations)return 1;if(t.decorations)return-1}if(i!==0)return i;if(e.multiFileDiffEditorModifiedUri&&t.multiFileDiffEditorModifiedUri)i=Fp(e.multiFileDiffEditorModifiedUri.fsPath,t.multiFileDiffEditorModifiedUri.fsPath,!0);else{if(e.multiFileDiffEditorModifiedUri)return 1;if(t.multiFileDiffEditorModifiedUri)return-1}if(i!==0)return i;if(e.multiDiffEditorOriginalUri&&t.multiDiffEditorOriginalUri)i=Fp(e.multiDiffEditorOriginalUri.fsPath,t.multiDiffEditorOriginalUri.fsPath,!0);else{if(e.multiDiffEditorOriginalUri)return 1;if(t.multiDiffEditorOriginalUri)return-1}return i}function Fj(e,t){for(let i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}function Oj(e,t){return e.command===t.command&&e.title===t.title&&e.tooltip===t.tooltip&&(e.arguments&&t.arguments?Fj(e.arguments,t.arguments):e.arguments===t.arguments)}function Uj(e,t){return Li(e,t,Oj)}var jj=class{#e;#t;get value(){return this.d}set value(e){e=e??"",this.#e.$setInputBoxValue(this.m,e),this.o(e)}get onDidChange(){return this.f.event}get placeholder(){return this.g}set placeholder(e){this.#e.$setInputBoxPlaceholder(this.m,e),this.g=e}get validateInput(){return L(this.l,"scmValidation"),this.h}set validateInput(e){if(L(this.l,"scmValidation"),e&&typeof e!="function")throw new Error(`[${this.l.identifier.value}]: Invalid SCM input box validation function`);this.h=e,this.#e.$setValidationProviderIsEnabled(this.m,!!e)}get enabled(){return this.j}set enabled(e){e=!!e,this.j!==e&&(this.j=e,this.#e.$setInputBoxEnablement(this.m,e))}get visible(){return this.k}set visible(e){e=!!e,this.k!==e&&(this.k=e,this.#e.$setInputBoxVisibility(this.m,e))}get document(){return L(this.l,"scmTextDocument"),this.#t.getDocument(this.n)}constructor(e,t,i,r,s){this.l=e,this.m=r,this.n=s,this.d="",this.f=new P,this.g="",this.j=!0,this.k=!0,this.#t=t,this.#e=i}showValidationMessage(e,t){L(this.l,"scmValidation"),this.#e.$showValidationMessage(this.m,e,t)}$onInputBoxValueChange(e){this.o(e)}o(e){this.d=e,this.f.fire(e)}},Bj=class WC{static{this.d=0}get disposed(){return this.m}get id(){return this.w}get label(){return this.x}set label(t){this.x=t,this.t.$updateGroupLabel(this.v,this.handle,t)}get contextValue(){return this.q}set contextValue(t){this.q=t,this.t.$updateGroup(this.v,this.handle,this.features)}get hideWhenEmpty(){return this.s}set hideWhenEmpty(t){this.s=t,this.t.$updateGroup(this.v,this.handle,this.features)}get features(){return{contextValue:this.contextValue,hideWhenEmpty:this.hideWhenEmpty}}get resourceStates(){return[...this.g]}set resourceStates(t){this.g=[...t],this.l.fire()}constructor(t,i,r,s,n,o,a){this.t=t,this.u=i,this.v=r,this.w=s,this.x=n,this.multiDiffEditorEnableViewChanges=o,this.y=a,this.f=0,this.g=[],this.h=new Map,this.j=new Map,this.k=new Map,this.l=new P,this.onDidUpdateResourceStates=this.l.event,this.m=!1,this.n=new P,this.onDidDispose=this.n.event,this.o=[],this.p=[],this.q=void 0,this.s=void 0,this.handle=WC.d++}getResourceState(t){return this.h.get(t)}$executeResourceCommand(t,i){const r=this.j.get(t);return r?Yt(()=>this.u.executeCommand(r.command,...r.arguments||[],i)):Promise.resolve(void 0)}_takeResourceStateSnapshot(){const t=[...this.g].sort(w$),r=Kb(this.p,t,w$).map(o=>{const a=o.toInsert.map(c=>{const l=this.f++;this.h.set(l,c);const u=c.resourceUri;let h;if(c.command)if(c.command.command==="vscode.open"||c.command.command==="vscode.diff"||c.command.command==="vscode.changes"){const z=new ue;h=this.u.converter.toInternal(c.command,z),this.k.set(l,z)}else this.j.set(l,c.command);const f=Ge(this.y,"scmMultiDiffEditor"),p=f?c.multiDiffEditorOriginalUri:void 0,m=f?c.multiFileDiffEditorModifiedUri:void 0,w=hb(c.decorations),x=c.decorations&&hb(c.decorations.light)||w,E=c.decorations&&hb(c.decorations.dark)||w,$=[x,E],A=c.decorations&&c.decorations.tooltip||"",Q=c.decorations&&!!c.decorations.strikeThrough,W=c.decorations&&!!c.decorations.faded,ce=c.contextValue||"";return{rawResource:[l,u,$,A,Q,W,ce,h,p,m],handle:l}});return{start:o.start,deleteCount:o.deleteCount,toInsert:a}}),s=r.map(({start:o,deleteCount:a,toInsert:c})=>[o,a,c.map(l=>l.rawResource)]),n=r.reverse();for(const{start:o,deleteCount:a,toInsert:c}of n){const l=c.map(h=>h.handle),u=this.o.splice(o,a,...l);for(const h of u)this.h.delete(h),this.j.delete(h),this.k.get(h)?.dispose(),this.k.delete(h)}return this.p=t,s}dispose(){this.m=!0,this.n.fire()}},pb=class VC{static{this.d=0}#e;get id(){return this.A}get label(){return this.B}get rootUri(){return this.C}get inputBox(){return this.g}get count(){return this.h}set count(t){this.h!==t&&(this.h=t,this.#e.$updateSourceControl(this.x,{count:t}))}get quickDiffProvider(){return this.j}set quickDiffProvider(t){this.j=t;let i;Ge(this.y,"quickDiffProvider")&&(i=t?.label),this.#e.$updateSourceControl(this.x,{hasQuickDiffProvider:!!t,quickDiffLabel:i})}get secondaryQuickDiffProvider(){return L(this.y,"quickDiffProvider"),this.k}set secondaryQuickDiffProvider(t){L(this.y,"quickDiffProvider"),this.k=t;const i=t?.label;this.#e.$updateSourceControl(this.x,{hasSecondaryQuickDiffProvider:!!t,secondaryQuickDiffLabel:i})}get historyProvider(){return L(this.y,"scmHistoryProvider"),this.l}set historyProvider(t){L(this.y,"scmHistoryProvider"),this.l=t,this.m.value=new ue,this.#e.$updateSourceControl(this.x,{hasHistoryProvider:!!t}),t&&(this.m.value.add(t.onDidChangeCurrentHistoryItemRefs(()=>{const i=db(t?.currentHistoryItemRef),r=db(t?.currentHistoryItemRemoteRef),s=db(t?.currentHistoryItemBaseRef);this.#e.$onDidChangeHistoryProviderCurrentHistoryItemRefs(this.x,i,r,s)})),this.m.value.add(t.onDidChangeHistoryItemRefs(i=>{if(i.added.length===0&&i.modified.length===0&&i.removed.length===0)return;const r=i.added.map(o=>({...o,icon:uo(o.icon)})),s=i.modified.map(o=>({...o,icon:uo(o.icon)})),n=i.removed.map(o=>({...o,icon:uo(o.icon)}));this.#e.$onDidChangeHistoryProviderHistoryItemRefs(this.x,{added:r,modified:s,removed:n,silent:i.silent})})))}get commitTemplate(){return this.n}set commitTemplate(t){t!==this.n&&(this.n=t,this.#e.$updateSourceControl(this.x,{commitTemplate:t}))}get acceptInputCommand(){return this.p}set acceptInputCommand(t){this.o.value=new ue,this.p=t;const i=this.z.converter.toInternal(t,this.o.value);this.#e.$updateSourceControl(this.x,{acceptInputCommand:i})}get actionButton(){return L(this.y,"scmActionButton"),this.s}set actionButton(t){if(L(this.y,"scmActionButton"),Tm(this.s,t))return;this.s=t,this.q.value=new ue;const i=t!==void 0?{command:{...this.z.converter.toInternal(t.command,this.q.value),shortTitle:t.command.shortTitle},secondaryCommands:t.secondaryCommands?.map(r=>r.map(s=>this.z.converter.toInternal(s,this.q.value))),enabled:t.enabled}:void 0;this.#e.$updateSourceControl(this.x,{actionButton:i??null})}get statusBarCommands(){return this.u}set statusBarCommands(t){if(this.u&&t&&Uj(this.u,t))return;this.t.value=new ue,this.u=t;const i=(t||[]).map(r=>this.z.converter.toInternal(r,this.t.value));this.#e.$updateSourceControl(this.x,{statusBarCommands:i})}get selected(){return this.v}constructor(t,i,r,s,n,o,a){this.y=t,this.z=s,this.A=n,this.B=o,this.C=a,this.f=new Map,this.h=void 0,this.j=void 0,this.k=void 0,this.m=new bs,this.n=void 0,this.o=new bs,this.p=void 0,this.q=new bs,this.t=new bs,this.u=void 0,this.v=!1,this.w=new P,this.onDidChangeSelection=this.w.event,this.x=VC.d++,this.D=new Map,this.E=new Set,this.#e=r;const c=y.from({scheme:V.vscodeSourceControl,path:`${n}/scm${this.x}/input`,query:a?`rootUri=${encodeURIComponent(a.toString())}`:void 0});this.g=new jj(t,i,this.#e,this.x,c),this.#e.$registerSourceControl(this.x,n,o,a,c)}createResourceGroup(t,i,r){const s=Ge(this.y,"scmMultiDiffEditor")&&r?.multiDiffEditorEnableViewChanges===!0,n=new Bj(this.#e,this.z,this.x,t,i,s,this.y),o=lt.once(n.onDidDispose)(()=>this.D.delete(n));return this.D.set(n,o),this.eventuallyAddResourceGroups(),n}eventuallyAddResourceGroups(){const t=[],i=[];for(const[r,s]of this.D){s.dispose();const n=r.onDidUpdateResourceStates(()=>{this.E.add(r),this.eventuallyUpdateResourceStates()});lt.once(r.onDidDispose)(()=>{this.E.delete(r),n.dispose(),this.f.delete(r.handle),this.#e.$unregisterGroup(this.x,r.handle)}),t.push([r.handle,r.id,r.label,r.features,r.multiDiffEditorEnableViewChanges]);const o=r._takeResourceStateSnapshot();o.length>0&&i.push([r.handle,o]),this.f.set(r.handle,r)}this.#e.$registerGroups(this.x,t,i),this.D.clear()}eventuallyUpdateResourceStates(){const t=[];this.E.forEach(i=>{const r=i._takeResourceStateSnapshot();r.length!==0&&t.push([i.handle,r])}),t.length>0&&this.#e.$spliceResourceStates(this.x,t),this.E.clear()}getResourceGroup(t){return this.f.get(t)}setSelectionState(t){this.v=t,this.w.fire(t)}dispose(){this.o.dispose(),this.q.dispose(),this.t.dispose(),this.f.forEach(t=>t.dispose()),this.#e.$unregisterSourceControl(this.x)}};__decorate([F0(100)],pb.prototype,"eventuallyAddResourceGroups",null),__decorate([F0(100)],pb.prototype,"eventuallyUpdateResourceStates",null);var gb=class{static{ub=this}static{this.d=0}get onDidChangeActiveProvider(){return this.k.event}constructor(t,i,r,s){this.m=i,this.n=r,this.o=s,this.h=new Map,this.j=new qr,this.k=new P,this.f=t.getProxy(J.MainThreadSCM),this.g=t.getProxy(J.MainThreadTelemetry),i.registerArgumentProcessor({processArgument:n=>{if(n&&n.$mid===3){const o=this.h.get(n.sourceControlHandle);if(!o)return n;const a=o.getResourceGroup(n.groupHandle);return a?a.getResourceState(n.handle):n}else if(n&&n.$mid===4){const o=this.h.get(n.sourceControlHandle);return o?o.getResourceGroup(n.groupHandle):n}else if(n&&n.$mid===5){const o=this.h.get(n.handle);return o||n}return n}})}createSourceControl(t,i,r,s){this.o.trace("ExtHostSCM#createSourceControl",t.identifier.value,i,r,s),this.g.$publicLog2("api/scm/createSourceControl",{extensionId:t.identifier.value});const n=ub.d++,o=new pb(t,this.n,this.f,this.m,i,r,s);this.h.set(n,o);const a=this.j.get(t.identifier)||[];return a.push(o),this.j.set(t.identifier,a),o}getLastInputBox(t){this.o.trace("ExtHostSCM#getLastInputBox",t.identifier.value);const i=this.j.get(t.identifier),r=i&&i[i.length-1];return r&&r.inputBox}$provideOriginalResource(t,i,r){const s=y.revive(i);this.o.trace("ExtHostSCM#$provideOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.quickDiffProvider||!n.quickDiffProvider.provideOriginalResource?Promise.resolve(null):Yt(()=>n.quickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$provideSecondaryOriginalResource(t,i,r){const s=y.revive(i);this.o.trace("ExtHostSCM#$provideSecondaryOriginalResource",t,s.toString());const n=this.h.get(t);return!n||!n.secondaryQuickDiffProvider||!n.secondaryQuickDiffProvider.provideOriginalResource?Promise.resolve(null):Yt(()=>n.secondaryQuickDiffProvider.provideOriginalResource(s,r)).then(o=>o||null)}$onInputBoxValueChange(t,i){this.o.trace("ExtHostSCM#$onInputBoxValueChange",t);const r=this.h.get(t);return r&&r.inputBox.$onInputBoxValueChange(i),Promise.resolve(void 0)}$executeResourceCommand(t,i,r,s){this.o.trace("ExtHostSCM#$executeResourceCommand",t,i,r);const n=this.h.get(t);if(!n)return Promise.resolve(void 0);const o=n.getResourceGroup(i);return o?o.$executeResourceCommand(r,s):Promise.resolve(void 0)}$validateInput(t,i,r){this.o.trace("ExtHostSCM#$validateInput",t);const s=this.h.get(t);return!s||!s.inputBox.validateInput?Promise.resolve(void 0):Yt(()=>s.inputBox.validateInput(i,r)).then(n=>{if(!n)return Promise.resolve(void 0);const o=we.fromStrict(n.message);return o?Promise.resolve([o,n.type]):Promise.resolve(void 0)})}$setSelectedSourceControl(t){return this.o.trace("ExtHostSCM#$setSelectedSourceControl",t),t!==void 0&&this.h.get(t)?.setSelectionState(!0),this.l!==void 0&&this.h.get(this.l)?.setSelectionState(!1),this.l=t,Promise.resolve(void 0)}async $resolveHistoryItemChatContext(t,i,r){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemChatContext(i,r)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemChatContext",s);return}}async $resolveHistoryItemRefsCommonAncestor(t,i,r){try{return await this.h.get(t)?.historyProvider?.resolveHistoryItemRefsCommonAncestor(i,r)??void 0}catch(s){this.o.error("ExtHostSCM#$resolveHistoryItemRefsCommonAncestor",s);return}}async $provideHistoryItemRefs(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItemRefs(i,r))?.map(o=>({...o,icon:uo(o.icon)}))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItemRefs",s);return}}async $provideHistoryItems(t,i,r){try{return(await this.h.get(t)?.historyProvider?.provideHistoryItems(i,r))?.map(o=>Lj(o))??void 0}catch(s){this.o.error("ExtHostSCM#$provideHistoryItems",s);return}}async $provideHistoryItemChanges(t,i,r,s){try{return await this.h.get(t)?.historyProvider?.provideHistoryItemChanges(i,r,s)??void 0}catch(n){this.o.error("ExtHostSCM#$provideHistoryItemChanges",n);return}}};gb=ub=__decorate([__param(3,We)],gb);var Hj=class qC{static{this.a=0}constructor(t,i){this.d=i,this.c=new Map,this.b=t.getProxy(J.MainThreadShare)}async $provideShare(t,i,r){return await this.c.get(t)?.provideShare({selection:F.to(i.selection),resourceUri:y.revive(i.resourceUri)},r)??void 0}registerShareProvider(t,i){const r=qC.a++;return this.c.set(r,i),this.b.$registerShareProvider(r,pa.from(t,this.d),i.id,i.label,i.priority),{dispose:()=>{this.b.$unregisterShareProvider(r),this.c.delete(r)}}}},zj=class GC{static{this.a=1}constructor(t){this.c=new Map,this.d=new Map,this.f=new Map,this.b=t.getProxy(J.MainThreadSpeech)}async $createSpeechToTextSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new ue,o=new at;this.d.set(i,o);const a=await s.provideSpeechToTextSession(o.token,r?{language:r}:void 0);a&&(n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitSpeechToTextEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $cancelSpeechToTextSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}async $createTextToSpeechSession(t,i,r){const s=this.c.get(t);if(!s)return;const n=new ue,o=new at;this.d.set(i,o);const a=await s.provideTextToSpeechSession(o.token,r?{language:r}:void 0);a&&(this.f.set(i,a),n.add(a.onDidChange(c=>{o.token.isCancellationRequested||this.b.$emitTextToSpeechEvent(i,c)})),n.add(o.token.onCancellationRequested(()=>n.dispose())))}async $synthesizeSpeech(t,i){this.f.get(t)?.synthesize(i)}async $cancelTextToSpeechSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t),this.f.delete(t)}async $createKeywordRecognitionSession(t,i){const r=this.c.get(t);if(!r)return;const s=new ue,n=new at;this.d.set(i,n);const o=await r.provideKeywordRecognitionSession(n.token);o&&(s.add(o.onDidChange(a=>{n.token.isCancellationRequested||this.b.$emitKeywordRecognitionEvent(i,a)})),s.add(n.token.onCancellationRequested(()=>s.dispose())))}async $cancelKeywordRecognitionSession(t){this.d.get(t)?.dispose(!0),this.d.delete(t)}registerProvider(t,i,r){const s=GC.a++;return this.c.set(s,r),this.b.$registerProvider(s,i,{extension:t,displayName:t.value}),oe(()=>{this.b.$unregisterProvider(s),this.c.delete(s)})}},_j=class ig{static{this.a=0}static{this.b=new Map([["statusBarItem.errorBackground",new Kc("statusBarItem.errorForeground")],["statusBarItem.warningBackground",new Kc("statusBarItem.warningForeground")]])}#e;#t;constructor(t,i,r,s,n,o=Os.Left,a,c){if(this.v=c,this.i=!1,this.k="",this.r=new ue,this.#e=t,this.#t=i,n&&s){this.c=TR(s.identifier,n);const l=r.get(this.c);l&&(o=l.alignLeft?Os.Left:Os.Right,a=l.priority,this.j=!0,this.name=l.name,this.text=l.text,this.tooltip=l.tooltip,this.command=l.command,this.accessibilityInformation=l.accessibilityInformation)}else this.c=String(ig.a++);this.e=s,this.f=n,this.g=o,this.h=this.w(a)}w(t){if(cn(t))return t===Number.POSITIVE_INFINITY?Number.MAX_VALUE:t===Number.NEGATIVE_INFINITY?-Number.MAX_VALUE:t}get id(){return this.f??this.e.identifier.value}get entryId(){return this.c}get alignment(){return this.g}get priority(){return this.h}get text(){return this.k}get name(){return this.n}get tooltip(){return this.l}get tooltip2(){return this.e&&L(this.e,"statusBarItemTooltip"),this.m}get color(){return this.o}get backgroundColor(){return this.p}get command(){return this.s?.fromApi}get accessibilityInformation(){return this.u}set text(t){this.k=t,this.x()}set name(t){this.n=t,this.x()}set tooltip(t){this.l=t,this.x()}set tooltip2(t){this.e&&L(this.e,"statusBarItemTooltip"),this.m=t,this.x()}set color(t){this.o=t,this.x()}set backgroundColor(t){t&&!ig.b.has(t.id)&&(t=void 0),this.p=t,this.x()}set command(t){this.s?.fromApi!==t&&(this.q&&this.r.add(this.q),this.q=new ue,typeof t=="string"?this.s={fromApi:t,internal:this.#t.toInternal({title:"",command:t},this.q)}:t?this.s={fromApi:t,internal:this.#t.toInternal(t,this.q)}:this.s=void 0,this.x())}set accessibilityInformation(t){this.u=t,this.x()}show(){this.j=!0,this.x()}hide(){clearTimeout(this.t),this.j=!1,this.#e.$disposeEntry(this.c)}x(){this.i||!this.j||(clearTimeout(this.t),this.t=setTimeout(()=>{this.t=void 0;let t;this.e?this.f?t=`${this.e.identifier.value}.${this.f}`:t=this.e.identifier.value:t=this.f;let i;this.n?i=this.n:i=d(2906,null,this.e.displayName||this.e.name);let r=this.o;this.p&&(r=ig.b.get(this.p.id));let s,n;typeof this.m=="function"?(s=we.fromStrict(this.l),n=!0):(s=we.fromStrict(this.m??this.l),n=!1),this.#e.$setEntry(this.c,t,this.e?.identifier.value,i,this.k,s,n,this.s?.internal,r,this.p,this.g===Os.Left,this.h,this.u),this.r.clear()},0))}dispose(){this.hide(),this.v?.(),this.i=!0}},Wj=class{constructor(e){this.b=[],this.a=e.createStatusBarEntry(void 0,"status.extensionMessage",Os.Left,Number.MIN_VALUE),this.a.name=d(2907,null)}dispose(){this.b.length=0,this.a.dispose()}setMessage(e){const t={message:e};return this.b.unshift(t),this.c(),new Pe(()=>{const i=this.b.indexOf(t);i>=0&&(this.b.splice(i,1),this.c())})}c(){this.b.length>0?(this.a.text=this.b[0].message,this.a.show()):this.a.hide()}},Vj=class{constructor(e,t){this.e=new Map,this.f=new Map,this.a=e.getProxy(J.MainThreadStatusBar),this.b=t,this.c=new Wj(this)}$acceptStaticEntries(e){for(const t of e)this.f.set(t.entryId,t)}async $provideTooltip(e,t){const i=this.e.get(e);if(!i)return;const r=typeof i.tooltip2=="function"?await i.tooltip2(t):i.tooltip2;return t.isCancellationRequested?void 0:we.fromStrict(r)}createStatusBarEntry(e,t,i,r){const s=new _j(this.a,this.b,this.f,e,t,i,r,()=>this.e.delete(s.entryId));return this.e.set(s.entryId,s),s}setStatusBarMessage(e,t){const i=this.c.setMessage(e);let r;return typeof t=="number"?r=setTimeout(()=>i.dispose(),t):typeof t<"u"&&t.then(()=>i.dispose(),()=>i.dispose()),new Pe(()=>{i.dispose(),clearTimeout(r)})}},qj=class extends ne{constructor(e,t){super(),this.n=t,this.a=new P,this.b=new P,this.c=new P,this.f=new P,this.g=new P,this.h=new P,this.j=new P,this.onDidChangeTextEditorSelection=this.a.event,this.onDidChangeTextEditorOptions=this.b.event,this.onDidChangeTextEditorVisibleRanges=this.c.event,this.onDidChangeTextEditorViewColumn=this.f.event,this.onDidChangeTextEditorDiffInformation=this.g.event,this.onDidChangeActiveTextEditor=this.h.event,this.onDidChangeVisibleTextEditors=this.j.event,this.m=e.getProxy(J.MainThreadTextEditors),this.B(this.n.onDidChangeVisibleTextEditors(i=>this.j.fire(i))),this.B(this.n.onDidChangeActiveTextEditor(i=>this.h.fire(i)))}getActiveTextEditor(){return this.n.activeEditor()}getVisibleTextEditors(e){const t=this.n.allEditors();return e?t:t.map(i=>i.value)}async showTextDocument(e,t,i){let r;typeof t=="number"?r={position:Pt.from(t),preserveFocus:i}:typeof t=="object"?r={position:Pt.from(t.viewColumn),preserveFocus:t.preserveFocus,selection:typeof t.selection=="object"?F.from(t.selection):void 0,pinned:typeof t.preview=="boolean"?!t.preview:void 0}:r={preserveFocus:!1};const s=await this.m.$tryShowTextDocument(e.uri,r),n=s&&this.n.getEditor(s);if(n)return n.value;throw s?new Error(`Could NOT open editor for "${e.uri.toString()}" because another editor opened in the meantime.`):new Error(`Could NOT open editor for "${e.uri.toString()}".`)}createTextEditorDecorationType(e,t){return new CM(this.m,e,t).value}$acceptEditorPropertiesChanged(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(t.options&&i._acceptOptions(t.options),t.selections){const r=t.selections.selections.map(hr.to);i._acceptSelections(r)}if(t.visibleRanges){const r=vt(t.visibleRanges.map(F.to));i._acceptVisibleRanges(r)}if(t.options&&this.b.fire({textEditor:i.value,options:{...t.options,lineNumbers:ba.to(t.options.lineNumbers)}}),t.selections){const r=Ko.fromValue(t.selections.source),s=t.selections.selections.map(hr.to);this.a.fire({textEditor:i.value,selections:s,kind:r})}if(t.visibleRanges){const r=vt(t.visibleRanges.map(F.to));this.c.fire({textEditor:i.value,visibleRanges:r})}}$acceptEditorPositionData(e){for(const t in e){const i=this.n.getEditor(t);if(!i)throw new Error("Unknown text editor");const r=Pt.to(e[t]);i.value.viewColumn!==r&&(i._acceptViewColumn(r),this.f.fire({textEditor:i.value,viewColumn:r}))}}$acceptEditorDiffInformation(e,t){const i=this.n.getEditor(e);if(!i)throw new Error("unknown text editor");if(!t){i._acceptDiffInformation(void 0),this.g.fire({textEditor:i.value,diffInformation:void 0});return}const r=this,s=t.map(n=>{const o=y.revive(n.original),a=y.revive(n.modified),c=n.changes.map(l=>{const[u,h,f,p]=l;let m;return u===h?m=ea.Addition:f===p?m=ea.Deletion:m=ea.Modification,{original:{startLineNumber:u,endLineNumberExclusive:h},modified:{startLineNumber:f,endLineNumberExclusive:p},kind:m}});return Object.freeze({documentVersion:n.documentVersion,original:o,modified:a,changes:c,get isStale(){return r.n.getDocument(a)?.version!==n.documentVersion}})});i._acceptDiffInformation(s),this.g.fire({textEditor:i.value,diffInformation:s})}getDiffInformation(e){return Promise.resolve(this.m.$getDiffInformation(e))}},mb=class{constructor(t){this.a=new Ld(Hs.Dark),this.b=new P}get activeColorTheme(){return this.a}$onColorThemeChange(t){let i;switch(t){case"light":i=Hs.Light;break;case"hcDark":i=Hs.HighContrast;break;case"hcLight":i=Hs.HighContrastLight;break;default:i=Hs.Dark}this.a=new Ld(i),this.b.fire(this.a)}get onDidChangeActiveColorTheme(){return this.b.event}};mb=__decorate([__param(0,Fe)],mb);var oZ=B("IExtHostTimeline"),Gj=class{constructor(e,t){this.b=new Map,this.c=new Map,this.a=e.getProxy(J.MainThreadTimeline),t.registerArgumentProcessor({processArgument:(i,r)=>{if(i&&i.$mid===12)if(this.b.get(i.source)&&r&&Ge(r,"timeline")){const s=i.uri===void 0?void 0:y.revive(i.uri);return this.c.get(i.source)?.get(b$(s))?.get(i.handle)}else return;return i}})}async $getTimeline(e,t,i,r){return this.b.get(e)?.provider.provideTimeline(y.revive(t),i,r)}registerTimelineProvider(e,t,i,r){const s=new ue,n=this.d(t.id,r,s).bind(this);let o;t.onDidChange&&(o=t.onDidChange(c=>this.a.$emitTimelineChangeEvent({uri:void 0,reset:!0,...c,id:t.id}),this));const a=this.c;return this.f({...t,scheme:e,onDidChange:void 0,async provideTimeline(c,l,u){l?.resetCache&&(s.clear(),a.get(t.id)?.clear());const h=await t.provideTimeline(c,l,u);if(h==null)return;const f=n(c,l);return{...h,source:t.id,items:h.items.map(f)}},dispose(){for(const c of a.values())c.get(t.id)?.clear();o?.dispose(),s.dispose()}},i)}d(e,t,i){return(r,s)=>{let n;if(s?.cacheResults){let o=this.c.get(e);o===void 0&&(o=new Map,this.c.set(e,o));const a=b$(r);n=o.get(a),n===void 0&&(n=new Map,o.set(a,n))}return o=>{const{iconPath:a,...c}=o,l=`${e}|${o.id??o.timestamp}`;n?.set(l,o);let u,h,f;o.iconPath&&(a instanceof ci?f={id:a.id,color:a.color}:y.isUri(a)?(u=a,h=a):{light:u,dark:h}=a);let p;return Ci.isMarkdownString(c.tooltip)?p=we.from(c.tooltip):Ue(c.tooltip)?p=c.tooltip:Ci.isMarkdownString(c.detail)?(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=we.from(c.detail)):Ue(c.detail)&&(console.warn("Using deprecated TimelineItem.detail, migrate to TimelineItem.tooltip"),p=c.detail),{...c,id:c.id??void 0,handle:l,source:e,command:o.command?t.toInternal(o.command,i):void 0,icon:u,iconDark:h,themeIcon:f,tooltip:p,accessibilityInformation:o.accessibilityInformation}}}}f(e,t){if(this.b.get(e.id))throw new Error(`Timeline Provider ${e.id} already exists.`);return this.a.$registerTimelineProvider({id:e.id,label:e.label,scheme:e.scheme}),this.b.set(e.id,{provider:e,extension:t}),oe(()=>{for(const r of this.c.values())r.get(e.id)?.clear();this.b.delete(e.id),this.a.$unregisterTimelineProvider(e.id),e.dispose()})}};function b$(e){return e?.toString()}var aZ=d(4463,null),cZ=bl("default-view-icon",te.window,d(4464,null)),Op;(function(e){e.ViewContainersRegistry="workbench.registry.view.containers",e.ViewsRegistry="workbench.registry.view"})(Op||(Op={}));var y$;(function(e){e[e.Sidebar=0]="Sidebar",e[e.Panel=1]="Panel",e[e.AuxiliaryBar=2]="AuxiliaryBar"})(y$||(y$={}));var Jj=class extends ne{constructor(){super(...arguments),this.c=this.B(new P),this.onDidRegister=this.c.event,this.f=this.B(new P),this.onDidDeregister=this.f.event,this.g=new Map,this.h=[]}get all(){return[...this.g.values()].flat()}registerViewContainer(e,t,i){const r=this.get(e.id);if(r)return r;const s=e;return s.openCommandActionDescriptor=i?.doNotRegisterOpenCommand?void 0:s.openCommandActionDescriptor??{id:s.id},kI(this.g,t,[]).push(s),i?.isDefault&&this.h.push(s),this.c.fire({viewContainer:s,viewContainerLocation:t}),s}deregisterViewContainer(e){for(const t of this.g.keys()){const i=this.g.get(t),r=i?.indexOf(e);if(r!==-1){i?.splice(r,1),i.length===0&&this.g.delete(t),this.f.fire({viewContainer:e,viewContainerLocation:t});return}}}get(e){return this.all.filter(t=>t.id===e)[0]}getViewContainers(e){return[...this.g.get(e)||[]]}getViewContainerLocation(e){return[...this.g.keys()].filter(t=>this.getViewContainers(t).filter(i=>i?.id===e.id).length>0)[0]}getDefaultViewContainer(e){return this.h.find(t=>this.getViewContainerLocation(t)===e)}};jt.add(Op.ViewContainersRegistry,new Jj);var Up;(function(e){e.Open="2_open",e.Debug="4_debug",e.SCM="5_scm",e.More="9_more"})(Up||(Up={}));function Zj(e,t){const i=e.group??Up.More,r=t.group??Up.More;return i!==r?i.localeCompare(r):(e.order??5)-(t.order??5)}var Yj=class extends ne{constructor(){super(...arguments),this.c=this.B(new P),this.onViewsRegistered=this.c.event,this.f=this.B(new P),this.onViewsDeregistered=this.f.event,this.g=this.B(new P),this.onDidChangeContainer=this.g.event,this.h=this.B(new P),this.onDidChangeViewWelcomeContent=this.h.event,this.j=[],this.m=new Map,this.n=new cy}registerViews(e,t){this.registerViews2([{views:e,viewContainer:t}])}registerViews2(e){e.forEach(({views:t,viewContainer:i})=>this.r(t,i)),this.c.fire(e)}deregisterViews(e,t){const i=this.s(e,t);i.length&&this.f.fire({views:i,viewContainer:t})}moveViews(e,t){for(const i of this.m.keys())if(i!==t){const r=this.s(e,i);r.length&&(this.r(r,t),this.g.fire({views:r,from:i,to:t}))}}getViews(e){return this.m.get(e)||[]}getView(e){for(const t of this.j){const i=(this.m.get(t)||[]).filter(r=>r.id===e)[0];if(i)return i}return null}getViewContainer(e){for(const t of this.j)if((this.m.get(t)||[]).filter(r=>r.id===e)[0])return t;return null}registerViewWelcomeContent(e,t){return this.n.add(e,t),this.h.fire(e),oe(()=>{this.n.delete(e,t),this.h.fire(e)})}registerViewWelcomeContent2(e,t){const i=new Map;for(const[r,s]of t)this.n.add(e,s),i.set(r,oe(()=>{this.n.delete(e,s),this.h.fire(e)}));return this.h.fire(e),i}getViewWelcomeContent(e){const t=[];return this.n.forEach(e,i=>t.push(i)),t.sort(Zj)}r(e,t){let i=this.m.get(t);i||(i=[],this.m.set(t,i),this.j.push(t));for(const r of e){if(this.getView(r.id)!==null)throw new Error(d(4465,null,r.id));i.push(r)}}s(e,t){const i=this.m.get(t);if(!i)return[];const r=[],s=[];for(const n of i)e.includes(n)?r.push(n):s.push(n);return r.length&&(s.length?this.m.set(t,s):(this.m.delete(t),this.j.splice(this.j.indexOf(t),1))),r}};jt.add(Op.ViewsRegistry,new Yj);var lZ=B("viewDescriptorService"),x$;(function(e){e[e.Default=0]="Default",e[e.Expand=1]="Expand"})(x$||(x$={}));var E$;(function(e){e[e.None=0]="None",e[e.Collapsed=1]="Collapsed",e[e.Expanded=2]="Expanded"})(E$||(E$={}));var ps=class extends Error{constructor(e){super(d(4466,null,e)),this.name="NoTreeViewError"}static is(e){return!!e&&e.name==="NoTreeViewError"}},Qj=class{constructor(){this.a=new Map}removeDragOperationTransfer(e){if(e&&this.a.has(e)){const t=this.a.get(e);return this.a.delete(e),t}}addDragOperationTransfer(e,t){this.a.set(e,t)}};function S$(e,t){if(Ue(e))return{label:e};if(e&&typeof e=="object"&&typeof e.label=="string"){let i;return Array.isArray(e.highlights)&&(i=e.highlights.filter(r=>r.length===2&&typeof r[0]=="number"&&typeof r[1]=="number"),i=i.length?i:void 0),{label:e.label,highlights:i}}}var Xj=class extends ne{constructor(e,t,i){super(),this.f=e,this.g=t,this.h=i,this.a=new Map,this.b=new Qj;function r(s){return s&&s.$treeViewId&&(s.$treeItemHandle||s.$selectedTreeItems||s.$focusedTreeItem)}t.registerArgumentProcessor({processArgument:s=>r(s)?this.r(s):Array.isArray(s)&&s.length>0?s.map(n=>r(n)?this.r(n):n):s})}registerTreeDataProvider(e,t,i){const r=this.createTreeView(e,{treeDataProvider:t},i);return{dispose:()=>r.dispose()}}createTreeView(e,t,i){if(!t||!t.treeDataProvider)throw new Error("Options with treeDataProvider is mandatory");const r=t.dragAndDropController?.dropMimeTypes??[],s=t.dragAndDropController?.dragMimeTypes??[],n=!!t.dragAndDropController?.handleDrag,o=!!t.dragAndDropController?.handleDrop,a=this.m(e,t,i),c={showCollapseAll:!!t.showCollapseAll,canSelectMany:!!t.canSelectMany,dropMimeTypes:r,dragMimeTypes:s,hasHandleDrag:n,hasHandleDrop:o,manuallyManageCheckboxes:!!t.manageCheckboxStateManually},l=this.f.$registerTreeViewDataProvider(e,c),u={get onDidCollapseElement(){return a.onDidCollapseElement},get onDidExpandElement(){return a.onDidExpandElement},get selection(){return a.selectedElements},get onDidChangeSelection(){return a.onDidChangeSelection},get activeItem(){return L(i,"treeViewActiveItem"),a.focusedElement},get onDidChangeActiveItem(){return L(i,"treeViewActiveItem"),a.onDidChangeActiveItem},get visible(){return a.visible},get onDidChangeVisibility(){return a.onDidChangeVisibility},get onDidChangeCheckboxState(){return a.onDidChangeCheckboxState},get message(){return a.message},set message(h){Jr(h)&&L(i,"treeViewMarkdownMessage"),a.message=h},get title(){return a.title},set title(h){a.title=h},get description(){return a.description},set description(h){a.description=h},get badge(){return a.badge},set badge(h){h!==void 0&&A1.isViewBadge(h)?a.badge={value:Math.floor(Math.abs(h.value)),tooltip:h.tooltip}:h===void 0&&(a.badge=void 0)},reveal:(h,f)=>a.reveal(h,f),dispose:async()=>{await l,this.a.delete(e),a.dispose()}};return this.B(u),u}async $getChildren(e,t){const i=this.a.get(e);if(!i)return Promise.reject(new ps(e));if(!t){const s=await i.getChildren();return s?[[0,...s]]:void 0}const r=[];for(let s=0;s<t.length;s++){const n=t[s],o=await i.getChildren(n);o&&r.push([s,...o])}return r}async $handleDrop(e,t,i,r,s,n,o,a){const c=this.a.get(e);if(!c)return Promise.reject(new ps(e));const l=Ca.toDataTransfer(i,async u=>(await this.f.$resolveDropFileData(e,t,u)).buffer);return o===e&&a&&await this.j(l,c,a,s,n),c.onDrop(l,r,s)}async j(e,t,i,r,s){const n=this.b.removeDragOperationTransfer(s);if(n)(await n)?.forEach((o,a)=>{o&&e.set(a,o)});else if(s&&t.handleDrag){const o=t.handleDrag(i,e,r);this.b.addDragOperationTransfer(s,o),await o}return e}async $handleDrag(e,t,i,r){const s=this.a.get(e);if(!s)return Promise.reject(new ps(e));const n=await this.j(new sa,s,t,r,i);if(!(!n||r.isCancellationRequested))return Ca.from(n)}async $hasResolve(e){const t=this.a.get(e);if(!t)throw new ps(e);return t.hasResolve}$resolve(e,t,i){const r=this.a.get(e);if(!r)throw new ps(e);return r.resolveTreeItem(t,i)}$setExpanded(e,t,i){const r=this.a.get(e);if(!r)throw new ps(e);r.setExpanded(t,i)}$setSelectionAndFocus(e,t,i){const r=this.a.get(e);if(!r)throw new ps(e);r.setSelectionAndFocus(t,i)}$setVisible(e,t){const i=this.a.get(e);if(!i){if(!t)return;throw new ps(e)}i.setVisible(t)}$changeCheckboxState(e,t){const i=this.a.get(e);if(!i)throw new ps(e);i.setCheckboxState(t)}m(e,t,i){const r=this.B(new Kj(e,t,this.f,this.g.converter,this.h,i));return this.a.set(e,r),r}r(e){const t=this.a.get(e.$treeViewId),i=e;return t&&i.$treeItemHandle?t.getExtensionElement(i.$treeItemHandle):t&&e.$focusedTreeItem?t.focusedElement:null}},Kj=class Jb extends ne{static{this.a="0"}static{this.b="1"}get visible(){return this.r}get selectedElements(){return this.s.map(t=>this.getExtensionElement(t)).filter(t=>!bt(t))}get focusedElement(){return this.t?this.getExtensionElement(this.t):void 0}constructor(t,i,r,s,n,o){if(super(),this.I=t,this.J=r,this.L=s,this.M=n,this.N=o,this.h=void 0,this.j=new Map,this.m=new Map,this.r=!1,this.s=[],this.t=void 0,this.u=this.B(new P),this.onDidExpandElement=this.u.event,this.w=this.B(new P),this.onDidCollapseElement=this.w.event,this.y=this.B(new P),this.onDidChangeSelection=this.y.event,this.z=this.B(new P),this.onDidChangeActiveItem=this.z.event,this.C=this.B(new P),this.onDidChangeVisibility=this.C.event,this.D=this.B(new P),this.onDidChangeCheckboxState=this.D.event,this.F=this.B(new P),this.G=Promise.resolve(),this.H=Promise.resolve(),this.O="",this.P="",this.Z=new at,o.contributes&&o.contributes.views)for(const u in o.contributes.views)for(const h of o.contributes.views[u])h.id===t&&(this.P=h.name);this.f=i.treeDataProvider,this.g=i.dragAndDropController,this.f.onDidChangeTreeData&&this.B(this.f.onDidChangeTreeData(u=>{Array.isArray(u)&&u.length===0||this.F.fire({message:!1,element:u})}));let a,c;const l=lt.debounce(this.F.event,(u,h)=>(u||(u={message:!1,elements:[]}),h.element!==!1&&(a||(a=new Promise(f=>c=f),this.G=this.G.then(()=>a)),Array.isArray(h.element)?u.elements.push(...h.element):u.elements.push(h.element)),h.message&&(u.message=!0),u),200,!0);this.B(l(({message:u,elements:h})=>{h.length&&(this.H=this.H.then(()=>{const f=c;return a=null,this.$(h).then(()=>f())})),u&&this.J.$setMessage(this.I,we.fromStrict(this.O)??"")}))}async getChildren(t){const i=t?this.getExtensionElement(t):void 0;if(t&&!i)return this.M.error(`No tree item with id '${t}' found.`),Promise.resolve([]);let r=this.X(t);return r||(r=await this.Y(i)),r?r.map(s=>s.item):void 0}getExtensionElement(t){return this.j.get(t)}reveal(t,i){i=i||{select:!0,focus:!1};const r=bt(i.select)?!0:i.select,s=bt(i.focus)?!1:i.focus,n=bt(i.expand)?!1:i.expand;return typeof this.f.getParent!="function"?Promise.reject(new Error("Required registered TreeDataProvider to implement 'getParent' method to access 'reveal' method")):t?this.G.then(()=>this.S(t)).then(o=>this.W(t,o[o.length-1]).then(a=>this.J.$reveal(this.I,{item:a.item,parentChain:o.map(c=>c.item)},{select:r,focus:s,expand:n})),o=>this.M.error(o)):this.J.$reveal(this.I,void 0,{select:r,focus:s,expand:n})}get message(){return this.O}set message(t){this.O=t,this.F.fire({message:!0,element:!1})}get title(){return this.P}set title(t){this.P=t,this.J.$setTitle(this.I,t,this.Q)}get description(){return this.Q}set description(t){this.Q=t,this.J.$setTitle(this.I,this.P,t)}get badge(){return this.R}set badge(t){this.R?.value===t?.value&&this.R?.tooltip===t?.tooltip||(this.R=Ef.from(t),this.J.$setBadge(this.I,t))}setExpanded(t,i){const r=this.getExtensionElement(t);r&&(i?this.u.fire(Object.freeze({element:r})):this.w.fire(Object.freeze({element:r})))}setSelectionAndFocus(t,i){const r=!Li(this.s,t);this.s=t;const s=this.t!==i;this.t=i,r&&this.y.fire(Object.freeze({selection:this.selectedElements})),s&&this.z.fire(Object.freeze({activeItem:this.focusedElement}))}setVisible(t){t!==this.r&&(this.r=t,this.C.fire(Object.freeze({visible:this.r})))}async setCheckboxState(t){const i=(await Promise.all(t.map(async r=>{const s=this.getExtensionElement(r.treeItemHandle);return s?{extensionItem:s,treeItem:await this.f.getTreeItem(s),newState:r.newState?Tr.Checked:Tr.Unchecked}:Promise.resolve(void 0)}))).filter(r=>r!==void 0);i.forEach(r=>{r.treeItem.checkboxState=r.newState?Tr.Checked:Tr.Unchecked}),this.D.fire({items:i.map(r=>[r.extensionItem,r.newState])})}async handleDrag(t,i,r){const s=[];for(const n of t){const o=this.getExtensionElement(n);o&&s.push(o)}if(!(!this.g?.handleDrag||s.length===0))return await this.g.handleDrag(s,i,r),i}get hasHandleDrag(){return!!this.g?.handleDrag}async onDrop(t,i,r){const s=i?this.getExtensionElement(i):void 0;if(!(!s&&i||!this.g?.handleDrop))return Yt(()=>this.g?.handleDrop?this.g.handleDrop(s,t,r):void 0)}get hasResolve(){return!!this.f.resolveTreeItem}async resolveTreeItem(t,i){if(!this.f.resolveTreeItem)return;const r=this.j.get(t);if(r){const s=this.m.get(r);if(s){const n=await this.f.resolveTreeItem(s.extensionItem,r,i)??s.extensionItem;return this.hb(n),s.item.tooltip=this.eb(n.tooltip),s.item.command=this.fb(s.disposableStore,n.command),s.item}}}S(t){return this.U(t).then(i=>i?this.S(i).then(r=>this.W(i,r[r.length-1]).then(s=>(r.push(s),r))):Promise.resolve([]))}U(t){const i=this.m.get(t);return i?Promise.resolve(i.parent?this.j.get(i.parent.item.handle):void 0):Yt(()=>this.f.getParent(t))}W(t,i){const r=this.m.get(t);return r?Promise.resolve(r):Yt(()=>this.f.getTreeItem(t)).then(s=>this.kb(t,s,i,!0)).then(s=>this.getChildren(i?i.item.handle:void 0).then(()=>{const n=this.getExtensionElement(s);if(n){const o=this.m.get(n);if(o)return Promise.resolve(o)}throw new Error(`Cannot resolve tree item for element ${s} from extension ${this.N.identifier.value}`)}))}X(t){if(t){let i;if(typeof t=="string"){const r=this.getExtensionElement(t);i=r?this.m.get(r):void 0}else i=t;return i&&i.children||void 0}return this.h}async Y(t){this.rb(t);const i=new at(this.Z.token);try{const r=t?this.m.get(t):void 0,s=await this.f.getChildren(t);if(i.token.isCancellationRequested)return;const n=vt(s||[]),o=await Promise.all(vt(n).map(c=>this.f.getTreeItem(c)));if(i.token.isCancellationRequested)return;const a=o.map((c,l)=>c?this.db(n[l],c,r):null);return vt(a)}finally{i.dispose()}}$(t){if(t.some(r=>!r))return this.Z.dispose(!0),this.Z=new at,this.tb(),this.J.$refresh(this.I);{const r=this.ab(t);if(r.length)return this.bb(r)}return Promise.resolve(void 0)}ab(t){const i=new Set,r=t.map(n=>this.m.get(n));for(const n of r)if(n&&!i.has(n.item.handle)){let o=n;for(;o&&o.parent&&r.findIndex(a=>o&&o.parent&&a&&a.item.handle===o.parent.item.handle)===-1;){const a=this.j.get(o.parent.item.handle);o=a?this.m.get(a):void 0}o&&!o.parent&&i.add(n.item.handle)}const s=[];return i.forEach(n=>{const o=this.j.get(n);if(o){const a=this.m.get(o);a&&(!a.parent||!i.has(a.parent.item.handle))&&s.push(n)}}),s}bb(t){const i={};return Promise.all(t.map(r=>this.cb(r).then(s=>{s&&(i[r]=s.item)}))).then(()=>Object.keys(i).length?this.J.$refresh(this.I,i):void 0)}cb(t){const i=this.getExtensionElement(t);if(i){const r=this.m.get(i);if(r)return this.rb(i),Yt(()=>this.f.getTreeItem(i)).then(s=>{if(s){const n=this.ib(i,s,r.parent);return this.pb(i,n,r,r.parent),r.dispose(),n}return null})}return Promise.resolve(null)}db(t,i,r){const s=this.ib(t,i,r);if(i.id&&this.j.has(s.item.handle))throw new Error(d(2910,null,i.id));return this.ob(t,s),this.qb(s,r),s}eb(t){return Ci.isMarkdownString(t)?we.from(t):t}fb(t,i){return i?{...this.L.toInternal(i,t),originalId:i.command}:void 0}gb(t){if(t.checkboxState===void 0)return;let i,r,s;return typeof t.checkboxState=="number"?i=t.checkboxState:(i=t.checkboxState.state,r=t.checkboxState.tooltip,s=t.checkboxState.accessibilityInformation),{isChecked:i===Tr.Checked,tooltip:r,accessibilityInformation:s}}hb(t){if(!xd.isTreeItem(t,this.N))throw new Error(`Extension ${this.N.identifier.value} has provided an invalid tree item.`)}ib(t,i,r){this.hb(i);const s=this.B(new ue),n=this.kb(t,i,r),o=this.lb(i);return{item:{handle:n,parentHandle:r?r.item.handle:void 0,label:S$(i.label,this.N),description:i.description,resourceUri:i.resourceUri,tooltip:this.eb(i.tooltip),command:this.fb(s,i.command),contextValue:i.contextValue,icon:o,iconDark:this.mb(i)||o,themeIcon:this.jb(i),collapsibleState:bt(i.collapsibleState)?Hn.None:i.collapsibleState,accessibilityInformation:i.accessibilityInformation,checkbox:this.gb(i)},extensionItem:i,parent:r,children:void 0,disposableStore:s,dispose(){s.dispose()}}}jb(t){return t.iconPath instanceof ci?t.iconPath:void 0}kb(t,{id:i,label:r,resourceUri:s},n,o){if(i)return`${Jb.b}/${i}`;const a=S$(r,this.N),c=n?n.item.handle:Jb.a;let l=a?a.label:s?tr(s):"";l=l.indexOf("/")!==-1?l.replace("/","//"):l;const u=this.m.has(t)?this.m.get(t).item.handle:void 0,h=this.X(n)||[];let f,p=0;do{if(f=`${c}/${p}:${l}`,o||!this.j.has(f)||u===f)break;p++}while(p<=h.length);return f}lb(t){if(t.iconPath&&!(t.iconPath instanceof ci))return typeof t.iconPath=="string"||y.isUri(t.iconPath)?this.nb(t.iconPath):this.nb(t.iconPath.light)}mb(t){if(t.iconPath&&!(t.iconPath instanceof ci)&&t.iconPath.dark)return this.nb(t.iconPath.dark)}nb(t){return y.isUri(t)?t:y.file(t)}ob(t,i){this.j.set(i.item.handle,t),this.m.set(t,i)}pb(t,i,r,s){this.j.delete(i.item.handle),this.m.delete(t),i.item.handle!==r.item.handle&&this.j.delete(r.item.handle),this.ob(t,i);const n=this.X(s)||[],o=n.filter(a=>a.item.handle===r.item.handle)[0];o&&n.splice(n.indexOf(o),1,i)}qb(t,i){i?(i.children||(i.children=[]),i.children.push(t)):(this.h||(this.h=[]),this.h.push(t))}rb(t){if(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}i.children=void 0}}else this.tb()}sb(t){const i=this.m.get(t);if(i){if(i.children)for(const r of i.children){const s=this.j.get(r.item.handle);s&&this.sb(s)}this.m.delete(t),this.j.delete(i.item.handle),i.dispose()}}tb(){this.h=void 0,this.j.clear(),this.m.forEach(t=>t.dispose()),this.m.clear()}dispose(){super.dispose(),this.Z.dispose(),this.tb(),this.J.$disposeTree(this.I)}},eB=class JC{static{this.a=new Set([V.http,V.https])}constructor(t){this.c=new Map,this.b=t.getProxy(J.MainThreadUriOpeners)}registerExternalUriOpener(t,i,r,s){if(this.c.has(i))throw new Error(`Opener with id '${i}' already registered`);const n=s.schemes.find(o=>!JC.a.has(o));if(n)throw new Error(`Scheme '${n}' is not supported. Only http and https are currently supported.`);return this.c.set(i,r),this.b.$registerUriOpener(i,s.schemes,t,s.label),oe(()=>{this.c.delete(i),this.b.$unregisterUriOpener(i)})}async $canOpenUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener with id: ${t}`);const n=y.revive(i);return s.canOpenExternalUri(n,r)}async $openUri(t,i,r){const s=this.c.get(t);if(!s)throw new Error(`Unknown opener id: '${t}'`);return s.openExternalUri(y.revive(i.resolvedUri),{sourceUri:y.revive(i.sourceUri)},r)}},tB=class extends ne{#e;#t;#i;#r;#n;#s;#a;#o;#c;#l;#u;#d;#h;constructor(e,t,i,r){super(),this.#o=void 0,this.#c=!0,this.#u=!1,this.#d=this.B(new P),this.onDidDispose=this.#d.event,this.#h=this.B(new P),this.onDidChangeViewState=this.#h.event,this.#e=e,this.#t=t,this.#r=i,this.#i=r.viewType,this.#n=r.panelOptions,this.#o=r.viewColumn,this.#s=r.title,this.#l=r.active}dispose(){this.#u||(this.#u=!0,this.#d.fire(),this.#t.$disposeWebview(this.#e),this.#r.dispose(),super.dispose())}get webview(){return this.c(),this.#r}get viewType(){return this.c(),this.#i}get title(){return this.c(),this.#s}set title(e){this.c(),this.#s!==e&&(this.#s=e,this.#t.$setTitle(this.#e,e))}get iconPath(){return this.c(),this.#a}set iconPath(e){this.c(),this.#a!==e&&(this.#a=e,this.#t.$setIconPath(this.#e,y.isUri(e)?{light:e,dark:e}:e))}get options(){return this.#n}get viewColumn(){if(this.c(),!(typeof this.#o=="number"&&this.#o<0))return this.#o}get active(){return this.c(),this.#l}get visible(){return this.c(),this.#c}_updateViewState(e){this.#u||(this.active!==e.active||this.visible!==e.visible||this.viewColumn!==e.viewColumn)&&(this.#l=e.active,this.#c=e.visible,this.#o=e.viewColumn,this.#h.fire({webviewPanel:this}))}reveal(e,t){this.c(),this.#t.$reveal(this.#e,{viewColumn:typeof e>"u"?void 0:Pt.from(e),preserveFocus:!!t})}c(){if(this.#u)throw new Error("Webview is disposed")}},iB=class ZC extends ne{static c(){return Ut()}constructor(t,i,r){super(),this.j=i,this.m=r,this.g=new Map,this.h=new Map,this.f=t.getProxy(J.MainThreadWebviewPanels)}dispose(){super.dispose(),this.g.forEach(t=>t.dispose()),this.g.clear()}createWebviewPanel(t,i,r,s,n={}){const o=typeof s=="object"?s.viewColumn:s,a={viewColumn:Pt.from(o),preserveFocus:typeof s=="object"&&!!s.preserveFocus},c=Ha(t),l=ZC.c();this.f.$createWebviewPanel(wp(t),l,i,{title:r,panelOptions:rB(n),webviewOptions:wk(t,this.m,n),serializeBuffersForPostMessage:c},a);const u=this.j.createNewWebview(l,n,t);return this.createNewWebviewPanel(l,i,r,o,n,u,!0)}$onDidChangeWebviewPanelViewStates(t){const i=Object.keys(t);i.sort((r,s)=>{const n=t[r],o=t[s];return n.active?1:o.active?-1:+n.visible-+o.visible});for(const r of i){const s=this.getWebviewPanel(r);if(!s)continue;const n=t[r];s._updateViewState({active:n.active,visible:n.visible,viewColumn:Pt.to(n.position)})}}async $onDidDisposeWebviewPanel(t){this.getWebviewPanel(t)?.dispose(),this.g.delete(t),this.j.deleteWebview(t)}registerWebviewPanelSerializer(t,i,r){if(this.h.has(i))throw new Error(`Serializer for '${i}' already registered`);return this.h.set(i,{serializer:r,extension:t}),this.f.$registerSerializer(i,{serializeBuffersForPostMessage:Ha(t)}),new Pe(()=>{this.h.delete(i),this.f.$unregisterSerializer(i)})}async $deserializeWebviewPanel(t,i,r,s){const n=this.h.get(i);if(!n)throw new Error(`No serializer found for '${i}'`);const{serializer:o,extension:a}=n,c=this.j.createNewWebview(t,r.webviewOptions,a),l=this.createNewWebviewPanel(t,i,r.title,s,r.panelOptions,c,r.active);await o.deserializeWebviewPanel(l,r.state)}createNewWebviewPanel(t,i,r,s,n,o,a){const c=new tB(t,this.f,o,{viewType:i,title:r,viewColumn:s,panelOptions:n,active:a});return this.g.set(t,c),c}getWebviewPanel(t){return this.g.get(t)}};function rB(e){return{enableFindWidget:e.enableFindWidget,retainContextWhenHidden:e.retainContextWhenHidden}}var sB=class extends ne{#e;#t;#i;#r;#n;#s;#a;#o;#c;constructor(e,t,i,r,s,n){super(),this.#n=!1,this.#l=this.B(new P),this.onDidChangeVisibility=this.#l.event,this.#u=this.B(new P),this.onDidDispose=this.#u.event,this.#i=i,this.#a=r,this.#e=e,this.#t=t,this.#r=s,this.#s=n}dispose(){this.#n||(this.#n=!0,this.#u.fire(),this.#r.dispose(),super.dispose())}#l;#u;get title(){return this.a(),this.#a}set title(e){this.a(),this.#a!==e&&(this.#a=e,this.#t.$setWebviewViewTitle(this.#e,e))}get description(){return this.a(),this.#o}set description(e){this.a(),this.#o!==e&&(this.#o=e,this.#t.$setWebviewViewDescription(this.#e,e))}get visible(){return this.#s}get webview(){return this.#r}get viewType(){return this.#i}_setVisible(e){e===this.#s||this.#n||(this.#s=e,this.#l.fire())}get badge(){return this.a(),this.#c}set badge(e){this.a(),!(e?.value===this.#c?.value&&e?.tooltip===this.#c?.tooltip)&&(this.#c=Ef.from(e),this.#t.$setWebviewViewBadge(this.#e,e))}show(e){this.a(),this.#t.$show(this.#e,!!e)}a(){if(this.#n)throw new Error("Webview is disposed")}},nB=class{constructor(e,t){this.d=t,this.b=new Map,this.c=new Map,this.a=e.getProxy(J.MainThreadWebviewViews)}registerWebviewViewProvider(e,t,i,r){if(this.b.has(t))throw new Error(`View provider for '${t}' already registered`);return this.b.set(t,{provider:i,extension:e}),this.a.$registerWebviewViewProvider(wp(e),t,{retainContextWhenHidden:r?.retainContextWhenHidden,serializeBuffersForPostMessage:Ha(e)}),new Pe(()=>{this.b.delete(t),this.a.$unregisterWebviewViewProvider(t)})}async $resolveWebviewView(e,t,i,r,s){const n=this.b.get(t);if(!n)throw new Error(`No view provider found for '${t}'`);const{provider:o,extension:a}=n,c=this.d.createNewWebview(e,{},a),l=new sB(e,this.a,t,i,c,!0);this.c.set(e,l),await o.resolveWebviewView(l,{state:r},s)}async $onDidChangeWebviewViewVisibility(e,t){this.e(e)._setVisible(t)}async $disposeWebviewView(e){const t=this.e(e);this.c.delete(e),t.dispose(),this.d.deleteWebview(e)}e(e){const t=this.c.get(e);if(!t)throw new Error("No webview found");return t}},oB=class{constructor(e){this.a=new Map,this.b=0,this.c=e.getProxy(J.MainThreadAiSettingsSearch)}async $startSearch(e,t,i,r){if(this.a.size===0)throw new Error("No related information providers registered");const s=this.a.get(e);if(!s)throw new Error("Settings search provider not found");const n=new T0(o=>{this.c.$handleSearchResult(e,Qv.fromSettingsSearchResult(o))});return s.provideSettingsSearchResults(t,i,n,r)}registerSettingsSearchProvider(e,t){const i=this.b;return this.b++,this.a.set(i,t),this.c.$registerAiSettingsSearchProvider(i),new Pe(()=>{this.c.$unregisterAiSettingsSearchProvider(i),this.a.delete(i)})}};function aB(e){const t=e.get(It),i=e.get(Ro),r=e.get(Yf),s=e.get(Ys),n=e.get(ns),o=e.get(Qf),a=e.get(os),c=e.get(nh),l=e.get(Fe),u=e.get(m0),h=e.get(w0),f=e.get(bn),p=e.get(We),m=e.get(S0),w=e.get(Vl),x=e.get(Xf),E=e.get(Kf),$=e.get(Z0),A=e.get(Kl),Q=e.get(X0),W=e.get(ep),ce=e.get(U0),U=e.get(H0),z=e.get(Pw);l.set(ee.ExtHostFileSystemInfo,i),l.set(ee.ExtHostLogLevelServiceShape,f),l.set(ee.ExtHostWorkspace,n),l.set(ee.ExtHostConfiguration,a),l.set(ee.ExtHostExtensionService,s),l.set(ee.ExtHostStorage,u),l.set(ee.ExtHostTunnelService,m),l.set(ee.ExtHostWindow,x),l.set(ee.ExtHostUrls,E),l.set(ee.ExtHostSecretState,$),l.set(ee.ExtHostTelemetry,o),l.set(ee.ExtHostEditorTabs,A),l.set(ee.ExtHostManagedSockets,Q),l.set(ee.ExtHostProgress,W),l.set(ee.ExtHostAuthentication,ce),l.set(ee.ExtHostChatProvider,U);const q=l.set(ee.ExtHostDecorations,e.get(KE)),he=l.set(ee.ExtHostDocumentsAndEditors,e.get(Ua)),me=l.set(ee.ExtHostCommands,e.get(so)),Ie=l.set(ee.ExtHostTerminalService,e.get(Ma)),kt=l.set(ee.ExtHostTerminalShellIntegration,e.get(jS)),H=l.set(ee.ExtHostDebugService,e.get(NS)),j=l.set(ee.ExtHostSearch,e.get(US)),G=l.set(ee.ExtHostTask,e.get(SS)),Z=l.set(ee.ExtHostOutputService,e.get(XE)),K=l.set(ee.ExtHostLocalization,e.get(Q0)),se=l.set(ee.ExtHostDocuments,new yU(l,he)),De=l.set(ee.ExtHostDocumentContentProviders,new wU(l,he,p)),Xe=l.set(ee.ExtHostDocumentSaveParticipant,new bU(p,se,l.getProxy(J.MainThreadBulkEdits))),Ee=l.set(ee.ExtHostNotebook,new wj(l,me,he,se,r,j,p)),Rt=l.set(ee.ExtHostNotebookDocuments,new yj(Ee)),ht=l.set(ee.ExtHostNotebookEditors,new cb(p,Ee)),Lt=l.set(ee.ExtHostNotebookKernels,new lb(l,t,Ee,me,p)),ii=l.set(ee.ExtHostNotebookRenderers,new Cj(l,Ee)),li=l.set(ee.ExtHostNotebookDocumentSaveParticipant,new bj(p,Ee,l.getProxy(J.MainThreadBulkEdits))),$t=l.set(ee.ExtHostEditors,new qj(l,he)),tn=l.set(ee.ExtHostTreeViews,new Xj(l.getProxy(J.MainThreadTreeViews),me,p)),$u=l.set(ee.ExtHostEditorInsets,new YO(l.getProxy(J.MainThreadEditorInsets),$t,t.remote)),Ti=l.set(ee.ExtHostDiagnostics,new Ow(l,p,i,he)),_i=l.set(ee.ExtHostLanguages,new ZU(l,se,me.converter,c)),X=l.set(ee.ExtHostLanguageFeatures,new FU(l,c,se,me,Ti,p,w,o)),Cu=l.set(ee.ExtHostCodeMapper,new QO(l)),ms=l.set(ee.ExtHostFileSystem,new DU(l,X)),Xt=l.set(ee.ExtHostFileSystemEventService,new RU(l,p,he)),br=l.set(ee.ExtHostQuickOpen,Pj(l,n,me)),rn=l.set(ee.ExtHostSCM,new gb(l,me,se,p)),Ga=l.set(ee.ExtHostQuickDiff,new Dj(l,c)),Iu=l.set(ee.ExtHostShare,new Hj(l,c)),Ja=l.set(ee.ExtHostComments,XO(l,me,se)),Za=l.set(ee.ExtHostLabelService,new NU(l)),sn=l.set(ee.ExtHostTheming,new mb(l)),yi=l.set(ee.ExtHostTimeline,new Gj(l,me)),Br=l.set(ee.ExtHostWebviews,new aU(l,t.remote,n,p,w)),ot=l.set(ee.ExtHostWebviewPanels,new iB(l,Br,n)),Kt=l.set(ee.ExtHostCustomEditors,new fU(l,se,h,Br,ot)),rg=l.set(ee.ExtHostWebviewViews,new nB(l,Br)),vs=l.set(ee.ExtHostTesting,e.get(dp)),go=l.set(ee.ExtHostUriOpeners,new eB(l)),Ya=l.set(ee.ExtHostProfileContentHandlers,new Ij(l));l.set(ee.ExtHostInteractive,new LU(l,Ee,he,me,p));const I=l.set(ee.ExtHostLanguageModelTools,new JU(l,U)),R=l.set(ee.ExtHostChatAgents2,new HO(l,p,me,se,U,Ti,I)),M=l.set(ee.ExtHostAiRelatedInformation,new LO(l)),le=l.set(ee.ExtHostAiEmbeddingVector,new EU(l)),xe=l.set(ee.ExtHostAiSettingsSearch,new oB(l)),Ct=l.set(ee.ExtHostStatusBar,new Vj(l,me.converter)),_e=l.set(ee.ExtHostSpeech,new zj(l)),Nt=l.set(ee.ExtHostEmbeddings,new xU(l));l.set(ee.ExtHostMcp,e.get(Pw));const dt=Object.values(ee);l.assertRegistered(dt);const qt=new Mw(l,he),Wi=new GO(l),ct=new Yw(l,p),Mt=new vU(l),ri=new VO(l);return UO.register(me),function(S,ve,Te){function _(v){return(b,k,be)=>{const Ke=v(zt=>{try{b.call(k,zt)}catch(uI){og(new Q4(S.identifier,uI,"FAILED to handle event"))}});return be?.push(Ke),Ke}}const pe=function(){let v=!S.isUnderDevelopment;function b(){v||(p.info(`Extension '${S.identifier.value}' uses a document selector without scheme. Learn more about this: https://go.microsoft.com/fwlink/?linkid=872305`),v=!0)}return function k(be){if(Array.isArray(be))be.forEach(k);else if(typeof be=="string")b();else{const Ke=be;typeof Ke.scheme>"u"&&b(),typeof Ke.exclusive=="boolean"&&L(S,"documentFiltersExclusive")}return be}}(),Ht={getSession(v,b,k){return(typeof k?.forceNewSession=="object"&&k.forceNewSession.learnMore||typeof k?.createIfNone=="object"&&k.createIfNone.learnMore)&&L(S,"authLearnMore"),k?.authorizationServer&&L(S,"authIssuers"),ce.getSession(S,v,b,k)},getAccounts(v){return ce.getAccounts(v)},async hasSession(v,b){return L(S,"authSession"),!!await ce.getSession(S,v,b,{silent:!0})},get onDidChangeSessions(){return _(ce.getExtensionScopedSessionsEvent(S.identifier.value))},registerAuthenticationProvider(v,b,k,be){return be?.supportedAuthorizationServers&&L(S,"authIssuers"),ce.registerAuthenticationProvider(v,b,k,be)}},Du={registerCommand(v,b,k){return me.registerCommand(!0,v,b,k,void 0,S)},registerTextEditorCommand(v,b,k){return me.registerCommand(!0,v,(...be)=>{const Ke=$t.getActiveTextEditor();if(!Ke){p.warn("Cannot execute "+v+" because there is no active text editor.");return}return Ke.edit(zt=>{b.apply(k,[Ke,zt,...be])}).then(zt=>{zt||p.warn("Edits from command "+v+" were not applied.")},zt=>{p.warn("An error occurred while running command "+v,zt)})},void 0,void 0,S)},registerDiffInformationCommand:(v,b,k)=>(L(S,"diffCommand"),me.registerCommand(!0,v,async(...be)=>{const Ke=he.activeEditor(!0);if(!Ke){p.warn("Cannot execute "+v+" because there is no active text editor.");return}const zt=await $t.getDiffInformation(Ke.id);b.apply(k,[zt,...be])},void 0,void 0,S)),executeCommand(v,...b){return me.executeCommand(v,...b)},getCommands(v=!1){return me.getCommands(v)}},ws={get machineId(){return t.telemetryInfo.machineId},get sessionId(){return t.telemetryInfo.sessionId},get language(){return t.environment.appLanguage},get appName(){return t.environment.appName},get appRoot(){return t.environment.appRoot?.fsPath??""},get appHost(){return t.environment.appHost},get uriScheme(){return t.environment.appUriScheme},get clipboard(){return Wi.value},get shell(){return Ie.getDefaultShell(!1)},get onDidChangeShell(){return _(Ie.onDidChangeShell)},get isTelemetryEnabled(){return o.getTelemetryConfiguration()},get onDidChangeTelemetryEnabled(){return _(o.onDidChangeTelemetryEnabled)},get telemetryConfiguration(){return L(S,"telemetry"),o.getTelemetryDetails()},get onDidChangeTelemetryConfiguration(){return L(S,"telemetry"),_(o.onDidChangeTelemetryConfiguration)},get isNewAppInstall(){return nE(t.telemetryInfo.firstSessionDate)},createTelemetryLogger(v,b){return sE.validateSender(v),o.instantiateLogger(S,v,b)},openExternal(v,b){return x.openUri(v,{allowTunneling:!!t.remote.authority,allowContributedOpeners:b?.allowContributedOpeners})},async asExternalUri(v){if(v.scheme===t.environment.appUriScheme)return E.createAppUri(v);try{return await x.asExternalUri(v,{allowTunneling:!!t.remote.authority})}catch(b){if(Ug(v,V.http)||Ug(v,V.https))return v;throw b}},get remoteName(){return Wg(t.remote.authority)},get remoteAuthority(){return L(S,"resolvers"),t.remote.authority},get uiKind(){return t.uiKind},get logLevel(){return p.getLevel()},get onDidChangeLogLevel(){return _(p.onDidChangeLogLevel)},get appQuality(){return L(S,"resolvers"),t.quality},get appCommit(){return L(S,"resolvers"),t.commit}};t.environment.extensionTestsLocationURI||Object.freeze(ws);const nn={createTestController(v,b,k){return vs.createTestController(S,v,b,k)},createTestObserver(){return L(S,"testObserver"),vs.createTestObserver()},runTests(v){return L(S,"testObserver"),vs.runTests(v)},registerTestFollowupProvider(v){return L(S,"testObserver"),vs.registerTestFollowupProvider(v)},get onDidChangeTestResults(){return L(S,"testObserver"),_(vs.onResultsChanged)},get testResults(){return L(S,"testObserver"),vs.results}},Pu=t.remote.isRemote?Wn.Workspace:Wn.UI,YC={getExtension(v,b){Ge(S,"extensionsAny")||(b=!1);const k=ve.mine.getExtensionDescription(v);if(k)return new Wl(s,S.identifier,k,Pu,!1);if(b){const be=ve.all.getExtensionDescription(v);if(be)return new Wl(s,S.identifier,be,Pu,!0)}},get all(){const v=[];for(const b of ve.mine.getAllExtensionDescriptions())v.push(new Wl(s,S.identifier,b,Pu,!1));return v},get allAcrossExtensionHosts(){L(S,"extensionsAny");const v=new vn(ve.mine.getAllExtensionDescriptions().map(k=>k.identifier)),b=[];for(const k of ve.all.getAllExtensionDescriptions()){const be=!v.has(k.identifier);b.push(new Wl(s,S.identifier,k,Pu,be))}return b},get onDidChange(){return Ge(S,"extensionsAny")?_(lt.any(ve.mine.onDidChange,ve.all.onDidChange)):_(ve.mine.onDidChange)}},QC={createDiagnosticCollection(v){return Ti.createDiagnosticCollection(S.identifier,v)},get onDidChangeDiagnostics(){return _(Ti.onDidChangeDiagnostics)},getDiagnostics:v=>Ti.getDiagnostics(v),getLanguages(){return _i.getLanguages()},setTextDocumentLanguage(v,b){return _i.changeLanguage(v.uri,b)},match(v,b){const k=Tv.from(v);let be;return ek(k)&&(be=Ee.notebookDocuments.find(Ke=>Ke.apiNotebook.getCells().find(zt=>zt.document===b))?.apiNotebook),KS(k,b.uri,b.languageId,!0,be?.uri,be?.notebookType)},registerCodeActionsProvider(v,b,k){return X.registerCodeActionProvider(S,pe(v),b,k)},registerDocumentPasteEditProvider(v,b,k){return X.registerDocumentPasteEditProvider(S,pe(v),b,k)},registerCodeLensProvider(v,b){return X.registerCodeLensProvider(S,pe(v),b)},registerDefinitionProvider(v,b){return X.registerDefinitionProvider(S,pe(v),b)},registerDeclarationProvider(v,b){return X.registerDeclarationProvider(S,pe(v),b)},registerImplementationProvider(v,b){return X.registerImplementationProvider(S,pe(v),b)},registerTypeDefinitionProvider(v,b){return X.registerTypeDefinitionProvider(S,pe(v),b)},registerHoverProvider(v,b){return X.registerHoverProvider(S,pe(v),b,S.identifier)},registerEvaluatableExpressionProvider(v,b){return X.registerEvaluatableExpressionProvider(S,pe(v),b,S.identifier)},registerInlineValuesProvider(v,b){return X.registerInlineValuesProvider(S,pe(v),b,S.identifier)},registerDocumentHighlightProvider(v,b){return X.registerDocumentHighlightProvider(S,pe(v),b)},registerMultiDocumentHighlightProvider(v,b){return X.registerMultiDocumentHighlightProvider(S,pe(v),b)},registerLinkedEditingRangeProvider(v,b){return X.registerLinkedEditingRangeProvider(S,pe(v),b)},registerReferenceProvider(v,b){return X.registerReferenceProvider(S,pe(v),b)},registerRenameProvider(v,b){return X.registerRenameProvider(S,pe(v),b)},registerNewSymbolNamesProvider(v,b){return L(S,"newSymbolNamesProvider"),X.registerNewSymbolNamesProvider(S,pe(v),b)},registerDocumentSymbolProvider(v,b,k){return X.registerDocumentSymbolProvider(S,pe(v),b,k)},registerWorkspaceSymbolProvider(v){return X.registerWorkspaceSymbolProvider(S,v)},registerDocumentFormattingEditProvider(v,b){return X.registerDocumentFormattingEditProvider(S,pe(v),b)},registerDocumentRangeFormattingEditProvider(v,b){return X.registerDocumentRangeFormattingEditProvider(S,pe(v),b)},registerOnTypeFormattingEditProvider(v,b,k,...be){return X.registerOnTypeFormattingEditProvider(S,pe(v),b,[k].concat(be))},registerDocumentSemanticTokensProvider(v,b,k){return X.registerDocumentSemanticTokensProvider(S,pe(v),b,k)},registerDocumentRangeSemanticTokensProvider(v,b,k){return X.registerDocumentRangeSemanticTokensProvider(S,pe(v),b,k)},registerSignatureHelpProvider(v,b,k,...be){return typeof k=="object"?X.registerSignatureHelpProvider(S,pe(v),b,k):X.registerSignatureHelpProvider(S,pe(v),b,typeof k>"u"?[]:[k,...be])},registerCompletionItemProvider(v,b,...k){return X.registerCompletionItemProvider(S,pe(v),b,k)},registerInlineCompletionItemProvider(v,b,k){return b.handleDidShowCompletionItem&&L(S,"inlineCompletionsAdditions"),b.handleDidPartiallyAcceptCompletionItem&&L(S,"inlineCompletionsAdditions"),k&&L(S,"inlineCompletionsAdditions"),X.registerInlineCompletionsProvider(S,pe(v),b,k)},registerInlineEditProvider(v,b){return L(S,"inlineEdit"),X.registerInlineEditProvider(S,pe(v),b)},registerDocumentLinkProvider(v,b){return X.registerDocumentLinkProvider(S,pe(v),b)},registerColorProvider(v,b){return X.registerColorProvider(S,pe(v),b)},registerFoldingRangeProvider(v,b){return X.registerFoldingRangeProvider(S,pe(v),b)},registerSelectionRangeProvider(v,b){return X.registerSelectionRangeProvider(S,v,b)},registerCallHierarchyProvider(v,b){return X.registerCallHierarchyProvider(S,v,b)},registerTypeHierarchyProvider(v,b){return X.registerTypeHierarchyProvider(S,v,b)},setLanguageConfiguration:(v,b)=>X.setLanguageConfiguration(S,v,b),getTokenInformationAtPosition(v,b){return L(S,"tokenInformation"),_i.tokenAtPosition(v,b)},registerInlayHintsProvider(v,b){return X.registerInlayHintsProvider(S,v,b)},createLanguageStatusItem(v,b){return _i.createLanguageStatusItem(S,v,b)},registerDocumentDropEditProvider(v,b,k){return X.registerDocumentOnDropEditProvider(S,v,b,k)}},XC={get activeTextEditor(){return $t.getActiveTextEditor()},get visibleTextEditors(){return $t.getVisibleTextEditors()},get activeTerminal(){return Ie.activeTerminal},get terminals(){return Ie.terminals},async showTextDocument(v,b,k){y.isUri(v)&&v.scheme===V.vscodeRemote&&!v.authority&&w.report("workspace.showTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority.");const be=await(y.isUri(v)?Promise.resolve(Zb.openTextDocument(v)):Promise.resolve(v));return $t.showTextDocument(be,b,k)},createTextEditorDecorationType(v){return $t.createTextEditorDecorationType(S,v)},onDidChangeActiveTextEditor(v,b,k){return _($t.onDidChangeActiveTextEditor)(v,b,k)},onDidChangeVisibleTextEditors(v,b,k){return _($t.onDidChangeVisibleTextEditors)(v,b,k)},onDidChangeTextEditorSelection(v,b,k){return _($t.onDidChangeTextEditorSelection)(v,b,k)},onDidChangeTextEditorOptions(v,b,k){return _($t.onDidChangeTextEditorOptions)(v,b,k)},onDidChangeTextEditorVisibleRanges(v,b,k){return _($t.onDidChangeTextEditorVisibleRanges)(v,b,k)},onDidChangeTextEditorViewColumn(v,b,k){return _($t.onDidChangeTextEditorViewColumn)(v,b,k)},onDidChangeTextEditorDiffInformation(v,b,k){return L(S,"textEditorDiffInformation"),_($t.onDidChangeTextEditorDiffInformation)(v,b,k)},onDidCloseTerminal(v,b,k){return _(Ie.onDidCloseTerminal)(v,b,k)},onDidOpenTerminal(v,b,k){return _(Ie.onDidOpenTerminal)(v,b,k)},onDidChangeActiveTerminal(v,b,k){return _(Ie.onDidChangeActiveTerminal)(v,b,k)},onDidChangeTerminalDimensions(v,b,k){return L(S,"terminalDimensions"),_(Ie.onDidChangeTerminalDimensions)(v,b,k)},onDidChangeTerminalState(v,b,k){return _(Ie.onDidChangeTerminalState)(v,b,k)},onDidWriteTerminalData(v,b,k){return L(S,"terminalDataWriteEvent"),_(Ie.onDidWriteTerminalData)(v,b,k)},onDidExecuteTerminalCommand(v,b,k){return L(S,"terminalExecuteCommandEvent"),_(Ie.onDidExecuteTerminalCommand)(v,b,k)},onDidChangeTerminalShellIntegration(v,b,k){return _(kt.onDidChangeTerminalShellIntegration)(v,b,k)},onDidStartTerminalShellExecution(v,b,k){return _(kt.onDidStartTerminalShellExecution)(v,b,k)},onDidEndTerminalShellExecution(v,b,k){return _(kt.onDidEndTerminalShellExecution)(v,b,k)},get state(){return x.getState()},onDidChangeWindowState(v,b,k){return _(x.onDidChangeWindowState)(v,b,k)},showInformationMessage(v,...b){return ct.showMessage(S,mt.Info,v,b[0],b.slice(1))},showWarningMessage(v,...b){return ct.showMessage(S,mt.Warning,v,b[0],b.slice(1))},showErrorMessage(v,...b){return ct.showMessage(S,mt.Error,v,b[0],b.slice(1))},showQuickPick(v,b,k){return br.showQuickPick(S,v,b,k)},showWorkspaceFolderPick(v){return br.showWorkspaceFolderPick(v)},showInputBox(v,b){return br.showInput(v,b)},showOpenDialog(v){return Mt.showOpenDialog(v)},showSaveDialog(v){return Mt.showSaveDialog(v)},createStatusBarItem(v,b,k){let be,Ke,zt;return typeof v=="string"?(be=v,Ke=b,zt=k):(Ke=v,zt=b),Ct.createStatusBarEntry(S,be,Ke,zt)},setStatusBarMessage(v,b){return Ct.setStatusBarMessage(v,b)},withScmProgress(v){return w.report("window.withScmProgress",S,"Use 'withProgress' instead."),W.withProgress(S,{location:js.SourceControl},(b,k)=>v({report(be){}}))},withProgress(v,b){return W.withProgress(S,v,b)},createOutputChannel(v,b){return Z.createOutputChannel(v,b,S)},createWebviewPanel(v,b,k,be){return ot.createWebviewPanel(S,v,b,k,be)},createWebviewTextEditorInset(v,b,k,be){return L(S,"editorInsets"),$u.createWebviewEditorInset(v,b,k,be,S)},createTerminal(v,b,k){return typeof v=="object"?"pty"in v?Ie.createExtensionTerminal(v):Ie.createTerminalFromOptions(v):Ie.createTerminal(v,b,k)},registerTerminalLinkProvider(v){return Ie.registerLinkProvider(v)},registerTerminalProfileProvider(v,b){return Ie.registerProfileProvider(S,v,b)},registerTerminalCompletionProvider(v,...b){return L(S,"terminalCompletionProvider"),Ie.registerTerminalCompletionProvider(S,v,...b)},registerTerminalQuickFixProvider(v,b){return L(S,"terminalQuickFixProvider"),Ie.registerTerminalQuickFixProvider(v,S.identifier.value,b)},registerTreeDataProvider(v,b){return tn.registerTreeDataProvider(v,b,S)},createTreeView(v,b){return tn.createTreeView(v,b,S)},registerWebviewPanelSerializer:(v,b)=>ot.registerWebviewPanelSerializer(S,v,b),registerCustomEditorProvider:(v,b,k={})=>Kt.registerCustomEditorProvider(S,v,b,k),registerFileDecorationProvider(v){return q.registerFileDecorationProvider(v,S)},registerUriHandler(v){return E.registerUriHandler(S,v)},createQuickPick(){return br.createQuickPick(S)},createInputBox(){return br.createInputBox(S)},get activeColorTheme(){return sn.activeColorTheme},onDidChangeActiveColorTheme(v,b,k){return _(sn.onDidChangeActiveColorTheme)(v,b,k)},registerWebviewViewProvider(v,b,k){return rg.registerWebviewViewProvider(S,v,b,k?.webviewOptions)},get activeNotebookEditor(){return Ee.activeNotebookEditor},onDidChangeActiveNotebookEditor(v,b,k){return _(Ee.onDidChangeActiveNotebookEditor)(v,b,k)},get visibleNotebookEditors(){return Ee.visibleNotebookEditors},get onDidChangeVisibleNotebookEditors(){return _(Ee.onDidChangeVisibleNotebookEditors)},onDidChangeNotebookEditorSelection(v,b,k){return _(ht.onDidChangeNotebookEditorSelection)(v,b,k)},onDidChangeNotebookEditorVisibleRanges(v,b,k){return _(ht.onDidChangeNotebookEditorVisibleRanges)(v,b,k)},showNotebookDocument(v,b){return Ee.showNotebookDocument(v,b)},registerExternalUriOpener(v,b,k){return L(S,"externalUriOpener"),go.registerExternalUriOpener(S.identifier,v,b,k)},registerProfileContentHandler(v,b){return L(S,"profileContentHandlers"),Ya.registerProfileContentHandler(S,v,b)},registerQuickDiffProvider(v,b,k,be,Ke){return L(S,"quickDiffProvider"),Ga.registerQuickDiffProvider(S,pe(v),b,k,be,Ke)},get tabGroups(){return A.tabGroups},registerShareProvider(v,b){return L(S,"shareProvider"),Iu.registerShareProvider(pe(v),b)},get nativeHandle(){return L(S,"nativeWindowHandle"),x.nativeHandle},createChatStatusItem:v=>(L(S,"chatStatusItem"),ri.createChatStatusItem(S,v))},Zb={get rootPath(){return w.report("workspace.rootPath",S,"Please use 'workspace.workspaceFolders' instead. More details: https://aka.ms/vscode-eliminating-rootpath"),n.getPath()},set rootPath(v){throw new on("rootPath")},getWorkspaceFolder(v){return n.getWorkspaceFolder(v)},get workspaceFolders(){return n.getWorkspaceFolders()},get name(){return n.name},set name(v){throw new on("name")},get workspaceFile(){return n.workspaceFile},set workspaceFile(v){throw new on("workspaceFile")},updateWorkspaceFolders:(v,b,...k)=>n.updateWorkspaceFolders(S,v,b||0,...k),onDidChangeWorkspaceFolders:function(v,b,k){return _(n.onDidChangeWorkspace)(v,b,k)},asRelativePath:(v,b)=>n.getRelativePath(v,b),findFiles:(v,b,k,be)=>n.findFiles(v,b,k,S.identifier,be),findFiles2:(v,b,k)=>(L(S,"findFiles2"),n.findFiles2(v,b,S.identifier,k)),findTextInFiles:(v,b,k,be)=>{L(S,"findTextInFiles");let Ke,zt;return typeof b=="object"?(Ke=b,zt=k):(Ke={},zt=b,be=k),n.findTextInFiles(v,Ke||{},zt,S.identifier,be)},findTextInFiles2:(v,b,k)=>(L(S,"findTextInFiles2"),L(S,"textSearchProvider2"),n.findTextInFiles2(v,b,S.identifier,k)),save:v=>n.save(v),saveAs:v=>n.saveAs(v),saveAll:v=>n.saveAll(v),applyEdit(v,b){return qt.applyWorkspaceEdit(v,S,b)},createFileSystemWatcher:(v,b,k,be)=>{const Ke={ignoreCreateEvents:!!b,ignoreChangeEvents:!!k,ignoreDeleteEvents:!!be};return Xt.createFileSystemWatcher(n,Te,S,v,Ke)},get textDocuments(){return se.getAllDocumentData().map(v=>v.document)},set textDocuments(v){throw new on("textDocuments")},openTextDocument(v,b){let k;if(b=b??v,typeof v=="string")k=Promise.resolve(y.file(v));else if(y.isUri(v))k=Promise.resolve(v);else if(!b||typeof b=="object")k=se.createDocumentData(b);else throw new Error("illegal argument - uriOrFileNameOrOptions");return k.then(be=>(p.trace(`openTextDocument from ${S.identifier}`),be.scheme===V.vscodeRemote&&!be.authority&&w.report("workspace.openTextDocument",S,"A URI of 'vscode-remote' scheme requires an authority."),se.ensureDocumentData(be,b).then(Ke=>Ke.document)))},onDidOpenTextDocument:(v,b,k)=>_(se.onDidAddDocument)(v,b,k),onDidCloseTextDocument:(v,b,k)=>_(se.onDidRemoveDocument)(v,b,k),onDidChangeTextDocument:(v,b,k)=>_(se.onDidChangeDocument)(v,b,k),onDidSaveTextDocument:(v,b,k)=>_(se.onDidSaveDocument)(v,b,k),onWillSaveTextDocument:(v,b,k)=>_(Xe.getOnWillSaveTextDocumentEvent(S))(v,b,k),get notebookDocuments(){return Ee.notebookDocuments.map(v=>v.apiNotebook)},async openNotebookDocument(v,b){let k;if(y.isUri(v))k=v,await Ee.openNotebookDocument(v);else if(typeof v=="string")k=y.revive(await Ee.createNotebookDocument({viewType:v,content:b}));else throw new Error("Invalid arguments");return Ee.getNotebookDocument(k).apiNotebook},onDidSaveNotebookDocument(v,b,k){return _(Rt.onDidSaveNotebookDocument)(v,b,k)},onDidChangeNotebookDocument(v,b,k){return _(Rt.onDidChangeNotebookDocument)(v,b,k)},onWillSaveNotebookDocument(v,b,k){return _(li.getOnWillSaveNotebookDocumentEvent(S))(v,b,k)},get onDidOpenNotebookDocument(){return _(Ee.onDidOpenNotebookDocument)},get onDidCloseNotebookDocument(){return _(Ee.onDidCloseNotebookDocument)},registerNotebookSerializer(v,b,k,be){return Ee.registerNotebookSerializer(S,v,b,k,Ge(S,"notebookLiveShare")?be:void 0)},onDidChangeConfiguration:(v,b,k)=>_(Te.onDidChangeConfiguration)(v,b,k),getConfiguration(v,b){return b=arguments.length===1?void 0:b,Te.getConfiguration(v,b,S)},registerTextDocumentContentProvider(v,b){return De.registerTextDocumentContentProvider(v,b)},registerTaskProvider:(v,b)=>(w.report("window.registerTaskProvider",S,"Use the corresponding function on the 'tasks' namespace instead"),G.registerTaskProvider(S,v,b)),registerFileSystemProvider(v,b,k){return vg(ms.registerFileSystemProvider(S,v,b,k),r.addFileSystemProvider(v,b,k))},get fs(){return r.value},registerFileSearchProvider:(v,b)=>(L(S,"fileSearchProvider"),j.registerFileSearchProviderOld(v,b)),registerTextSearchProvider:(v,b)=>(L(S,"textSearchProvider"),j.registerTextSearchProviderOld(v,b)),registerAITextSearchProvider:(v,b)=>(L(S,"aiTextSearchProvider"),L(S,"textSearchProvider2"),j.registerAITextSearchProvider(v,b)),registerFileSearchProvider2:(v,b)=>(L(S,"fileSearchProvider2"),j.registerFileSearchProvider(v,b)),registerTextSearchProvider2:(v,b)=>(L(S,"textSearchProvider2"),j.registerTextSearchProvider(v,b)),registerRemoteAuthorityResolver:(v,b)=>(L(S,"resolvers"),s.registerRemoteAuthorityResolver(v,b)),registerResourceLabelFormatter:v=>(L(S,"resolvers"),Za.$registerResourceLabelFormatter(v)),getRemoteExecServer:v=>(L(S,"resolvers"),s.getRemoteExecServer(v)),onDidCreateFiles:(v,b,k)=>_(Xt.onDidCreateFile)(v,b,k),onDidDeleteFiles:(v,b,k)=>_(Xt.onDidDeleteFile)(v,b,k),onDidRenameFiles:(v,b,k)=>_(Xt.onDidRenameFile)(v,b,k),onWillCreateFiles:(v,b,k)=>_(Xt.getOnWillCreateFileEvent(S))(v,b,k),onWillDeleteFiles:(v,b,k)=>_(Xt.getOnWillDeleteFileEvent(S))(v,b,k),onWillRenameFiles:(v,b,k)=>_(Xt.getOnWillRenameFileEvent(S))(v,b,k),openTunnel:v=>(L(S,"tunnels"),m.openTunnel(S,v).then(b=>{if(!b)throw new Error("cannot open tunnel");return b})),get tunnels(){return L(S,"tunnels"),m.getTunnels()},onDidChangeTunnels:(v,b,k)=>(L(S,"tunnels"),_(m.onDidChangeTunnels)(v,b,k)),registerPortAttributesProvider:(v,b)=>(L(S,"portsAttributes"),m.registerPortsAttributesProvider(v,b)),registerTunnelProvider:(v,b)=>(L(S,"tunnelFactory"),m.registerTunnelProvider(v,b)),registerTimelineProvider:(v,b)=>(L(S,"timeline"),yi.registerTimelineProvider(v,b,S.identifier,me.converter)),get isTrusted(){return n.trusted},requestWorkspaceTrust:v=>(L(S,"workspaceTrust"),n.requestWorkspaceTrust(v)),onDidGrantWorkspaceTrust:(v,b,k)=>_(n.onDidGrantWorkspaceTrust)(v,b,k),registerEditSessionIdentityProvider:(v,b)=>(L(S,"editSessionIdentityProvider"),n.registerEditSessionIdentityProvider(v,b)),onWillCreateEditSessionIdentity:(v,b,k)=>(L(S,"editSessionIdentityProvider"),_(n.getOnWillCreateEditSessionIdentityEvent(S))(v,b,k)),registerCanonicalUriProvider:(v,b)=>(L(S,"canonicalUriProvider"),n.registerCanonicalUriProvider(v,b)),getCanonicalUri:(v,b,k)=>(L(S,"canonicalUriProvider"),n.provideCanonicalUri(v,b,k)),decode(v,b){return n.decode(v,b)},encode(v,b){return n.encode(v,b)}},KC={get inputBox(){return w.report("scm.inputBox",S,"Use 'SourceControl.inputBox' instead"),rn.getLastInputBox(S)},createSourceControl(v,b,k){return rn.createSourceControl(S,v,b,k)}},eI={createCommentController(v,b){return Ja.createCommentController(S,v,b)}},tI={get activeDebugSession(){return H.activeDebugSession},get activeDebugConsole(){return H.activeDebugConsole},get breakpoints(){return H.breakpoints},get activeStackItem(){return H.activeStackItem},registerDebugVisualizationProvider(v,b){return L(S,"debugVisualization"),H.registerDebugVisualizationProvider(S,v,b)},registerDebugVisualizationTreeProvider(v,b){return L(S,"debugVisualization"),H.registerDebugVisualizationTree(S,v,b)},onDidStartDebugSession(v,b,k){return _(H.onDidStartDebugSession)(v,b,k)},onDidTerminateDebugSession(v,b,k){return _(H.onDidTerminateDebugSession)(v,b,k)},onDidChangeActiveDebugSession(v,b,k){return _(H.onDidChangeActiveDebugSession)(v,b,k)},onDidReceiveDebugSessionCustomEvent(v,b,k){return _(H.onDidReceiveDebugSessionCustomEvent)(v,b,k)},onDidChangeBreakpoints(v,b,k){return _(H.onDidChangeBreakpoints)(v,b,k)},onDidChangeActiveStackItem(v,b,k){return _(H.onDidChangeActiveStackItem)(v,b,k)},registerDebugConfigurationProvider(v,b,k){return H.registerDebugConfigurationProvider(v,b,k||mp.Initial)},registerDebugAdapterDescriptorFactory(v,b){return H.registerDebugAdapterDescriptorFactory(S,v,b)},registerDebugAdapterTrackerFactory(v,b){return H.registerDebugAdapterTrackerFactory(v,b)},startDebugging(v,b,k){return!k||typeof k=="object"&&"configuration"in k?H.startDebugging(v,b,{parentSession:k}):H.startDebugging(v,b,k||{})},stopDebugging(v){return H.stopDebugging(v)},addBreakpoints(v){return H.addBreakpoints(v)},removeBreakpoints(v){return H.removeBreakpoints(v)},asDebugSourceUri(v,b){return H.asDebugSourceUri(v,b)}},iI={registerTaskProvider:(v,b)=>G.registerTaskProvider(S,v,b),fetchTasks:v=>G.fetchTasks(v),executeTask:v=>G.executeTask(S,v),get taskExecutions(){return G.taskExecutions},onDidStartTask:(v,b,k)=>_(G.onDidStartTask)(v,b,k),onDidEndTask:(v,b,k)=>_(G.onDidEndTask)(v,b,k),onDidStartTaskProcess:(v,b,k)=>_(G.onDidStartTaskProcess)(v,b,k),onDidEndTaskProcess:(v,b,k)=>_(G.onDidEndTaskProcess)(v,b,k),onDidStartTaskProblemMatchers:(v,b,k)=>(L(S,"taskProblemMatcherStatus"),_(G.onDidStartTaskProblemMatchers)(v,b,k)),onDidEndTaskProblemMatchers:(v,b,k)=>(L(S,"taskProblemMatcherStatus"),_(G.onDidEndTaskProblemMatchers)(v,b,k))},rI={createNotebookController(v,b,k,be,Ke){return Lt.createNotebookController(S,v,b,k,be,Ge(S,"notebookMessaging")?Ke:void 0)},registerNotebookCellStatusBarItemProvider:(v,b)=>Ee.registerNotebookCellStatusBarItemProvider(S,v,b),createRendererMessaging(v){return ii.createRendererMessaging(S,v)},createNotebookControllerDetectionTask(v){return L(S,"notebookKernelSource"),Lt.createNotebookControllerDetectionTask(S,v)},registerKernelSourceActionProvider(v,b){return L(S,"notebookKernelSource"),Lt.registerKernelSourceActionProvider(S,v,b)}},sI={t(...v){if(typeof v[0]=="string"){const b=v.shift(),k=!v||typeof v[0]!="object"?v:v[0];return K.getMessage(S.identifier.value,{message:b,args:k})}return K.getMessage(S.identifier.value,v[0])},get bundle(){return K.getBundle(S.identifier.value)},get uri(){return K.getBundleUri(S.identifier.value)}},nI={transferActiveChat(v){return L(S,"interactive"),R.transferActiveChat(v)}},oI={getRelatedInformation(v,b){return L(S,"aiRelatedInformation"),M.getRelatedInformation(S,v,b)},registerRelatedInformationProvider(v,b){return L(S,"aiRelatedInformation"),M.registerRelatedInformationProvider(S,v,b)},registerEmbeddingVectorProvider(v,b){return L(S,"aiRelatedInformation"),le.registerEmbeddingVectorProvider(S,v,b)},registerSettingsSearchProvider(v){return L(S,"aiSettingsSearch"),xe.registerSettingsSearchProvider(S,v)}},aI={registerMappedEditsProvider(v,b){return L(S,"mappedEditsProvider"),{dispose(){}}},registerMappedEditsProvider2(v){return L(S,"mappedEditsProvider"),Cu.registerMappedEditsProvider(S,v)},createChatParticipant(v,b){return R.createChatAgent(S,v,b)},createDynamicChatParticipant(v,b,k){return L(S,"chatParticipantPrivate"),R.createDynamicChatAgent(S,v,b,k)},registerChatParticipantDetectionProvider(v){return L(S,"chatParticipantPrivate"),R.registerChatParticipantDetectionProvider(S,v)},registerRelatedFilesProvider(v,b){return L(S,"chatEditing"),R.registerRelatedFilesProvider(S,v,b)},onDidDisposeChatSession:(v,b,k)=>(L(S,"chatParticipantPrivate"),_(R.onDidDisposeChatSession)(v,b,k))},cI={selectChatModels:v=>U.selectLanguageModels(S,v??{}),onDidChangeChatModels:(v,b,k)=>U.onDidChangeProviders(v,b,k),registerChatModelProvider:(v,b,k)=>(L(S,"chatProvider"),U.registerLanguageModel(S,v,b,k)),get embeddingModels(){return L(S,"embeddings"),Nt.embeddingsModels},onDidChangeEmbeddingModels:(v,b,k)=>(L(S,"embeddings"),Nt.onDidChange(v,b,k)),registerEmbeddingsProvider(v,b){return L(S,"embeddings"),Nt.registerEmbeddingsProvider(S,v,b)},async computeEmbeddings(v,b,k){return L(S,"embeddings"),Nt.computeEmbeddings(v,b,k)},registerTool(v,b){return I.registerTool(S,v,b)},invokeTool(v,b,k){return I.invokeTool(S,v,b,k)},get tools(){return I.getTools(S)},fileIsIgnored(v,b){return U.fileIsIgnored(S,v,b)},registerIgnoredFileProvider(v){return U.registerIgnoredFileProvider(S,v)},registerMcpServerDefinitionProvider(v,b){return z.registerMcpConfigurationProvider(S,v,b)}},lI={registerSpeechProvider(v,b){return L(S,"speech"),_e.registerProvider(S.identifier,v,b)}};return{version:t.version,ai:oI,authentication:Ht,commands:Du,comments:eI,chat:aI,debug:tI,env:ws,extensions:YC,interactive:nI,l10n:sI,languages:QC,lm:cI,notebooks:rI,scm:KC,speech:lI,tasks:iI,tests:nn,window:XC,workspace:Zb,Breakpoint:aa,TerminalOutputAnchor:l1,ChatResultFeedbackKind:dl,ChatVariableLevel:tv,ChatCompletionItem:XR,ChatReferenceDiagnostic:G8,CallHierarchyIncomingCall:E8,CallHierarchyItem:d1,CallHierarchyOutgoingCall:S8,CancellationError:Ri,CancellationTokenSource:at,CandidatePortSource:Ag,CodeAction:qc,CodeActionKind:nt,CodeActionTriggerKind:Vc,CodeLens:dd,Color:ia,ColorInformation:wd,ColorPresentation:bd,ColorThemeKind:Hs,CommentMode:F1,CommentState:O1,CommentThreadCollapsibleState:sl,CommentThreadState:nl,CommentThreadApplicability:ol,CommentThreadFocus:al,CompletionItem:gd,CompletionItemKind:de,CompletionItemTag:Jc,CompletionList:Yo,CompletionTriggerKind:Zo,ConfigurationTarget:na,CustomExecution:P1,DebugAdapterExecutable:$d,DebugAdapterInlineImplementation:tl,DebugAdapterNamedPipeServer:Cd,DebugAdapterServer:el,DebugConfigurationProviderTriggerKind:mp,DebugConsoleMode:Rd,DebugVisualization:VR,DecorationRangeBehavior:jn,Diagnostic:ad,DiagnosticRelatedInformation:Bc,DiagnosticSeverity:Qt,DiagnosticTag:On,Disposable:Pe,DocumentHighlight:ud,DocumentHighlightKind:Hc,MultiDocumentHighlight:hd,DocumentLink:vd,DocumentSymbol:Wc,EndOfLine:ar,EnvironmentVariableMutatorType:Go,EvaluatableExpression:Id,InlineValueText:Dd,InlineValueVariableLookup:Pd,InlineValueEvaluatableExpression:Ad,InlineCompletionTriggerKind:il,EventEmitter:P,ExtensionKind:Wn,ExtensionMode:ha,ExternalUriOpenerPriority:V1,FileChangeType:ca,FileDecoration:B1,FileDecoration2:B1,FileSystemError:Dt,FileType:Cn,FilePermission:Oo,FoldingRange:M1,FoldingRangeKind:Kr,FunctionBreakpoint:_n,InlineCompletionItem:w1,InlineCompletionList:b1,Hover:cd,VerboseHover:ld,HoverVerbosityAction:h1,IndentAction:Rw,Location:Bi,MarkdownString:Ci,OverviewRulerLane:W0,ParameterInformation:f1,PortAutoForwardAction:G1,Position:Ae,ProcessExecution:ra,ProgressLocation:js,QuickInputButtonLocation:j1,QuickInputButtons:cl,Range:ke,RelativePattern:oa,Selection:Xr,SelectionRange:Gc,SemanticTokens:la,SemanticTokensBuilder:WR,SemanticTokensEdit:P8,SemanticTokensEdits:Td,SemanticTokensLegend:U1,ShellExecution:Bn,ShellQuoting:D1,SignatureHelp:g1,SignatureHelpTriggerKind:m1,SignatureInformation:p1,SnippetString:Fn,SourceBreakpoint:zn,StandardTokenType:zs,StatusBarAlignment:Os,SymbolInformation:_c,SymbolKind:Ze,SymbolTag:zc,Task:yd,TaskEventKind:C1,TaskGroup:Xc,TaskPanelKind:I1,TaskRevealKind:$1,TaskScope:Us,TerminalLink:RR,TerminalQuickFixTerminalCommand:NR,TerminalQuickFixOpener:LR,TerminalLocation:S1,TerminalProfile:MR,TerminalExitReason:x1,TerminalShellExecutionCommandLineConfidence:Qc,TerminalCompletionItem:FR,TerminalCompletionItemKind:k1,TerminalCompletionList:OR,TerminalShellType:E1,TextDocumentSaveReason:Xo,TextEdit:Fs,SnippetTextEdit:u1,TextEditorCursorStyle:fr,TextEditorChangeKind:ea,TextEditorLineNumbersStyle:cr,TextEditorRevealType:md,TextEditorSelectionChangeKind:Ko,SyntaxTokenType:ta,TextDocumentChangeReason:Yc,ThemeColor:Kc,ThemeIcon:ci,TreeItem:xd,TreeItemCheckboxState:Tr,TreeItemCollapsibleState:Hn,TypeHierarchyItem:J1,UIKind:ic,Uri:y,ViewColumn:Zc,WorkspaceEdit:Mn,DocumentPasteTriggerKind:R1,DocumentDropEdit:T1,DocumentDropOrPasteEditKind:Bs,DocumentPasteEdit:BR,InlayHint:pd,InlayHintLabelPart:fd,InlayHintKind:v1,RemoteAuthorityResolverError:qo,ResolvedAuthority:AR,ManagedResolvedAuthority:nd,SourceControlInputBoxValidationType:y1,ExtensionRuntime:jd,TimelineItem:_1,NotebookRange:lr,NotebookCellKind:Vn,NotebookCellExecutionState:H1,NotebookCellData:Nd,NotebookData:A8,NotebookRendererScript:R8,NotebookCellStatusBarAlignment:Fd,NotebookEditorRevealType:Od,NotebookCellOutput:Md,NotebookCellOutputItem:T8,CellErrorStackFrame:qR,NotebookCellStatusBarItem:GR,NotebookControllerAffinity:z1,NotebookControllerAffinity2:Ud,NotebookEdit:od,NotebookKernelSourceAction:JR,NotebookVariablesRequestKind:ul,PortAttributes:YR,LinkedEditingRanges:ZR,TestResultState:W1,TestRunRequest:Bd,TestMessage:Hd,TestMessageStackFrame:QR,TestTag:hl,TestRunProfileKind:da,TextSearchCompleteMessageType:jf,DataTransfer:sa,DataTransferItem:Ed,TestCoverageCount:zd,FileCoverage:Wd,StatementCoverage:N8,BranchCoverage:M8,DeclarationCoverage:F8,WorkspaceTrustState:q1,LanguageStatusSeverity:Jo,QuickPickItemKind:ll,InputBoxValidationSeverity:ua,TabInputText:Z1,TabInputTextDiff:Vd,TabInputTextMerge:O8,TabInputCustom:Y1,TabInputNotebook:Q1,TabInputNotebookDiff:X1,TabInputWebview:U8,TabInputTerminal:j8,TabInputInteractiveWindow:B8,TabInputChat:H8,TabInputTextMultiDiff:z8,TelemetryTrustedValue:t1,LogLevel:$e,EditSessionIdentityMatch:Lw,InteractiveSessionVoteDirection:K1,ChatCopyKind:ev,ChatEditingSessionActionOutcome:qn,InteractiveEditorResponseFeedbackKind:rv,DebugStackFrame:I8,DebugThread:D8,RelatedInformationType:hv,SpeechToTextStatus:fv,TextToSpeechStatus:pv,PartialAcceptTriggerKind:Un,InlineCompletionEndOfLifeReasonKind:Qo,KeywordRecognitionStatus:gv,ChatImageMimeType:ts,ChatResponseMarkdownPart:qd,ChatResponseFileTreePart:Jd,ChatResponseAnchorPart:pl,ChatResponseProgressPart:sv,ChatResponseProgressPart2:Zd,ChatResponseReferencePart:Gn,ChatResponseReferencePart2:Gn,ChatResponseCodeCitationPart:Xd,ChatResponseCodeblockUriPart:Qd,ChatResponseWarningPart:gl,ChatResponseTextEditPart:ml,ChatResponseNotebookEditPart:ef,ChatResponseMarkdownWithVulnerabilitiesPart:fl,ChatResponseCommandButtonPart:Yd,ChatResponseConfirmationPart:Gd,ChatResponseMovePart:Kd,ChatResponseExtensionsPart:nv,ChatPrepareToolInvocationPart:vl,ChatResponseReferencePartStatusKind:av,ChatRequestTurn:ov,ChatRequestTurn2:ov,ChatResponseTurn:_8,ChatLocation:ur,ChatRequestEditorData:W8,ChatRequestNotebookData:V8,ChatReferenceBinaryData:q8,ChatRequestEditedFileEventKind:iv,LanguageModelChatMessageRole:Ii,LanguageModelChatMessage:J8,LanguageModelChatMessage2:Z8,LanguageModelToolResultPart:tf,LanguageModelToolResultPart2:cv,LanguageModelTextPart:ut,LanguageModelToolCallPart:Jn,LanguageModelError:is,LanguageModelToolResult:rf,LanguageModelToolResult2:Y8,LanguageModelDataPart:es,ExtendedLanguageModelToolResult:eL,PreparedTerminalToolInvocation:KR,LanguageModelChatToolMode:uv,LanguageModelPromptTsxPart:Rr,NewSymbolName:zR,NewSymbolNameTag:N1,NewSymbolNameTriggerKind:rl,InlineEdit:tL,InlineEditTriggerKind:wl,ExcludeSettingOptions:ss,TextSearchContext2:Xv,TextSearchMatch2:Gs,AISearchKeyword:Kv,TextSearchCompleteMessageTypeNew:jf,ChatErrorLevel:lv,McpHttpServerDefinition:rL,McpStdioServerDefinition:iL,SettingsSearchResultKind:dv}}}var jp,vb=class{constructor(t,i,r,s,n,o,a){this.c=t,this.d=i,this.f=r,this.g=s,this.h=n,this.i=o,this.j=a,this.a=new Map,this.b=[]}async install(){this.k(),hi("code/extHost/willWaitForConfig");const t=await this.g.getConfigProvider();hi("code/extHost/didWaitForConfig");const i=await this.h.getExtensionPathIndex();this.register(new cB(this.c,i,this.d,t,this.j)),this.register(this.f.createInstance(wb)),this.i.remote.isRemote&&this.register(this.f.createInstance(bb,i,this.i.environment.appUriScheme))}register(t){if("nodeModuleName"in t)if(Array.isArray(t.nodeModuleName))for(const i of t.nodeModuleName)this.a.set(i,t);else this.a.set(t.nodeModuleName,t);typeof t.alternativeModuleName=="function"&&this.b.push(i=>t.alternativeModuleName(i))}};vb=__decorate([__param(2,fc),__param(3,os),__param(4,Ys),__param(5,It),__param(6,We)],vb);var wb=class{static{jp=this}static{this.a=new Map([["vscode-ripgrep","@vscode/ripgrep"],["vscode-windows-registry","@vscode/windows-registry"]])}constructor(t){if(t.environment.appRoot&&jp.a.size){const i=pn(this.c(t.environment.appRoot.fsPath)),r="[a-z0-9_.-]",s=`@${r}+\\/${r}+|${r}+`,n="node_modules|node_modules\\.asar(?:\\.unpacked)?";this.b=new RegExp(`^(${i}/${n}\\/)(${s})(.*)$`,"i")}}alternativeModuleName(t){if(!this.b)return;const i=this.b.exec(this.c(t));if(!i)return;const[,r,s,n]=i,o=jp.a.get(s);if(o!==void 0)return console.warn(`${s} as been renamed to ${o}, please update your imports`),r+o+n}c(t){return t.replace(/\\/g,"/")}};wb=jp=__decorate([__param(0,It)],wb);var cB=class{constructor(e,t,i,r,s){this.c=e,this.d=t,this.e=i,this.f=r,this.g=s,this.nodeModuleName="vscode",this.a=new qr}load(e,t){const i=this.d.findSubstr(t);if(i){let r=this.a.get(i.identifier);return r||(r=this.c(i,this.e,this.f),this.a.set(i.identifier,r)),r}if(!this.b){let r="";this.d.forEach((s,n)=>r+=`	${n} -> ${s.identifier.value}
`),this.g.warn(`Could not identify extension for 'vscode' require call from ${t}. These are the extension path mappings: 
${r}`),this.b=this.c(wR,this.e,this.f)}return this.b}},bb=class{constructor(t,i,r){this.e=t,this.f=i,this.nodeModuleName=["open","opn"],this.d=r.getProxy(J.MainThreadTelemetry);const s=r.getProxy(J.MainThreadWindow);this.c=(n,o)=>{const a=y.parse(n);return o?this.g(n,o):a.scheme==="http"||a.scheme==="https"?s.$openUri(a,n,{allowTunneling:!0}):a.scheme==="mailto"||a.scheme===this.f?s.$openUri(a,n,{}):this.g(n,o)}}load(t,i,r){const s=this.e.findSubstr(i);return s&&(this.a=s.identifier.value,this.h()),this.b=r(t),this.c}g(t,i){return this.i(),this.b(t,i)}h(){this.a&&this.d.$publicLog2("shimming.open",{extension:this.a})}i(){this.a&&this.d.$publicLog2("shimming.open.call.noForward",{extension:this.a})}};bb=__decorate([__param(2,Fe)],bb);var yb=class{constructor(t,i){this.a=t.getProxy(J.MainThreadConsole),this.b=i.consoleForward.includeStack,this.c=i.consoleForward.logNative,this.d("info","log"),this.d("log","log"),this.d("warn","warn"),this.d("debug","debug"),this.d("error","error")}d(t,i){const r=this,s=console[t];Object.defineProperty(console,t,{set:()=>{},get:()=>function(){r.e(t,i,s,arguments)}})}e(t,i,r,s){this.a.$logExtensionHostMessage({type:"__$console",severity:i,arguments:uB(s,this.b)}),this.c&&this.f(t,r,s)}};yb=__decorate([__param(0,Fe),__param(1,It)],yb);var lB=1e5;function uB(e,t){const i=[];if(e.length)for(let r=0;r<e.length;r++){let s=e[r];if(typeof s>"u")s="undefined";else if(s instanceof Error){const n=s;n.stack?s=n.stack:s=n.toString()}i.push(s)}if(t){const r=new Error().stack;r&&i.push({__$stack:r.split(`
`).slice(3).join(`
`)})}try{const r=F2(i);return r.length>lB?"Output omitted for a large object that exceeds the limits":r}catch(r){return`Output omitted for an object that cannot be inspected ('${r.toString()}')`}}var xb=class extends yb{constructor(t,i){super(t,i)}f(t,i,r){i.apply(console,r)}};xb=__decorate([__param(0,Fe),__param(1,It)],xb);var hB=class extends vb{k(){}getModule(e,t){for(const i of this.b){const r=i(e);if(r){e=r;break}}if(this.a.has(e))return this.a.get(e).load(e,t,()=>{throw new Error("CANNOT LOAD MODULE from here.")})}},dB=class extends tw{constructor(){super(...arguments),this.extensionRuntime=jd.Webworker}async wb(){this.h.createInstance(xb);const e=this.h.invokeFunction(aB);this.r=this.h.createInstance(hB,e,{mine:this.J,all:this.L}),await this.r.install(),performance.mark("code/extHost/didInitAPI"),await this.Eb()}xb(e){return e.browser}async yb(e,t,i){t=t.with({path:fB(t.path,".js")});const r=e?.identifier.value;r&&performance.mark(`code/extHost/willFetchExtensionCode/${r}`);const s=y.revive(await this.C.$asBrowserUri(t)),n=await fetch(s.toString(!0));if(r&&performance.mark(`code/extHost/didFetchExtensionCode/${r}`),n.status!==200)throw new Error(n.statusText);const o=await n.text(),a=`${t.toString(!0)}#vscode-extension`,c=`${o}
//# sourceURL=${a}`;let l;try{l=new Function("module","exports","require",c)}catch(p){throw console.error(r?`Loading code for extension ${r} failed: ${p.message}`:`Loading code failed: ${p.message}`),console.error(`${t.toString(!0)}${typeof p.line=="number"?` line ${p.line}`:""}${typeof p.column=="number"?` column ${p.column}`:""}`),console.error(p),p}e&&await this.w.initializeLocalizedMessages(e);const u={},h={exports:u},f=p=>{const m=this.r.getModule(p,t);if(m===void 0)throw new Error(`Cannot load module '${p}'`);return m};try{return i.codeLoadingStart(),r&&performance.mark(`code/extHost/willLoadExtensionCode/${r}`),l(h,u,f),h.exports!==u?h.exports:u}finally{r&&performance.mark(`code/extHost/didLoadExtensionCode/${r}`),i.codeLoadingStop()}}zb(e,t,i){throw new Error("ESM modules are not supported in the web worker extension host")}async $setRemoteEnvironment(e){}async Eb(e=5e3){if(!this.f.environment.isExtensionDevelopmentDebug)return;const t=Date.now()+e;for(;Date.now()<t&&!("__jsDebugIsReady"in globalThis);)await Vi(10)}};function fB(e,t){return Vu(e)?e:e+t}Ve(We,new Sr(Tw,[!0],!0)),Ve(U0,j0,0),Ve(Ys,dB,0),Ve(w0,b0,0),Ve(Qf,new Sr(C0,[!0],!0));var k$=self.close.bind(self);self.close=()=>console.trace("'close' has been blocked");var $$=postMessage.bind(self);self.postMessage=()=>console.trace("'postMessage' has been blocked");function C$(e){return/^(file|vscode-remote):/i.test(e)}var I$=fetch.bind(self);function pB(e){self.fetch=async function(t,i){return t instanceof Request||C$(String(t))&&(t=(await e(y.parse(String(t)))).toString(!0)),I$(t,i)},self.XMLHttpRequest=class extends XMLHttpRequest{open(t,i,r,s,n){(async()=>(C$(i.toString())&&(i=(await e(y.parse(i.toString()))).toString(!0)),super.open(t,i,r??!0,s,n)))()}}}if(self.importScripts=()=>{throw new Error("'importScripts' has been blocked")},self.addEventListener=()=>console.trace("'addEventListener' has been blocked"),self.AMDLoader=void 0,self.NLSLoaderPlugin=void 0,self.define=void 0,self.require=void 0,self.webkitRequestFileSystem=void 0,self.webkitRequestFileSystemSync=void 0,self.webkitResolveLocalFileSystemSyncURL=void 0,self.webkitResolveLocalFileSystemURL=void 0,self.Worker){const e=self.Worker;Worker=function(t,i){if(/^file:/i.test(t.toString()))t=D4.uriToBrowserUri(y.parse(t.toString())).toString(!0);else if(/^vscode-remote:/i.test(t.toString()))throw new Error("Creating workers from remote extensions is currently not supported.");const s=`(${function(c){function l(f){return typeof f=="string"||f instanceof URL?String(f).replace(/^file:\/\//i,"vscode-file://vscode-app"):f}const u=fetch.bind(self);self.fetch=function(f,p){return f instanceof Request?u(f,p):u(l(f),p)},self.XMLHttpRequest=class extends XMLHttpRequest{open(f,p,m,w,x){return super.open(f,l(p),m??!0,w,x)}};const h=importScripts.bind(self);self.importScripts=(...f)=>{h(...f.map(l))},h(c)}.toString()}('${t}'))`;i=i||{},i.name=`${name} -> ${i.name||Si(t.toString())}`;const n=new Blob([s],{type:"application/javascript"}),o=URL.createObjectURL(n);return new e(o,i)}}else self.Worker=class extends hM{constructor(e,t){super($$,e,{name:Si(e.toString()),...t})}};var gB=new class{constructor(){this.pid=void 0}exit(e){k$()}},mB=class{constructor(){const e=new MessageChannel,t=new P;let i=!1;$$(e.port2,[e.port2]),e.port1.onmessage=r=>{const{data:s}=r;if(!(s instanceof ArrayBuffer)){console.warn("UNKNOWN data received",s);return}const n=ae.wrap(new Uint8Array(s,0,s.byteLength));if(h3(n,2)){i=!0,D$("received terminate message from renderer");return}t.fire(n)},this.protocol={onMessage:t.event,send:r=>{if(!i){const s=r.buffer.buffer.slice(r.buffer.byteOffset,r.buffer.byteOffset+r.buffer.byteLength);e.port1.postMessage(s,[s])}}}}};function vB(e){return new Promise(t=>{const i=e.onMessage(r=>{i.dispose();const s=JSON.parse(r.toString());e.send(Cy(0)),t({protocol:e,initData:s})});e.send(Cy(1))})}var D$=e=>k$();function wB(e){return!!e&&typeof e=="object"&&e.type==="vscode.init"&&e.data instanceof Map}function bB(){hi("code/extHost/willConnectToRenderer");const e=new mB;return{onmessage(t){wB(t)&&vB(e.protocol).then(i=>{hi("code/extHost/didWaitForInitData");const r=new lM(i.protocol,i.initData,gB,null,t.data);pB(s=>r.asBrowserUri(s)),D$=s=>r.terminate(s)})}}}var yB=bB();self.onmessage=e=>yB.onmessage(e.data);

//# sourceMappingURL=https://main.vscode-cdn.net/sourcemaps/dfaf44141ea9deb3b4096f7cd6d24e00c147a4b1/core/vs/workbench/api/worker/extensionHostWorkerMain.js.map
